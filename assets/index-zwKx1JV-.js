const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bgb5IR2q.js","assets/UsernameForm-ATbpFmvj.js","assets/settings-ZQG_Acqp.js","assets/transition-BCoZV1NX.js","assets/feedback-BxKRKtpL.js","assets/markdownStyles-bt_gmVAE.css","assets/about-BS4eJHrf.js","assets/how-to-use-Br9TEu2p.js","assets/_username-DPxEzjPz.js","assets/datePickerStyles-DBzvZoAu.css","assets/_username.plays-C7lA5--w.js","assets/TableWithPagination-BKcqby4q.js","assets/Container-DVclZq4Q.js","assets/_username.tools.first-plays-CLYtn94I.js","assets/_username.tools-5_objLhw.js"])))=>i.map(i=>d[i]);
function iA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var W0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function m$(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Q0={exports:{}},Vc={},G0={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),sA=Symbol.for("react.portal"),oA=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),lA=Symbol.for("react.profiler"),uA=Symbol.for("react.provider"),cA=Symbol.for("react.context"),hA=Symbol.for("react.forward_ref"),dA=Symbol.for("react.suspense"),fA=Symbol.for("react.memo"),pA=Symbol.for("react.lazy"),Uy=Symbol.iterator;function mA(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var Y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X0=Object.assign,J0={};function to(t,e,n){this.props=t,this.context=e,this.refs=J0,this.updater=n||Y0}to.prototype.isReactComponent={};to.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};to.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z0(){}Z0.prototype=to.prototype;function am(t,e,n){this.props=t,this.context=e,this.refs=J0,this.updater=n||Y0}var lm=am.prototype=new Z0;lm.constructor=am;X0(lm,to.prototype);lm.isPureReactComponent=!0;var jy=Array.isArray,ew=Object.prototype.hasOwnProperty,um={current:null},tw={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ew.call(e,r)&&!tw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nl,type:t,key:s,ref:o,props:i,_owner:um.current}}function gA(t,e){return{$$typeof:nl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cm(t){return typeof t=="object"&&t!==null&&t.$$typeof===nl}function yA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var By=/\/+/g;function Qh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yA(""+t.key):e.toString(36)}function mu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nl:case sA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Qh(o,0):r,jy(i)?(n="",t!=null&&(n=t.replace(By,"$&/")+"/"),mu(i,e,n,"",function(u){return u})):i!=null&&(cm(i)&&(i=gA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(By,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",jy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Qh(s,a);o+=mu(s,e,n,l,i)}else if(l=mA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Qh(s,a++),o+=mu(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nl(t,e,n){if(t==null)return t;var r=[],i=0;return mu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},gu={transition:null},_A={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:gu,ReactCurrentOwner:um};pe.Children={map:Nl,forEach:function(t,e,n){Nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!cm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=to;pe.Fragment=oA;pe.Profiler=lA;pe.PureComponent=am;pe.StrictMode=aA;pe.Suspense=dA;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_A;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=X0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=um.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ew.call(e,l)&&!tw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:nl,type:t.type,key:i,ref:s,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:cA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uA,_context:t},t.Consumer=t};pe.createElement=nw;pe.createFactory=function(t){var e=nw.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:hA,render:t}};pe.isValidElement=cm;pe.lazy=function(t){return{$$typeof:pA,_payload:{_status:-1,_result:t},_init:vA}};pe.memo=function(t,e){return{$$typeof:fA,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=gu.transition;gu.transition={};try{t()}finally{gu.transition=e}};pe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};pe.useCallback=function(t,e){return Ft.current.useCallback(t,e)};pe.useContext=function(t){return Ft.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Ft.current.useEffect(t,e)};pe.useId=function(){return Ft.current.useId()};pe.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Ft.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};pe.useRef=function(t){return Ft.current.useRef(t)};pe.useState=function(t){return Ft.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Ft.current.useTransition()};pe.version="18.2.0";G0.exports=pe;var S=G0.exports;const st=om(S),wA=iA({__proto__:null,default:st},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA=S,TA=Symbol.for("react.element"),IA=Symbol.for("react.fragment"),SA=Object.prototype.hasOwnProperty,AA=EA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RA={key:!0,ref:!0,__self:!0,__source:!0};function rw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)SA.call(e,r)&&!RA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:TA,type:t,key:s,ref:o,props:i,_owner:AA.current}}Vc.Fragment=IA;Vc.jsx=rw;Vc.jsxs=rw;Q0.exports=Vc;var F=Q0.exports,Yd={},iw={exports:{}},rn={},sw={exports:{}},ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,b){var j=C.length;C.push(b);e:for(;0<j;){var re=j-1>>>1,he=C[re];if(0<i(he,b))C[re]=b,C[j]=he,j=re;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var b=C[0],j=C.pop();if(j!==b){C[0]=j;e:for(var re=0,he=C.length,Ve=he>>>1;re<Ve;){var de=2*(re+1)-1,yt=C[de],et=de+1,on=C[et];if(0>i(yt,j))et<he&&0>i(on,yt)?(C[re]=on,C[et]=j,re=et):(C[re]=yt,C[de]=j,re=de);else if(et<he&&0>i(on,j))C[re]=on,C[et]=j,re=et;else break e}}return b}function i(C,b){var j=C.sortIndex-b.sortIndex;return j!==0?j:C.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(C){for(var b=n(u);b!==null;){if(b.callback===null)r(u);else if(b.startTime<=C)r(u),b.sortIndex=b.expirationTime,e(l,b);else break;b=n(u)}}function g(C){if(v=!1,_(C),!y)if(n(l)!==null)y=!0,B(E);else{var b=n(u);b!==null&&O(g,b.startTime-C)}}function E(C,b){y=!1,v&&(v=!1,m(k),k=-1),p=!0;var j=d;try{for(_(b),h=n(l);h!==null&&(!(h.expirationTime>b)||C&&!J());){var re=h.callback;if(typeof re=="function"){h.callback=null,d=h.priorityLevel;var he=re(h.expirationTime<=b);b=t.unstable_now(),typeof he=="function"?h.callback=he:h===n(l)&&r(l),_(b)}else r(l);h=n(l)}if(h!==null)var Ve=!0;else{var de=n(u);de!==null&&O(g,de.startTime-b),Ve=!1}return Ve}finally{h=null,d=j,p=!1}}var T=!1,I=null,k=-1,P=5,D=-1;function J(){return!(t.unstable_now()-D<P)}function te(){if(I!==null){var C=t.unstable_now();D=C;var b=!0;try{b=I(!0,C)}finally{b?z():(T=!1,I=null)}}else T=!1}var z;if(typeof f=="function")z=function(){f(te)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,L=M.port2;M.port1.onmessage=te,z=function(){L.postMessage(null)}}else z=function(){w(te,0)};function B(C){I=C,T||(T=!0,z())}function O(C,b){k=w(function(){C(t.unstable_now())},b)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,B(E))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(d){case 1:case 2:case 3:var b=3;break;default:b=d}var j=d;d=b;try{return C()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,b){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var j=d;d=C;try{return b()}finally{d=j}},t.unstable_scheduleCallback=function(C,b,j){var re=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?re+j:re):j=re,C){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=j+he,C={id:c++,callback:b,priorityLevel:C,startTime:j,expirationTime:he,sortIndex:-1},j>re?(C.sortIndex=j,e(u,C),n(l)===null&&C===n(u)&&(v?(m(k),k=-1):v=!0,O(g,j-re))):(C.sortIndex=he,e(l,C),y||p||(y=!0,B(E))),C},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(C){var b=d;return function(){var j=d;d=b;try{return C.apply(this,arguments)}finally{d=j}}}})(ow);sw.exports=ow;var PA=sw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=S,en=PA;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lw=new Set,ha={};function ji(t,e){Vs(t,e),Vs(t+"Capture",e)}function Vs(t,e){for(ha[t]=e,t=0;t<e.length;t++)lw.add(e[t])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xd=Object.prototype.hasOwnProperty,CA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},Ky={};function xA(t){return Xd.call(Ky,t)?!0:Xd.call(zy,t)?!1:CA.test(t)?Ky[t]=!0:(zy[t]=!0,!1)}function kA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DA(t,e,n,r){if(e===null||typeof e>"u"||kA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var hm=/[\-:]([a-z])/g;function dm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hm,dm);gt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hm,dm);gt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hm,dm);gt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function fm(t,e,n,r){var i=gt.hasOwnProperty(e)?gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DA(e,n,i,r)&&(n=null),r||i===null?xA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var vr=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bl=Symbol.for("react.element"),is=Symbol.for("react.portal"),ss=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),uw=Symbol.for("react.provider"),cw=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),Zd=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),hw=Symbol.for("react.offscreen"),qy=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=qy&&t[qy]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Gh;function Vo(t){if(Gh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gh=e&&e[1]||""}return`
`+Gh+t}var Yh=!1;function Xh(t,e){if(!t||Yh)return"";Yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Yh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vo(t):""}function NA(t){switch(t.tag){case 5:return Vo(t.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return t=Xh(t.type,!1),t;case 11:return t=Xh(t.type.render,!1),t;case 1:return t=Xh(t.type,!0),t;default:return""}}function tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ss:return"Fragment";case is:return"Portal";case Jd:return"Profiler";case pm:return"StrictMode";case Zd:return"Suspense";case ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cw:return(t.displayName||"Context")+".Consumer";case uw:return(t._context.displayName||"Context")+".Provider";case mm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gm:return e=t.displayName||null,e!==null?e:tf(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return tf(t(e))}catch{}}return null}function bA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(e);case 8:return e===pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MA(t){var e=dw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=MA(t))}function fw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pw(t,e){e=e.checked,e!=null&&fm(t,"checked",e,!1)}function rf(t,e){pw(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sf(t,e.type,n):e.hasOwnProperty("defaultValue")&&sf(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sf(t,e,n){(e!=="number"||Uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Oo=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function of(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Oo(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function mw(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vl,yw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VA=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(t){VA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ho[e]=Ho[t]})});function vw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ho.hasOwnProperty(t)&&Ho[t]?(""+e).trim():e+"px"}function _w(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OA=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(t,e){if(e){if(OA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function uf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hf=null,ws=null,Es=null;function Yy(t){if(t=sl(t)){if(typeof hf!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Uc(e),hf(t.stateNode,t.type,e))}}function ww(t){ws?Es?Es.push(t):Es=[t]:ws=t}function Ew(){if(ws){var t=ws,e=Es;if(Es=ws=null,Yy(t),e)for(t=0;t<e.length;t++)Yy(e[t])}}function Tw(t,e){return t(e)}function Iw(){}var Jh=!1;function Sw(t,e,n){if(Jh)return t(e,n);Jh=!0;try{return Tw(t,e,n)}finally{Jh=!1,(ws!==null||Es!==null)&&(Iw(),Ew())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var r=Uc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var df=!1;if(ur)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){df=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{df=!1}function $A(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Wo=!1,ju=null,Bu=!1,ff=null,LA={onError:function(t){Wo=!0,ju=t}};function FA(t,e,n,r,i,s,o,a,l){Wo=!1,ju=null,$A.apply(LA,arguments)}function UA(t,e,n,r,i,s,o,a,l){if(FA.apply(this,arguments),Wo){if(Wo){var u=ju;Wo=!1,ju=null}else throw Error(V(198));Bu||(Bu=!0,ff=u)}}function Bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Aw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xy(t){if(Bi(t)!==t)throw Error(V(188))}function jA(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xy(i),t;if(s===r)return Xy(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function Rw(t){return t=jA(t),t!==null?Pw(t):null}function Pw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Pw(t);if(e!==null)return e;t=t.sibling}return null}var Cw=en.unstable_scheduleCallback,Jy=en.unstable_cancelCallback,BA=en.unstable_shouldYield,zA=en.unstable_requestPaint,Be=en.unstable_now,KA=en.unstable_getCurrentPriorityLevel,vm=en.unstable_ImmediatePriority,xw=en.unstable_UserBlockingPriority,zu=en.unstable_NormalPriority,qA=en.unstable_LowPriority,kw=en.unstable_IdlePriority,Oc=null,Un=null;function HA(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Oc,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:GA,WA=Math.log,QA=Math.LN2;function GA(t){return t>>>=0,t===0?32:31-(WA(t)/QA|0)|0}var Ol=64,$l=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$o(a):(s&=o,s!==0&&(r=$o(s)))}else o=n&~i,o!==0?r=$o(o):s!==0&&(r=$o(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-An(e),i=1<<n,r|=t[n],e&=~i;return r}function YA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-An(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=YA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dw(){var t=Ol;return Ol<<=1,!(Ol&4194240)&&(Ol=64),t}function Zh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=n}function JA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-An(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _m(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-An(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var we=0;function Nw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bw,wm,Mw,Vw,Ow,mf=!1,Ll=[],Nr=null,br=null,Mr=null,pa=new Map,ma=new Map,Rr=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function To(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sl(e),e!==null&&wm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eR(t,e,n,r,i){switch(e){case"focusin":return Nr=To(Nr,t,e,n,r,i),!0;case"dragenter":return br=To(br,t,e,n,r,i),!0;case"mouseover":return Mr=To(Mr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return pa.set(s,To(pa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ma.set(s,To(ma.get(s)||null,t,e,n,r,i)),!0}return!1}function $w(t){var e=pi(t.target);if(e!==null){var n=Bi(e);if(n!==null){if(e=n.tag,e===13){if(e=Aw(n),e!==null){t.blockedOn=e,Ow(t.priority,function(){Mw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cf=r,n.target.dispatchEvent(r),cf=null}else return e=sl(n),e!==null&&wm(e),t.blockedOn=n,!1;e.shift()}return!0}function ev(t,e,n){yu(t)&&n.delete(e)}function tR(){mf=!1,Nr!==null&&yu(Nr)&&(Nr=null),br!==null&&yu(br)&&(br=null),Mr!==null&&yu(Mr)&&(Mr=null),pa.forEach(ev),ma.forEach(ev)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,mf||(mf=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,tR)))}function ga(t){function e(i){return Io(i,t)}if(0<Ll.length){Io(Ll[0],t);for(var n=1;n<Ll.length;n++){var r=Ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nr!==null&&Io(Nr,t),br!==null&&Io(br,t),Mr!==null&&Io(Mr,t),pa.forEach(e),ma.forEach(e),n=0;n<Rr.length;n++)r=Rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)$w(n),n.blockedOn===null&&Rr.shift()}var Ts=vr.ReactCurrentBatchConfig,qu=!0;function nR(t,e,n,r){var i=we,s=Ts.transition;Ts.transition=null;try{we=1,Em(t,e,n,r)}finally{we=i,Ts.transition=s}}function rR(t,e,n,r){var i=we,s=Ts.transition;Ts.transition=null;try{we=4,Em(t,e,n,r)}finally{we=i,Ts.transition=s}}function Em(t,e,n,r){if(qu){var i=gf(t,e,n,r);if(i===null)ud(t,e,r,Hu,n),Zy(t,r);else if(eR(i,t,e,n,r))r.stopPropagation();else if(Zy(t,r),e&4&&-1<ZA.indexOf(t)){for(;i!==null;){var s=sl(i);if(s!==null&&bw(s),s=gf(t,e,n,r),s===null&&ud(t,e,r,Hu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ud(t,e,r,null,n)}}var Hu=null;function gf(t,e,n,r){if(Hu=null,t=ym(r),t=pi(t),t!==null)if(e=Bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Aw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hu=t,null}function Lw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KA()){case vm:return 1;case xw:return 4;case zu:case qA:return 16;case kw:return 536870912;default:return 16}default:return 16}}var xr=null,Tm=null,vu=null;function Fw(){if(vu)return vu;var t,e=Tm,n=e.length,r,i="value"in xr?xr.value:xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vu=i.slice(t,1<r?1-r:void 0)}function _u(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fl(){return!0}function tv(){return!1}function sn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fl:tv,this.isPropagationStopped=tv,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Im=sn(no),il=Le({},no,{view:0,detail:0}),iR=sn(il),ed,td,So,$c=Le({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==So&&(So&&t.type==="mousemove"?(ed=t.screenX-So.screenX,td=t.screenY-So.screenY):td=ed=0,So=t),ed)},movementY:function(t){return"movementY"in t?t.movementY:td}}),nv=sn($c),sR=Le({},$c,{dataTransfer:0}),oR=sn(sR),aR=Le({},il,{relatedTarget:0}),nd=sn(aR),lR=Le({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),uR=sn(lR),cR=Le({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hR=sn(cR),dR=Le({},no,{data:0}),rv=sn(dR),fR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mR[t])?!!e[t]:!1}function Sm(){return gR}var yR=Le({},il,{key:function(t){if(t.key){var e=fR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_u(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(t){return t.type==="keypress"?_u(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_u(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vR=sn(yR),_R=Le({},$c,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iv=sn(_R),wR=Le({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),ER=sn(wR),TR=Le({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),IR=sn(TR),SR=Le({},$c,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AR=sn(SR),RR=[9,13,27,32],Am=ur&&"CompositionEvent"in window,Qo=null;ur&&"documentMode"in document&&(Qo=document.documentMode);var PR=ur&&"TextEvent"in window&&!Qo,Uw=ur&&(!Am||Qo&&8<Qo&&11>=Qo),sv=" ",ov=!1;function jw(t,e){switch(t){case"keyup":return RR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function CR(t,e){switch(t){case"compositionend":return Bw(e);case"keypress":return e.which!==32?null:(ov=!0,sv);case"textInput":return t=e.data,t===sv&&ov?null:t;default:return null}}function xR(t,e){if(os)return t==="compositionend"||!Am&&jw(t,e)?(t=Fw(),vu=Tm=xr=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uw&&e.locale!=="ko"?null:e.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kR[t.type]:e==="textarea"}function zw(t,e,n,r){ww(r),e=Wu(e,"onChange"),0<e.length&&(n=new Im("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Go=null,ya=null;function DR(t){e1(t,0)}function Lc(t){var e=us(t);if(fw(e))return t}function NR(t,e){if(t==="change")return e}var Kw=!1;if(ur){var rd;if(ur){var id="oninput"in document;if(!id){var lv=document.createElement("div");lv.setAttribute("oninput","return;"),id=typeof lv.oninput=="function"}rd=id}else rd=!1;Kw=rd&&(!document.documentMode||9<document.documentMode)}function uv(){Go&&(Go.detachEvent("onpropertychange",qw),ya=Go=null)}function qw(t){if(t.propertyName==="value"&&Lc(ya)){var e=[];zw(e,ya,t,ym(t)),Sw(DR,e)}}function bR(t,e,n){t==="focusin"?(uv(),Go=e,ya=n,Go.attachEvent("onpropertychange",qw)):t==="focusout"&&uv()}function MR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(ya)}function VR(t,e){if(t==="click")return Lc(e)}function OR(t,e){if(t==="input"||t==="change")return Lc(e)}function $R(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:$R;function va(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Xd.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function cv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hv(t,e){var n=cv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cv(n)}}function Hw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ww(){for(var t=window,e=Uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uu(t.document)}return e}function Rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LR(t){var e=Ww(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hw(n.ownerDocument.documentElement,n)){if(r!==null&&Rm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hv(n,s);var o=hv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FR=ur&&"documentMode"in document&&11>=document.documentMode,as=null,yf=null,Yo=null,vf=!1;function dv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vf||as==null||as!==Uu(r)||(r=as,"selectionStart"in r&&Rm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&va(Yo,r)||(Yo=r,r=Wu(yf,"onSelect"),0<r.length&&(e=new Im("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=as)))}function Ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ls={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},sd={},Qw={};ur&&(Qw=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function Fc(t){if(sd[t])return sd[t];if(!ls[t])return t;var e=ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qw)return sd[t]=e[n];return t}var Gw=Fc("animationend"),Yw=Fc("animationiteration"),Xw=Fc("animationstart"),Jw=Fc("transitionend"),Zw=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){Zw.set(t,e),ji(e,[t])}for(var od=0;od<fv.length;od++){var ad=fv[od],UR=ad.toLowerCase(),jR=ad[0].toUpperCase()+ad.slice(1);ni(UR,"on"+jR)}ni(Gw,"onAnimationEnd");ni(Yw,"onAnimationIteration");ni(Xw,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(Jw,"onTransitionEnd");Vs("onMouseEnter",["mouseout","mouseover"]);Vs("onMouseLeave",["mouseout","mouseover"]);Vs("onPointerEnter",["pointerout","pointerover"]);Vs("onPointerLeave",["pointerout","pointerover"]);ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function pv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UA(r,e,void 0,t),t.currentTarget=null}function e1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;pv(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;pv(i,a,u),s=l}}}if(Bu)throw t=ff,Bu=!1,ff=null,t}function Ae(t,e){var n=e[If];n===void 0&&(n=e[If]=new Set);var r=t+"__bubble";n.has(r)||(t1(e,t,2,!1),n.add(r))}function ld(t,e,n){var r=0;e&&(r|=4),t1(n,t,r,e)}var jl="_reactListening"+Math.random().toString(36).slice(2);function _a(t){if(!t[jl]){t[jl]=!0,lw.forEach(function(n){n!=="selectionchange"&&(BR.has(n)||ld(n,!1,t),ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jl]||(e[jl]=!0,ld("selectionchange",!1,e))}}function t1(t,e,n,r){switch(Lw(e)){case 1:var i=nR;break;case 4:i=rR;break;default:i=Em}n=i.bind(null,e,n,t),i=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ud(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Sw(function(){var u=s,c=ym(n),h=[];e:{var d=Zw.get(t);if(d!==void 0){var p=Im,y=t;switch(t){case"keypress":if(_u(n)===0)break e;case"keydown":case"keyup":p=vR;break;case"focusin":y="focus",p=nd;break;case"focusout":y="blur",p=nd;break;case"beforeblur":case"afterblur":p=nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=nv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=oR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=ER;break;case Gw:case Yw:case Xw:p=uR;break;case Jw:p=IR;break;case"scroll":p=iR;break;case"wheel":p=AR;break;case"copy":case"cut":case"paste":p=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=iv}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var f=u,_;f!==null;){_=f;var g=_.stateNode;if(_.tag===5&&g!==null&&(_=g,m!==null&&(g=fa(f,m),g!=null&&v.push(wa(f,g,_)))),w)break;f=f.return}0<v.length&&(d=new p(d,y,null,n,c),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",d&&n!==cf&&(y=n.relatedTarget||n.fromElement)&&(pi(y)||y[cr]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?pi(y):null,y!==null&&(w=Bi(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(v=nv,g="onMouseLeave",m="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(v=iv,g="onPointerLeave",m="onPointerEnter",f="pointer"),w=p==null?d:us(p),_=y==null?d:us(y),d=new v(g,f+"leave",p,n,c),d.target=w,d.relatedTarget=_,g=null,pi(c)===u&&(v=new v(m,f+"enter",y,n,c),v.target=_,v.relatedTarget=w,g=v),w=g,p&&y)t:{for(v=p,m=y,f=0,_=v;_;_=Yi(_))f++;for(_=0,g=m;g;g=Yi(g))_++;for(;0<f-_;)v=Yi(v),f--;for(;0<_-f;)m=Yi(m),_--;for(;f--;){if(v===m||m!==null&&v===m.alternate)break t;v=Yi(v),m=Yi(m)}v=null}else v=null;p!==null&&mv(h,d,p,v,!1),y!==null&&w!==null&&mv(h,w,y,v,!0)}}e:{if(d=u?us(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var E=NR;else if(av(d))if(Kw)E=OR;else{E=MR;var T=bR}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=VR);if(E&&(E=E(t,u))){zw(h,E,n,c);break e}T&&T(t,d,u),t==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&sf(d,"number",d.value)}switch(T=u?us(u):window,t){case"focusin":(av(T)||T.contentEditable==="true")&&(as=T,yf=u,Yo=null);break;case"focusout":Yo=yf=as=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,dv(h,n,c);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":dv(h,n,c)}var I;if(Am)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else os?jw(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Uw&&n.locale!=="ko"&&(os||k!=="onCompositionStart"?k==="onCompositionEnd"&&os&&(I=Fw()):(xr=c,Tm="value"in xr?xr.value:xr.textContent,os=!0)),T=Wu(u,k),0<T.length&&(k=new rv(k,t,null,n,c),h.push({event:k,listeners:T}),I?k.data=I:(I=Bw(n),I!==null&&(k.data=I)))),(I=PR?CR(t,n):xR(t,n))&&(u=Wu(u,"onBeforeInput"),0<u.length&&(c=new rv("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}e1(h,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fa(t,n),s!=null&&r.unshift(wa(t,s,i)),s=fa(t,e),s!=null&&r.push(wa(t,s,i))),t=t.return}return r}function Yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=fa(n,s),l!=null&&o.unshift(wa(n,l,a))):i||(l=fa(n,s),l!=null&&o.push(wa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zR=/\r\n?/g,KR=/\u0000|\uFFFD/g;function gv(t){return(typeof t=="string"?t:""+t).replace(zR,`
`).replace(KR,"")}function Bl(t,e,n){if(e=gv(e),gv(t)!==e&&n)throw Error(V(425))}function Qu(){}var _f=null,wf=null;function Ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tf=typeof setTimeout=="function"?setTimeout:void 0,qR=typeof clearTimeout=="function"?clearTimeout:void 0,yv=typeof Promise=="function"?Promise:void 0,HR=typeof queueMicrotask=="function"?queueMicrotask:typeof yv<"u"?function(t){return yv.resolve(null).then(t).catch(WR)}:Tf;function WR(t){setTimeout(function(){throw t})}function cd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ga(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ro=Math.random().toString(36).slice(2),On="__reactFiber$"+ro,Ea="__reactProps$"+ro,cr="__reactContainer$"+ro,If="__reactEvents$"+ro,QR="__reactListeners$"+ro,GR="__reactHandles$"+ro;function pi(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vv(t);t!==null;){if(n=t[On])return n;t=vv(t)}return e}t=n,n=t.parentNode}return null}function sl(t){return t=t[On]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Uc(t){return t[Ea]||null}var Sf=[],cs=-1;function ri(t){return{current:t}}function ke(t){0>cs||(t.current=Sf[cs],Sf[cs]=null,cs--)}function Se(t,e){cs++,Sf[cs]=t.current,t.current=e}var qr={},Nt=ri(qr),qt=ri(!1),xi=qr;function Os(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Gu(){ke(qt),ke(Nt)}function _v(t,e,n){if(Nt.current!==qr)throw Error(V(168));Se(Nt,e),Se(qt,n)}function n1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,bA(t)||"Unknown",i));return Le({},n,r)}function Yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,xi=Nt.current,Se(Nt,t),Se(qt,qt.current),!0}function wv(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=n1(t,e,xi),r.__reactInternalMemoizedMergedChildContext=t,ke(qt),ke(Nt),Se(Nt,t)):ke(qt),Se(qt,n)}var Xn=null,jc=!1,hd=!1;function r1(t){Xn===null?Xn=[t]:Xn.push(t)}function YR(t){jc=!0,r1(t)}function ii(){if(!hd&&Xn!==null){hd=!0;var t=0,e=we;try{var n=Xn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,jc=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),Cw(vm,ii),i}finally{we=e,hd=!1}}return null}var hs=[],ds=0,Xu=null,Ju=0,un=[],cn=0,ki=null,er=1,tr="";function hi(t,e){hs[ds++]=Ju,hs[ds++]=Xu,Xu=t,Ju=e}function i1(t,e,n){un[cn++]=er,un[cn++]=tr,un[cn++]=ki,ki=t;var r=er;t=tr;var i=32-An(r)-1;r&=~(1<<i),n+=1;var s=32-An(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,er=1<<32-An(e)+i|n<<i|r,tr=s+t}else er=1<<s|n<<i|r,tr=t}function Pm(t){t.return!==null&&(hi(t,1),i1(t,1,0))}function Cm(t){for(;t===Xu;)Xu=hs[--ds],hs[ds]=null,Ju=hs[--ds],hs[ds]=null;for(;t===ki;)ki=un[--cn],un[cn]=null,tr=un[--cn],un[cn]=null,er=un[--cn],un[cn]=null}var Zt=null,Jt=null,Me=!1,Tn=null;function s1(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ev(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ki!==null?{id:er,overflow:tr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Jt=null,!0):!1;default:return!1}}function Af(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rf(t){if(Me){var e=Jt;if(e){var n=e;if(!Ev(t,e)){if(Af(t))throw Error(V(418));e=Vr(n.nextSibling);var r=Zt;e&&Ev(t,e)?s1(r,n):(t.flags=t.flags&-4097|2,Me=!1,Zt=t)}}else{if(Af(t))throw Error(V(418));t.flags=t.flags&-4097|2,Me=!1,Zt=t}}}function Tv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function zl(t){if(t!==Zt)return!1;if(!Me)return Tv(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ef(t.type,t.memoizedProps)),e&&(e=Jt)){if(Af(t))throw o1(),Error(V(418));for(;e;)s1(t,e),e=Vr(e.nextSibling)}if(Tv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Zt?Vr(t.stateNode.nextSibling):null;return!0}function o1(){for(var t=Jt;t;)t=Vr(t.nextSibling)}function $s(){Jt=Zt=null,Me=!1}function xm(t){Tn===null?Tn=[t]:Tn.push(t)}var XR=vr.ReactCurrentBatchConfig;function _n(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Zu=ri(null),ec=null,fs=null,km=null;function Dm(){km=fs=ec=null}function Nm(t){var e=Zu.current;ke(Zu),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Is(t,e){ec=t,km=fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function mn(t){var e=t._currentValue;if(km!==t)if(t={context:t,memoizedValue:e,next:null},fs===null){if(ec===null)throw Error(V(308));fs=t,ec.dependencies={lanes:0,firstContext:t}}else fs=fs.next=t;return e}var mi=null;function bm(t){mi===null?mi=[t]:mi.push(t)}function a1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,bm(e)):(n.next=i.next,i.next=n),e.interleaved=n,hr(t,r)}function hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sr=!1;function Mm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hr(t,n)}return i=r.interleaved,i===null?(e.next=e,bm(r)):(e.next=i.next,i.next=e),r.interleaved=e,hr(t,n)}function wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_m(t,n)}}function Iv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tc(t,e,n,r){var i=t.updateQueue;Sr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,p=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(d=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){h=y.call(p,h,d);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,d=typeof y=="function"?y.call(p,h,d):y,d==null)break e;h=Le({},h,d);break e;case 2:Sr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ni|=o,t.lanes=o,t.memoizedState=h}}function Sv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var u1=new aw.Component().refs;function Cf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bc={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),i=Lr(t),s=ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(Rn(e,t,i,r),wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),i=Lr(t),s=ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(Rn(e,t,i,r),wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=Lr(t),i=ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(Rn(e,t,r,n),wu(e,t,r))}};function Av(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!va(n,r)||!va(i,s):!0}function c1(t,e,n){var r=!1,i=qr,s=e.contextType;return typeof s=="object"&&s!==null?s=mn(s):(i=Ht(e)?xi:Nt.current,r=e.contextTypes,s=(r=r!=null)?Os(t,i):qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Rv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bc.enqueueReplaceState(e,e.state,null)}function xf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=u1,Mm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mn(s):(s=Ht(e)?xi:Nt.current,i.context=Os(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bc.enqueueReplaceState(i,i.state,null),tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===u1&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function Kl(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pv(t){var e=t._init;return e(t._payload)}function h1(t){function e(m,f){if(t){var _=m.deletions;_===null?(m.deletions=[f],m.flags|=16):_.push(f)}}function n(m,f){if(!t)return null;for(;f!==null;)e(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function i(m,f){return m=Fr(m,f),m.index=0,m.sibling=null,m}function s(m,f,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<f?(m.flags|=2,f):_):(m.flags|=2,f)):(m.flags|=1048576,f)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,f,_,g){return f===null||f.tag!==6?(f=vd(_,m.mode,g),f.return=m,f):(f=i(f,_),f.return=m,f)}function l(m,f,_,g){var E=_.type;return E===ss?c(m,f,_.props.children,g,_.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ir&&Pv(E)===f.type)?(g=i(f,_.props),g.ref=Ao(m,f,_),g.return=m,g):(g=Ru(_.type,_.key,_.props,null,m.mode,g),g.ref=Ao(m,f,_),g.return=m,g)}function u(m,f,_,g){return f===null||f.tag!==4||f.stateNode.containerInfo!==_.containerInfo||f.stateNode.implementation!==_.implementation?(f=_d(_,m.mode,g),f.return=m,f):(f=i(f,_.children||[]),f.return=m,f)}function c(m,f,_,g,E){return f===null||f.tag!==7?(f=Ii(_,m.mode,g,E),f.return=m,f):(f=i(f,_),f.return=m,f)}function h(m,f,_){if(typeof f=="string"&&f!==""||typeof f=="number")return f=vd(""+f,m.mode,_),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case bl:return _=Ru(f.type,f.key,f.props,null,m.mode,_),_.ref=Ao(m,null,f),_.return=m,_;case is:return f=_d(f,m.mode,_),f.return=m,f;case Ir:var g=f._init;return h(m,g(f._payload),_)}if(Oo(f)||wo(f))return f=Ii(f,m.mode,_,null),f.return=m,f;Kl(m,f)}return null}function d(m,f,_,g){var E=f!==null?f.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(m,f,""+_,g);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bl:return _.key===E?l(m,f,_,g):null;case is:return _.key===E?u(m,f,_,g):null;case Ir:return E=_._init,d(m,f,E(_._payload),g)}if(Oo(_)||wo(_))return E!==null?null:c(m,f,_,g,null);Kl(m,_)}return null}function p(m,f,_,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return m=m.get(_)||null,a(f,m,""+g,E);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bl:return m=m.get(g.key===null?_:g.key)||null,l(f,m,g,E);case is:return m=m.get(g.key===null?_:g.key)||null,u(f,m,g,E);case Ir:var T=g._init;return p(m,f,_,T(g._payload),E)}if(Oo(g)||wo(g))return m=m.get(_)||null,c(f,m,g,E,null);Kl(f,g)}return null}function y(m,f,_,g){for(var E=null,T=null,I=f,k=f=0,P=null;I!==null&&k<_.length;k++){I.index>k?(P=I,I=null):P=I.sibling;var D=d(m,I,_[k],g);if(D===null){I===null&&(I=P);break}t&&I&&D.alternate===null&&e(m,I),f=s(D,f,k),T===null?E=D:T.sibling=D,T=D,I=P}if(k===_.length)return n(m,I),Me&&hi(m,k),E;if(I===null){for(;k<_.length;k++)I=h(m,_[k],g),I!==null&&(f=s(I,f,k),T===null?E=I:T.sibling=I,T=I);return Me&&hi(m,k),E}for(I=r(m,I);k<_.length;k++)P=p(I,m,k,_[k],g),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?k:P.key),f=s(P,f,k),T===null?E=P:T.sibling=P,T=P);return t&&I.forEach(function(J){return e(m,J)}),Me&&hi(m,k),E}function v(m,f,_,g){var E=wo(_);if(typeof E!="function")throw Error(V(150));if(_=E.call(_),_==null)throw Error(V(151));for(var T=E=null,I=f,k=f=0,P=null,D=_.next();I!==null&&!D.done;k++,D=_.next()){I.index>k?(P=I,I=null):P=I.sibling;var J=d(m,I,D.value,g);if(J===null){I===null&&(I=P);break}t&&I&&J.alternate===null&&e(m,I),f=s(J,f,k),T===null?E=J:T.sibling=J,T=J,I=P}if(D.done)return n(m,I),Me&&hi(m,k),E;if(I===null){for(;!D.done;k++,D=_.next())D=h(m,D.value,g),D!==null&&(f=s(D,f,k),T===null?E=D:T.sibling=D,T=D);return Me&&hi(m,k),E}for(I=r(m,I);!D.done;k++,D=_.next())D=p(I,m,k,D.value,g),D!==null&&(t&&D.alternate!==null&&I.delete(D.key===null?k:D.key),f=s(D,f,k),T===null?E=D:T.sibling=D,T=D);return t&&I.forEach(function(te){return e(m,te)}),Me&&hi(m,k),E}function w(m,f,_,g){if(typeof _=="object"&&_!==null&&_.type===ss&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case bl:e:{for(var E=_.key,T=f;T!==null;){if(T.key===E){if(E=_.type,E===ss){if(T.tag===7){n(m,T.sibling),f=i(T,_.props.children),f.return=m,m=f;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ir&&Pv(E)===T.type){n(m,T.sibling),f=i(T,_.props),f.ref=Ao(m,T,_),f.return=m,m=f;break e}n(m,T);break}else e(m,T);T=T.sibling}_.type===ss?(f=Ii(_.props.children,m.mode,g,_.key),f.return=m,m=f):(g=Ru(_.type,_.key,_.props,null,m.mode,g),g.ref=Ao(m,f,_),g.return=m,m=g)}return o(m);case is:e:{for(T=_.key;f!==null;){if(f.key===T)if(f.tag===4&&f.stateNode.containerInfo===_.containerInfo&&f.stateNode.implementation===_.implementation){n(m,f.sibling),f=i(f,_.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else e(m,f);f=f.sibling}f=_d(_,m.mode,g),f.return=m,m=f}return o(m);case Ir:return T=_._init,w(m,f,T(_._payload),g)}if(Oo(_))return y(m,f,_,g);if(wo(_))return v(m,f,_,g);Kl(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,f!==null&&f.tag===6?(n(m,f.sibling),f=i(f,_),f.return=m,m=f):(n(m,f),f=vd(_,m.mode,g),f.return=m,m=f),o(m)):n(m,f)}return w}var Ls=h1(!0),d1=h1(!1),ol={},jn=ri(ol),Ta=ri(ol),Ia=ri(ol);function gi(t){if(t===ol)throw Error(V(174));return t}function Vm(t,e){switch(Se(Ia,e),Se(Ta,t),Se(jn,ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:af(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=af(e,t)}ke(jn),Se(jn,e)}function Fs(){ke(jn),ke(Ta),ke(Ia)}function f1(t){gi(Ia.current);var e=gi(jn.current),n=af(e,t.type);e!==n&&(Se(Ta,t),Se(jn,n))}function Om(t){Ta.current===t&&(ke(jn),ke(Ta))}var Oe=ri(0);function nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dd=[];function $m(){for(var t=0;t<dd.length;t++)dd[t]._workInProgressVersionPrimary=null;dd.length=0}var Eu=vr.ReactCurrentDispatcher,fd=vr.ReactCurrentBatchConfig,Di=0,$e=null,Ye=null,rt=null,rc=!1,Xo=!1,Sa=0,JR=0;function wt(){throw Error(V(321))}function Lm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Fm(t,e,n,r,i,s){if(Di=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eu.current=t===null||t.memoizedState===null?nP:rP,t=n(r,i),Xo){s=0;do{if(Xo=!1,Sa=0,25<=s)throw Error(V(301));s+=1,rt=Ye=null,e.updateQueue=null,Eu.current=iP,t=n(r,i)}while(Xo)}if(Eu.current=ic,e=Ye!==null&&Ye.next!==null,Di=0,rt=Ye=$e=null,rc=!1,e)throw Error(V(300));return t}function Um(){var t=Sa!==0;return Sa=0,t}function Mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?$e.memoizedState=rt=t:rt=rt.next=t,rt}function gn(){if(Ye===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=rt===null?$e.memoizedState:rt.next;if(e!==null)rt=e,Ye=t;else{if(t===null)throw Error(V(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?$e.memoizedState=rt=t:rt=rt.next=t}return rt}function Aa(t,e){return typeof e=="function"?e(t):e}function pd(t){var e=gn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Di&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,$e.lanes|=c,Ni|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Cn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$e.lanes|=s,Ni|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=gn(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function p1(){}function m1(t,e){var n=$e,r=gn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Kt=!0),r=r.queue,jm(v1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Ra(9,y1.bind(null,n,r,i,e),void 0,null),it===null)throw Error(V(349));Di&30||g1(n,e,i)}return i}function g1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function y1(t,e,n,r){e.value=n,e.getSnapshot=r,_1(e)&&w1(t)}function v1(t,e,n){return n(function(){_1(e)&&w1(t)})}function _1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function w1(t){var e=hr(t,1);e!==null&&Rn(e,t,1,-1)}function Cv(t){var e=Mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:t},e.queue=t,t=t.dispatch=tP.bind(null,$e,t),[e.memoizedState,t]}function Ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function E1(){return gn().memoizedState}function Tu(t,e,n,r){var i=Mn();$e.flags|=t,i.memoizedState=Ra(1|e,n,void 0,r===void 0?null:r)}function zc(t,e,n,r){var i=gn();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var o=Ye.memoizedState;if(s=o.destroy,r!==null&&Lm(r,o.deps)){i.memoizedState=Ra(e,n,s,r);return}}$e.flags|=t,i.memoizedState=Ra(1|e,n,s,r)}function xv(t,e){return Tu(8390656,8,t,e)}function jm(t,e){return zc(2048,8,t,e)}function T1(t,e){return zc(4,2,t,e)}function I1(t,e){return zc(4,4,t,e)}function S1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function A1(t,e,n){return n=n!=null?n.concat([t]):null,zc(4,4,S1.bind(null,e,t),n)}function Bm(){}function R1(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function P1(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Lm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function C1(t,e,n){return Di&21?(Cn(n,e)||(n=Dw(),$e.lanes|=n,Ni|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function ZR(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=fd.transition;fd.transition={};try{t(!1),e()}finally{we=n,fd.transition=r}}function x1(){return gn().memoizedState}function eP(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k1(t))D1(e,n);else if(n=a1(t,e,n,r),n!==null){var i=$t();Rn(n,t,r,i),N1(n,e,r)}}function tP(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k1(t))D1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(i.next=i,bm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=a1(t,e,i,r),n!==null&&(i=$t(),Rn(n,t,r,i),N1(n,e,r))}}function k1(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function D1(t,e){Xo=rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_m(t,n)}}var ic={readContext:mn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},nP={readContext:mn,useCallback:function(t,e){return Mn().memoizedState=[t,e===void 0?null:e],t},useContext:mn,useEffect:xv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Tu(4194308,4,S1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Tu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Tu(4,2,t,e)},useMemo:function(t,e){var n=Mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eP.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=Mn();return t={current:t},e.memoizedState=t},useState:Cv,useDebugValue:Bm,useDeferredValue:function(t){return Mn().memoizedState=t},useTransition:function(){var t=Cv(!1),e=t[0];return t=ZR.bind(null,t[1]),Mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=Mn();if(Me){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),it===null)throw Error(V(349));Di&30||g1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xv(v1.bind(null,r,s,t),[t]),r.flags|=2048,Ra(9,y1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mn(),e=it.identifierPrefix;if(Me){var n=tr,r=er;n=(r&~(1<<32-An(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=JR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rP={readContext:mn,useCallback:R1,useContext:mn,useEffect:jm,useImperativeHandle:A1,useInsertionEffect:T1,useLayoutEffect:I1,useMemo:P1,useReducer:pd,useRef:E1,useState:function(){return pd(Aa)},useDebugValue:Bm,useDeferredValue:function(t){var e=gn();return C1(e,Ye.memoizedState,t)},useTransition:function(){var t=pd(Aa)[0],e=gn().memoizedState;return[t,e]},useMutableSource:p1,useSyncExternalStore:m1,useId:x1,unstable_isNewReconciler:!1},iP={readContext:mn,useCallback:R1,useContext:mn,useEffect:jm,useImperativeHandle:A1,useInsertionEffect:T1,useLayoutEffect:I1,useMemo:P1,useReducer:md,useRef:E1,useState:function(){return md(Aa)},useDebugValue:Bm,useDeferredValue:function(t){var e=gn();return Ye===null?e.memoizedState=t:C1(e,Ye.memoizedState,t)},useTransition:function(){var t=md(Aa)[0],e=gn().memoizedState;return[t,e]},useMutableSource:p1,useSyncExternalStore:m1,useId:x1,unstable_isNewReconciler:!1};function Us(t,e){try{var n="",r=e;do n+=NA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sP=typeof WeakMap=="function"?WeakMap:Map;function b1(t,e,n){n=ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){oc||(oc=!0,Uf=r),kf(t,e)},n}function M1(t,e,n){n=ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kf(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sP;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_P.bind(null,t,e,n),e.then(t,t))}function Dv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ir(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var oP=vr.ReactCurrentOwner,Kt=!1;function Mt(t,e,n,r){e.child=t===null?d1(e,null,n,r):Ls(e,t.child,n,r)}function bv(t,e,n,r,i){n=n.render;var s=e.ref;return Is(e,i),r=Fm(t,e,n,r,s,i),n=Um(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Me&&n&&Pm(e),e.flags|=1,Mt(t,e,r,i),e.child)}function Mv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Ym(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,V1(t,e,s,r,i)):(t=Ru(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(o,r)&&t.ref===e.ref)return dr(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function V1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(va(s,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,dr(t,e,i)}return Df(t,e,n,r,i)}function O1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ms,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(ms,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(ms,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(ms,Xt),Xt|=r;return Mt(t,e,i,n),e.child}function $1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Df(t,e,n,r,i){var s=Ht(n)?xi:Nt.current;return s=Os(e,s),Is(e,i),n=Fm(t,e,n,r,s,i),r=Um(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dr(t,e,i)):(Me&&r&&Pm(e),e.flags|=1,Mt(t,e,n,i),e.child)}function Vv(t,e,n,r,i){if(Ht(n)){var s=!0;Yu(e)}else s=!1;if(Is(e,i),e.stateNode===null)Iu(t,e),c1(e,n,r),xf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mn(u):(u=Ht(n)?xi:Nt.current,u=Os(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Rv(e,o,r,u),Sr=!1;var d=e.memoizedState;o.state=d,tc(e,r,o,i),l=e.memoizedState,a!==r||d!==l||qt.current||Sr?(typeof c=="function"&&(Cf(e,n,c,r),l=e.memoizedState),(a=Sr||Av(e,n,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:_n(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=mn(l):(l=Ht(n)?xi:Nt.current,l=Os(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Rv(e,o,r,l),Sr=!1,d=e.memoizedState,o.state=d,tc(e,r,o,i);var y=e.memoizedState;a!==h||d!==y||qt.current||Sr?(typeof p=="function"&&(Cf(e,n,p,r),y=e.memoizedState),(u=Sr||Av(e,n,u,r,d,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Nf(t,e,n,r,s,i)}function Nf(t,e,n,r,i,s){$1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&wv(e,n,!1),dr(t,e,s);r=e.stateNode,oP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ls(e,t.child,null,s),e.child=Ls(e,null,a,s)):Mt(t,e,a,s),e.memoizedState=r.state,i&&wv(e,n,!0),e.child}function L1(t){var e=t.stateNode;e.pendingContext?_v(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_v(t,e.context,!1),Vm(t,e.containerInfo)}function Ov(t,e,n,r,i){return $s(),xm(i),e.flags|=256,Mt(t,e,n,r),e.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function Mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function F1(t,e,n){var r=e.pendingProps,i=Oe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Oe,i&1),t===null)return Rf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Hc(o,r,0,null),t=Ii(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mf(n),e.memoizedState=bf,t):zm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return aP(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Fr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Fr(a,s):(s=Ii(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Mf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bf,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zm(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ql(t,e,n,r){return r!==null&&xm(r),Ls(e,t.child,null,n),t=zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aP(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gd(Error(V(422))),ql(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hc({mode:"visible",children:r.children},i,0,null),s=Ii(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ls(e,t.child,null,o),e.child.memoizedState=Mf(o),e.memoizedState=bf,s);if(!(e.mode&1))return ql(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(V(419)),r=gd(s,r,void 0),ql(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kt||a){if(r=it,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(t,i),Rn(r,t,i,-1))}return Gm(),r=gd(Error(V(421))),ql(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=Vr(i.nextSibling),Zt=e,Me=!0,Tn=null,t!==null&&(un[cn++]=er,un[cn++]=tr,un[cn++]=ki,er=t.id,tr=t.overflow,ki=e),e=zm(e,r.children),e.flags|=4096,e)}function $v(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pf(t.return,e,n)}function yd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function U1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$v(t,n,e);else if(t.tag===19)$v(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&nc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&nc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yd(e,!0,n,null,s);break;case"together":yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Iu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ni|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lP(t,e,n){switch(e.tag){case 3:L1(e),$s();break;case 5:f1(e);break;case 1:Ht(e.type)&&Yu(e);break;case 4:Vm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Zu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?F1(t,e,n):(Se(Oe,Oe.current&1),t=dr(t,e,n),t!==null?t.sibling:null);Se(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return U1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,O1(t,e,n)}return dr(t,e,n)}var j1,Vf,B1,z1;j1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vf=function(){};B1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,gi(jn.current);var s=null;switch(n){case"input":i=nf(t,i),r=nf(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=of(t,i),r=of(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Qu)}lf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ha.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i?.[u],r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ha.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};z1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ro(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uP(t,e,n){var r=e.pendingProps;switch(Cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Ht(e.type)&&Gu(),Et(e),null;case 3:return r=e.stateNode,Fs(),ke(qt),ke(Nt),$m(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(zf(Tn),Tn=null))),Vf(t,e),Et(e),null;case 5:Om(e);var i=gi(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)B1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return Et(e),null}if(t=gi(jn.current),zl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[Ea]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Lo.length;i++)Ae(Lo[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Hy(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":Qy(r,s),Ae("invalid",r)}lf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bl(r.textContent,a,t),i=["children",""+a]):ha.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Ml(r),Wy(r,s,!0);break;case"textarea":Ml(r),Gy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Qu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[Ea]=r,j1(t,e,!1,!1),e.stateNode=t;e:{switch(o=uf(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lo.length;i++)Ae(Lo[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":Hy(t,r),i=nf(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Qy(t,r),i=of(t,r),Ae("invalid",t);break;default:i=r}lf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_w(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&da(t,l):typeof l=="number"&&da(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ha.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ae("scroll",t):l!=null&&fm(t,s,l,o))}switch(n){case"input":Ml(t),Wy(t,r,!1);break;case"textarea":Ml(t),Gy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_s(t,!!r.multiple,s,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)z1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=gi(Ia.current),gi(jn.current),zl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:Bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return Et(e),null;case 13:if(ke(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Jt!==null&&e.mode&1&&!(e.flags&128))o1(),$s(),e.flags|=98560,s=!1;else if(s=zl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[On]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else Tn!==null&&(zf(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?Xe===0&&(Xe=3):Gm())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return Fs(),Vf(t,e),t===null&&_a(e.stateNode.containerInfo),Et(e),null;case 10:return Nm(e.type._context),Et(e),null;case 17:return Ht(e.type)&&Gu(),Et(e),null;case 19:if(ke(Oe),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ro(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nc(t),o!==null){for(e.flags|=128,Ro(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Oe,Oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>js&&(e.flags|=128,r=!0,Ro(s,!1),e.lanes=4194304)}else{if(!r)if(t=nc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return Et(e),null}else 2*Be()-s.renderingStartTime>js&&n!==1073741824&&(e.flags|=128,r=!0,Ro(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Oe.current,Se(Oe,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Qm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function cP(t,e){switch(Cm(e),e.tag){case 1:return Ht(e.type)&&Gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fs(),ke(qt),ke(Nt),$m(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Om(e),null;case 13:if(ke(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));$s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Oe),null;case 4:return Fs(),null;case 10:return Nm(e.type._context),null;case 22:case 23:return Qm(),null;case 24:return null;default:return null}}var Hl=!1,St=!1,hP=typeof WeakSet=="function"?WeakSet:Set,q=null;function ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Of(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Lv=!1;function dP(t,e){if(_f=qu,t=Ww(),Rm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===t)break t;if(d===n&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wf={focusedElem:t,selectionRange:n},qu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,w=y.memoizedState,m=e.stateNode,f=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:_n(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(g){Ue(e,e.return,g)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return y=Lv,Lv=!1,y}function Jo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Of(e,n,s)}i=i.next}while(i!==r)}}function Kc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $f(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function K1(t){var e=t.alternate;e!==null&&(t.alternate=null,K1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Ea],delete e[If],delete e[QR],delete e[GR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q1(t){return t.tag===5||t.tag===3||t.tag===4}function Fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Qu));else if(r!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}function Ff(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ff(t,e,n),t=t.sibling;t!==null;)Ff(t,e,n),t=t.sibling}var ct=null,wn=!1;function Er(t,e,n){for(n=n.child;n!==null;)H1(t,e,n),n=n.sibling}function H1(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Oc,n)}catch{}switch(n.tag){case 5:St||ps(n,e);case 6:var r=ct,i=wn;ct=null,Er(t,e,n),ct=r,wn=i,ct!==null&&(wn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(wn?(t=ct,n=n.stateNode,t.nodeType===8?cd(t.parentNode,n):t.nodeType===1&&cd(t,n),ga(t)):cd(ct,n.stateNode));break;case 4:r=ct,i=wn,ct=n.stateNode.containerInfo,wn=!0,Er(t,e,n),ct=r,wn=i;break;case 0:case 11:case 14:case 15:if(!St&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Of(n,e,o),i=i.next}while(i!==r)}Er(t,e,n);break;case 1:if(!St&&(ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,e,a)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(St=(r=St)||n.memoizedState!==null,Er(t,e,n),St=r):Er(t,e,n);break;default:Er(t,e,n)}}function Uv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hP),e.forEach(function(r){var i=EP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,wn=!1;break e;case 3:ct=a.stateNode.containerInfo,wn=!0;break e;case 4:ct=a.stateNode.containerInfo,wn=!0;break e}a=a.return}if(ct===null)throw Error(V(160));H1(s,o,i),ct=null,wn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ue(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W1(e,t),e=e.sibling}function W1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yn(e,t),bn(t),r&4){try{Jo(3,t,t.return),Kc(3,t)}catch(v){Ue(t,t.return,v)}try{Jo(5,t,t.return)}catch(v){Ue(t,t.return,v)}}break;case 1:yn(e,t),bn(t),r&512&&n!==null&&ps(n,n.return);break;case 5:if(yn(e,t),bn(t),r&512&&n!==null&&ps(n,n.return),t.flags&32){var i=t.stateNode;try{da(i,"")}catch(v){Ue(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pw(i,s),uf(a,o);var u=uf(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?_w(i,h):c==="dangerouslySetInnerHTML"?yw(i,h):c==="children"?da(i,h):fm(i,c,h,u)}switch(a){case"input":rf(i,s);break;case"textarea":mw(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?_s(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?_s(i,!!s.multiple,s.defaultValue,!0):_s(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ea]=s}catch(v){Ue(t,t.return,v)}}break;case 6:if(yn(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ue(t,t.return,v)}}break;case 3:if(yn(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(v){Ue(t,t.return,v)}break;case 4:yn(e,t),bn(t);break;case 13:yn(e,t),bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Hm=Be())),r&4&&Uv(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(St=(u=St)||c,yn(e,t),St=u):yn(e,t),bn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(q=t,c=t.child;c!==null;){for(h=q=c;q!==null;){switch(d=q,p=d.child,d.tag){case 0:case 11:case 14:case 15:Jo(4,d,d.return);break;case 1:ps(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ue(r,n,v)}}break;case 5:ps(d,d.return);break;case 22:if(d.memoizedState!==null){Bv(h);continue}}p!==null?(p.return=d,q=p):Bv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vw("display",o))}catch(v){Ue(t,t.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Ue(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yn(e,t),bn(t),r&4&&Uv(t);break;case 21:break;default:yn(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q1(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(da(i,""),r.flags&=-33);var s=Fv(t);Ff(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fv(t);Lf(t,a,o);break;default:throw Error(V(161))}}catch(l){Ue(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fP(t,e,n){q=t,Q1(t)}function Q1(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hl;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||St;a=Hl;var u=St;if(Hl=o,(St=l)&&!u)for(q=i;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?zv(i):l!==null?(l.return=o,q=l):zv(i);for(;s!==null;)q=s,Q1(s),s=s.sibling;q=i,Hl=a,St=u}jv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):jv(t)}}function jv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||Kc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!St)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Sv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&ga(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}St||e.flags&512&&$f(e)}catch(d){Ue(e,e.return,d)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Bv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function zv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kc(4,e)}catch(l){Ue(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ue(e,i,l)}}var s=e.return;try{$f(e)}catch(l){Ue(e,s,l)}break;case 5:var o=e.return;try{$f(e)}catch(l){Ue(e,o,l)}}}catch(l){Ue(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var pP=Math.ceil,sc=vr.ReactCurrentDispatcher,Km=vr.ReactCurrentOwner,pn=vr.ReactCurrentBatchConfig,ge=0,it=null,qe=null,pt=0,Xt=0,ms=ri(0),Xe=0,Pa=null,Ni=0,qc=0,qm=0,Zo=null,Bt=null,Hm=0,js=1/0,Yn=null,oc=!1,Uf=null,$r=null,Wl=!1,kr=null,ac=0,ea=0,jf=null,Su=-1,Au=0;function $t(){return ge&6?Be():Su!==-1?Su:Su=Be()}function Lr(t){return t.mode&1?ge&2&&pt!==0?pt&-pt:XR.transition!==null?(Au===0&&(Au=Dw()),Au):(t=we,t!==0||(t=window.event,t=t===void 0?16:Lw(t.type)),t):1}function Rn(t,e,n,r){if(50<ea)throw ea=0,jf=null,Error(V(185));rl(t,n,r),(!(ge&2)||t!==it)&&(t===it&&(!(ge&2)&&(qc|=n),Xe===4&&Pr(t,pt)),Wt(t,r),n===1&&ge===0&&!(e.mode&1)&&(js=Be()+500,jc&&ii()))}function Wt(t,e){var n=t.callbackNode;XA(t,e);var r=Ku(t,t===it?pt:0);if(r===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?YR(Kv.bind(null,t)):r1(Kv.bind(null,t)),HR(function(){!(ge&6)&&ii()}),n=null;else{switch(Nw(r)){case 1:n=vm;break;case 4:n=xw;break;case 16:n=zu;break;case 536870912:n=kw;break;default:n=zu}n=nE(n,G1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G1(t,e){if(Su=-1,Au=0,ge&6)throw Error(V(327));var n=t.callbackNode;if(Ss()&&t.callbackNode!==n)return null;var r=Ku(t,t===it?pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=lc(t,r);else{e=r;var i=ge;ge|=2;var s=X1();(it!==t||pt!==e)&&(Yn=null,js=Be()+500,Ti(t,e));do try{yP();break}catch(a){Y1(t,a)}while(!0);Dm(),sc.current=s,ge=i,qe!==null?e=0:(it=null,pt=0,e=Xe)}if(e!==0){if(e===2&&(i=pf(t),i!==0&&(r=i,e=Bf(t,i))),e===1)throw n=Pa,Ti(t,0),Pr(t,r),Wt(t,Be()),n;if(e===6)Pr(t,r);else{if(i=t.current.alternate,!(r&30)&&!mP(i)&&(e=lc(t,r),e===2&&(s=pf(t),s!==0&&(r=s,e=Bf(t,s))),e===1))throw n=Pa,Ti(t,0),Pr(t,r),Wt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:di(t,Bt,Yn);break;case 3:if(Pr(t,r),(r&130023424)===r&&(e=Hm+500-Be(),10<e)){if(Ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tf(di.bind(null,t,Bt,Yn),e);break}di(t,Bt,Yn);break;case 4:if(Pr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-An(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pP(r/1960))-r,10<r){t.timeoutHandle=Tf(di.bind(null,t,Bt,Yn),r);break}di(t,Bt,Yn);break;case 5:di(t,Bt,Yn);break;default:throw Error(V(329))}}}return Wt(t,Be()),t.callbackNode===n?G1.bind(null,t):null}function Bf(t,e){var n=Zo;return t.current.memoizedState.isDehydrated&&(Ti(t,e).flags|=256),t=lc(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&zf(e)),t}function zf(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function mP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pr(t,e){for(e&=~qm,e&=~qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-An(e),r=1<<n;t[n]=-1,e&=~r}}function Kv(t){if(ge&6)throw Error(V(327));Ss();var e=Ku(t,0);if(!(e&1))return Wt(t,Be()),null;var n=lc(t,e);if(t.tag!==0&&n===2){var r=pf(t);r!==0&&(e=r,n=Bf(t,r))}if(n===1)throw n=Pa,Ti(t,0),Pr(t,e),Wt(t,Be()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,di(t,Bt,Yn),Wt(t,Be()),null}function Wm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(js=Be()+500,jc&&ii())}}function bi(t){kr!==null&&kr.tag===0&&!(ge&6)&&Ss();var e=ge;ge|=1;var n=pn.transition,r=we;try{if(pn.transition=null,we=1,t)return t()}finally{we=r,pn.transition=n,ge=e,!(ge&6)&&ii()}}function Qm(){Xt=ms.current,ke(ms)}function Ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qR(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Cm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:Fs(),ke(qt),ke(Nt),$m();break;case 5:Om(r);break;case 4:Fs();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:Nm(r.type._context);break;case 22:case 23:Qm()}n=n.return}if(it=t,qe=t=Fr(t.current,null),pt=Xt=e,Xe=0,Pa=null,qm=qc=Ni=0,Bt=Zo=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mi=null}return t}function Y1(t,e){do{var n=qe;try{if(Dm(),Eu.current=ic,rc){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rc=!1}if(Di=0,rt=Ye=$e=null,Xo=!1,Sa=0,Km.current=null,n===null||n.return===null){Xe=1,Pa=e,qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Dv(o);if(p!==null){p.flags&=-257,Nv(p,o,a,s,e),p.mode&1&&kv(s,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){kv(s,u,e),Gm();break e}l=Error(V(426))}}else if(Me&&a.mode&1){var w=Dv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Nv(w,o,a,s,e),xm(Us(l,a));break e}}s=l=Us(l,a),Xe!==4&&(Xe=2),Zo===null?Zo=[s]:Zo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=b1(s,l,e);Iv(s,m);break e;case 1:a=l;var f=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&($r===null||!$r.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var g=M1(s,a,e);Iv(s,g);break e}}s=s.return}while(s!==null)}Z1(n)}catch(E){e=E,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function X1(){var t=sc.current;return sc.current=ic,t===null?ic:t}function Gm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),it===null||!(Ni&268435455)&&!(qc&268435455)||Pr(it,pt)}function lc(t,e){var n=ge;ge|=2;var r=X1();(it!==t||pt!==e)&&(Yn=null,Ti(t,e));do try{gP();break}catch(i){Y1(t,i)}while(!0);if(Dm(),ge=n,sc.current=r,qe!==null)throw Error(V(261));return it=null,pt=0,Xe}function gP(){for(;qe!==null;)J1(qe)}function yP(){for(;qe!==null&&!BA();)J1(qe)}function J1(t){var e=tE(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Z1(t):qe=e,Km.current=null}function Z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cP(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,qe=null;return}}else if(n=uP(n,e,Xt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Xe===0&&(Xe=5)}function di(t,e,n){var r=we,i=pn.transition;try{pn.transition=null,we=1,vP(t,e,n,r)}finally{pn.transition=i,we=r}return null}function vP(t,e,n,r){do Ss();while(kr!==null);if(ge&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(JA(t,s),t===it&&(qe=it=null,pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,nE(zu,function(){return Ss(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pn.transition,pn.transition=null;var o=we;we=1;var a=ge;ge|=4,Km.current=null,dP(t,n),W1(n,t),LR(wf),qu=!!_f,wf=_f=null,t.current=n,fP(n),zA(),ge=a,we=o,pn.transition=s}else t.current=n;if(Wl&&(Wl=!1,kr=t,ac=i),s=t.pendingLanes,s===0&&($r=null),HA(n.stateNode),Wt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oc)throw oc=!1,t=Uf,Uf=null,t;return ac&1&&t.tag!==0&&Ss(),s=t.pendingLanes,s&1?t===jf?ea++:(ea=0,jf=t):ea=0,ii(),null}function Ss(){if(kr!==null){var t=Nw(ac),e=pn.transition,n=we;try{if(pn.transition=null,we=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,ac=0,ge&6)throw Error(V(331));var i=ge;for(ge|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(q=u;q!==null;){var c=q;switch(c.tag){case 0:case 11:case 15:Jo(8,c,s)}var h=c.child;if(h!==null)h.return=c,q=h;else for(;q!==null;){c=q;var d=c.sibling,p=c.return;if(K1(c),c===u){q=null;break}if(d!==null){d.return=p,q=d;break}q=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,q=m;break e}q=s.return}}var f=t.current;for(q=f;q!==null;){o=q;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,q=_;else e:for(o=f;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kc(9,a)}}catch(E){Ue(a,a.return,E)}if(a===o){q=null;break e}var g=a.sibling;if(g!==null){g.return=a.return,q=g;break e}q=a.return}}if(ge=i,ii(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Oc,t)}catch{}r=!0}return r}finally{we=n,pn.transition=e}}return!1}function qv(t,e,n){e=Us(n,e),e=b1(t,e,1),t=Or(t,e,1),e=$t(),t!==null&&(rl(t,1,e),Wt(t,e))}function Ue(t,e,n){if(t.tag===3)qv(t,t,n);else for(;e!==null;){if(e.tag===3){qv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=Us(n,t),t=M1(e,t,1),e=Or(e,t,1),t=$t(),e!==null&&(rl(e,1,t),Wt(e,t));break}}e=e.return}}function _P(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(pt&n)===n&&(Xe===4||Xe===3&&(pt&130023424)===pt&&500>Be()-Hm?Ti(t,0):qm|=n),Wt(t,e)}function eE(t,e){e===0&&(t.mode&1?(e=$l,$l<<=1,!($l&130023424)&&($l=4194304)):e=1);var n=$t();t=hr(t,e),t!==null&&(rl(t,e,n),Wt(t,n))}function wP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eE(t,n)}function EP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),eE(t,n)}var tE;tE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,lP(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Me&&e.flags&1048576&&i1(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Iu(t,e),t=e.pendingProps;var i=Os(e,Nt.current);Is(e,n),i=Fm(null,e,r,t,i,n);var s=Um();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(s=!0,Yu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mm(e),i.updater=Bc,e.stateNode=i,i._reactInternals=e,xf(e,r,t,n),e=Nf(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&Pm(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Iu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IP(r),t=_n(r,t),i){case 0:e=Df(null,e,r,t,n);break e;case 1:e=Vv(null,e,r,t,n);break e;case 11:e=bv(null,e,r,t,n);break e;case 14:e=Mv(null,e,r,_n(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Df(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Vv(t,e,r,i,n);case 3:e:{if(L1(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l1(t,e),tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Us(Error(V(423)),e),e=Ov(t,e,r,n,i);break e}else if(r!==i){i=Us(Error(V(424)),e),e=Ov(t,e,r,n,i);break e}else for(Jt=Vr(e.stateNode.containerInfo.firstChild),Zt=e,Me=!0,Tn=null,n=d1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===i){e=dr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return f1(e),t===null&&Rf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ef(r,i)?o=null:s!==null&&Ef(r,s)&&(e.flags|=32),$1(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Rf(e),null;case 13:return F1(t,e,n);case 4:return Vm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ls(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),bv(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Zu,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!qt.current){e=dr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ir(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Is(e,n),i=mn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),Mv(t,e,r,i,n);case 15:return V1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Iu(t,e),e.tag=1,Ht(r)?(t=!0,Yu(e)):t=!1,Is(e,n),c1(e,r,i),xf(e,r,i,n),Nf(null,e,r,!0,t,n);case 19:return U1(t,e,n);case 22:return O1(t,e,n)}throw Error(V(156,e.tag))};function nE(t,e){return Cw(t,e)}function TP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new TP(t,e,n,r)}function Ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IP(t){if(typeof t=="function")return Ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===mm)return 11;if(t===gm)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Ym(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ss:return Ii(n.children,i,s,e);case pm:o=8,i|=8;break;case Jd:return t=fn(12,n,e,i|2),t.elementType=Jd,t.lanes=s,t;case Zd:return t=fn(13,n,e,i),t.elementType=Zd,t.lanes=s,t;case ef:return t=fn(19,n,e,i),t.elementType=ef,t.lanes=s,t;case hw:return Hc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uw:o=10;break e;case cw:o=9;break e;case mm:o=11;break e;case gm:o=14;break e;case Ir:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ii(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Hc(t,e,n,r){return t=fn(22,t,r,e),t.elementType=hw,t.lanes=n,t.stateNode={isHidden:!1},t}function vd(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function _d(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function SP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zh(0),this.expirationTimes=Zh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xm(t,e,n,r,i,s,o,a,l){return t=new SP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mm(s),t}function AP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rE(t){if(!t)return qr;t=t._reactInternals;e:{if(Bi(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(Ht(n))return n1(t,n,e)}return e}function iE(t,e,n,r,i,s,o,a,l){return t=Xm(n,r,!0,t,i,s,o,a,l),t.context=rE(null),n=t.current,r=$t(),i=Lr(n),s=ir(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,rl(t,i,r),Wt(t,r),t}function Wc(t,e,n,r){var i=e.current,s=$t(),o=Lr(i);return n=rE(n),e.context===null?e.context=n:e.pendingContext=n,e=ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(Rn(t,i,o,s),wu(t,i,o)),o}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jm(t,e){Hv(t,e),(t=t.alternate)&&Hv(t,e)}function RP(){return null}var sE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zm(t){this._internalRoot=t}Qc.prototype.render=Zm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));Wc(t,e,null,null)};Qc.prototype.unmount=Zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bi(function(){Wc(null,t,null,null)}),e[cr]=null}};function Qc(t){this._internalRoot=t}Qc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rr.length&&e!==0&&e<Rr[n].priority;n++);Rr.splice(n,0,t),n===0&&$w(t)}};function eg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wv(){}function PP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=uc(o);s.call(u)}}var o=iE(e,r,t,0,null,!1,!1,"",Wv);return t._reactRootContainer=o,t[cr]=o.current,_a(t.nodeType===8?t.parentNode:t),bi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=uc(l);a.call(u)}}var l=Xm(t,0,!1,null,null,!1,!1,"",Wv);return t._reactRootContainer=l,t[cr]=l.current,_a(t.nodeType===8?t.parentNode:t),bi(function(){Wc(e,l,n,r)}),l}function Yc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=uc(o);a.call(l)}}Wc(e,o,t,i)}else o=PP(n,e,t,i,r);return uc(o)}bw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(_m(e,n|1),Wt(e,Be()),!(ge&6)&&(js=Be()+500,ii()))}break;case 13:bi(function(){var r=hr(t,1);if(r!==null){var i=$t();Rn(r,t,1,i)}}),Jm(t,1)}};wm=function(t){if(t.tag===13){var e=hr(t,134217728);if(e!==null){var n=$t();Rn(e,t,134217728,n)}Jm(t,134217728)}};Mw=function(t){if(t.tag===13){var e=Lr(t),n=hr(t,e);if(n!==null){var r=$t();Rn(n,t,e,r)}Jm(t,e)}};Vw=function(){return we};Ow=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};hf=function(t,e,n){switch(e){case"input":if(rf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Uc(r);if(!i)throw Error(V(90));fw(r),rf(r,i)}}}break;case"textarea":mw(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};Tw=Wm;Iw=bi;var CP={usingClientEntryPoint:!1,Events:[sl,us,Uc,ww,Ew,Wm]},Po={findFiberByHostInstance:pi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xP={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rw(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||RP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Oc=Ql.inject(xP),Un=Ql}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CP;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eg(e))throw Error(V(200));return AP(t,e,null,n)};rn.createRoot=function(t,e){if(!eg(t))throw Error(V(299));var n=!1,r="",i=sE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xm(t,1,!1,null,null,n,!1,r,i),t[cr]=e.current,_a(t.nodeType===8?t.parentNode:t),new Zm(e)};rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=Rw(e),t=t===null?null:t.stateNode,t};rn.flushSync=function(t){return bi(t)};rn.hydrate=function(t,e,n){if(!Gc(e))throw Error(V(200));return Yc(null,t,e,!0,n)};rn.hydrateRoot=function(t,e,n){if(!eg(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iE(e,null,t,1,n??null,i,!1,s,o),t[cr]=e.current,_a(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qc(e)};rn.render=function(t,e,n){if(!Gc(e))throw Error(V(200));return Yc(null,t,e,!1,n)};rn.unmountComponentAtNode=function(t){if(!Gc(t))throw Error(V(40));return t._reactRootContainer?(bi(function(){Yc(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1};rn.unstable_batchedUpdates=Wm;rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gc(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return Yc(t,e,n,!1,r)};rn.version="18.2.0-next-9e3b772b8-20220608";function oE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oE)}catch(t){console.error(t)}}oE(),iw.exports=rn;var kP=iw.exports,Qv=kP;Yd.createRoot=Qv.createRoot,Yd.hydrateRoot=Qv.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Re(){return Re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Re.apply(this,arguments)}var Qe;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qe||(Qe={}));const Gv="popstate";function DP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Ca("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hr(i)}return bP(e,n,null,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NP(){return Math.random().toString(36).substr(2,8)}function Yv(t,e){return{usr:t.state,key:t.key,idx:e}}function Ca(t,e,n,r){return n===void 0&&(n=null),Re({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?si(e):e,{state:n,key:e&&e.key||r||NP()})}function Hr(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function si(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function bP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qe.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Re({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=Qe.Pop;let w=c(),m=w==null?null:w-u;u=w,l&&l({action:a,location:v.location,delta:m})}function d(w,m){a=Qe.Push;let f=Ca(v.location,w,m);u=c()+1;let _=Yv(f,u),g=v.createHref(f);try{o.pushState(_,"",g)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(g)}s&&l&&l({action:a,location:v.location,delta:1})}function p(w,m){a=Qe.Replace;let f=Ca(v.location,w,m);u=c();let _=Yv(f,u),g=v.createHref(f);o.replaceState(_,"",g),s&&l&&l({action:a,location:v.location,delta:0})}function y(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,f=typeof w=="string"?w:Hr(w);return ce(m,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,m)}let v={get action(){return a},get location(){return t(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Gv,h),l=w,()=>{i.removeEventListener(Gv,h),l=null}},createHref(w){return e(i,w)},createURL:y,encodeLocation(w){let m=y(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:p,go(w){return o.go(w)}};return v}var Ge;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ge||(Ge={}));const MP=new Set(["lazy","caseSensitive","path","id","index","children"]);function VP(t){return t.index===!0}function Kf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(ce(i.index!==!0||!i.children,"Cannot specify children on an index route"),ce(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),VP(i)){let l=Re({},i,e(i),{id:a});return r[a]=l,l}else{let l=Re({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Kf(i.children,e,o,r)),l}})}function gs(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?si(e):e,i=Wr(r.pathname||"/",n);if(i==null)return null;let s=aE(t);OP(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=qP(s[a],QP(i));return o}function aE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ce(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Bn([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(ce(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),aE(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:zP(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of lE(s.path))i(s,o,l)}),e}function lE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=lE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function OP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:KP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $P=/^:\w+$/,LP=3,FP=2,UP=1,jP=10,BP=-2,Xv=t=>t==="*";function zP(t,e){let n=t.split("/"),r=n.length;return n.some(Xv)&&(r+=BP),e&&(r+=FP),n.filter(i=>!Xv(i)).reduce((i,s)=>i+($P.test(s)?LP:s===""?UP:jP),r)}function KP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qP(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=HP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;s.push({params:r,pathname:Bn([i,c.pathname]),pathnameBase:JP(Bn([i,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(i=Bn([i,c.pathnameBase]))}return s}function HP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let d=a[h]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=GP(a[h]||"",c),u},{}),pathname:s,pathnameBase:o,pattern:t}}function WP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Bs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function QP(t){try{return decodeURI(t)}catch(e){return Bs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function GP(t,e){try{return decodeURIComponent(t)}catch(n){return Bs(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Wr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function YP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?si(t):t;return{pathname:n?n.startsWith("/")?n:XP(n,e):e,search:ZP(r),hash:eC(i)}}function XP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function wd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xc(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=si(t):(i=Re({},t),ce(!i.pathname||!i.pathname.includes("?"),wd("?","pathname","search",i)),ce(!i.pathname||!i.pathname.includes("#"),wd("#","pathname","hash",i)),ce(!i.search||!i.search.includes("#"),wd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=YP(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Bn=t=>t.join("/").replace(/\/\/+/g,"/"),JP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,g$=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",e),new Response(null,Re({},r,{headers:i}))};class ng{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function uE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cE=["post","put","patch","delete"],tC=new Set(cE),nC=["get",...cE],rC=new Set(nC),iC=new Set([301,302,303,307,308]),sC=new Set([307,308]),Ed={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Co={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},hE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aC=t=>({hasErrorBoundary:!!t.hasErrorBoundary});function lC(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ce(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let A=t.detectErrorBoundary;i=R=>({hasErrorBoundary:A(R)})}else i=aC;let s={},o=Kf(t.routes,i,void 0,s),a,l=t.basename||"/",u=Re({v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),c=null,h=new Set,d=null,p=null,y=null,v=t.hydrationData!=null,w=gs(o,t.history.location,l),m=null;if(w==null){let A=ln(404,{pathname:t.history.location.pathname}),{matches:R,route:N}=s_(o);w=R,m={[N.id]:A}}let f=!w.some(A=>A.route.lazy)&&(!w.some(A=>A.route.loader)||t.hydrationData!=null),_,g={historyAction:t.history.action,location:t.history.location,matches:w,initialized:f,navigation:Ed,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||m,fetchers:new Map,blockers:new Map},E=Qe.Pop,T=!1,I,k=!1,P=!1,D=[],J=[],te=new Map,z=0,M=-1,L=new Map,B=new Set,O=new Map,C=new Map,b=new Map,j=!1;function re(){return c=t.history.listen(A=>{let{action:R,location:N,delta:W}=A;if(j){j=!1;return}Bs(b.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=Oy({currentLocation:g.location,nextLocation:N,historyAction:R});if(le&&W!=null){j=!0,t.history.go(W*-1),Cl(le,{state:"blocked",location:N,proceed(){Cl(le,{state:"proceeding",proceed:void 0,reset:void 0,location:N}),t.history.go(W)},reset(){let ie=new Map(g.blockers);ie.set(le,Co),de({blockers:ie})}});return}return vt(R,N)}),g.initialized||vt(Qe.Pop,g.location),_}function he(){c&&c(),h.clear(),I&&I.abort(),g.fetchers.forEach((A,R)=>Bh(R)),g.blockers.forEach((A,R)=>Vy(R))}function Ve(A){return h.add(A),()=>h.delete(A)}function de(A){g=Re({},g,A),h.forEach(R=>R(g))}function yt(A,R){var N,W;let le=g.actionData!=null&&g.navigation.formMethod!=null&&En(g.navigation.formMethod)&&g.navigation.state==="loading"&&((N=A.state)==null?void 0:N._isRedirect)!==!0,ie;R.actionData?Object.keys(R.actionData).length>0?ie=R.actionData:ie=null:le?ie=g.actionData:ie=null;let oe=R.loaderData?i_(g.loaderData,R.loaderData,R.matches||[],R.errors):g.loaderData,Z=g.blockers;Z.size>0&&(Z=new Map(Z),Z.forEach((Ie,ye)=>Z.set(ye,Co)));let G=T===!0||g.navigation.formMethod!=null&&En(g.navigation.formMethod)&&((W=A.state)==null?void 0:W._isRedirect)!==!0;a&&(o=a,a=void 0),k||E===Qe.Pop||(E===Qe.Push?t.history.push(A,A.state):E===Qe.Replace&&t.history.replace(A,A.state)),de(Re({},R,{actionData:ie,loaderData:oe,historyAction:E,location:A,initialized:!0,navigation:Ed,revalidation:"idle",restoreScrollPosition:Ly(A,R.matches||g.matches),preventScrollReset:G,blockers:Z})),E=Qe.Pop,T=!1,k=!1,P=!1,D=[],J=[]}async function et(A,R){if(typeof A=="number"){t.history.go(A);return}let N=qf(g.location,g.matches,l,u.v7_prependBasename,A,R?.fromRouteId,R?.relative),{path:W,submission:le,error:ie}=Jv(u.v7_normalizeFormMethod,!1,N,R),oe=g.location,Z=Ca(g.location,W,R&&R.state);Z=Re({},Z,t.history.encodeLocation(Z));let G=R&&R.replace!=null?R.replace:void 0,Ie=Qe.Push;G===!0?Ie=Qe.Replace:G===!1||le!=null&&En(le.formMethod)&&le.formAction===g.location.pathname+g.location.search&&(Ie=Qe.Replace);let ye=R&&"preventScrollReset"in R?R.preventScrollReset===!0:void 0,Gt=Oy({currentLocation:oe,nextLocation:Z,historyAction:Ie});if(Gt){Cl(Gt,{state:"blocked",location:Z,proceed(){Cl(Gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),et(A,R)},reset(){let tt=new Map(g.blockers);tt.set(Gt,Co),de({blockers:tt})}});return}return await vt(Ie,Z,{submission:le,pendingError:ie,preventScrollReset:ye,replace:R&&R.replace})}function on(){if(jh(),de({revalidation:"loading"}),g.navigation.state!=="submitting"){if(g.navigation.state==="idle"){vt(g.historyAction,g.location,{startUninterruptedRevalidation:!0});return}vt(E||g.historyAction,g.navigation.location,{overrideNavigation:g.navigation})}}async function vt(A,R,N){I&&I.abort(),I=null,E=A,k=(N&&N.startUninterruptedRevalidation)===!0,tA(g.location,g.matches),T=(N&&N.preventScrollReset)===!0;let W=a||o,le=N&&N.overrideNavigation,ie=gs(W,R,l);if(!ie){let tt=ln(404,{pathname:R.pathname}),{matches:jt,route:Nn}=s_(W);zh(),yt(R,{matches:jt,loaderData:{},errors:{[Nn.id]:tt}});return}if(g.initialized&&!P&&fC(g.location,R)&&!(N&&N.submission&&En(N.submission.formMethod))){yt(R,{matches:ie});return}I=new AbortController;let oe=ko(t.history,R,I.signal,N&&N.submission),Z,G;if(N&&N.pendingError)G={[ys(ie).route.id]:N.pendingError};else if(N&&N.submission&&En(N.submission.formMethod)){let tt=await _t(oe,R,N.submission,ie,{replace:N.replace});if(tt.shortCircuited)return;Z=tt.pendingActionData,G=tt.pendingActionError,le=Gl(R,N.submission),oe=new Request(oe.url,{signal:oe.signal})}let{shortCircuited:Ie,loaderData:ye,errors:Gt}=await Dn(oe,R,ie,le,N&&N.submission,N&&N.fetcherSubmission,N&&N.replace,Z,G);Ie||(I=null,yt(R,Re({matches:ie},Z?{actionData:Z}:{},{loaderData:ye,errors:Gt})))}async function _t(A,R,N,W,le){le===void 0&&(le={}),jh();let ie=vC(R,N);de({navigation:ie});let oe,Z=Wf(W,R);if(!Z.route.action&&!Z.route.lazy)oe={type:Ge.error,error:ln(405,{method:A.method,pathname:R.pathname,routeId:Z.route.id})};else if(oe=await xo("action",A,Z,W,s,i,l),A.signal.aborted)return{shortCircuited:!0};if(As(oe)){let G;return le&&le.replace!=null?G=le.replace:G=oe.location===g.location.pathname+g.location.search,await yo(g,oe,{submission:N,replace:G}),{shortCircuited:!0}}if(ta(oe)){let G=ys(W,Z.route.id);return(le&&le.replace)!==!0&&(E=Qe.Push),{pendingActionData:{},pendingActionError:{[G.route.id]:oe.error}}}if(yi(oe))throw ln(400,{type:"defer-action"});return{pendingActionData:{[Z.route.id]:oe.data}}}async function Dn(A,R,N,W,le,ie,oe,Z,G){let Ie=W||Gl(R,le),ye=le||ie||l_(Ie),Gt=a||o,[tt,jt]=Zv(t.history,g,N,ye,R,P,D,J,O,B,Gt,l,Z,G);if(zh(Ne=>!(N&&N.some(an=>an.route.id===Ne))||tt&&tt.some(an=>an.route.id===Ne)),tt.length===0&&jt.length===0){let Ne=by();return yt(R,Re({matches:N,loaderData:{},errors:G||null},Z?{actionData:Z}:{},Ne?{fetchers:new Map(g.fetchers)}:{})),{shortCircuited:!0}}if(!k){jt.forEach(an=>{let Gi=g.fetchers.get(an.key),lt=Do(void 0,Gi?Gi.data:void 0);g.fetchers.set(an.key,lt)});let Ne=Z||g.actionData;de(Re({navigation:Ie},Ne?Object.keys(Ne).length===0?{actionData:null}:{actionData:Ne}:{},jt.length>0?{fetchers:new Map(g.fetchers)}:{}))}M=++z,jt.forEach(Ne=>{te.has(Ne.key)&&wr(Ne.key),Ne.controller&&te.set(Ne.key,Ne.controller)});let Nn=()=>jt.forEach(Ne=>wr(Ne.key));I&&I.signal.addEventListener("abort",Nn);let{results:vo,loaderResults:Kh,fetcherResults:xl}=await Dy(g.matches,N,tt,jt,A);if(A.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Nn),jt.forEach(Ne=>te.delete(Ne.key));let Wn=o_(vo);if(Wn)return await yo(g,Wn,{replace:oe}),{shortCircuited:!0};let{loaderData:kl,errors:qh}=r_(g,N,tt,Kh,G,jt,xl,C);C.forEach((Ne,an)=>{Ne.subscribe(Gi=>{(Gi||Ne.done)&&C.delete(an)})});let Hh=by(),Wh=My(M),Dl=Hh||Wh||jt.length>0;return Re({loaderData:kl,errors:qh},Dl?{fetchers:new Map(g.fetchers)}:{})}function _r(A){return g.fetchers.get(A)||oC}function Qi(A,R,N,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(A)&&wr(A);let le=a||o,ie=qf(g.location,g.matches,l,u.v7_prependBasename,N,R,W?.relative),oe=gs(le,ie,l);if(!oe){Pl(A,R,ln(404,{pathname:ie}));return}let{path:Z,submission:G,error:Ie}=Jv(u.v7_normalizeFormMethod,!0,ie,W);if(Ie){Pl(A,R,Ie);return}let ye=Wf(oe,Z);if(T=(W&&W.preventScrollReset)===!0,G&&En(G.formMethod)){XS(A,R,Z,ye,oe,G);return}O.set(A,{routeId:R,path:Z}),JS(A,R,Z,ye,oe,G)}async function XS(A,R,N,W,le,ie){if(jh(),O.delete(A),!W.route.action&&!W.route.lazy){let lt=ln(405,{method:ie.formMethod,pathname:N,routeId:R});Pl(A,R,lt);return}let oe=g.fetchers.get(A),Z=_C(ie,oe);g.fetchers.set(A,Z),de({fetchers:new Map(g.fetchers)});let G=new AbortController,Ie=ko(t.history,N,G.signal,ie);te.set(A,G);let ye=await xo("action",Ie,W,le,s,i,l);if(Ie.signal.aborted){te.get(A)===G&&te.delete(A);return}if(As(ye)){te.delete(A),B.add(A);let lt=Do(ie);return g.fetchers.set(A,lt),de({fetchers:new Map(g.fetchers)}),yo(g,ye,{submission:ie,isFetchActionRedirect:!0})}if(ta(ye)){Pl(A,R,ye.error);return}if(yi(ye))throw ln(400,{type:"defer-action"});let Gt=g.navigation.location||g.location,tt=ko(t.history,Gt,G.signal),jt=a||o,Nn=g.navigation.state!=="idle"?gs(jt,g.navigation.location,l):g.matches;ce(Nn,"Didn't find any matches after fetcher action");let vo=++z;L.set(A,vo);let Kh=Do(ie,ye.data);g.fetchers.set(A,Kh);let[xl,Wn]=Zv(t.history,g,Nn,ie,Gt,P,D,J,O,B,jt,l,{[W.route.id]:ye.data},void 0);Wn.filter(lt=>lt.key!==A).forEach(lt=>{let _o=lt.key,Fy=g.fetchers.get(_o),rA=Do(void 0,Fy?Fy.data:void 0);g.fetchers.set(_o,rA),te.has(_o)&&wr(_o),lt.controller&&te.set(_o,lt.controller)}),de({fetchers:new Map(g.fetchers)});let kl=()=>Wn.forEach(lt=>wr(lt.key));G.signal.addEventListener("abort",kl);let{results:qh,loaderResults:Hh,fetcherResults:Wh}=await Dy(g.matches,Nn,xl,Wn,tt);if(G.signal.aborted)return;G.signal.removeEventListener("abort",kl),L.delete(A),te.delete(A),Wn.forEach(lt=>te.delete(lt.key));let Dl=o_(qh);if(Dl)return yo(g,Dl);let{loaderData:Ne,errors:an}=r_(g,g.matches,xl,Hh,void 0,Wn,Wh,C);if(g.fetchers.has(A)){let lt=Pu(ye.data);g.fetchers.set(A,lt)}let Gi=My(vo);g.navigation.state==="loading"&&vo>M?(ce(E,"Expected pending action"),I&&I.abort(),yt(g.navigation.location,{matches:Nn,loaderData:Ne,errors:an,fetchers:new Map(g.fetchers)})):(de(Re({errors:an,loaderData:i_(g.loaderData,Ne,Nn,an)},Gi||Wn.length>0?{fetchers:new Map(g.fetchers)}:{})),P=!1)}async function JS(A,R,N,W,le,ie){let oe=g.fetchers.get(A),Z=Do(ie,oe?oe.data:void 0);g.fetchers.set(A,Z),de({fetchers:new Map(g.fetchers)});let G=new AbortController,Ie=ko(t.history,N,G.signal);te.set(A,G);let ye=await xo("loader",Ie,W,le,s,i,l);if(yi(ye)&&(ye=await pE(ye,Ie.signal,!0)||ye),te.get(A)===G&&te.delete(A),Ie.signal.aborted)return;if(As(ye)){B.add(A),await yo(g,ye);return}if(ta(ye)){let tt=ys(g.matches,R);g.fetchers.delete(A),de({fetchers:new Map(g.fetchers),errors:{[tt.route.id]:ye.error}});return}ce(!yi(ye),"Unhandled fetcher deferred data");let Gt=Pu(ye.data);g.fetchers.set(A,Gt),de({fetchers:new Map(g.fetchers)})}async function yo(A,R,N){let{submission:W,replace:le,isFetchActionRedirect:ie}=N===void 0?{}:N;R.revalidate&&(P=!0);let oe=Ca(A.location,R.location,Re({_isRedirect:!0},ie?{_isFetchActionRedirect:!0}:{}));if(ce(oe,"Expected a location on the redirect navigation"),hE.test(R.location)&&n){let Ie=t.history.createURL(R.location),ye=Wr(Ie.pathname,l)==null;if(e.location.origin!==Ie.origin||ye){le?e.location.replace(R.location):e.location.assign(R.location);return}}I=null;let Z=le===!0?Qe.Replace:Qe.Push,G=W||l_(A.navigation);if(sC.has(R.status)&&G&&En(G.formMethod))await vt(Z,oe,{submission:Re({},G,{formAction:R.location}),preventScrollReset:T});else if(ie)await vt(Z,oe,{overrideNavigation:Gl(oe),fetcherSubmission:G,preventScrollReset:T});else{let Ie=Gl(oe,G);await vt(Z,oe,{overrideNavigation:Ie,preventScrollReset:T})}}async function Dy(A,R,N,W,le){let ie=await Promise.all([...N.map(G=>xo("loader",le,G,R,s,i,l)),...W.map(G=>G.matches&&G.match&&G.controller?xo("loader",ko(t.history,G.path,G.controller.signal),G.match,G.matches,s,i,l):{type:Ge.error,error:ln(404,{pathname:G.path})})]),oe=ie.slice(0,N.length),Z=ie.slice(N.length);return await Promise.all([a_(A,N,oe,oe.map(()=>le.signal),!1,g.loaderData),a_(A,W.map(G=>G.match),Z,W.map(G=>G.controller?G.controller.signal:null),!0)]),{results:ie,loaderResults:oe,fetcherResults:Z}}function jh(){P=!0,D.push(...zh()),O.forEach((A,R)=>{te.has(R)&&(J.push(R),wr(R))})}function Pl(A,R,N){let W=ys(g.matches,R);Bh(A),de({errors:{[W.route.id]:N},fetchers:new Map(g.fetchers)})}function Bh(A){let R=g.fetchers.get(A);te.has(A)&&!(R&&R.state==="loading"&&L.has(A))&&wr(A),O.delete(A),L.delete(A),B.delete(A),g.fetchers.delete(A)}function wr(A){let R=te.get(A);ce(R,"Expected fetch controller: "+A),R.abort(),te.delete(A)}function Ny(A){for(let R of A){let N=_r(R),W=Pu(N.data);g.fetchers.set(R,W)}}function by(){let A=[],R=!1;for(let N of B){let W=g.fetchers.get(N);ce(W,"Expected fetcher: "+N),W.state==="loading"&&(B.delete(N),A.push(N),R=!0)}return Ny(A),R}function My(A){let R=[];for(let[N,W]of L)if(W<A){let le=g.fetchers.get(N);ce(le,"Expected fetcher: "+N),le.state==="loading"&&(wr(N),L.delete(N),R.push(N))}return Ny(R),R.length>0}function ZS(A,R){let N=g.blockers.get(A)||Co;return b.get(A)!==R&&b.set(A,R),N}function Vy(A){g.blockers.delete(A),b.delete(A)}function Cl(A,R){let N=g.blockers.get(A)||Co;ce(N.state==="unblocked"&&R.state==="blocked"||N.state==="blocked"&&R.state==="blocked"||N.state==="blocked"&&R.state==="proceeding"||N.state==="blocked"&&R.state==="unblocked"||N.state==="proceeding"&&R.state==="unblocked","Invalid blocker state transition: "+N.state+" -> "+R.state);let W=new Map(g.blockers);W.set(A,R),de({blockers:W})}function Oy(A){let{currentLocation:R,nextLocation:N,historyAction:W}=A;if(b.size===0)return;b.size>1&&Bs(!1,"A router only supports one blocker at a time");let le=Array.from(b.entries()),[ie,oe]=le[le.length-1],Z=g.blockers.get(ie);if(!(Z&&Z.state==="proceeding")&&oe({currentLocation:R,nextLocation:N,historyAction:W}))return ie}function zh(A){let R=[];return C.forEach((N,W)=>{(!A||A(W))&&(N.cancel(),R.push(W),C.delete(W))}),R}function eA(A,R,N){if(d=A,y=R,p=N||null,!v&&g.navigation===Ed){v=!0;let W=Ly(g.location,g.matches);W!=null&&de({restoreScrollPosition:W})}return()=>{d=null,y=null,p=null}}function $y(A,R){return p&&p(A,R.map(W=>yC(W,g.loaderData)))||A.key}function tA(A,R){if(d&&y){let N=$y(A,R);d[N]=y()}}function Ly(A,R){if(d){let N=$y(A,R),W=d[N];if(typeof W=="number")return W}return null}function nA(A){s={},a=Kf(A,i,void 0,s)}return _={get basename(){return l},get state(){return g},get routes(){return o},initialize:re,subscribe:Ve,enableScrollRestoration:eA,navigate:et,fetch:Qi,revalidate:on,createHref:A=>t.history.createHref(A),encodeLocation:A=>t.history.encodeLocation(A),getFetcher:_r,deleteFetcher:Bh,dispose:he,getBlocker:ZS,deleteBlocker:Vy,_internalFetchControllers:te,_internalActiveDeferreds:C,_internalSetRoutes:nA},_}function uC(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function qf(t,e,n,r,i,s,o){let a,l;if(s!=null&&o!=="path"){a=[];for(let c of e)if(a.push(c),c.route.id===s){l=c;break}}else a=e,l=e[e.length-1];let u=tg(i||".",Xc(a).map(c=>c.pathnameBase),Wr(t.pathname,n)||t.pathname,o==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!rg(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Bn([n,u.pathname])),Hr(u)}function Jv(t,e,n,r){if(!r||!uC(r))return{path:n};if(r.formMethod&&!gC(r.formMethod))return{path:n,error:ln(405,{method:r.formMethod})};let i=()=>({path:n,error:ln(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=fE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!En(o))return i();let d=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((p,y)=>{let[v,w]=y;return""+p+v+"="+w+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:d}}}else if(r.formEncType==="application/json"){if(!En(o))return i();try{let d=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:d,text:void 0}}}catch{return i()}}}ce(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Hf(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Hf(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=n_(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=n_(l)}catch{return i()}let c={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(En(c.formMethod))return{path:n,submission:c};let h=si(n);return e&&h.search&&rg(h.search)&&l.append("index",""),h.search="?"+l,{path:Hr(h),submission:c}}function cC(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Zv(t,e,n,r,i,s,o,a,l,u,c,h,d,p){let y=p?Object.values(p)[0]:d?Object.values(d)[0]:void 0,v=t.createURL(e.location),w=t.createURL(i),m=p?Object.keys(p)[0]:void 0,_=cC(n,m).filter((E,T)=>{if(E.route.lazy)return!0;if(E.route.loader==null)return!1;if(hC(e.loaderData,e.matches[T],E)||o.some(P=>P===E.route.id))return!0;let I=e.matches[T],k=E;return e_(E,Re({currentUrl:v,currentParams:I.params,nextUrl:w,nextParams:k.params},r,{actionResult:y,defaultShouldRevalidate:s||v.pathname+v.search===w.pathname+w.search||v.search!==w.search||dE(I,k)}))}),g=[];return l.forEach((E,T)=>{if(!n.some(te=>te.route.id===E.routeId))return;let I=gs(c,E.path,h);if(!I){g.push({key:T,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let k=e.fetchers.get(T),P=k&&k.state!=="idle"&&k.data===void 0&&!u.has(T),D=Wf(I,E.path);(a.includes(T)||P||e_(D,Re({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:y,defaultShouldRevalidate:s})))&&g.push({key:T,routeId:E.routeId,path:E.path,matches:I,match:D,controller:new AbortController})}),[_,g]}function hC(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function dE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function e_(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function t_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ce(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Bs(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!MP.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Re({},e(i),{lazy:void 0}))}async function xo(t,e,n,r,i,s,o,a){a===void 0&&(a={});let l,u,c,h=y=>{let v,w=new Promise((m,f)=>v=f);return c=()=>v(),e.signal.addEventListener("abort",c),Promise.race([y({request:e,params:n.params,context:a.requestContext}),w])};try{let y=n.route[t];if(n.route.lazy)if(y)u=(await Promise.all([h(y),t_(n.route,s,i)]))[0];else if(await t_(n.route,s,i),y=n.route[t],y)u=await h(y);else if(t==="action"){let v=new URL(e.url),w=v.pathname+v.search;throw ln(405,{method:e.method,pathname:w,routeId:n.route.id})}else return{type:Ge.data,data:void 0};else if(y)u=await h(y);else{let v=new URL(e.url),w=v.pathname+v.search;throw ln(404,{pathname:w})}ce(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(y){l=Ge.error,u=y}finally{c&&e.signal.removeEventListener("abort",c)}if(mC(u)){let y=u.status;if(iC.has(y)){let m=u.headers.get("Location");if(ce(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!hE.test(m))m=qf(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,m);else if(!a.isStaticRequest){let f=new URL(e.url),_=m.startsWith("//")?new URL(f.protocol+m):new URL(m),g=Wr(_.pathname,o)!=null;_.origin===f.origin&&g&&(m=_.pathname+_.search+_.hash)}if(a.isStaticRequest)throw u.headers.set("Location",m),u;return{type:Ge.redirect,status:y,location:m,revalidate:u.headers.get("X-Remix-Revalidate")!==null}}if(a.isRouteRequest)throw{type:l||Ge.data,response:u};let v,w=u.headers.get("Content-Type");return w&&/\bapplication\/json\b/.test(w)?v=await u.json():v=await u.text(),l===Ge.error?{type:l,error:new ng(y,u.statusText,v),headers:u.headers}:{type:Ge.data,data:v,statusCode:u.status,headers:u.headers}}if(l===Ge.error)return{type:l,error:u};if(pC(u)){var d,p;return{type:Ge.deferred,deferredData:u,statusCode:(d=u.init)==null?void 0:d.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:Ge.data,data:u}}function ko(t,e,n,r){let i=t.createURL(fE(e)).toString(),s={signal:n};if(r&&En(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Hf(r.formData):s.body=r.formData}return new Request(i,s)}function Hf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function n_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function dC(t,e,n,r,i){let s={},o=null,a,l=!1,u={};return n.forEach((c,h)=>{let d=e[h].route.id;if(ce(!As(c),"Cannot handle redirect results in processLoaderData"),ta(c)){let p=ys(t,d),y=c.error;r&&(y=Object.values(r)[0],r=void 0),o=o||{},o[p.route.id]==null&&(o[p.route.id]=y),s[d]=void 0,l||(l=!0,a=uE(c.error)?c.error.status:500),c.headers&&(u[d]=c.headers)}else yi(c)?(i.set(d,c.deferredData),s[d]=c.deferredData.data):s[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[d]=c.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function r_(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=dC(e,n,r,i,a);for(let c=0;c<s.length;c++){let{key:h,match:d,controller:p}=s[c];ce(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let y=o[c];if(!(p&&p.signal.aborted))if(ta(y)){let v=ys(t.matches,d?.route.id);u&&u[v.route.id]||(u=Re({},u,{[v.route.id]:y.error})),t.fetchers.delete(h)}else if(As(y))ce(!1,"Unhandled fetcher revalidation redirect");else if(yi(y))ce(!1,"Unhandled fetcher deferred data");else{let v=Pu(y.data);t.fetchers.set(h,v)}}return{loaderData:l,errors:u}}function i_(t,e,n,r){let i=Re({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function ys(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function s_(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ln(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new ng(t||500,o,new Error(a),!0)}function o_(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(As(n))return n}}function fE(t){let e=typeof t=="string"?si(t):t;return Hr(Re({},e,{hash:""}))}function fC(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function yi(t){return t.type===Ge.deferred}function ta(t){return t.type===Ge.error}function As(t){return(t&&t.type)===Ge.redirect}function pC(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function mC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function gC(t){return rC.has(t.toLowerCase())}function En(t){return tC.has(t.toLowerCase())}async function a_(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(h=>h.route.id===l.route.id),c=u!=null&&!dE(u,l)&&(s&&s[l.route.id])!==void 0;if(yi(a)&&(i||c)){let h=r[o];ce(h,"Expected an AbortSignal for revalidating fetcher deferred result"),await pE(a,h,i).then(d=>{d&&(n[o]=d||n[o])})}}}async function pE(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ge.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ge.error,error:i}}return{type:Ge.data,data:t.deferredData.data}}}function rg(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function yC(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Wf(t,e){let n=typeof e=="string"?si(e).search:e.search;if(t[t.length-1].route.index&&rg(n||""))return t[t.length-1];let r=Xc(t);return r[r.length-1]}function l_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function Gl(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function vC(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Do(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}function _C(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0," _hasFetcherDoneAnything ":!0}}function Pu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qf.apply(this,arguments)}const al=S.createContext(null),mE=S.createContext(null),oi=S.createContext(null),ig=S.createContext(null),qn=S.createContext({outlet:null,matches:[],isDataRoute:!1}),gE=S.createContext(null);function wC(t,e){let{relative:n}=e===void 0?{}:e;ll()||ce(!1);let{basename:r,navigator:i}=S.useContext(oi),{hash:s,pathname:o,search:a}=sg(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Bn([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ll(){return S.useContext(ig)!=null}function io(){return ll()||ce(!1),S.useContext(ig).location}function yE(t){S.useContext(oi).static||S.useLayoutEffect(t)}function EC(){let{isDataRoute:t}=S.useContext(qn);return t?$C():TC()}function TC(){ll()||ce(!1);let t=S.useContext(al),{basename:e,navigator:n}=S.useContext(oi),{matches:r}=S.useContext(qn),{pathname:i}=io(),s=JSON.stringify(Xc(r).map(l=>l.pathnameBase)),o=S.useRef(!1);return yE(()=>{o.current=!0}),S.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=tg(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Bn([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}const IC=S.createContext(null);function SC(t){let e=S.useContext(qn).outlet;return e&&S.createElement(IC.Provider,{value:t},e)}function AC(){let{matches:t}=S.useContext(qn),e=t[t.length-1];return e?e.params:{}}function sg(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=S.useContext(qn),{pathname:i}=io(),s=JSON.stringify(Xc(r).map(o=>o.pathnameBase));return S.useMemo(()=>tg(t,JSON.parse(s),i,n==="path"),[t,s,i,n])}function RC(t,e,n){ll()||ce(!1);let{navigator:r}=S.useContext(oi),{matches:i}=S.useContext(qn),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let l=io(),u;u=l;let c=u.pathname||"/",h=a==="/"?c:c.slice(a.length)||"/",d=gs(t,{pathname:h});return DC(d&&d.map(y=>Object.assign({},y,{params:Object.assign({},o,y.params),pathname:Bn([a,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?a:Bn([a,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n)}function PC(){let t=OC(),e=uE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const CC=S.createElement(PC,null);class xC extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?S.createElement(qn.Provider,{value:this.props.routeContext},S.createElement(gE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kC(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(al);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(qn.Provider,{value:e},r)}function DC(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let s=t,o=(r=n)==null?void 0:r.errors;if(o!=null){let a=s.findIndex(l=>l.route.id&&o?.[l.route.id]);a>=0||ce(!1),s=s.slice(0,Math.min(s.length,a+1))}return s.reduceRight((a,l,u)=>{let c=l.route.id?o?.[l.route.id]:null,h=null;n&&(h=l.route.errorElement||CC);let d=e.concat(s.slice(0,u+1)),p=()=>{let y;return c?y=h:l.route.Component?y=S.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=a,S.createElement(kC,{match:l,routeContext:{outlet:a,matches:d,isDataRoute:n!=null},children:y})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?S.createElement(xC,{location:n.location,revalidation:n.revalidation,component:h,error:c,children:p(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):p()},null)}var Gf;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(Gf||(Gf={}));var zs;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(zs||(zs={}));function NC(t){let e=S.useContext(al);return e||ce(!1),e}function bC(t){let e=S.useContext(mE);return e||ce(!1),e}function MC(t){let e=S.useContext(qn);return e||ce(!1),e}function og(t){let e=MC(),n=e.matches[e.matches.length-1];return n.route.id||ce(!1),n.route.id}function VC(){return og(zs.UseRouteId)}function OC(){var t;let e=S.useContext(gE),n=bC(zs.UseRouteError),r=og(zs.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function $C(){let{router:t}=NC(Gf.UseNavigateStable),e=og(zs.UseNavigateStable),n=S.useRef(!1);return yE(()=>{n.current=!0}),S.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Qf({fromRouteId:e},s)))},[t,e])}const LC="startTransition",u_=wA[LC];function FC(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=S.useState(n.state),{v7_startTransition:o}=r||{},a=S.useCallback(h=>{o&&u_?u_(()=>s(h)):s(h)},[s,o]);S.useLayoutEffect(()=>n.subscribe(a),[n,a]);let l=S.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:h=>n.navigate(h),push:(h,d,p)=>n.navigate(h,{state:d,preventScrollReset:p?.preventScrollReset}),replace:(h,d,p)=>n.navigate(h,{replace:!0,state:d,preventScrollReset:p?.preventScrollReset})}),[n]),u=n.basename||"/",c=S.useMemo(()=>({router:n,navigator:l,static:!1,basename:u}),[n,l,u]);return S.createElement(S.Fragment,null,S.createElement(al.Provider,{value:c},S.createElement(mE.Provider,{value:i},S.createElement(BC,{basename:u,location:i.location,navigationType:i.historyAction,navigator:l},i.initialized?S.createElement(UC,{routes:n.routes,state:i}):e))),null)}function UC(t){let{routes:e,state:n}=t;return RC(e,void 0,n)}function jC(t){return SC(t.context)}function vn(t){ce(!1)}function BC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qe.Pop,navigator:s,static:o=!1}=t;ll()&&ce(!1);let a=e.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=si(r));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:p="default"}=r,y=S.useMemo(()=>{let v=Wr(u,a);return v==null?null:{location:{pathname:v,search:c,hash:h,state:d,key:p},navigationType:i}},[a,u,c,h,d,p,i]);return y==null?null:S.createElement(oi.Provider,{value:l},S.createElement(ig.Provider,{children:n,value:y}))}var c_;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(c_||(c_={}));new Promise(()=>{});function Yf(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,i)=>{if(!S.isValidElement(r))return;let s=[...e,i];if(r.type===S.Fragment){n.push.apply(n,Yf(r.props.children,s));return}r.type!==vn&&ce(!1),!r.props.index||!r.props.children||ce(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Yf(r.props.children,s)),n.push(o)}),n}function zC(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:S.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:S.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qr(){return Qr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qr.apply(this,arguments)}function vE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Cu="get",Td="application/x-www-form-urlencoded";function Jc(t){return t!=null&&typeof t.tagName=="string"}function KC(t){return Jc(t)&&t.tagName.toLowerCase()==="button"}function qC(t){return Jc(t)&&t.tagName.toLowerCase()==="form"}function HC(t){return Jc(t)&&t.tagName.toLowerCase()==="input"}function WC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QC(t,e){return t.button===0&&(!e||e==="_self")&&!WC(t)}let Yl=null;function GC(){if(Yl===null)try{new FormData(document.createElement("form"),0),Yl=!1}catch{Yl=!0}return Yl}const YC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Id(t){return t!=null&&!YC.has(t)?null:t}function XC(t,e){let n,r,i,s,o;if(qC(t)){let a=t.getAttribute("action");r=a?Wr(a,e):null,n=t.getAttribute("method")||Cu,i=Id(t.getAttribute("enctype"))||Td,s=new FormData(t)}else if(KC(t)||HC(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Wr(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Cu,i=Id(t.getAttribute("formenctype"))||Id(a.getAttribute("enctype"))||Td,s=new FormData(a,t),!GC()){let{name:u,type:c,value:h}=t;if(c==="image"){let d=u?u+".":"";s.append(d+"x","0"),s.append(d+"y","0")}else u&&s.append(u,h)}}else{if(Jc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Cu,r=null,i=Td,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}const JC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],ZC=["reloadDocument","replace","method","action","onSubmit","submit","relative","preventScrollReset"];function ex(t,e){return lC({basename:void 0,future:Qr({},void 0,{v7_prependBasename:!0}),history:DP({window:void 0}),hydrationData:tx(),routes:t,mapRouteProperties:zC}).initialize()}function tx(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Qr({},e,{errors:nx(e.errors)})),e}function nx(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ng(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){let s=new Error(i.message);s.stack="",n[r]=s}else n[r]=i;return n}const rx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xf=S.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,h=vE(e,JC),{basename:d}=S.useContext(oi),p,y=!1;if(typeof u=="string"&&ix.test(u)&&(p=u,rx))try{let f=new URL(window.location.href),_=u.startsWith("//")?new URL(f.protocol+u):new URL(u),g=Wr(_.pathname,d);_.origin===f.origin&&g!=null?u=g+_.search+_.hash:y=!0}catch{}let v=wC(u,{relative:i}),w=ax(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i});function m(f){r&&r(f),f.defaultPrevented||w(f)}return S.createElement("a",Qr({},h,{href:p||v,onClick:y||s?r:m,ref:n,target:l}))}),y$=S.forwardRef((t,e)=>{let n=ux();return S.createElement(sx,Qr({},t,{submit:n,ref:e}))}),sx=S.forwardRef((t,e)=>{let{reloadDocument:n,replace:r,method:i=Cu,action:s,onSubmit:o,submit:a,relative:l,preventScrollReset:u}=t,c=vE(t,ZC),h=i.toLowerCase()==="get"?"get":"post",d=cx(s,{relative:l}),p=y=>{if(o&&o(y),y.defaultPrevented)return;y.preventDefault();let v=y.nativeEvent.submitter,w=v?.getAttribute("formmethod")||i;a(v||y.currentTarget,{method:w,replace:r,relative:l,preventScrollReset:u})};return S.createElement("form",Qr({ref:e,method:h,action:d,onSubmit:n?o:p},c))});var Jf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(Jf||(Jf={}));var h_;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h_||(h_={}));function ox(t){let e=S.useContext(al);return e||ce(!1),e}function ax(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o}=e===void 0?{}:e,a=EC(),l=io(),u=sg(t,{relative:o});return S.useCallback(c=>{if(QC(c,n)){c.preventDefault();let h=r!==void 0?r:Hr(l)===Hr(u);a(t,{replace:h,state:i,preventScrollReset:s,relative:o})}},[l,a,u,r,i,n,t,s,o])}function lx(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}function ux(){let{router:t}=ox(Jf.UseSubmit),{basename:e}=S.useContext(oi),n=VC();return S.useCallback(function(r,i){i===void 0&&(i={}),lx();let{action:s,method:o,encType:a,formData:l,body:u}=XC(r,e);t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,fromRouteId:n})},[t,e,n])}function cx(t,e){let{relative:n}=e===void 0?{}:e,{basename:r}=S.useContext(oi),i=S.useContext(qn);i||ce(!1);let[s]=i.matches.slice(-1),o=Qr({},sg(t||".",{relative:n})),a=io();if(t==null&&(o.search=a.search,o.hash=a.hash,s.route.index)){let l=new URLSearchParams(o.search);l.delete("index"),o.search=l.toString()?"?"+l.toString():""}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Bn([r,o.pathname])),Hr(o)}const hx="modulepreload",dx=function(t){return"/"+t},d_={},Qn=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=Promise.all(n.map(a=>{if(a=dx(a),a in d_)return;d_[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":hx,l||(c.as="script",c.crossOrigin=""),c.href=a,o&&c.setAttribute("nonce",o),document.head.appendChild(c),l)return new Promise((h,d)=>{c.addEventListener("load",h),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var fx=Object.defineProperty,px=(t,e,n)=>e in t?fx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sd=(t,e,n)=>(px(t,typeof e!="symbol"?e+"":e,n),n);let mx=class{constructor(){Sd(this,"current",this.detect()),Sd(this,"handoffState","pending"),Sd(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Si=new mx,Ur=(t,e)=>{Si.isServer?S.useEffect(t,e):S.useLayoutEffect(t,e)};function ag(t){let e=S.useRef(t);return Ur(()=>{e.current=t},[t]),e}function gx(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ks(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return gx(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Ks();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function _E(){let[t]=S.useState(Ks);return S.useEffect(()=>()=>t.dispose(),[t]),t}let zt=function(t){let e=ag(t);return st.useCallback((...n)=>e.current(...n),[e])};function yx(){let[t,e]=S.useState(Si.isHandoffComplete);return t&&Si.isHandoffComplete===!1&&e(!1),S.useEffect(()=>{t!==!0&&e(!0)},[t]),S.useEffect(()=>Si.handoff(),[]),t}var f_;let lg=(f_=st.useId)!=null?f_:function(){let t=yx(),[e,n]=st.useState(t?()=>Si.nextId():null);return Ur(()=>{e===null&&n(Si.nextId())},[e]),e!=null?""+e:void 0};function ul(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ul),r}function Zc(t){return Si.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let Zf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var ep=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(ep||{}),vx=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(vx||{}),_x=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(_x||{});function wE(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Zf)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var ug=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(ug||{});function cg(t,e=0){var n;return t===((n=Zc(t))==null?void 0:n.body)?!1:ul(e,{0(){return t.matches(Zf)},1(){let r=t;for(;r!==null;){if(r.matches(Zf))return!0;r=r.parentElement}return!1}})}function EE(t){let e=Zc(t);Ks().nextFrame(()=>{e&&!cg(e.activeElement,0)&&Ex(t)})}var wx=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(wx||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ex(t){t?.focus({preventScroll:!0})}let Tx=["textarea","input"].join(",");function Ix(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,Tx))!=null?n:!1}function TE(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Sx(t,e){return Ax(wE(),e,{relativeTo:t})}function Ax(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?TE(t):t:wE(t);i.length>0&&o.length>1&&(o=o.filter(p=>!i.includes(p))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},c=0,h=o.length,d;do{if(c>=h||c+h<=0)return 0;let p=l+c;if(e&16)p=(p+h)%h;else{if(p<0)return 3;if(p>=h)return 1}d=o[p],d?.focus(u),c+=a}while(d!==s.activeElement);return e&6&&Ix(d)&&d.select(),2}function p_(t,e,n){let r=ag(e);S.useEffect(()=>{function i(s){r.current(s)}return document.addEventListener(t,i,n),()=>document.removeEventListener(t,i,n)},[t,n])}function Rx(t,e,n){let r=ag(e);S.useEffect(()=>{function i(s){r.current(s)}return window.addEventListener(t,i,n),()=>window.removeEventListener(t,i,n)},[t,n])}function Px(t,e,n=!0){let r=S.useRef(!1);S.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function i(o,a){if(!r.current||o.defaultPrevented)return;let l=a(o);if(l===null||!l.getRootNode().contains(l))return;let u=function c(h){return typeof h=="function"?c(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let c of u){if(c===null)continue;let h=c instanceof HTMLElement?c:c.current;if(h!=null&&h.contains(l)||o.composed&&o.composedPath().includes(h))return}return!cg(l,ug.Loose)&&l.tabIndex!==-1&&o.preventDefault(),e(o,l)}let s=S.useRef(null);p_("mousedown",o=>{var a,l;r.current&&(s.current=((l=(a=o.composedPath)==null?void 0:a.call(o))==null?void 0:l[0])||o.target)},!0),p_("click",o=>{s.current&&(i(o,()=>s.current),s.current=null)},!0),Rx("blur",o=>i(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function m_(t){var e;if(t.type)return t.type;let n=(e=t.as)!=null?e:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Cx(t,e){let[n,r]=S.useState(()=>m_(t));return Ur(()=>{r(m_(t))},[t.type,t.as]),Ur(()=>{n||e.current&&e.current instanceof HTMLButtonElement&&!e.current.hasAttribute("type")&&r("button")},[n,e]),n}let IE=Symbol();function _$(t,e=!0){return Object.assign(t,{[IE]:e})}function eh(...t){let e=S.useRef(t);S.useEffect(()=>{e.current=t},[t]);let n=zt(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||r?.[IE])?void 0:n}function xx({container:t,accept:e,walk:n,enabled:r=!0}){let i=S.useRef(e),s=S.useRef(n);S.useEffect(()=>{i.current=e,s.current=n},[e,n]),Ur(()=>{if(!t||!r)return;let o=Zc(t);if(!o)return;let a=i.current,l=s.current,u=Object.assign(h=>a(h),{acceptNode:a}),c=o.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,u,!1);for(;c.nextNode();)l(c.currentNode)},[t,r,i,s])}function kx(t){throw new Error("Unexpected object: "+t)}var In=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(In||{});function Dx(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1,s=(()=>{switch(t.focus){case 0:return n.findIndex(o=>!e.resolveDisabled(o));case 1:{let o=n.slice().reverse().findIndex((a,l,u)=>i!==-1&&u.length-l-1>=i?!1:!e.resolveDisabled(a));return o===-1?o:n.length-1-o}case 2:return n.findIndex((o,a)=>a<=i?!1:!e.resolveDisabled(o));case 3:{let o=n.slice().reverse().findIndex(a=>!e.resolveDisabled(a));return o===-1?o:n.length-1-o}case 4:return n.findIndex(o=>e.resolveId(o)===t.id);case 5:return null;default:kx(t)}})();return s===-1?r:s}function g_(...t){return t.filter(Boolean).join(" ")}var tp=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(tp||{}),Nx=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Nx||{});function th({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o}){let a=SE(e,t);if(s)return Xl(a,n,r,o);let l=i??0;if(l&2){let{static:u=!1,...c}=a;if(u)return Xl(c,n,r,o)}if(l&1){let{unmount:u=!0,...c}=a;return ul(u?0:1,{0(){return null},1(){return Xl({...c,hidden:!0,style:{display:"none"}},n,r,o)}})}return Xl(a,n,r,o)}function Xl(t,e={},n,r){let{as:i=n,children:s,refName:o="ref",...a}=Ad(t,["unmount","static"]),l=t.ref!==void 0?{[o]:t.ref}:{},u=typeof s=="function"?s(e):s;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(e));let c={};if(e){let h=!1,d=[];for(let[p,y]of Object.entries(e))typeof y=="boolean"&&(h=!0),y===!0&&d.push(p);h&&(c["data-headlessui-state"]=d.join(" "))}if(i===S.Fragment&&Object.keys(y_(a)).length>0){if(!S.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let h=u.props,d=typeof h?.className=="function"?(...y)=>g_(h?.className(...y),a.className):g_(h?.className,a.className),p=d?{className:d}:{};return S.cloneElement(u,Object.assign({},SE(u.props,y_(Ad(a,["ref"]))),c,l,bx(u.ref,l.ref),p))}return S.createElement(i,Object.assign({},Ad(a,["ref"]),i!==S.Fragment&&l,i!==S.Fragment&&c),u)}function bx(...t){return{ref:t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}}function SE(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||i?.nativeEvent instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function nh(t){var e;return Object.assign(S.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function y_(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Ad(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Mx(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=e?.getAttribute("disabled")==="";return r&&Vx(n)?!1:r}function Vx(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let hg=S.createContext(null);hg.displayName="OpenClosedContext";var xa=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(xa||{});function Ox(){return S.useContext(hg)}function $x({value:t,children:e}){return st.createElement(hg.Provider,{value:t},e)}var ht=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(ht||{});function v_(t){return[t.screenX,t.screenY]}function Lx(){let t=S.useRef([-1,-1]);return{wasMoved(e){let n=v_(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=v_(e)}}}function Fx(...t){return S.useMemo(()=>Zc(...t),[...t])}let __=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function w_(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?(n=i.innerText)!=null?n:"":r;return __.test(o)&&(o=o.replace(__,"")),o}function Ux(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let s=document.getElementById(i);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():w_(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return w_(t).trim()}function jx(t){let e=S.useRef(""),n=S.useRef("");return zt(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let s=Ux(r).trim().toLowerCase();return e.current=i,n.current=s,s})}var Bx=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Bx||{}),zx=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(zx||{}),Kx=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t))(Kx||{});function Rd(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=TE(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let qx={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},0(t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},2:(t,e)=>{var n;let r=Rd(t),i=Dx(e,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...t,...r,searchQuery:"",activeItemIndex:i,activationTrigger:(n=e.trigger)!=null?n:1}},3:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(o=>{var a;return((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!o.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let n=Rd(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},6:(t,e)=>{let n=Rd(t,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}}},dg=S.createContext(null);dg.displayName="MenuContext";function rh(t){let e=S.useContext(dg);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,rh),n}return e}function Hx(t,e){return ul(e.type,qx,t,e)}let Wx=S.Fragment;function Qx(t,e){let{__demoMode:n=!1,...r}=t,i=S.useReducer(Hx,{__demoMode:n,menuState:n?0:1,buttonRef:S.createRef(),itemsRef:S.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsRef:o,buttonRef:a},l]=i,u=eh(e);Px([a,o],(p,y)=>{var v;l({type:1}),cg(y,ug.Loose)||(p.preventDefault(),(v=a.current)==null||v.focus())},s===0);let c=zt(()=>{l({type:1})}),h=S.useMemo(()=>({open:s===0,close:c}),[s,c]),d={ref:u};return st.createElement(dg.Provider,{value:i},st.createElement($x,{value:ul(s,{0:xa.Open,1:xa.Closed})},th({ourProps:d,theirProps:r,slot:h,defaultTag:Wx,name:"Menu"})))}let Gx="button";function Yx(t,e){var n;let r=lg(),{id:i=`headlessui-menu-button-${r}`,...s}=t,[o,a]=rh("Menu.Button"),l=eh(o.buttonRef,e),u=_E(),c=zt(v=>{switch(v.key){case ht.Space:case ht.Enter:case ht.ArrowDown:v.preventDefault(),v.stopPropagation(),a({type:0}),u.nextFrame(()=>a({type:2,focus:In.First}));break;case ht.ArrowUp:v.preventDefault(),v.stopPropagation(),a({type:0}),u.nextFrame(()=>a({type:2,focus:In.Last}));break}}),h=zt(v=>{switch(v.key){case ht.Space:v.preventDefault();break}}),d=zt(v=>{if(Mx(v.currentTarget))return v.preventDefault();t.disabled||(o.menuState===0?(a({type:1}),u.nextFrame(()=>{var w;return(w=o.buttonRef.current)==null?void 0:w.focus({preventScroll:!0})})):(v.preventDefault(),a({type:0})))}),p=S.useMemo(()=>({open:o.menuState===0}),[o]),y={ref:l,id:i,type:Cx(t,o.buttonRef),"aria-haspopup":"menu","aria-controls":(n=o.itemsRef.current)==null?void 0:n.id,"aria-expanded":t.disabled?void 0:o.menuState===0,onKeyDown:c,onKeyUp:h,onClick:d};return th({ourProps:y,theirProps:s,slot:p,defaultTag:Gx,name:"Menu.Button"})}let Xx="div",Jx=tp.RenderStrategy|tp.Static;function Zx(t,e){var n,r;let i=lg(),{id:s=`headlessui-menu-items-${i}`,...o}=t,[a,l]=rh("Menu.Items"),u=eh(a.itemsRef,e),c=Fx(a.itemsRef),h=_E(),d=Ox(),p=d!==null?(d&xa.Open)===xa.Open:a.menuState===0;S.useEffect(()=>{let f=a.itemsRef.current;f&&a.menuState===0&&f!==c?.activeElement&&f.focus({preventScroll:!0})},[a.menuState,a.itemsRef,c]),xx({container:a.itemsRef.current,enabled:a.menuState===0,accept(f){return f.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});let y=zt(f=>{var _,g;switch(h.dispose(),f.key){case ht.Space:if(a.searchQuery!=="")return f.preventDefault(),f.stopPropagation(),l({type:3,value:f.key});case ht.Enter:if(f.preventDefault(),f.stopPropagation(),l({type:1}),a.activeItemIndex!==null){let{dataRef:E}=a.items[a.activeItemIndex];(g=(_=E.current)==null?void 0:_.domRef.current)==null||g.click()}EE(a.buttonRef.current);break;case ht.ArrowDown:return f.preventDefault(),f.stopPropagation(),l({type:2,focus:In.Next});case ht.ArrowUp:return f.preventDefault(),f.stopPropagation(),l({type:2,focus:In.Previous});case ht.Home:case ht.PageUp:return f.preventDefault(),f.stopPropagation(),l({type:2,focus:In.First});case ht.End:case ht.PageDown:return f.preventDefault(),f.stopPropagation(),l({type:2,focus:In.Last});case ht.Escape:f.preventDefault(),f.stopPropagation(),l({type:1}),Ks().nextFrame(()=>{var E;return(E=a.buttonRef.current)==null?void 0:E.focus({preventScroll:!0})});break;case ht.Tab:f.preventDefault(),f.stopPropagation(),l({type:1}),Ks().nextFrame(()=>{Sx(a.buttonRef.current,f.shiftKey?ep.Previous:ep.Next)});break;default:f.key.length===1&&(l({type:3,value:f.key}),h.setTimeout(()=>l({type:4}),350));break}}),v=zt(f=>{switch(f.key){case ht.Space:f.preventDefault();break}}),w=S.useMemo(()=>({open:a.menuState===0}),[a]),m={"aria-activedescendant":a.activeItemIndex===null||(n=a.items[a.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=a.buttonRef.current)==null?void 0:r.id,id:s,onKeyDown:y,onKeyUp:v,role:"menu",tabIndex:0,ref:u};return th({ourProps:m,theirProps:o,slot:w,defaultTag:Xx,features:Jx,visible:p,name:"Menu.Items"})}let ek=S.Fragment;function tk(t,e){let n=lg(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...s}=t,[o,a]=rh("Menu.Item"),l=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,u=S.useRef(null),c=eh(e,u);Ur(()=>{if(o.__demoMode||o.menuState!==0||!l||o.activationTrigger===0)return;let E=Ks();return E.requestAnimationFrame(()=>{var T,I;(I=(T=u.current)==null?void 0:T.scrollIntoView)==null||I.call(T,{block:"nearest"})}),E.dispose},[o.__demoMode,u,l,o.menuState,o.activationTrigger,o.activeItemIndex]);let h=jx(u),d=S.useRef({disabled:i,domRef:u,get textValue(){return h()}});Ur(()=>{d.current.disabled=i},[d,i]),Ur(()=>(a({type:5,id:r,dataRef:d}),()=>a({type:6,id:r})),[d,r]);let p=zt(()=>{a({type:1})}),y=zt(E=>{if(i)return E.preventDefault();a({type:1}),EE(o.buttonRef.current)}),v=zt(()=>{if(i)return a({type:2,focus:In.Nothing});a({type:2,focus:In.Specific,id:r})}),w=Lx(),m=zt(E=>w.update(E)),f=zt(E=>{w.wasMoved(E)&&(i||l||a({type:2,focus:In.Specific,id:r,trigger:0}))}),_=zt(E=>{w.wasMoved(E)&&(i||l&&a({type:2,focus:In.Nothing}))}),g=S.useMemo(()=>({active:l,disabled:i,close:p}),[l,i,p]);return th({ourProps:{id:r,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:y,onFocus:v,onPointerEnter:m,onMouseEnter:m,onPointerMove:f,onMouseMove:f,onPointerLeave:_,onMouseLeave:_},theirProps:s,slot:g,defaultTag:ek,name:"Menu.Item"})}let nk=nh(Qx),rk=nh(Yx),ik=nh(Zx),sk=nh(tk),Xi=Object.assign(nk,{Button:rk,Items:ik,Item:sk});function E_({width:t,strokeWidth:e=2,className:n}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-meeple ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("path",{d:"M9 20h-5a1 1 0 0 1 -1 -1c0 -2 3.378 -4.907 4 -6c-1 0 -4 -.5 -4 -2c0 -2 4 -3.5 6 -4c0 -1.5 .5 -4 3 -4s3 2.5 3 4c2 .5 6 2 6 4c0 1.5 -3 2 -4 2c.622 1.093 4 4 4 6a1 1 0 0 1 -1 1h-5c-1 0 -2 -4 -3 -4s-2 4 -3 4z"})]})}function ok({width:t=24,className:e,strokeWidth:n=2}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-menu ${e}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:n,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("line",{x1:4,y1:8,x2:20,y2:8}),F.jsx("line",{x1:4,y1:16,x2:20,y2:16})]})}function ak({width:t,className:e}){return F.jsx("svg",{width:t,height:t,viewBox:"0 0 6.35 6.35",className:`${e}`,children:F.jsxs("g",{transform:"translate(-93.728 -136.52)",style:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:.61736,stroke:"currentColor",fill:"none"},children:[F.jsx("path",{d:"m93.198 135.99h7.4083v7.4083h-7.4083z"}),F.jsx("polyline",{transform:"matrix(.30868 0 0 .30868 93.198 135.99)",points:"5 12 3 12 12 3 21 12 19 12",strokeWidth:1.75}),F.jsx("path",{d:"m94.742 139.69v2.1608a0.61736 0.61736 0 0 0 0.61736 0.61736h3.0868a0.61736 0.61736 0 0 0 0.61736-0.61736v-2.1608"}),F.jsx("g",{transform:"matrix(.18649 0 0 .18649 94.665 138.54)",style:{fill:"currentColor",strokeWidth:0},children:F.jsx("path",{d:"m9 20h-5a1 1 0 0 1-1-1c0-2 3.378-4.907 4-6-1 0-4-0.5-4-2 0-2 4-3.5 6-4 0-1.5 0.5-4 3-4s3 2.5 3 4c2 0.5 6 2 6 4 0 1.5-3 2-4 2 0.622 1.093 4 4 4 6a1 1 0 0 1-1 1h-5c-1 0-2-4-3-4s-2 4-3 4z"})})]})})}function lk({width:t=24,strokeWidth:e=2,className:n=""}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-trophy ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"}),F.jsx("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"})]})}function uk({width:t=24,className:e,strokeWidth:n=2}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-send ${e}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:n,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("line",{x1:10,y1:14,x2:21,y2:3}),F.jsx("path",{d:"M21 3l-6.5 18a0.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a0.55 .55 0 0 1 0 -1l18 -6.5"})]})}function ck({width:t=24,className:e,strokeWidth:n=2}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-settings ${e}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:n,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),F.jsx("circle",{cx:12,cy:12,r:3})]})}function hk({width:t=24,strokeWidth:e=2,className:n}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-info-circle ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),F.jsx("path",{d:"M12 8l.01 0"}),F.jsx("path",{d:"M11 12l1 0l0 4l1 0"})]})}function dk({width:t=24,strokeWidth:e=2,className:n}){return F.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-sign-right ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[F.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),F.jsx("path",{d:"M8 21h4"}),F.jsx("path",{d:"M10 21v-10"}),F.jsx("path",{d:"M10 6v-3"}),F.jsx("path",{d:"M6 6h10l2 2.5l-2 2.5h-10z"})]})}const Pe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,We=Object.keys,Ct=Array.isArray;function Lt(t,e){return typeof e!="object"||We(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||Pe.Promise||(Pe.Promise=Promise);const ka=Object.getPrototypeOf,fk={}.hasOwnProperty;function tn(t,e){return fk.call(t,e)}function qs(t,e){typeof e=="function"&&(e=e(ka(t))),(typeof Reflect>"u"?We:Reflect.ownKeys)(e).forEach(n=>{sr(t,n,e[n])})}const AE=Object.defineProperty;function sr(t,e,n,r){AE(t,e,Lt(n&&tn(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Rs(t){return{from:function(e){return t.prototype=Object.create(e.prototype),sr(t.prototype,"constructor",t),{extend:qs.bind(null,t.prototype)}}}}const pk=Object.getOwnPropertyDescriptor;function fg(t,e){let n;return pk(t,e)||(n=ka(t))&&fg(n,e)}const mk=[].slice;function cc(t,e,n){return mk.call(t,e,n)}function RE(t,e){return e(t)}function Fo(t){if(!t)throw new Error("Assertion Failed")}function PE(t){Pe.setImmediate?setImmediate(t):setTimeout(t,0)}function CE(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function or(t,e){if(tn(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=or(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:or(a,e.substr(o+1))}}function Pn(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Fo(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Pn(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?Ct(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&tn(t,o)||(l=t[o]={}),Pn(l,a,n)}}else n===void 0?Ct(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function xE(t){var e={};for(var n in t)tn(t,n)&&(e[n]=t[n]);return e}const gk=[].concat;function kE(t){return gk.apply([],t)}const DE="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(kE([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Pe[t]),yk=DE.map(t=>Pe[t]);CE(DE,t=>[t,!0]);let Ar=null;function cl(t){Ar=typeof WeakMap<"u"&&new WeakMap;const e=np(t);return Ar=null,e}function np(t){if(!t||typeof t!="object")return t;let e=Ar&&Ar.get(t);if(e)return e;if(Ct(t)){e=[],Ar&&Ar.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(np(t[n]))}else if(yk.indexOf(t.constructor)>=0)e=t;else{const s=ka(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Ar&&Ar.set(t,e),t)tn(t,i)&&(e[i]=np(t[i]))}return e}const{toString:vk}={};function rp(t){return vk.call(t).slice(8,-1)}const ip=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_k=typeof ip=="symbol"?function(t){var e;return t!=null&&(e=t[ip])&&e.apply(t)}:function(){return null},ts={};function Zn(t){var e,n,r,i;if(arguments.length===1){if(Ct(t))return t.slice();if(this===ts&&typeof t=="string")return[t];if(i=_k(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const pg=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Hn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function NE(t,e){Hn=t,bE=e}var bE=()=>!0;const wk=!new Error("").stack;function zi(){if(wk)try{throw zi.arguments,new Error}catch(t){return t}return new Error}function sp(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(bE).map(r=>`
`+r).join("")):""}var ME=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mg=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ME),Ek={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ps(t,e){this._e=zi(),this.name=t,this.message=e}function VE(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function hc(t,e,n,r){this._e=zi(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=VE(t,e)}function na(t,e){this._e=zi(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=VE(t,e)}Rs(Ps).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sp(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Rs(hc).from(Ps),Rs(na).from(Ps);var gg=mg.reduce((t,e)=>(t[e]=e+"Error",t),{});const Tk=Ps;var ee=mg.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=zi(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Ek[e]||n,this.inner=null)}return Rs(r).from(Tk),t[e]=r,t},{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var T_=ME.reduce((t,e)=>(t[e+"Error"]=ee[e],t),{}),xu=mg.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=ee[e]),t),{});function Te(){}function Da(t){return t}function Ik(t,e){return t==null||t===Da?e:function(n){return e(t(n))}}function Mi(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Sk(t,e){return t===Te?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Mi(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Mi(i,this.onerror):i),s!==void 0?s:n}}function Ak(t,e){return t===Te?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Mi(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Mi(r,this.onerror):r)}}function Rk(t,e){return t===Te?e:function(n){var r=t.apply(this,arguments);Lt(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Mi(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Mi(s,this.onerror):s),r===void 0?o===void 0?void 0:o:Lt(r,o)}}function Pk(t,e){return t===Te?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function yg(t,e){return t===Te?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}xu.ModifyError=hc,xu.DexieError=Ps,xu.BulkError=na;var Na={};const OE=100,[op,dc,ap]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,ka(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,ka(e),t]})(),$E=dc&&dc.then,ku=op&&op.constructor,vg=!!ap;var lp=!1,Ck=ap?()=>{ap.then(Jl)}:Pe.setImmediate?setImmediate.bind(null,Jl):Pe.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Jl(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Jl,0)},ra=function(t,e){Uo.push([t,e]),fc&&(Ck(),fc=!1)},up=!0,fc=!0,Ai=[],Du=[],cp=null,hp=Da,Cs={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:A_,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{A_(t[0],t[1])}catch{}})}},X=Cs,Uo=[],Ri=0,Nu=[];function H(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Te,this._lib=!1;var e=this._PSD=X;if(Hn&&(this._stackHolder=zi(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Na)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&fp(this,this._value))}this._state=null,this._value=null,++e.ref,FE(this,t)}const dp={get:function(){var t=X,e=pc;function n(r,i){var s=!t.global&&(t!==X||e!==pc);const o=s&&!fr();var a=new H((l,u)=>{_g(this,new LE(mc(r,t,s,o),mc(i,t,s,o),l,u,t))});return Hn&&BE(a,this),a}return n.prototype=Na,n},set:function(t){sr(this,"then",t&&t.prototype===Na?dp:{get:function(){return t},set:dp.set})}};function LE(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function FE(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&hl();n&&typeof n.then=="function"?FE(t,(i,s)=>{n instanceof H?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,UE(t)),r&&dl()}},fp.bind(null,t))}catch(n){fp(t,n)}}function fp(t,e){if(Du.push(e),t._state===null){var n=t._lib&&hl();e=hp(e),t._state=!1,t._value=e,Hn&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch{}}(()=>{var r=fg(e,"stack");e._promise=t,sr(e,"stack",{get:()=>lp?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Ai.some(i=>i._value===r._value)||Ai.push(r)}(t),UE(t),n&&dl()}}function UE(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)_g(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ri===0&&(++Ri,ra(()=>{--Ri==0&&wg()},[]))}function _g(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ri,ra(xk,[n,t,e])}else t._listeners.push(e)}function xk(t,e,n){try{cp=e;var r,i=e._value;e._state?r=t(i):(Du.length&&(Du=[]),r=t(i),Du.indexOf(i)===-1&&function(s){for(var o=Ai.length;o;)if(Ai[--o]._value===s._value)return void Ai.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{cp=null,--Ri==0&&wg(),--n.psd.ref||n.psd.finalize()}}function jE(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=sp(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return Hn&&((r=sp(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&jE(t._prev,e,n)),e}function BE(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Jl(){hl()&&dl()}function hl(){var t=up;return up=!1,fc=!1,t}function dl(){var t,e,n;do for(;Uo.length>0;)for(t=Uo,Uo=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(Uo.length>0);up=!0,fc=!0}function wg(){var t=Ai;Ai=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Nu.slice(0),n=e.length;n;)e[--n]()}function Zl(t){return new H(Na,!1,t)}function be(t,e){var n=X;return function(){var r=hl(),i=X;try{return Yr(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Yr(i,!1),r&&dl()}}}qs(H.prototype,{then:dp,_then:function(t,e){_g(this,new LE(null,null,t,e,X))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Zl(r)):this.then(null,r=>r&&r.name===e?n(r):Zl(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Zl(e)))},stack:{get:function(){if(this._stack)return this._stack;try{lp=!0;var t=jE(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{lp=!1}}},timeout:function(t,e){return t<1/0?new H((n,r)=>{var i=setTimeout(()=>r(new ee.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&sr(H.prototype,Symbol.toStringTag,"Dexie.Promise"),Cs.env=zE(),qs(H,{all:function(){var t=Zn.apply(null,arguments).map(eu);return new H(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>H.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof H)return t;if(t&&typeof t.then=="function")return new H((n,r)=>{t.then(n,r)});var e=new H(Na,!0,t);return BE(e,cp),e},reject:Zl,race:function(){var t=Zn.apply(null,arguments).map(eu);return new H((e,n)=>{t.map(r=>H.resolve(r).then(e,n))})},PSD:{get:()=>X,set:t=>X=t},totalEchoes:{get:()=>pc},newPSD:Gr,usePSD:oo,scheduler:{get:()=>ra,set:t=>{ra=t}},rejectionMapper:{get:()=>hp,set:t=>{hp=t}},follow:(t,e)=>new H((n,r)=>Gr((i,s)=>{var o=X;o.unhandleds=[],o.onunhandled=s,o.finalize=Mi(function(){(function(a){function l(){a(),Nu.splice(Nu.indexOf(l),1)}Nu.push(l),++Ri,ra(()=>{--Ri==0&&wg()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),ku&&(ku.allSettled&&sr(H,"allSettled",function(){const t=Zn.apply(null,arguments).map(eu);return new H(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>H.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),ku.any&&typeof AggregateError<"u"&&sr(H,"any",function(){const t=Zn.apply(null,arguments).map(eu);return new H((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>H.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const Rt={awaits:0,echoes:0,id:0};var kk=0,bu=[],Pd=0,pc=0,Dk=0;function Gr(t,e,n,r){var i=X,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Dk;var o=Cs.env;s.env=vg?{Promise:H,PromiseProp:{value:H,configurable:!0,writable:!0},all:H.all,race:H.race,allSettled:H.allSettled,any:H.any,resolve:H.resolve,reject:H.reject,nthen:I_(o.nthen,s),gthen:I_(o.gthen,s)}:{},e&&Lt(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=oo(s,t,n,r);return s.ref===0&&s.finalize(),a}function so(){return Rt.id||(Rt.id=++kk),++Rt.awaits,Rt.echoes+=OE,Rt.id}function fr(){return!!Rt.awaits&&(--Rt.awaits==0&&(Rt.id=0),Rt.echoes=Rt.awaits*OE,!0)}function eu(t){return Rt.echoes&&t&&t.constructor===ku?(so(),t.then(e=>(fr(),e),e=>(fr(),Je(e)))):t}function Nk(t){++pc,Rt.echoes&&--Rt.echoes!=0||(Rt.echoes=Rt.id=0),bu.push(X),Yr(t,!0)}function bk(){var t=bu[bu.length-1];bu.pop(),Yr(t,!1)}function Yr(t,e){var n=X;if((e?!Rt.echoes||Pd++&&t===X:!Pd||--Pd&&t===X)||KE(e?Nk.bind(null,t):bk),t!==X&&(X=t,n===Cs&&(Cs.env=zE()),vg)){var r=Cs.env.Promise,i=t.env;dc.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(Pe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function zE(){var t=Pe.Promise;return vg?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Pe,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:dc.then,gthen:t.prototype.then}:{}}function oo(t,e,n,r,i){var s=X;try{return Yr(t,!0),e(n,r,i)}finally{Yr(s,!1)}}function KE(t){$E.call(op,t)}function mc(t,e,n,r){return typeof t!="function"?t:function(){var i=X;n&&so(),Yr(e,!0);try{return t.apply(this,arguments)}finally{Yr(i,!1),r&&KE(fr)}}}function I_(t,e){return function(n,r){return t.call(this,mc(n,e),mc(r,e))}}(""+$E).indexOf("[native code]")===-1&&(so=fr=Te);const S_="unhandledrejection";function A_(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(Pe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(S_,!0,!0),Lt(r,i)):Pe.CustomEvent&&Lt(r=new CustomEvent(S_,{detail:i}),i),r&&Pe.dispatchEvent&&(dispatchEvent(r),!Pe.PromiseRejectionEvent&&Pe.onunhandledrejection))try{Pe.onunhandledrejection(r)}catch{}Hn&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var Je=H.reject;function pp(t,e,n,r){if(t.idbdb&&(t._state.openComplete||X.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===gg.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>pp(t,e,n,r))):Je(s)}return i._promise(e,(s,o)=>Gr(()=>(X.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return Je(new ee.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return Je(new ee.DatabaseClosed);t.open().catch(Te)}return t._state.dbReadyPromise.then(()=>pp(t,e,n,r))}const R_="3.2.4",vi="￿",mp=-1/0,Gn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",qE="String expected.",ia=[],ih=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Mk=ih,Vk=ih,HE=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),sh="__dbnames",Cd="readonly",xd="readwrite";function Vi(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const WE={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function tu(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=cl(e))[t],e)}class Ok{_trans(e,n,r){const i=this._tx||X.trans,s=this.name;function o(l,u,c){if(!c.schema[s])throw new ee.NotFound("Table "+s+" not part of transaction");return n(c.idbtrans,c)}const a=hl();try{return i&&i.db===this.db?i===X.trans?i._promise(e,o,r):Gr(()=>i._promise(e,o,r),{trans:i,transless:X.transless||X}):pp(this.db,e,[this.name],o)}finally{a&&dl()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(Ct(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=We(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(u=>u.compound&&n.every(c=>u.keyPath.indexOf(c)>=0)&&u.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==vi)return this.where(r.name).equals(r.keyPath.map(u=>e[u]));!r&&Hn&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(u,c){try{return s.cmp(u,c)===0}catch{return!1}}const[a,l]=n.reduce(([u,c],h)=>{const d=i[h],p=e[h];return[u||d,u||!d?Vi(c,d&&d.multi?y=>{const v=or(y,h);return Ct(v)&&v.some(w=>o(p,w))}:y=>o(p,or(y,h))):c]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,Ct(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(tn(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Lt(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=tu(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?H.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Pn(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||Ct(e))return this.where(":id").equals(e).modify(n);{const r=or(e,this.schema.primKey.keyPath);if(r===void 0)return Je(new ee.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?We(n).forEach(i=>{Pn(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=tu(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?H.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Pn(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?H.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:WE})).then(e=>e.numFailures?H.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&a?e.map(tu(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:c,wantResults:s}).then(({numFailures:h,results:d,lastResult:p,failures:y})=>{if(h===0)return s?d:p;throw new na(`${this.name}.bulkAdd(): ${h} of ${u} operations failed`,y)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const u=e.length;let c=l&&a?e.map(tu(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:c,wantResults:s}).then(({numFailures:h,results:d,lastResult:p,failures:y})=>{if(h===0)return s?d:p;throw new na(`${this.name}.bulkPut(): ${h} of ${u} operations failed`,y)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new na(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function sa(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,u=new Array(l-1);--l;)u[l-1]=arguments[l];return e[o].subscribe.apply(null,u),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var u;a||(a=Pk),l||(l=Te);var c={subscribers:[],fire:l,subscribe:function(h){c.subscribers.indexOf(h)===-1&&(c.subscribers.push(h),c.fire=a(c.fire,h))},unsubscribe:function(h){c.subscribers=c.subscribers.filter(function(d){return d!==h}),c.fire=c.subscribers.reduce(a,l)}};return e[o]=n[o]=c,c}We(u=o).forEach(function(h){var d=u[h];if(Ct(d))s(h,u[h][0],u[h][1]);else{if(d!=="asap")throw new ee.InvalidArgument("Invalid event config");var p=s(h,Da,function(){for(var y=arguments.length,v=new Array(y);y--;)v[y]=arguments[y];p.subscribers.forEach(function(w){PE(function(){w.apply(null,v)})})})}})}}function No(t,e){return Rs(e).from({prototype:t}),e}function Ji(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function kd(t,e){t.filter=Vi(t.filter,e)}function Dd(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Vi(r(),e()):e,t.justLimit=n&&!r}function Mu(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new ee.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function P_(t,e,n){const r=Mu(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function nu(t,e,n,r){const i=t.replayFilter?Vi(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,u)=>{if(!i||i(l,u,d=>l.stop(d),d=>l.fail(d))){var c=l.primaryKey,h=""+c;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(c)),tn(s,h)||(s[h]=!0,e(a,l,u))}};return Promise.all([t.or._iterate(o,n),C_(P_(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return C_(P_(t,r,n),Vi(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function C_(t,e,n,r){var i=be(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=Te},a=>{s.fail(a),o=Te})||i(s.value,s,a=>o=a),o()})})}function Vt(t,e){try{const n=x_(t),r=x_(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u)if(i[u]!==s[u])return i[u]<s[u]?-1:1;return o===a?0:o<a?-1:1}(k_(t),k_(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let u=0;u<l;++u){const c=Vt(i[u],s[u]);if(c!==0)return c}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function x_(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=rp(t);return n==="ArrayBuffer"?"binary":n}function k_(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class $k{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,Je.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,Je.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Vi(n.algorithm,e)}_iterate(e,n){return nu(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Lt(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>nu(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(Ji(r,!0))return i.count({trans:n,query:{index:Mu(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return nu(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(u,c){return c?o(u[r[c]],c-1):u[i]}var a=this._ctx.dir==="next"?1:-1;function l(u,c){var h=o(u,s),d=o(c,s);return h<d?-a:h>d?a:0}return this.toArray(function(u){return u.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Ji(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Mu(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return nu(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,Ji(n)?Dd(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):Dd(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Dd(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return kd(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return kd(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=Vi(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Ji(n,!0)&&n.limit>0)return this._read(i=>{var s=Mu(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return kd(this._ctx,function(i){var s=i.primaryKey.toString(),o=tn(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=We(e),o=s.length;i=function(v){for(var w=!1,m=0;m<o;++m){var f=s[m],_=e[f];or(v,f)!==_&&(Pn(v,f,_),w=!0)}return w}}const a=n.table.core,{outbound:l,extractKey:u}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const p=[],y=(v,w)=>{const{failures:m,numFailures:f}=w;d+=v-f;for(let _ of We(m))h.push(m[_])};return this.clone().primaryKeys().then(v=>{const w=m=>{const f=Math.min(c,v.length-m);return a.getMany({trans:r,keys:v.slice(m,m+f),cache:"immutable"}).then(_=>{const g=[],E=[],T=l?[]:null,I=[];for(let P=0;P<f;++P){const D=_[P],J={value:cl(D),primKey:v[m+P]};i.call(J,J.value,J)!==!1&&(J.value==null?I.push(v[m+P]):l||Vt(u(D),u(J.value))===0?(E.push(J.value),l&&T.push(v[m+P])):(I.push(v[m+P]),g.push(J.value)))}const k=Ji(n)&&n.limit===1/0&&(typeof e!="function"||e===Nd)&&{index:n.index,range:n.range};return Promise.resolve(g.length>0&&a.mutate({trans:r,type:"add",values:g}).then(P=>{for(let D in P.failures)I.splice(parseInt(D),1);y(g.length,P)})).then(()=>(E.length>0||k&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:T,values:E,criteria:k,changeSpec:typeof e!="function"&&e}).then(P=>y(E.length,P))).then(()=>(I.length>0||k&&e===Nd)&&a.mutate({trans:r,type:"delete",keys:I,criteria:k}).then(P=>y(I.length,P))).then(()=>v.length>m+f&&w(m+c))})};return w(0).then(()=>{if(h.length>0)throw new hc("Error modifying one or more objects",h,d,p);return v.length})})})}delete(){var e=this._ctx,n=e.range;return Ji(e)&&(e.isPrimKey&&!Vk||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:u,numFailures:c})=>{if(c)throw new hc("Could not delete some values",Object.keys(a).map(h=>a[h]),o-c);return o-c}))}):this.modify(Nd)}}const Nd=(t,e)=>e.value=null;function Lk(t,e){return t<e?-1:t===e?0:1}function Fk(t,e){return t>e?-1:t===e?0:1}function Yt(t,e,n){var r=t instanceof GE?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Zi(t){return new t.Collection(t,()=>QE("")).limit(0)}function Uk(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var u=e[l];if(u!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],u)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function ru(t,e,n,r){var i,s,o,a,l,u,c,h=n.length;if(!n.every(v=>typeof v=="string"))return Yt(t,qE);function d(v){i=function(m){return m==="next"?f=>f.toUpperCase():f=>f.toLowerCase()}(v),s=function(m){return m==="next"?f=>f.toLowerCase():f=>f.toUpperCase()}(v),o=v==="next"?Lk:Fk;var w=n.map(function(m){return{lower:s(m),upper:i(m)}}).sort(function(m,f){return o(m.lower,f.lower)});a=w.map(function(m){return m.upper}),l=w.map(function(m){return m.lower}),u=v,c=v==="next"?"":r}d("next");var p=new t.Collection(t,()=>Tr(a[0],l[h-1]+r));p._ondirectionchange=function(v){d(v)};var y=0;return p._addAlgorithm(function(v,w,m){var f=v.key;if(typeof f!="string")return!1;var _=s(f);if(e(_,l,y))return!0;for(var g=null,E=y;E<h;++E){var T=Uk(f,_,a[E],l[E],o,u);T===null&&g===null?y=E+1:(g===null||o(g,T)>0)&&(g=T)}return w(g!==null?function(){v.continue(g+c)}:m),!1}),p}function Tr(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function QE(t){return{type:1,lower:t,upper:t}}class GE{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?Zi(this):new this.Collection(this,()=>Tr(e,n,!r,!i))}catch{return Yt(this,Gn)}}equals(e){return e==null?Yt(this,Gn):new this.Collection(this,()=>QE(e))}above(e){return e==null?Yt(this,Gn):new this.Collection(this,()=>Tr(e,void 0,!0))}aboveOrEqual(e){return e==null?Yt(this,Gn):new this.Collection(this,()=>Tr(e,void 0,!1))}below(e){return e==null?Yt(this,Gn):new this.Collection(this,()=>Tr(void 0,e,!1,!0))}belowOrEqual(e){return e==null?Yt(this,Gn):new this.Collection(this,()=>Tr(void 0,e))}startsWith(e){return typeof e!="string"?Yt(this,qE):this.between(e,e+vi,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):ru(this,(n,r)=>n.indexOf(r[0])===0,[e],vi)}equalsIgnoreCase(e){return ru(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Zn.apply(ts,arguments);return e.length===0?Zi(this):ru(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Zn.apply(ts,arguments);return e.length===0?Zi(this):ru(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,vi)}anyOf(){const e=Zn.apply(ts,arguments);let n=this._cmp;try{e.sort(n)}catch{return Yt(this,Gn)}if(e.length===0)return Zi(this);const r=new this.Collection(this,()=>Tr(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[mp,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Zn.apply(ts,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Yt(this,Gn)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[mp,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return Zi(this);if(!e.every(f=>f[0]!==void 0&&f[1]!==void 0&&i(f[0],f[1])<=0))return Yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const l=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;let c,h=i;function d(f,_){return h(f[0],_[0])}try{c=e.reduce(function(f,_){let g=0,E=f.length;for(;g<E;++g){const T=f[g];if(r(_[0],T[1])<0&&r(_[1],T[0])>0){T[0]=o(T[0],_[0]),T[1]=a(T[1],_[1]);break}}return g===E&&f.push(_),f},[]),c.sort(d)}catch{return Yt(this,Gn)}let p=0;const y=u?f=>i(f,c[p][1])>0:f=>i(f,c[p][1])>=0,v=l?f=>s(f,c[p][0])>0:f=>s(f,c[p][0])>=0;let w=y;const m=new this.Collection(this,()=>Tr(c[0][0],c[c.length-1][1],!l,!u));return m._ondirectionchange=f=>{f==="next"?(w=y,h=i):(w=v,h=s),c.sort(d)},m._addAlgorithm((f,_,g)=>{for(var E=f.key;w(E);)if(++p,p===c.length)return _(g),!1;return!!function(T){return!y(T)&&!v(T)}(E)||(this._cmp(E,c[p][1])===0||this._cmp(E,c[p][0])===0||_(()=>{h===i?f.continue(c[p][0]):f.continue(c[p][1])}),!1)}),m}startsWithAnyOf(){const e=Zn.apply(ts,arguments);return e.every(n=>typeof n=="string")?e.length===0?Zi(this):this.inAnyRange(e.map(n=>[n,n+vi])):Yt(this,"startsWithAnyOf() only works with strings")}}function Vn(t){return be(function(e){return ba(e),t(e.target.error),!1})}function ba(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Ma="storagemutated",Cr="x-storagemutated-1",Xr=sa(null,Ma);class jk{_lock(){return Fo(!X.global),++this._reculock,this._reculock!==1||X.global||(X.lockOwnerFor=this),this}_unlock(){if(Fo(!X.global),--this._reculock==0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{oo(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&X.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Fo(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(r);case"MissingAPIError":throw new ee.MissingAPI(r.message,r);default:throw new ee.OpenFailed(r)}if(!this.active)throw new ee.TransactionInactive;return Fo(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=be(i=>{ba(i),this._reject(e.error)}),e.onabort=be(i=>{ba(i),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=be(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Xr.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return Je(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new ee.TransactionInactive);if(this._locked())return new H((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},X])});if(r)return Gr(()=>{var s=new H((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new H((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=H.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new H((o,a)=>{r.then(l=>n._waitingQueue.push(be(o.bind(null,l))),l=>n._waitingQueue.push(be(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(tn(n,e))return n[e];const r=this.schema[e];if(!r)throw new ee.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function gp(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+YE(e)}}function YE(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function XE(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:CE(n,r=>[r.name,r])}}let Va=t=>{try{return t.only([[]]),Va=()=>[[]],[[]]}catch{return Va=()=>vi,vi}};function yp(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>or(r,e)}(t):e=>or(e,t)}function D_(t){return[].slice.call(t)}let Bk=0;function oa(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function zk(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:c,lowerOpen:h,upperOpen:d}=l;return u===void 0?c===void 0?null:e.upperBound(c,!!d):c===void 0?e.lowerBound(u,!!h):e.bound(u,c,!!h,!!d)}const{schema:i,hasGetAll:s}=function(l,u){const c=D_(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(h=>u.objectStore(h)).map(h=>{const{keyPath:d,autoIncrement:p}=h,y=Ct(d),v=d==null,w={},m={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v,compound:y,keyPath:d,autoIncrement:p,unique:!0,extractKey:yp(d)},indexes:D_(h.indexNames).map(f=>h.index(f)).map(f=>{const{name:_,unique:g,multiEntry:E,keyPath:T}=f,I={name:_,compound:Ct(T),keyPath:T,unique:g,multiEntry:E,extractKey:yp(T)};return w[oa(T)]=I,I}),getIndexByKeyPath:f=>w[oa(f)]};return w[":id"]=m.primaryKey,d!=null&&(w[oa(d)]=m.primaryKey),m})},hasGetAll:c.length>0&&"getAll"in u.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(u){const c=u.name;return{name:c,schema:u,mutate:function({trans:h,type:d,keys:p,values:y,range:v}){return new Promise((w,m)=>{w=be(w);const f=h.objectStore(c),_=f.keyPath==null,g=d==="put"||d==="add";if(!g&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:E}=p||y||{length:1};if(p&&y&&p.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(E===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});let T;const I=[],k=[];let P=0;const D=te=>{++P,ba(te)};if(d==="deleteRange"){if(v.type===4)return w({numFailures:P,failures:k,results:[],lastResult:void 0});v.type===3?I.push(T=f.clear()):I.push(T=f.delete(r(v)))}else{const[te,z]=g?_?[y,p]:[y,null]:[p,null];if(g)for(let M=0;M<E;++M)I.push(T=z&&z[M]!==void 0?f[d](te[M],z[M]):f[d](te[M])),T.onerror=D;else for(let M=0;M<E;++M)I.push(T=f[d](te[M])),T.onerror=D}const J=te=>{const z=te.target.result;I.forEach((M,L)=>M.error!=null&&(k[L]=M.error)),w({numFailures:P,failures:k,results:d==="delete"?p:I.map(M=>M.result),lastResult:z})};T.onerror=te=>{D(te),J(te)},T.onsuccess=J})},getMany:({trans:h,keys:d})=>new Promise((p,y)=>{p=be(p);const v=h.objectStore(c),w=d.length,m=new Array(w);let f,_=0,g=0;const E=I=>{const k=I.target;m[k._pos]=k.result,++g===_&&p(m)},T=Vn(y);for(let I=0;I<w;++I)d[I]!=null&&(f=v.get(d[I]),f._pos=I,f.onsuccess=E,f.onerror=T,++_);_===0&&p(m)}),get:({trans:h,key:d})=>new Promise((p,y)=>{p=be(p);const v=h.objectStore(c).get(d);v.onsuccess=w=>p(w.target.result),v.onerror=Vn(y)}),query:function(h){return d=>new Promise((p,y)=>{p=be(p);const{trans:v,values:w,limit:m,query:f}=d,_=m===1/0?void 0:m,{index:g,range:E}=f,T=v.objectStore(c),I=g.isPrimaryKey?T:T.index(g.name),k=r(E);if(m===0)return p({result:[]});if(h){const P=w?I.getAll(k,_):I.getAllKeys(k,_);P.onsuccess=D=>p({result:D.target.result}),P.onerror=Vn(y)}else{let P=0;const D=w||!("openKeyCursor"in I)?I.openCursor(k):I.openKeyCursor(k),J=[];D.onsuccess=te=>{const z=D.result;return z?(J.push(w?z.value:z.primaryKey),++P===m?p({result:J}):void z.continue()):p({result:J})},D.onerror=Vn(y)}})}(s),openCursor:function({trans:h,values:d,query:p,reverse:y,unique:v}){return new Promise((w,m)=>{w=be(w);const{index:f,range:_}=p,g=h.objectStore(c),E=f.isPrimaryKey?g:g.index(f.name),T=y?v?"prevunique":"prev":v?"nextunique":"next",I=d||!("openKeyCursor"in E)?E.openCursor(r(_),T):E.openKeyCursor(r(_),T);I.onerror=Vn(m),I.onsuccess=be(k=>{const P=I.result;if(!P)return void w(null);P.___id=++Bk,P.done=!1;const D=P.continue.bind(P);let J=P.continuePrimaryKey;J&&(J=J.bind(P));const te=P.advance.bind(P),z=()=>{throw new Error("Cursor not stopped")};P.trans=h,P.stop=P.continue=P.continuePrimaryKey=P.advance=()=>{throw new Error("Cursor not started")},P.fail=be(m),P.next=function(){let M=1;return this.start(()=>M--?this.continue():this.stop()).then(()=>this)},P.start=M=>{const L=new Promise((O,C)=>{O=be(O),I.onerror=Vn(C),P.fail=C,P.stop=b=>{P.stop=P.continue=P.continuePrimaryKey=P.advance=z,O(b)}}),B=()=>{if(I.result)try{M()}catch(O){P.fail(O)}else P.done=!0,P.start=()=>{throw new Error("Cursor behind last entry")},P.stop()};return I.onsuccess=be(O=>{I.onsuccess=B,B()}),P.continue=D,P.continuePrimaryKey=J,P.advance=te,B(),L},w(P)},m)})},count({query:h,trans:d}){const{index:p,range:y}=h;return new Promise((v,w)=>{const m=d.objectStore(c),f=p.isPrimaryKey?m:m.index(p.name),_=r(y),g=_?f.count(_):f.count();g.onsuccess=be(E=>v(E.target.result)),g.onerror=Vn(w)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Va(e),schema:i}}function vp({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(c,h){return h.reduce((d,{create:p})=>({...d,...p(d)}),c)}(zk(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function gc({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=fg(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?sr(o,i,{get(){return this.table(i)},set(l){AE(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function _p({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Kk(t,e){return t._cfg.version-e._cfg.version}function qk(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=X.transless||X;Gr(()=>{X.trans=s,X.transless=a,e===0?(We(i).forEach(l=>{bd(n,l,i[l].primKey,i[l].indexes)}),vp(t,n),H.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},u,c,h){const d=[],p=l._versions;let y=l._dbSchema=Ep(l,l.idbdb,h),v=!1;const w=p.filter(f=>f._cfg.version>=u);function m(){return d.length?H.resolve(d.shift()(c.idbtrans)).then(m):H.resolve()}return w.forEach(f=>{d.push(()=>{const _=y,g=f._cfg.dbschema;Tp(l,_,h),Tp(l,g,h),y=l._dbSchema=g;const E=JE(_,g);E.add.forEach(I=>{bd(h,I[0],I[1].primKey,I[1].indexes)}),E.change.forEach(I=>{if(I.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const k=h.objectStore(I.name);I.add.forEach(P=>wp(k,P)),I.change.forEach(P=>{k.deleteIndex(P.name),wp(k,P)}),I.del.forEach(P=>k.deleteIndex(P))}});const T=f._cfg.contentUpgrade;if(T&&f._cfg.version>u){vp(l,h),c._memoizedTables={},v=!0;let I=xE(g);E.del.forEach(J=>{I[J]=_[J]}),_p(l,[l.Transaction.prototype]),gc(l,[l.Transaction.prototype],We(I),I),c.schema=I;const k=pg(T);let P;k&&so();const D=H.follow(()=>{if(P=T(c),P&&k){var J=fr.bind(null,null);P.then(J,J)}});return P&&typeof P.then=="function"?H.resolve(P):D.then(()=>P)}}),d.push(_=>{(!v||!Mk)&&function(g,E){[].slice.call(E.db.objectStoreNames).forEach(T=>g[T]==null&&E.db.deleteObjectStore(T))}(f._cfg.dbschema,_),_p(l,[l.Transaction.prototype]),gc(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),m().then(()=>{var f,_;_=h,We(f=y).forEach(g=>{_.db.objectStoreNames.contains(g)||bd(_,g,f[g].primKey,f[g].indexes)})})}(t,e,s,n).catch(o)})}function JE(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!ih)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let u;for(u in a)l[u]||o.del.push(u);for(u in l){const c=a[u],h=l[u];c?c.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function bd(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>wp(i,s)),i}function wp(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Ep(t,e,n){const r={};return cc(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=gp(YE(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let c=0;c<s.indexNames.length;++c){const h=s.index(s.indexNames[c]);o=h.keyPath;var u=gp(h.name,o,!!h.unique,!!h.multiEntry,!1,o&&typeof o!="string",!1);l.push(u)}r[i]=XE(i,a,l)}),r}function Tp({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],u=o.index(l).keyPath,c=typeof u=="string"?u:"["+cc(u).join("+")+"]";if(e[s]){const h=e[s].idxByName[c];h&&(h.name=l,delete e[s].idxByName[c],e[s].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Pe.WorkerGlobalScope&&Pe instanceof Pe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Hk{_parseStoresSpec(e,n){We(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return gp(l,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Ct(u),a===0)}),s=i.shift();if(s.multi)throw new ee.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")}),n[r]=XE(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Lt(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{Lt(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,_p(n,[n._allTables,n,n.Transaction.prototype]),gc(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],We(s),s),n._storeNames=We(s),this}upgrade(e){return this._cfg.contentUpgrade=yg(this._cfg.contentUpgrade||Te,e),this}}function Eg(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Pi(sh,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Tg(t){return t&&typeof t.databases=="function"}function Ip(t){return Gr(function(){return X.letThrough=!0,t()})}function Wk(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Qk(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?Je(e.dbOpenError):t);Hn&&(e.openCanceller._stackHolder=zi()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return H.race([r,(typeof navigator>"u"?H.resolve():Wk()).then(()=>new H((l,u)=>{if(i(),!n)throw new ee.MissingAPI;const c=t.name,h=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!h)throw new ee.MissingAPI;h.onerror=Vn(u),h.onblocked=be(t._fireOnBlocked),h.onupgradeneeded=be(d=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=ba,o.abort(),h.result.close();const y=n.deleteDatabase(c);y.onsuccess=y.onerror=be(()=>{u(new ee.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{o.onerror=Vn(u);var p=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=p<1,t._novip.idbdb=h.result,qk(t,p/10,o,u)}},u),h.onsuccess=be(()=>{o=null;const d=t._novip.idbdb=h.result,p=cc(d.objectStoreNames);if(p.length>0)try{const v=d.transaction((y=p).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:w},m,f){w.verno=m.version/10;const _=w._dbSchema=Ep(0,m,f);w._storeNames=cc(m.objectStoreNames,0),gc(w,[w._allTables],We(_),_)}(t,d,v):(Tp(t,t._dbSchema,v),function(w,m){const f=JE(Ep(0,w.idbdb,m),w._dbSchema);return!(f.add.length||f.change.some(_=>_.add.length||_.change.length))}(t,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vp(t,v)}catch{}var y;ia.push(t),d.onversionchange=be(v=>{e.vcFired=!0,t.on("versionchange").fire(v)}),d.onclose=be(v=>{t.on("close").fire(v)}),a&&function({indexedDB:v,IDBKeyRange:w},m){!Tg(v)&&m!==sh&&Eg(v,w).put({name:m}).catch(Te)}(t._deps,c),l()},u)}))]).then(()=>(i(),e.onReadyBeingFired=[],H.resolve(Ip(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(yg,Te);return e.onReadyBeingFired=[],H.resolve(Ip(()=>u(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),Je(l)}).finally(()=>{e.openComplete=!0,s()})}function Sp(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):Ct(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function Gk(t,e,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,kE(i),n]}function ZE(t,e,n,r,i){return H.resolve().then(()=>{const s=X.transless||X,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(h){return h.name===gg.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ZE(t,e,n,null,i))):Je(h)}const l=pg(i);let u;l&&so();const c=H.follow(()=>{if(u=i.call(o,o),u)if(l){var h=fr.bind(null,null);u.then(h,h)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Sp(u))},a);return(u&&typeof u.then=="function"?H.resolve(u).then(h=>o.active?h:Je(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>u)).then(h=>(r&&o._resolve(),o._completion.then(()=>h))).catch(h=>(o._reject(h),Je(h)))})}function iu(t,e,n){const r=Ct(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Yk={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(c,h,d){const p=oa(c),y=i[p]=i[p]||[],v=c==null?0:typeof c=="string"?1:c.length,w=h>0,m={...d,isVirtual:w,keyTail:h,keyLength:v,extractKey:yp(c),unique:!w&&d.unique};return y.push(m),m.isPrimaryKey||s.push(m),v>1&&o(v===2?c[0]:c.slice(0,v-1),h+1,d),y.sort((f,_)=>f.keyTail-_.keyTail),m}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const c of r.indexes)o(c.keyPath,0,c);function l(c){const h=c.query.index;return h.isVirtual?{...c,query:{index:h,range:(d=c.query.range,p=h.keyTail,{type:d.type===1?2:d.type,lower:iu(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,p),lowerOpen:!0,upper:iu(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,p),upperOpen:!0})}}:c;var d,p}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(c){const h=i[oa(c)];return h&&h[0]}},count:c=>n.count(l(c)),query:c=>n.query(l(c)),openCursor(c){const{keyTail:h,isVirtual:d,keyLength:p}=c.query.index;return d?n.openCursor(l(c)).then(y=>y&&function(v){return Object.create(v,{continue:{value:function(m){m!=null?v.continue(iu(m,c.reverse?t.MAX_KEY:t.MIN_KEY,h)):c.unique?v.continue(v.key.slice(0,p).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,h)):v.continue()}},continuePrimaryKey:{value(m,f){v.continuePrimaryKey(iu(m,t.MAX_KEY,h),f)}},primaryKey:{get:()=>v.primaryKey},key:{get(){const m=v.key;return p===1?m[0]:m.slice(0,p)}},value:{get:()=>v.value}})}(y)):n.openCursor(c)}}}}}};function Ig(t,e,n,r){return n=n||{},r=r||"",We(t).forEach(i=>{if(tn(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=rp(s);a!==rp(o)?n[r+i]=e[i]:a==="Object"?Ig(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),We(e).forEach(i=>{tn(t,i)||(n[r+i]=e[i])}),n}const Xk={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=X.trans,{deleting:a,creating:l,updating:u}=o.table(e).hook;switch(s.type){case"add":if(l.fire===Te)break;return o._promise("readwrite",()=>c(s),!0);case"put":if(l.fire===Te&&u.fire===Te)break;return o._promise("readwrite",()=>c(s),!0);case"delete":if(a.fire===Te)break;return o._promise("readwrite",()=>c(s),!0);case"deleteRange":if(a.fire===Te)break;return o._promise("readwrite",()=>function(d){return h(d.trans,d.range,1e4)}(s),!0)}return n.mutate(s);function c(d){const p=X.trans,y=d.keys||function(v,w){return w.type==="delete"?w.keys:w.keys||w.values.map(v.extractKey)}(r,d);if(!y)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:y}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(v,w,m){return w.type==="add"?Promise.resolve([]):v.getMany({trans:w.trans,keys:m,cache:"immutable"})}(n,d,y).then(v=>{const w=y.map((m,f)=>{const _=v[f],g={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(g,m,_,p);else if(d.type==="add"||_===void 0){const E=l.fire.call(g,m,d.values[f],p);m==null&&E!=null&&(m=E,d.keys[f]=m,r.outbound||Pn(d.values[f],r.keyPath,m))}else{const E=Ig(_,d.values[f]),T=u.fire.call(g,E,m,_,p);if(T){const I=d.values[f];Object.keys(T).forEach(k=>{tn(I,k)?I[k]=T[k]:Pn(I,k,T[k])})}}return g});return n.mutate(d).then(({failures:m,results:f,numFailures:_,lastResult:g})=>{for(let E=0;E<y.length;++E){const T=f?f[E]:y[E],I=w[E];T==null?I.onerror&&I.onerror(m[E]):I.onsuccess&&I.onsuccess(d.type==="put"&&v[E]?d.values[E]:T)}return{failures:m,results:f,numFailures:_,lastResult:g}}).catch(m=>(w.forEach(f=>f.onerror&&f.onerror(m)),Promise.reject(m)))})}function h(d,p,y){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:y}).then(({result:v})=>c({type:"delete",keys:v,trans:d}).then(w=>w.numFailures>0?Promise.reject(w.failures[0]):v.length<y?{failures:[],numFailures:0,lastResult:void 0}:h(d,{...p,lower:v[v.length-1],lowerOpen:!0},y)))}}}}})};function eT(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)Vt(e.keys[i],t[s])===0&&(r.push(n?cl(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const Jk={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=eT(r.keys,r.trans._cache,r.cache==="clone");return i?H.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?cl(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Sg(t){return!("from"in t)}const Jn=function(t,e){if(!this){const n=new Jn;return t&&"d"in t&&Lt(n,t),n}Lt(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Oa(t,e,n){const r=Vt(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Sg(t))return Lt(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(Vt(n,t.from)<0)return i?Oa(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},N_(t);if(Vt(e,t.to)>0)return s?Oa(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},N_(t);Vt(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Vt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&yc(t,i),s&&o&&yc(t,s)}function yc(t,e){Sg(e)||function n(r,{from:i,to:s,l:o,r:a}){Oa(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function Zk(t,e){const n=Ap(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=Ap(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(Vt(a.from,i.to)<=0&&Vt(a.to,i.from)>=0)return!0;Vt(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function Ap(t){let e=Sg(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Vt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Vt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function N_(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=b_(o)}t.d=b_(t)}function b_({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}qs(Jn.prototype,{add(t){return yc(this,t),this},addKey(t){return Oa(this,t,t),this},addKeys(t){return t.forEach(e=>Oa(this,e,e)),this},[ip](){return Ap(this)}});const eD={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Jn(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,u={...i,mutate:d=>{const p=d.trans,y=p.mutatedParts||(p.mutatedParts={}),v=T=>{const I=`idb://${e}/${r}/${T}`;return y[I]||(y[I]=new Jn)},w=v(""),m=v(":dels"),{type:f}=d;let[_,g]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const E=d.trans._cache;return i.mutate(d).then(T=>{if(Ct(_)){f!=="delete"&&(_=T.results),w.addKeys(_);const I=eT(_,E);I||f==="add"||m.addKeys(_),(I||g)&&function(k,P,D,J){function te(z){const M=k(z.name||"");function L(O){return O!=null?z.extractKey(O):null}const B=O=>z.multiEntry&&Ct(O)?O.forEach(C=>M.addKey(C)):M.addKey(O);(D||J).forEach((O,C)=>{const b=D&&L(D[C]),j=J&&L(J[C]);Vt(b,j)!==0&&(b!=null&&B(b),j!=null&&B(j))})}P.indexes.forEach(te)}(v,s,I,g)}else if(_){const I={from:_.lower,to:_.upper};m.add(I),w.add(I)}else w.add(n),m.add(n),s.indexes.forEach(I=>v(I.name).add(n));return T})}},c=({query:{index:d,range:p}})=>{var y,v;return[d,new Jn((y=p.lower)!==null&&y!==void 0?y:t.MIN_KEY,(v=p.upper)!==null&&v!==void 0?v:t.MAX_KEY)]},h={get:d=>[o,new Jn(d.key)],getMany:d=>[o,new Jn().addKeys(d.keys)],count:c,query:c,openCursor:c};return We(h).forEach(d=>{u[d]=function(p){const{subscr:y}=X;if(y){const v=g=>{const E=`idb://${e}/${r}/${g}`;return y[E]||(y[E]=new Jn)},w=v(""),m=v(":dels"),[f,_]=h[d](p);if(v(f.name||"").add(_),!f.isPrimaryKey){if(d!=="count"){const g=d==="query"&&l&&p.values&&i.query({...p,values:!1});return i[d].apply(this,arguments).then(E=>{if(d==="query"){if(l&&p.values)return g.then(({result:I})=>(w.addKeys(I),E));const T=p.values?E.result.map(a):E.result;p.values?w.addKeys(T):m.addKeys(T)}else if(d==="openCursor"){const T=E,I=p.values;return T&&Object.create(T,{key:{get:()=>(m.addKey(T.primaryKey),T.key)},primaryKey:{get(){const k=T.primaryKey;return m.addKey(k),k}},value:{get:()=>(I&&w.addKey(T.primaryKey),T.value)}})}return E})}m.add(n)}}return i[d].apply(this,arguments)}}),u}}}};class Pi{constructor(e,n){this._middlewares={},this.verno=0;const r=Pi.dependencies;this._options=n={addons:Pi.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Te,dbReadyPromise:null,cancelOpen:Te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new H(a=>{s.dbReadyResolve=a}),s.openCanceller=new H((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=sa(this,"populate","blocked","versionchange","close",{ready:[yg,Te]}),this.on.ready.subscribe=RE(this.on.ready.subscribe,a=>(l,u)=>{Pi.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||H.resolve().then(l),u&&a(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),u&&a(l);else{a(l);const h=this;u||a(function d(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,No($k.prototype,function(a,l){this.db=o;let u=WE,c=null;if(l)try{u=l()}catch(y){c=y}const h=a._ctx,d=h.table,p=d.hook.reading.fire;this._ctx={table:d,index:h.index,isPrimKey:!h.index||d.schema.primKey.keyPath&&h.index===d.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:h.or,valueMapper:p!==Da?p:null}})),this.Table=function(a){return No(Ok.prototype,function(l,u,c){this.db=a,this._tx=c,this.name=l,this.schema=u,this.hook=a._allTables[l]?a._allTables[l].hook:sa(null,{creating:[Sk,Te],reading:[Ik,Da],updating:[Rk,Te],deleting:[Ak,Te]})})}(this),this.Transaction=function(a){return No(jk.prototype,function(l,u,c,h,d){this.db=a,this.mode=l,this.storeNames=u,this.schema=c,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=sa(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new H((p,y)=>{this._resolve=p,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},p=>{var y=this.active;return this.active=!1,this.on.error.fire(p),this.parent?this.parent._reject(p):y&&this.idbtrans&&this.idbtrans.abort(),Je(p)})})}(this),this.Version=function(a){return No(Hk.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return No(GE.prototype,function(l,u,c){this.db=a,this._ctx={table:l,index:u===":id"?null:u,or:c};const h=a._deps.indexedDB;if(!h)throw new ee.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(d,p)=>h.cmp(p,d),this._max=(d,p)=>h.cmp(d,p)>0?d:p,this._min=(d,p)=>h.cmp(d,p)<0?d:p,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Va(n.IDBKeyRange),this._createTransaction=(a,l,u,c)=>new this.Transaction(a,l,u,this._options.chromeTransactionDurability,c),this._fireOnBlocked=a=>{this.on("blocked").fire(a),ia.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Yk),this.use(Xk),this.use(eD),this.use(Jk),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Kk),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?e():new H((n,r)=>{if(this._state.openComplete)return r(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ee.DatabaseClosed);this.open().catch(Te)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Qk(this)}_close(){const e=this._state,n=ia.indexOf(this);if(n>=0&&ia.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new H(r=>{e.dbReadyResolve=r}),e.openCanceller=new H((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new H((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=be(()=>{(function({indexedDB:a,IDBKeyRange:l},u){!Tg(a)&&u!==sh&&Eg(a,l).delete(u).catch(Te)})(this._deps,this.name),r()}),o.onerror=Vn(i),o.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return We(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Gk.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=X.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(u=>{var c=u instanceof this.Table?u.name:u;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Cd)o=Cd;else{if(e!="rw"&&e!=xd)throw new ee.InvalidArgument("Invalid transaction mode: "+e);o=xd}if(i){if(i.mode===Cd&&o===xd){if(!s)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(u=>{if(i&&i.storeNames.indexOf(u)===-1){if(!s)throw new ee.SubTransaction("Table "+u+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,(c,h)=>{h(u)}):Je(u)}const l=ZE.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):X.trans?oo(X.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!tn(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const tD=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class nD{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[tD](){return this}}function tT(t,e){return We(e).forEach(n=>{yc(t[n]||(t[n]=new Jn),e[n])}),t}function rD(t){let e,n=!1;const r=new nD(i=>{const s=pg(t);let o=!1,a={},l={};const u={get closed(){return o},unsubscribe:()=>{o=!0,Xr.storagemutated.unsubscribe(p)}};i.start&&i.start(u);let c=!1,h=!1;function d(){return We(l).some(v=>a[v]&&Zk(a[v],l[v]))}const p=v=>{tT(a,v),d()&&y()},y=()=>{if(c||o)return;a={};const v={},w=function(m){s&&so();const f=()=>Gr(t,{subscr:m,trans:null}),_=X.trans?oo(X.transless,f):f();return s&&_.then(fr,fr),_}(v);h||(Xr(Ma,p),h=!0),c=!0,Promise.resolve(w).then(m=>{n=!0,e=m,c=!1,o||(d()?y():(a={},l=v,i.next&&i.next(m)))},m=>{c=!1,n=!1,i.error&&i.error(m),u.unsubscribe()})};return y(),u});return r.hasValue=()=>n,r.getValue=()=>e,r}let Rp;try{Rp={indexedDB:Pe.indexedDB||Pe.mozIndexedDB||Pe.webkitIndexedDB||Pe.msIndexedDB,IDBKeyRange:Pe.IDBKeyRange||Pe.webkitIDBKeyRange}}catch{Rp={indexedDB:null,IDBKeyRange:null}}const ci=Pi;function Vu(t){let e=nr;try{nr=!0,Xr.storagemutated.fire(t)}finally{nr=e}}qs(ci,{...xu,delete:t=>new ci(t,{addons:[]}).delete(),exists:t=>new ci(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Tg(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==sh)):Eg(e,n).toCollection().primaryKeys()}(ci.dependencies).then(t)}catch{return Je(new ee.MissingAPI)}},defineClass:()=>function(t){Lt(this,t)},ignoreTransaction:t=>X.trans?oo(X.transless,t):t(),vip:Ip,async:function(t){return function(){try{var e=Sp(t.apply(this,arguments));return e&&typeof e.then=="function"?e:H.resolve(e)}catch(n){return Je(n)}}},spawn:function(t,e,n){try{var r=Sp(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:H.resolve(r)}catch(i){return Je(i)}},currentTransaction:{get:()=>X.trans||null},waitFor:function(t,e){const n=H.resolve(typeof t=="function"?ci.ignoreTransaction(t):t).timeout(e||6e4);return X.trans?X.trans.waitFor(n):n},Promise:H,debug:{get:()=>Hn,set:t=>{NE(t,t==="dexie"?()=>!0:HE)}},derive:Rs,extend:Lt,props:qs,override:RE,Events:sa,on:Xr,liveQuery:rD,extendObservabilitySet:tT,getByKeyPath:or,setByKeyPath:Pn,delByKeyPath:function(t,e){typeof e=="string"?Pn(t,e,void 0):"length"in e&&[].map.call(e,function(n){Pn(t,n,void 0)})},shallowClone:xE,deepClone:cl,getObjectDiff:Ig,cmp:Vt,asap:PE,minKey:mp,addons:[],connections:ia,errnames:gg,dependencies:Rp,semVer:R_,version:R_.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),ci.maxKey=Va(ci.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Xr(Ma,t=>{if(!nr){let e;ih?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Cr,!0,!0,t)):e=new CustomEvent(Cr,{detail:t}),nr=!0,dispatchEvent(e),nr=!1}}),addEventListener(Cr,({detail:t})=>{nr||Vu(t)}));let nr=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Cr);typeof t.unref=="function"&&t.unref(),Xr(Ma,e=>{nr||t.postMessage(e)}),t.onmessage=e=>{e.data&&Vu(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Xr(Ma,e=>{try{nr||(typeof localStorage<"u"&&localStorage.setItem(Cr,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Cr,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Cr){const n=JSON.parse(e.newValue);n&&Vu(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Cr&&Vu(e.changedParts)})}H.rejectionMapper=function(t,e){if(!t||t instanceof Ps||t instanceof TypeError||t instanceof SyntaxError||!t.name||!T_[t.name])return t;var n=new T_[t.name](e||t.message,t);return"stack"in t&&sr(n,"stack",{get:function(){return this.inner.stack}}),n},NE(Hn,HE);class iD extends Pi{plays;users;constructor(){super("BggStats"),this.version(2).stores({plays:"playId, recordingUserId, gameId, gameName, date, quantity, location, length, incomplete, comments, noWinStats, players",users:"userId, username, name, yearRegistered, stateOrProvince, country, avatarLink"})}}const Jr=new iD,M_=async t=>{try{await Jr.plays.bulkAdd(t)}catch{}},sD=async t=>{const e=await Jr.plays.where("recordingUserId").equals(t).last();return{latestPlayDate:e?.date,latestPlayId:e?.playId}},w$=async()=>await Jr.users.toArray(),E$=async t=>{const e=await Jr.plays.where("recordingUserId").equals(t).delete(),n=await Jr.users.where("userId").equals(t).delete();return{playsDeleted:e,usersDeleted:n}};function Pp(t){var e={};if(t.nodeType==1){if(t.attributes.length>0){e._attributes={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e._attributes[r.nodeName]=r.nodeValue}}}else t.nodeType==3&&(e=t.nodeValue);if(t.hasChildNodes&&t.hasChildNodes())for(var i=0;i<t.childNodes.length;i++){var s=t.childNodes.item(i),o=s.nodeName;if(typeof e[o]>"u")e[o]=Pp(s);else{if(typeof e[o].push>"u"){var a=e[o];e[o]=[],e[o].push(a)}e[o].push(Pp(s))}}return e}function oh(t){const n=new DOMParser().parseFromString(t,"application/xml");return Pp(n)}var nT={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(W0,function(){var n=function(s,o){if(o=o||{},typeof s!="function")throw new i("fetch must be a function");if(typeof o!="object")throw new i("defaults must be an object");if(o.retries!==void 0&&!r(o.retries))throw new i("retries must be a positive integer");if(o.retryDelay!==void 0&&!r(o.retryDelay)&&typeof o.retryDelay!="function")throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(o.retryOn!==void 0&&!Array.isArray(o.retryOn)&&typeof o.retryOn!="function")throw new i("retryOn property expects an array or function");var a={retries:3,retryDelay:1e3,retryOn:[]};return o=Object.assign(a,o),function(u,c){var h=o.retries,d=o.retryDelay,p=o.retryOn;if(c&&c.retries!==void 0)if(r(c.retries))h=c.retries;else throw new i("retries must be a positive integer");if(c&&c.retryDelay!==void 0)if(r(c.retryDelay)||typeof c.retryDelay=="function")d=c.retryDelay;else throw new i("retryDelay must be a positive integer or a function returning a positive integer");if(c&&c.retryOn)if(Array.isArray(c.retryOn)||typeof c.retryOn=="function")p=c.retryOn;else throw new i("retryOn property expects an array or function");return new Promise(function(y,v){var w=function(f){var _=typeof Request<"u"&&u instanceof Request?u.clone():u;s(_,c).then(function(g){if(Array.isArray(p)&&p.indexOf(g.status)===-1)y(g);else if(typeof p=="function")try{return Promise.resolve(p(f,null,g)).then(function(E){E?m(f,null,g):y(g)}).catch(v)}catch(E){v(E)}else f<h?m(f,null,g):y(g)}).catch(function(g){if(typeof p=="function")try{Promise.resolve(p(f,g,null)).then(function(E){E?m(f,g,null):v(g)}).catch(function(E){v(E)})}catch(E){v(E)}else f<h?m(f,g,null):v(g)})};function m(f,_,g){var E=typeof d=="function"?d(f,_,g):d;setTimeout(function(){w(++f)},E)}w(0)})}};function r(s){return Number.isInteger(s)&&s>=0}function i(s){this.name="ArgumentError",this.message=s}return n})})(nT);var oD=nT.exports;const rT=om(oD);async function Ag(t){try{const e=t.page?`&page=${t.page}`:"",n=t.startdate?`&mindate=${t.startdate}`:"",r=`https://boardgamegeek.com/xmlapi2/plays?username=${t.username}${n}${e}`,i=window.fetch;return await(await rT(i)(r,{retries:7,retryDelay:function(l,u,c){return u&&console.error("fetch retry error",u),Math.pow(8,l)*1e3}})).text()}catch(e){throw new Error(e)}}async function aD(t){try{const e=await Ag({username:t}),n=oh(e);return{pages:Math.ceil(parseInt(n.plays._attributes.total,10)/100)}}catch(e){throw console.log(e),new Error(e)}}const V_=async t=>{if(!t.username)throw new Error("username is undefined");try{const{username:e,pages:n,startdate:r,setPercentDone:i}=t,o=Array.from({length:n},(d,p)=>p+1)?.map(d=>Ag({username:e,page:d,startdate:r})).filter(d=>d),a=performance.now(),l=[];for await(let[d,p]of o.entries()){const y=await p;l.push(y);const v=(d+1)/o.length*100;i(v)}const u=performance.now();return console.log("time to get data: ",(u-a)/1e3+"seconds"),(l?.map(d=>{const p=oh(d);return iT(p)})).reduce((d,p)=>[...d,...p],[])}catch(e){throw Error(e)}};function iT(t){const e=parseInt(t.plays._attributes.userid);return Array.isArray(t.plays.play)?t.plays.play.map(i=>O_(i,e)):[O_(t.plays.play,e)]}function O_(t,e){const{id:n,date:r,quantity:i,length:s,incomplete:o,nowinstats:a,location:l}=t._attributes,{name:u,objectid:c}=t.item._attributes,h=t?.comments?._text,d=h||(t.comments&&t.comments["#text"]?t.comments["#text"]:""),p=lD(t?.players?.player);return{playId:parseInt(n),gameId:parseInt(c),recordingUserId:e,gameName:u,date:r,quantity:parseInt(i)||0,location:l||null,length:parseInt(s)||null,incomplete:o==="1",comments:d||null,noWinStats:a==="1",players:p}}function lD(t=[]){return Array.isArray(t)?t?.map(({_attributes:r})=>({username:r.username||null,userId:parseInt(r.userid)||null,name:$_(r),score:parseInt(r.username)||null,win:r?.win==="1",new:r?.new==="1",startposition:parseInt(r.startposition)||null,color:r.color||null,rating:parseInt(r.rating)||null})):[{username:t._attributes.username||null,userId:parseInt(t._attributes.userid)||null,name:$_(t._attributes),score:parseInt(t._attributes.username)||null,win:t._attributes.win==="1",new:t._attributes?.new==="1",startposition:parseInt(t._attributes.startposition)||null,color:t._attributes.color||null,rating:parseInt(t._attributes.rating)||null}]}async function uD(t){if(t){const e=`https://boardgamegeek.com/xmlapi2/user?name=${t}`,n=window.fetch,s=await(await rT(n)(e,{retries:7,retryDelay:function(a,l,u){return Math.pow(8,a)*1e3}})).text(),{user:o}=oh(s);return{userId:parseInt(o._attributes.id),username:o._attributes.name,name:`${o.firstname._attributes.value} ${o.lastname._attributes.value}`,yearRegistered:parseInt(o.yearregistered._attributes.value),stateOrProvince:`${o.stateorprovince._attributes.value}`,country:`${o.country._attributes.value}`,avatarLink:`${o.avatarlink._attributes.value}`}}}async function cD(t,e){if(t)try{const n=await Ag({username:t,startdate:e}),r=oh(n),s=iT(r).reduce((a,l)=>l.playId>a?l.playId:a,0);return{pages:Math.ceil(parseInt(r.plays._attributes.total,10)/100),latestPlayId:s}}catch(n){throw console.log(n),new Error(n)}}const $_=t=>{const e=t.username,n=t.name;return!e&&!n?"":n?e?`${t.name} (${t.username})`:t.name:t.username};var L_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},oT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(d=64)),r.push(n[c],n[h],n[d],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new dD;const d=s<<2|a>>4;if(r.push(d),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fD=function(t){const e=sT(t);return oT.encodeByteArray(e,!0)},vc=function(t){return fD(t).replace(/\./g,"")},pD=function(t){try{return oT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=()=>mD().__FIREBASE_DEFAULTS__,yD=()=>{if(typeof process>"u"||typeof L_>"u")return;const t=L_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pD(t[1]);return e&&JSON.parse(e)},aT=()=>{try{return gD()||yD()||vD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_D=t=>{var e,n;return(n=(e=aT())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wD=t=>{const e=_D(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lT=()=>{var t;return(t=aT())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vc(JSON.stringify(n)),vc(JSON.stringify(o)),""].join(".")}function ID(){try{return typeof indexedDB=="object"}catch{return!1}}function SD(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD="FirebaseError";class ao extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AD,Object.setPrototypeOf(this,ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uT.prototype.create)}}class uT{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RD(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ao(i,a,r)}}function RD(t,e){return t.replace(PD,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PD=/\{\$([^}]+)}/g;function Cp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(F_(s)&&F_(o)){if(!Cp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){return t&&t._delegate?t._delegate:t}class $a{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ED;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kD(e))try{this.getOrInitializeService({instanceIdentifier:fi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fi){return this.instances.has(e)}getOptions(e=fi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fi){return this.component?this.component.multipleInstances?e:fi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xD(t){return t===fi?void 0:t}function kD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const ND={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},bD=_e.INFO,MD={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},VD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cT{constructor(e){this.name=e,this._logLevel=bD,this._logHandler=VD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ND[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const OD=(t,e)=>e.some(n=>t instanceof n);let U_,j_;function $D(){return U_||(U_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LD(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,xp=new WeakMap,dT=new WeakMap,Md=new WeakMap,Rg=new WeakMap;function FD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(jr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hT.set(n,t)}).catch(()=>{}),Rg.set(e,t),e}function UD(t){if(xp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});xp.set(t,e)}let kp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jD(t){kp=t(kp)}function BD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vd(this),e,...n);return dT.set(r,e.sort?e.sort():[e]),jr(r)}:LD().includes(t)?function(...e){return t.apply(Vd(this),e),jr(hT.get(this))}:function(...e){return jr(t.apply(Vd(this),e))}}function zD(t){return typeof t=="function"?BD(t):(t instanceof IDBTransaction&&UD(t),OD(t,$D())?new Proxy(t,kp):t)}function jr(t){if(t instanceof IDBRequest)return FD(t);if(Md.has(t))return Md.get(t);const e=zD(t);return e!==t&&(Md.set(t,e),Rg.set(e,t)),e}const Vd=t=>Rg.get(t);function KD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=jr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(jr(o.result),l.oldVersion,l.newVersion,jr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const qD=["get","getKey","getAll","getAllKeys","count"],HD=["put","add","delete","clear"],Od=new Map;function B_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Od.get(e))return Od.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qD.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Od.set(e,s),s}jD(t=>({...t,get:(e,n,r)=>B_(e,n)||t.get(e,n,r),has:(e,n)=>!!B_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QD(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QD(t){const e=t.getComponent();return e?.type==="VERSION"}const Dp="@firebase/app",z_="0.9.15";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new cT("@firebase/app"),GD="@firebase/app-compat",YD="@firebase/analytics-compat",XD="@firebase/analytics",JD="@firebase/app-check-compat",ZD="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",rN="@firebase/database-compat",iN="@firebase/functions",sN="@firebase/functions-compat",oN="@firebase/installations",aN="@firebase/installations-compat",lN="@firebase/messaging",uN="@firebase/messaging-compat",cN="@firebase/performance",hN="@firebase/performance-compat",dN="@firebase/remote-config",fN="@firebase/remote-config-compat",pN="@firebase/storage",mN="@firebase/storage-compat",gN="@firebase/firestore",yN="@firebase/firestore-compat",vN="firebase",_N="10.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",wN={[Dp]:"fire-core",[GD]:"fire-core-compat",[XD]:"fire-analytics",[YD]:"fire-analytics-compat",[ZD]:"fire-app-check",[JD]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[rN]:"fire-rtdb-compat",[iN]:"fire-fn",[sN]:"fire-fn-compat",[oN]:"fire-iid",[aN]:"fire-iid-compat",[lN]:"fire-fcm",[uN]:"fire-fcm-compat",[cN]:"fire-perf",[hN]:"fire-perf-compat",[dN]:"fire-rc",[fN]:"fire-rc-compat",[pN]:"fire-gcs",[mN]:"fire-gcs-compat",[gN]:"fire-fst",[yN]:"fire-fst-compat","fire-js":"fire-js",[vN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,bp=new Map;function EN(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wc(t){const e=t.name;if(bp.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;bp.set(e,t);for(const n of _c.values())EN(n,t);return!0}function TN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Br=new uT("app","Firebase",IN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=_N;function fT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Np,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(n||(n=lT()),!n)throw Br.create("no-options");const s=_c.get(i);if(s){if(Cp(n,s.options)&&Cp(r,s.config))return s;throw Br.create("duplicate-app",{appName:i})}const o=new DD(i);for(const l of bp.values())o.addComponent(l);const a=new SN(n,r,o);return _c.set(i,a),a}function RN(t=Np){const e=_c.get(t);if(!e&&t===Np&&lT())return fT();if(!e)throw Br.create("no-app",{appName:t});return e}function xs(t,e,n){var r;let i=(r=wN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(a.join(" "));return}wc(new $a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebase-heartbeat-database",CN=1,La="firebase-heartbeat-store";let $d=null;function pT(){return $d||($d=KD(PN,CN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(La)}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),$d}async function xN(t){try{return await(await pT()).transaction(La).objectStore(La).get(mT(t))}catch(e){if(e instanceof ao)Oi.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(n.message)}}}async function K_(t,e){try{const r=(await pT()).transaction(La,"readwrite");await r.objectStore(La).put(e,mT(t)),await r.done}catch(n){if(n instanceof ao)Oi.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n?.message});Oi.warn(r.message)}}}function mT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1024,DN=30*24*60*60*1e3;class NN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=q_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=DN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q_(),{heartbeatsToSend:n,unsentEntries:r}=bN(this._heartbeatsCache.heartbeats),i=vc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function q_(){return new Date().toISOString().substring(0,10)}function bN(t,e=kN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),H_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ID()?SD().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await xN(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function H_(t){return vc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t){wc(new $a("platform-logger",e=>new WD(e),"PRIVATE")),wc(new $a("heartbeat",e=>new NN(e),"PRIVATE")),xs(Dp,z_,t),xs(Dp,z_,"esm2017"),xs("fire-js","")}VN("");var ON="firebase",$N="10.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(ON,$N,"app");var LN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,Pg=Pg||{},se=LN||self;function ah(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function lh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FN(t){return Object.prototype.hasOwnProperty.call(t,Ld)&&t[Ld]||(t[Ld]=++UN)}var Ld="closure_uid_"+(1e9*Math.random()>>>0),UN=0;function jN(t,e,n){return t.call.apply(t.bind,arguments)}function BN(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xt=jN:xt=BN,xt.apply(null,arguments)}function su(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ai(){this.s=this.s,this.o=this.o}var zN=0;ai.prototype.s=!1;ai.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),zN!=0)&&FN(this)};ai.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Cg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function W_(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ah(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function kt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var KN=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{se.addEventListener("test",()=>{},e),se.removeEventListener("test",()=>{},e)}catch{}return t}();function Fa(t){return/^[\s\xa0]*$/.test(t)}function uh(){var t=se.navigator;return t&&(t=t.userAgent)?t:""}function $n(t){return uh().indexOf(t)!=-1}function xg(t){return xg[" "](t),t}xg[" "]=function(){};function qN(t,e){var n=Lb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var HN=$n("Opera"),Ws=$n("Trident")||$n("MSIE"),yT=$n("Edge"),Mp=yT||Ws,vT=$n("Gecko")&&!(uh().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge"))&&!($n("Trident")||$n("MSIE"))&&!$n("Edge"),WN=uh().toLowerCase().indexOf("webkit")!=-1&&!$n("Edge");function _T(){var t=se.document;return t?t.documentMode:void 0}var Vp;e:{var Fd="",Ud=function(){var t=uh();if(vT)return/rv:([^\);]+)(\)|;)/.exec(t);if(yT)return/Edge\/([\d\.]+)/.exec(t);if(Ws)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(WN)return/WebKit\/(\S+)/.exec(t);if(HN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ud&&(Fd=Ud?Ud[1]:""),Ws){var jd=_T();if(jd!=null&&jd>parseFloat(Fd)){Vp=String(jd);break e}}Vp=Fd}var Op;if(se.document&&Ws){var Q_=_T();Op=Q_||parseInt(Vp,10)||void 0}else Op=void 0;var QN=Op;function Ua(t,e){if(kt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vT){e:{try{xg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:GN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ua.$.h.call(this)}}at(Ua,kt);var GN={2:"touch",3:"pen",4:"mouse"};Ua.prototype.h=function(){Ua.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ch="closure_listenable_"+(1e6*Math.random()|0),YN=0;function XN(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++YN,this.fa=this.ia=!1}function hh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function kg(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function JN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function wT(t){const e={};for(const n in t)e[n]=t[n];return e}const G_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ET(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<G_.length;s++)n=G_[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dh(t){this.src=t,this.g={},this.h=0}dh.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Lp(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new XN(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function $p(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=gT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(hh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Lp(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Dg="closure_lm_"+(1e6*Math.random()|0),Bd={};function TT(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)TT(t,e[s],n,r,i);return null}return n=AT(n),t&&t[ch]?t.O(e,n,lh(r)?!!r.capture:!!r,i):ZN(t,e,n,!1,r,i)}function ZN(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=lh(i)?!!i.capture:!!i,a=bg(t);if(a||(t[Dg]=a=new dh(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=eb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)KN||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ST(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eb(){function t(n){return e.call(t.src,t.listener,n)}const e=tb;return t}function IT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)IT(t,e[s],n,r,i);else r=lh(r)?!!r.capture:!!r,n=AT(n),t&&t[ch]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Lp(s,n,r,i),-1<n&&(hh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=bg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Lp(e,n,r,i)),(n=-1<t?e[t]:null)&&Ng(n))}function Ng(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ch])$p(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ST(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bg(e))?($p(n,t),n.h==0&&(n.src=null,e[Dg]=null)):hh(t)}}}function ST(t){return t in Bd?Bd[t]:Bd[t]="on"+t}function tb(t,e){if(t.fa)t=!0;else{e=new Ua(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ng(t),t=n.call(r,e)}return t}function bg(t){return t=t[Dg],t instanceof dh?t:null}var zd="__closure_events_fn_"+(1e9*Math.random()>>>0);function AT(t){return typeof t=="function"?t:(t[zd]||(t[zd]=function(e){return t.handleEvent(e)}),t[zd])}function ot(){ai.call(this),this.i=new dh(this),this.S=this,this.J=null}at(ot,ai);ot.prototype[ch]=!0;ot.prototype.removeEventListener=function(t,e,n,r){IT(this,t,e,n,r)};function mt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new kt(e,t);else if(e instanceof kt)e.target=e.target||t;else{var i=e;e=new kt(r,t),ET(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=ou(o,r,!0,e)&&i}if(o=e.g=t,i=ou(o,r,!0,e)&&i,i=ou(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=ou(o,r,!1,e)&&i}ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)hh(n[r]);delete t.g[e],t.h--}}this.J=null};ot.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ot.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ou(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&$p(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Mg=se.JSON.stringify;class nb{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function rb(){var t=Vg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class ib{constructor(){this.h=this.g=null}add(e,n){const r=RT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var RT=new nb(()=>new sb,t=>t.reset());class sb{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ob(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ab(t){se.setTimeout(()=>{throw t},0)}let ja,Ba=!1,Vg=new ib,PT=()=>{const t=se.Promise.resolve(void 0);ja=()=>{t.then(lb)}};var lb=()=>{for(var t;t=rb();){try{t.h.call(t.g)}catch(n){ab(n)}var e=RT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ba=!1};function fh(t,e){ot.call(this),this.h=t||1,this.g=e||se,this.j=xt(this.qb,this),this.l=Date.now()}at(fh,ot);U=fh.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mt(this,"tick"),this.ga&&(Og(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Og(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){fh.$.N.call(this),Og(this),delete this.g};function $g(t,e,n){if(typeof t=="function")n&&(t=xt(t,n));else if(t&&typeof t.handleEvent=="function")t=xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:se.setTimeout(t,e||0)}function CT(t){t.g=$g(()=>{t.g=null,t.i&&(t.i=!1,CT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class ub extends ai{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CT(this)}N(){super.N(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(t){ai.call(this),this.h=t,this.g={}}at(za,ai);var Y_=[];function xT(t,e,n,r){Array.isArray(n)||(n&&(Y_[0]=n.toString()),n=Y_);for(var i=0;i<n.length;i++){var s=TT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function kT(t){kg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ng(e)},t),t.g={}}za.prototype.N=function(){za.$.N.call(this),kT(this)};za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ph(){this.g=!0}ph.prototype.Ea=function(){this.g=!1};function cb(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function hb(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function vs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+fb(t,n)+(r?" "+r:"")})}function db(t,e){t.info(function(){return"TIMEOUT: "+e})}ph.prototype.info=function(){};function fb(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Mg(n)}catch{return e}}var Ki={},X_=null;function mh(){return X_=X_||new ot}Ki.Ta="serverreachability";function DT(t){kt.call(this,Ki.Ta,t)}at(DT,kt);function Ka(t){const e=mh();mt(e,new DT(e))}Ki.STAT_EVENT="statevent";function NT(t,e){kt.call(this,Ki.STAT_EVENT,t),this.stat=e}at(NT,kt);function Ot(t){const e=mh();mt(e,new NT(e,t))}Ki.Ua="timingevent";function bT(t,e){kt.call(this,Ki.Ua,t),this.size=e}at(bT,kt);function fl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){t()},e)}var gh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},MT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lg(){}Lg.prototype.h=null;function J_(t){return t.h||(t.h=t.i())}function VT(){}var pl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fg(){kt.call(this,"d")}at(Fg,kt);function Ug(){kt.call(this,"c")}at(Ug,kt);var Fp;function yh(){}at(yh,Lg);yh.prototype.g=function(){return new XMLHttpRequest};yh.prototype.i=function(){return{}};Fp=new yh;function ml(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new za(this),this.P=pb,t=Mp?125:void 0,this.V=new fh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new OT}function OT(){this.i=null,this.g="",this.h=!1}var pb=45e3,Up={},Ec={};U=ml.prototype;U.setTimeout=function(t){this.P=t};function jp(t,e,n){t.L=1,t.v=_h(pr(e)),t.s=n,t.S=!0,$T(t,null)}function $T(t,e){t.G=Date.now(),gl(t),t.A=pr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),qT(n.i,"t",r),t.C=0,n=t.l.J,t.h=new OT,t.g=dI(t.l,n?e:null,!t.s),0<t.O&&(t.M=new ub(xt(t.Pa,t,t.g),t.O)),xT(t.U,t.g,"readystatechange",t.nb),e=t.I?wT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ka(),cb(t.j,t.u,t.A,t.m,t.W,t.s)}U.nb=function(t){t=t.target;const e=this.M;e&&Ln(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const c=Ln(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>c)&&(c!=3||Mp||this.g&&(this.h.h||this.g.ja()||n0(this.g)))){this.J||c!=4||e==7||(e==8||0>=h?Ka(3):Ka(2)),vh(this);var n=this.g.da();this.ca=n;t:if(LT(this)){var r=n0(this.g);t="";var i=r.length,s=Ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),aa(this);var o="";break t}this.h.i=new se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,hb(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Fa(a)){var u=a;break t}}u=null}if(n=u)vs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bp(this,n);else{this.i=!1,this.o=3,Ot(12),_i(this),aa(this);break e}}this.S?(FT(this,c,o),Mp&&this.i&&c==3&&(xT(this.U,this.V,"tick",this.mb),this.V.start())):(vs(this.j,this.m,o,null),Bp(this,o)),c==4&&_i(this),this.i&&!this.J&&(c==4?lI(this.l,this):(this.i=!1,gl(this)))}else Vb(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ot(12)):(this.o=0,Ot(13)),_i(this),aa(this)}}}catch{}finally{}};function LT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function FT(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=mb(t,n),i==Ec){e==4&&(t.o=4,Ot(14),r=!1),vs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Up){t.o=4,Ot(15),vs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else vs(t.j,t.m,i,null),Bp(t,i);LT(t)&&i!=Ec&&i!=Up&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ot(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hg(e),e.M=!0,Ot(11))):(vs(t.j,t.m,n,"[Invalid Chunked Response]"),_i(t),aa(t))}U.mb=function(){if(this.g){var t=Ln(this.g),e=this.g.ja();this.C<e.length&&(vh(this),FT(this,t,e),this.i&&t!=4&&gl(this))}};function mb(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ec:(n=Number(e.substring(n,r)),isNaN(n)?Up:(r+=1,r+n>e.length?Ec:(e=e.slice(r,r+n),t.C=r+n,e)))}U.cancel=function(){this.J=!0,_i(this)};function gl(t){t.Y=Date.now()+t.P,UT(t,t.P)}function UT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=fl(xt(t.lb,t),e)}function vh(t){t.B&&(se.clearTimeout(t.B),t.B=null)}U.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(db(this.j,this.A),this.L!=2&&(Ka(),Ot(17)),_i(this),this.o=2,aa(this)):UT(this,this.Y-t)};function aa(t){t.l.H==0||t.J||lI(t.l,t)}function _i(t){vh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Og(t.V),kT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Bp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||zp(n.i,t))){if(!t.K&&zp(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Sc(n),Th(n);else break e;qg(n),Ot(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=fl(xt(n.ib,n),6e3));if(1>=QT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else wi(n,11)}else if((t.K||n.g==t)&&Sc(n),!Fa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=u[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(jg(s,s.h),s.h=null))}if(r.F){const v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Ce(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=hI(r,r.J?r.pa:null,r.Y),o.K){GT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(vh(a),gl(a)),r.g=o}else oI(r);0<n.j.length&&Ih(n)}else u[0]!="stop"&&u[0]!="close"||wi(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?wi(n,7):Kg(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Ka(4)}catch{}}function gb(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ah(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function yb(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ah(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function jT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ah(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=yb(t),r=gb(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var BT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vb(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ci(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ci){this.h=t.h,Tc(this,t.j),this.s=t.s,this.g=t.g,Ic(this,t.m),this.l=t.l;var e=t.i,n=new qa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Z_(this,n),this.o=t.o}else t&&(e=String(t).match(BT))?(this.h=!1,Tc(this,e[1]||"",!0),this.s=jo(e[2]||""),this.g=jo(e[3]||"",!0),Ic(this,e[4]),this.l=jo(e[5]||"",!0),Z_(this,e[6]||"",!0),this.o=jo(e[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}Ci.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Bo(e,e0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Bo(e,e0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Bo(n,n.charAt(0)=="/"?Eb:wb,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Bo(n,Ib)),t.join("")};function pr(t){return new Ci(t)}function Tc(t,e,n){t.j=n?jo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ic(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Z_(t,e,n){e instanceof qa?(t.i=e,Sb(t.i,t.h)):(n||(e=Bo(e,Tb)),t.i=new qa(e,t.h))}function Ce(t,e,n){t.i.set(e,n)}function _h(t){return Ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,_b),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _b(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var e0=/[#\/\?@]/g,wb=/[#\?:]/g,Eb=/[#\?]/g,Tb=/[#\?@]/g,Ib=/#/g;function qa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function li(t){t.g||(t.g=new Map,t.h=0,t.i&&vb(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=qa.prototype;U.add=function(t,e){li(this),this.i=null,t=lo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function zT(t,e){li(t),e=lo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KT(t,e){return li(t),e=lo(t,e),t.g.has(e)}U.forEach=function(t,e){li(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};U.ta=function(){li(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};U.Z=function(t){li(this);let e=[];if(typeof t=="string")KT(this,t)&&(e=e.concat(this.g.get(lo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return li(this),this.i=null,t=lo(this,t),KT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function qT(t,e,n){zT(t,e),0<n.length&&(t.i=null,t.g.set(lo(t,e),Cg(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function lo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Sb(t,e){e&&!t.j&&(li(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(zT(this,r),qT(this,i,n))},t)),t.j=e}var Ab=class{constructor(t,e){this.g=t,this.map=e}};function HT(t){this.l=t||Rb,se.PerformanceNavigationTiming?(t=se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(se.g&&se.g.Ka&&se.g.Ka()&&se.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rb=10;function WT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function QT(t){return t.h?1:t.g?t.g.size:0}function zp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function jg(t,e){t.g?t.g.add(e):t.h=e}function GT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}HT.prototype.cancel=function(){if(this.i=YT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function YT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Cg(t.i)}var Pb=class{stringify(t){return se.JSON.stringify(t,void 0)}parse(t){return se.JSON.parse(t,void 0)}};function Cb(){this.g=new Pb}function xb(t,e,n){const r=n||"";try{jT(t,function(i,s){let o=i;lh(i)&&(o=Mg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function kb(t,e){const n=new ph;if(se.Image){const r=new Image;r.onload=su(au,n,r,"TestLoadImage: loaded",!0,e),r.onerror=su(au,n,r,"TestLoadImage: error",!1,e),r.onabort=su(au,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=su(au,n,r,"TestLoadImage: timeout",!1,e),se.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function au(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function yl(t){this.l=t.fc||null,this.j=t.ob||!1}at(yl,Lg);yl.prototype.g=function(){return new wh(this.l,this.j)};yl.prototype.i=function(t){return function(){return t}}({});function wh(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Bg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(wh,ot);var Bg=0;U=wh.prototype;U.open=function(t,e){if(this.readyState!=Bg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ha(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vl(this)),this.readyState=Bg};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function XT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vl(this):Ha(this),this.readyState==3&&XT(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,vl(this))};U.Ya=function(t){this.g&&(this.response=t,vl(this))};U.ka=function(){this.g&&vl(this)};function vl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ha(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ha(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Db=se.JSON.parse;function je(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=JT,this.L=this.M=!1}at(je,ot);var JT="",Nb=/^https?$/i,bb=["POST","PUT"];U=je.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Fp.g(),this.C=this.u?J_(this.u):J_(Fp),this.g.onreadystatechange=xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){t0(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=se.FormData&&t instanceof se.FormData,!(0<=gT(bb,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{tI(this),0<this.B&&((this.L=Mb(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xt(this.ua,this)):this.A=$g(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){t0(this,s)}};function Mb(t){return Ws&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof Pg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mt(this,"timeout"),this.abort(8))};function t0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ZT(t),Eh(t)}function ZT(t){t.F||(t.F=!0,mt(t,"complete"),mt(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,mt(this,"complete"),mt(this,"abort"),Eh(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Eh(this,!0)),je.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?eI(this):this.kb())};U.kb=function(){eI(this)};function eI(t){if(t.h&&typeof Pg<"u"&&(!t.C[1]||Ln(t)!=4||t.da()!=2)){if(t.v&&Ln(t)==4)$g(t.La,0,t);else if(mt(t,"readystatechange"),Ln(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(BT)[1]||null;!i&&se.self&&se.self.location&&(i=se.self.location.protocol.slice(0,-1)),r=!Nb.test(i?i.toLowerCase():"")}n=r}if(n)mt(t,"complete"),mt(t,"success");else{t.m=6;try{var s=2<Ln(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ZT(t)}}finally{Eh(t)}}}}function Eh(t,e){if(t.g){tI(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||mt(t,"ready");try{n.onreadystatechange=r}catch{}}}function tI(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(se.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function Ln(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<Ln(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Db(e)}};function n0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case JT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Vb(t){const e={};t=(t.g&&2<=Ln(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Fa(t[r]))continue;var n=ob(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}JN(e,function(r){return r.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function nI(t){let e="";return kg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ce(t,e,n))}function bo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rI(t){this.Ga=0,this.j=[],this.l=new ph,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bo("baseRetryDelayMs",5e3,t),this.hb=bo("retryDelaySeedMs",1e4,t),this.eb=bo("forwardChannelMaxRetries",2,t),this.xa=bo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new HT(t&&t.concurrentRequestLimit),this.Ja=new Cb,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=rI.prototype;U.ra=8;U.H=1;function Kg(t){if(iI(t),t.H==3){var e=t.W++,n=pr(t.I);if(Ce(n,"SID",t.K),Ce(n,"RID",e),Ce(n,"TYPE","terminate"),_l(t,n),e=new ml(t,t.l,e),e.L=2,e.v=_h(pr(n)),n=!1,se.navigator&&se.navigator.sendBeacon)try{n=se.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&se.Image&&(new Image().src=e.v,n=!0),n||(e.g=dI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),gl(e)}cI(t)}function Th(t){t.g&&(Hg(t),t.g.cancel(),t.g=null)}function iI(t){Th(t),t.u&&(se.clearTimeout(t.u),t.u=null),Sc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&se.clearTimeout(t.m),t.m=null)}function Ih(t){if(!WT(t.i)&&!t.m){t.m=!0;var e=t.Na;ja||PT(),Ba||(ja(),Ba=!0),Vg.add(e,t),t.C=0}}function Ob(t,e){return QT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=fl(xt(t.Na,t,e),uI(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new ml(this,this.l,t);let s=this.s;if(this.U&&(s?(s=wT(s),ET(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=sI(this,i,e),n=pr(this.I),Ce(n,"RID",t),Ce(n,"CVER",22),this.F&&Ce(n,"X-HTTP-Session-Id",this.F),_l(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(nI(s)))+"&"+e:this.o&&zg(n,this.o,s)),jg(this.i,i),this.bb&&Ce(n,"TYPE","init"),this.P?(Ce(n,"$req",e),Ce(n,"SID","null"),i.aa=!0,jp(i,n,null)):jp(i,n,e),this.H=2}}else this.H==3&&(t?r0(this,t):this.j.length==0||WT(this.i)||r0(this))};function r0(t,e){var n;e?n=e.m:n=t.W++;const r=pr(t.I);Ce(r,"SID",t.K),Ce(r,"RID",n),Ce(r,"AID",t.V),_l(t,r),t.o&&t.s&&zg(r,t.o,t.s),n=new ml(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=sI(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),jg(t.i,n),jp(n,r,e)}function _l(t,e){t.na&&kg(t.na,function(n,r){Ce(e,r,n)}),t.h&&jT({},function(n,r){Ce(e,r,n)})}function sI(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{xb(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function oI(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ja||PT(),Ba||(ja(),Ba=!0),Vg.add(e,t),t.A=0}}function qg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=fl(xt(t.Ma,t),uI(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,aI(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=fl(xt(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ot(10),Th(this),aI(this))};function Hg(t){t.B!=null&&(se.clearTimeout(t.B),t.B=null)}function aI(t){t.g=new ml(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=pr(t.wa);Ce(e,"RID","rpc"),Ce(e,"SID",t.K),Ce(e,"AID",t.V),Ce(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ce(e,"TO",t.qa),Ce(e,"TYPE","xmlhttp"),_l(t,e),t.o&&t.s&&zg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=_h(pr(e)),n.s=null,n.S=!0,$T(n,t)}U.ib=function(){this.v!=null&&(this.v=null,Th(this),qg(this),Ot(19))};function Sc(t){t.v!=null&&(se.clearTimeout(t.v),t.v=null)}function lI(t,e){var n=null;if(t.g==e){Sc(t),Hg(t),t.g=null;var r=2}else if(zp(t.i,e))n=e.F,GT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=mh(),mt(r,new bT(r,n)),Ih(t)}else oI(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&Ob(t,e)||r==2&&qg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:wi(t,5);break;case 4:wi(t,10);break;case 3:wi(t,6);break;default:wi(t,2)}}}function uI(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function wi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xt(t.pb,t);n||(n=new Ci("//www.google.com/images/cleardot.gif"),se.location&&se.location.protocol=="http"||Tc(n,"https"),_h(n)),kb(n.toString(),r)}else Ot(2);t.H=0,t.h&&t.h.za(e),cI(t),iI(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ot(2)):(this.l.info("Failed to ping google.com"),Ot(1))};function cI(t){if(t.H=0,t.ma=[],t.h){const e=YT(t.i);(e.length!=0||t.j.length!=0)&&(W_(t.ma,e),W_(t.ma,t.j),t.i.i.length=0,Cg(t.j),t.j.length=0),t.h.ya()}}function hI(t,e,n){var r=n instanceof Ci?pr(n):new Ci(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ic(r,r.m);else{var i=se.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ci(null);r&&Tc(s,r),e&&(s.g=e),i&&Ic(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Ce(r,n,e),Ce(r,"VER",t.ra),_l(t,r),r}function dI(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new je(new yl({ob:!0})):new je(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function fI(){}U=fI.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function Ac(){if(Ws&&!(10<=Number(QN)))throw Error("Environmental error: no available transport.")}Ac.prototype.g=function(t,e){return new nn(t,e)};function nn(t,e){ot.call(this),this.g=new rI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Fa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Fa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new uo(this)}at(nn,ot);nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ot(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=hI(t,null,t.Y),Ih(t)};nn.prototype.close=function(){Kg(this.g)};nn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Mg(t),t=n);e.j.push(new Ab(e.fb++,t)),e.H==3&&Ih(e)};nn.prototype.N=function(){this.g.h=null,delete this.j,Kg(this.g),delete this.g,nn.$.N.call(this)};function pI(t){Fg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(pI,Fg);function mI(){Ug.call(this),this.status=1}at(mI,Ug);function uo(t){this.g=t}at(uo,fI);uo.prototype.Ba=function(){mt(this.g,"a")};uo.prototype.Aa=function(t){mt(this.g,new pI(t))};uo.prototype.za=function(t){mt(this.g,new mI)};uo.prototype.ya=function(){mt(this.g,"b")};function $b(){this.blockSize=-1}function xn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(xn,$b);xn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Kd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}xn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Kd(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Kd(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Kd(this,r),i=0;break}}this.h=i,this.i+=e};xn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Lb={};function Wg(t){return-128<=t&&128>t?qN(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Fn(t){if(isNaN(t)||!isFinite(t))return ks;if(0>t)return ft(Fn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Kp;return new Ee(e,0)}function gI(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ft(gI(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fn(Math.pow(e,8)),r=ks,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Fn(Math.pow(e,s)),r=r.R(s).add(Fn(o))):(r=r.R(n),r=r.add(Fn(o)))}return r}var Kp=4294967296,ks=Wg(0),qp=Wg(1),i0=Wg(16777216);U=Ee.prototype;U.ea=function(){if(hn(this))return-ft(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Kp+r)*e,e*=Kp}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(rr(this))return"0";if(hn(this))return"-"+ft(this).toString(t);for(var e=Fn(Math.pow(t,6)),n=this,r="";;){var i=Pc(n,e).g;n=Rc(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,rr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function rr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function hn(t){return t.h==-1}U.X=function(t){return t=Rc(this,t),hn(t)?-1:rr(t)?0:1};function ft(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(qp)}U.abs=function(){return hn(this)?ft(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function Rc(t,e){return t.add(ft(e))}U.R=function(t){if(rr(this)||rr(t))return ks;if(hn(this))return hn(t)?ft(this).R(ft(t)):ft(ft(this).R(t));if(hn(t))return ft(this.R(ft(t)));if(0>this.X(i0)&&0>t.X(i0))return Fn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,lu(n,2*r+2*i),n[2*r+2*i+1]+=s*l,lu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,lu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,lu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function lu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Mo(t,e){this.g=t,this.h=e}function Pc(t,e){if(rr(e))throw Error("division by zero");if(rr(t))return new Mo(ks,ks);if(hn(t))return e=Pc(ft(t),e),new Mo(ft(e.g),ft(e.h));if(hn(e))return e=Pc(t,ft(e)),new Mo(ft(e.g),e.h);if(30<t.g.length){if(hn(t)||hn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=qp,r=e;0>=r.X(t);)n=s0(n),r=s0(r);var i=es(n,1),s=es(r,1);for(r=es(r,2),n=es(n,2);!rr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=es(r,1),n=es(n,1)}return e=Rc(t,i.R(e)),new Mo(i,e)}for(i=ks;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Fn(n),o=s.R(e);hn(o)||0<o.X(t);)n-=r,s=Fn(n),o=s.R(e);rr(s)&&(s=qp),i=i.add(s),t=Rc(t,o)}return new Mo(i,t)}U.gb=function(t){return Pc(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function s0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function es(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ee(i,t.h)}Ac.prototype.createWebChannel=Ac.prototype.g;nn.prototype.send=nn.prototype.u;nn.prototype.open=nn.prototype.m;nn.prototype.close=nn.prototype.close;gh.NO_ERROR=0;gh.TIMEOUT=8;gh.HTTP_ERROR=6;MT.COMPLETE="complete";VT.EventType=pl;pl.OPEN="a";pl.CLOSE="b";pl.ERROR="c";pl.MESSAGE="d";ot.prototype.listen=ot.prototype.O;je.prototype.listenOnce=je.prototype.P;je.prototype.getLastError=je.prototype.Sa;je.prototype.getLastErrorCode=je.prototype.Ia;je.prototype.getStatus=je.prototype.da;je.prototype.getResponseJson=je.prototype.Wa;je.prototype.getResponseText=je.prototype.ja;je.prototype.send=je.prototype.ha;je.prototype.setWithCredentials=je.prototype.Oa;xn.prototype.digest=xn.prototype.l;xn.prototype.reset=xn.prototype.reset;xn.prototype.update=xn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Fn;Ee.fromString=gI;var Fb=function(){return new Ac},Ub=function(){return mh()},qd=gh,jb=MT,Bb=Ki,o0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},zb=yl,uu=VT,Kb=je,qb=xn,Ds=Ee;const a0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="10.1.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new cT("@firebase/firestore");function l0(){return $i.logLevel}function Q(t,...e){if($i.logLevel<=_e.DEBUG){const n=e.map(Qg);$i.debug(`Firestore (${co}): ${t}`,...n)}}function mr(t,...e){if($i.logLevel<=_e.ERROR){const n=e.map(Qg);$i.error(`Firestore (${co}): ${t}`,...n)}}function Qs(t,...e){if($i.logLevel<=_e.WARN){const n=e.map(Qg);$i.warn(`Firestore (${co}): ${t}`,...n)}}function Qg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t="Unexpected state"){const e=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: `+t;throw mr(e),new Error(e)}function De(t,e){t||ne()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ao{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class Wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Qb{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ar,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ar)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new It(e)}}class Gb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Gb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new Xb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Zb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Gs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Ze(0,0))}static max(){return new ae(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends Wa{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const e2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Wa{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return e2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(xe.fromString(e))}static fromName(e){return new Y(xe.fromString(e).popFirst(5))}static empty(){return new Y(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new xe(e.slice()))}}function t2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new Zr(i,Y.empty(),e)}function n2(t){return new Zr(t.readTime,t.key,-1)}class Zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zr(ae.min(),Y.empty(),-1)}static max(){return new Zr(ae.max(),Y.empty(),-1)}}function r2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==i2)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function El(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Gg.ae=-1;function Sh(t){return t==null}function Cc(t){return t===0&&1/t==-1/0}function o2(t){return typeof t=="number"&&Number.isInteger(t)&&!Cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ho(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dt.RED,this.left=i??dt.EMPTY,this.right=s??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();const e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c0(this.data.getIterator())}getIteratorFrom(e){return new c0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class c0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new Dt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wI("Invalid base64 string: "+s):s}}(e);return new bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const a2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(t){if(De(!!t),typeof t=="string"){let e=0;const n=a2.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Xg(t){const e=t.mapValue.fields.__previous_value__;return Yg(e)?Xg(e):e}function Qa(t){const e=ei(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yg(t)?4:u2(t)?9007199254740991:10:ne()}function Kn(t,e){if(t===e)return!0;const n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qa(t).isEqual(Qa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ei(i.timestampValue),a=ei(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Li(i.bytesValue).isEqual(Li(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),a=Ke(s.doubleValue);return o===a?Cc(o)===Cc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Gs(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(u0(o)!==u0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Kn(o[l],a[l])))return!1;return!0}(t,e);default:return ne()}}function Ya(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=Fi(t),r=Fi(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ke(s.integerValue||s.doubleValue),l=Ke(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return h0(t.timestampValue,e.timestampValue);case 4:return h0(Qa(t),Qa(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Li(s),l=Li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=ve(a[u],l[u]);if(c!==0)return c}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ve(Ke(s.latitude),Ke(o.latitude));return a!==0?a:ve(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=Ys(a[u],l[u]);if(c)return c}return ve(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===hu.mapValue&&o===hu.mapValue)return 0;if(s===hu.mapValue)return 1;if(o===hu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=ve(l[h],c[h]);if(d!==0)return d;const p=Ys(a[l[h]],u[c[h]]);if(p!==0)return p}return ve(l.length,c.length)}(t.mapValue,e.mapValue);default:throw ne()}}function h0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=ei(t),r=ei(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function Xs(t){return Hp(t)}function Hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ei(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Hp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Hp(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function d0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wp(t){return!!t&&"integerValue"in t}function Jg(t){return!!t&&"arrayValue"in t}function f0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ou(t){return!!t&&"mapValue"in t}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ho(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=la(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function u2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ou(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=la(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ou(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ou(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ho(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dn(la(this.value))}}function EI(t){const e=[];return ho(t.fields,(n,r)=>{const i=new Pt([n]);if(Ou(r)){const s=EI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new At(e,0,ae.min(),ae.min(),ae.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,ae.min(),ae.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,ae.min(),ae.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.position=e,this.inclusive=n}}function m0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function g0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n="asc"){this.field=e,this.dir=n}}function c2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class He extends TI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d2(e,n,r):n==="array-contains"?new m2(e,r):n==="in"?new g2(e,r):n==="not-in"?new y2(e,r):n==="array-contains-any"?new v2(e,r):new He(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new f2(e,r):new p2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class kn extends TI{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new kn(e,n)}matches(e){return II(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function II(t){return t.op==="and"}function SI(t){return h2(t)&&II(t)}function h2(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Qp(t){if(t instanceof He)return t.field.canonicalString()+t.op.toString()+Xs(t.value);if(SI(t))return t.filters.map(e=>Qp(e)).join(",");{const e=t.filters.map(n=>Qp(n)).join(",");return`${t.op}(${e})`}}function AI(t,e){return t instanceof He?function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)}(t,e):t instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&AI(o,i.filters[a]),!0):!1}(t,e):void ne()}function RI(t){return t instanceof He?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(RI).join(" ,")+"}"}(t):"Filter"}class d2 extends He{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class f2 extends He{constructor(e,n){super(e,"in",n),this.keys=PI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class p2 extends He{constructor(e,n){super(e,"not-in",n),this.keys=PI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class m2 extends He{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jg(n)&&Ya(n.arrayValue,this.value)}}class g2 extends He{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}}class y2 extends He{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ya(this.value.arrayValue,n)}}class v2 extends He{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.he=null}}function y0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new _2(t,e,n,r,i,s,o)}function Zg(t){const e=ue(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xs(r)).join(",")),e.he=n}return e.he}function ey(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!c2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g0(t.startAt,e.startAt)&&g0(t.endAt,e.endAt)}function Gp(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function w2(t,e,n,r,i,s,o,a){return new fo(t,e,n,r,i,s,o,a)}function ty(t){return new fo(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ny(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ah(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function CI(t){return t.collectionGroup!==null}function bs(t){const e=ue(t);if(e.Pe===null){e.Pe=[];const n=Ah(e),r=ny(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Ns(n)),e.Pe.push(new Ns(Pt.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Ns(Pt.keyField(),s))}}}return e.Pe}function gr(t){const e=ue(t);if(!e.Ie)if(e.limitType==="F")e.Ie=y0(e.path,e.collectionGroup,bs(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of bs(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Ns(s.field,o))}const r=e.endAt?new xc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new xc(e.startAt.position,e.startAt.inclusive):null;e.Ie=y0(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.Ie}function Yp(t,e){e.getFirstInequalityField(),Ah(t);const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kc(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rh(t,e){return ey(gr(t),gr(e))&&t.limitType===e.limitType}function xI(t){return`${Zg(gr(t))}|lt:${t.limitType}`}function Xp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RI(i)).join(", ")}]`),Sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xs(i)).join(",")),`Target(${r})`}(gr(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of bs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,bs(r),i)||r.endAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,bs(r),i))}(t,e)}function E2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kI(t){return(e,n)=>{let r=!1;for(const i of bs(t)){const s=T2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function T2(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ys(l,u):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ho(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _I(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new Fe(Y.comparator);function yr(){return I2}const DI=new Fe(Y.comparator);function zo(...t){let e=DI;for(const n of t)e=e.insert(n.key,n);return e}function NI(t){let e=DI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return ua()}function bI(){return ua()}function ua(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const S2=new Fe(Y.comparator),A2=new Dt(Y.comparator);function fe(...t){let e=A2;for(const n of t)e=e.add(n);return e}const R2=new Dt(ve);function P2(){return R2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function VI(t){return{integerValue:""+t}}function C2(t,e){return o2(e)?VI(e):MI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this._=void 0}}function x2(t,e,n){return t instanceof Xa?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yg(s)&&(s=Xg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ja?$I(t,e):t instanceof Za?LI(t,e):function(i,s){const o=OI(i,s),a=_0(o)+_0(i.Te);return Wp(o)&&Wp(i.Te)?VI(a):MI(i.serializer,a)}(t,e)}function k2(t,e,n){return t instanceof Ja?$I(t,e):t instanceof Za?LI(t,e):n}function OI(t,e){return t instanceof Dc?function(r){return Wp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xa extends Ch{}class Ja extends Ch{constructor(e){super(),this.elements=e}}function $I(t,e){const n=FI(e);for(const r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Za extends Ch{constructor(e){super(),this.elements=e}}function LI(t,e){let n=FI(e);for(const r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}class Dc extends Ch{constructor(e,n){super(),this.serializer=e,this.Te=n}}function _0(t){return Ke(t.integerValue||t.doubleValue)}function FI(t){return Jg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this.field=e,this.transform=n}}function N2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ja&&i instanceof Ja||r instanceof Za&&i instanceof Za?Gs(r.elements,i.elements,Kn):r instanceof Dc&&i instanceof Dc?Kn(r.Te,i.Te):r instanceof Xa&&i instanceof Xa}(t.transform,e.transform)}class b2{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xh{}function UI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new BI(t.key,lr.none()):new Tl(t.key,t.data,lr.none());{const n=t.data,r=dn.empty();let i=new Dt(Pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qi(t.key,r,new Sn(i.toArray()),lr.none())}}function M2(t,e,n){t instanceof Tl?function(i,s,o){const a=i.value.clone(),l=E0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(i,s,o){if(!$u(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=E0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(jI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof Tl?function(s,o,a,l){if(!$u(s.precondition,o))return a;const u=s.value.clone(),c=T0(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(s,o,a,l){if(!$u(s.precondition,o))return a;const u=T0(s.fieldTransforms,l,o),c=o.data;return c.setAll(jI(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return $u(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function V2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OI(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function w0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gs(r,i,(s,o)=>N2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends xh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qi extends xh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function E0(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,k2(o,a,n[i]))}return r}function T0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,x2(s,o,e))}return r}class BI extends xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O2 extends xh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&M2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=UI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(n,r)=>w0(n,r))&&Gs(this.baseMutations,e.baseMutations,(n,r)=>w0(n,r))}}class ry{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return S2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ry(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,me;function U2(t){switch(t){default:return ne();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function zI(t){if(t===void 0)return mr("GRPC error has no .code"),x.UNKNOWN;switch(t){case ze.OK:return x.OK;case ze.CANCELLED:return x.CANCELLED;case ze.UNKNOWN:return x.UNKNOWN;case ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ze.INTERNAL:return x.INTERNAL;case ze.UNAVAILABLE:return x.UNAVAILABLE;case ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ze.NOT_FOUND:return x.NOT_FOUND;case ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ze.ABORTED:return x.ABORTED;case ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ze.DATA_LOSS:return x.DATA_LOSS;default:return ne()}}(me=ze||(ze={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return du}static getOrCreateInstance(){return du===null&&(du=new iy),du}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let du=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Ds([4294967295,4294967295],0);function I0(t){const e=j2().encode(t),n=new qb;return n.update(e),new Uint8Array(n.digest())}function S0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ds([n,r],0),new Ds([i,s],0)]}class sy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ko(`Invalid padding: ${n}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${n}`);this.de=8*e.length-n,this.Ae=Ds.fromNumber(this.de)}Re(e,n,r){let i=e.add(n.multiply(Ds.fromNumber(r)));return i.compare(B2)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ae).toNumber()}Ve(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.de===0)return!1;const n=I0(e),[r,i]=S0(n);for(let s=0;s<this.hashCount;s++){const o=this.Re(r,i,s);if(!this.Ve(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new sy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.de===0)return;const n=I0(e),[r,i]=S0(n);for(let s=0;s<this.hashCount;s++){const o=this.Re(r,i,s);this.me(o)}}me(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kh(ae.min(),i,new Fe(ve),yr(),fe())}}class Il{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,i){this.fe=e,this.removedTargetIds=n,this.key=r,this.ge=i}}class KI{constructor(e,n){this.targetId=e,this.pe=n}}class qI{constructor(e,n,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class A0{constructor(){this.ye=0,this.we=P0(),this.Se=bt.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return this.ye!==0}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=fe(),n=fe(),r=fe();return this.we.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Il(this.Se,this.be,e,n,r)}xe(){this.De=!1,this.we=P0()}Oe(e,n){this.De=!0,this.we=this.we.insert(e,n)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class z2{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=yr(),this.$e=R0(),this.Ue=new Fe(ve)}We(e){for(const n of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(n,e.ge):this.ze(n,e.key,e.ge);for(const n of e.removedTargetIds)this.ze(n,e.key,e.ge)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Fe(e.resumeToken);break;case 1:r.Le(),r.ve||r.xe(),r.Fe(e.resumeToken);break;case 2:r.Le(),r.ve||this.removeTarget(n);break;case 3:this.Je(n)&&(r.ke(),r.Fe(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Fe(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){var n,r;const i=e.targetId,s=e.pe.count,o=this.Xe(i);if(o){const a=o.target;if(Gp(a))if(s===0){const l=new Y(a.path);this.ze(i,l,At.newNoDocument(l,ae.min()))}else De(s===1);else{const l=this.et(i);if(l!==s){const u=this.tt(e,l);if(u.status!==0){this.Ye(i);const c=u.status===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(i,c)}(n=iy.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(h,d,p,y){var v,w,m,f,_,g;const E={localCacheCount:p,existenceFilterCount:y.count},T=y.unchangedNames;return T&&(E.bloomFilter={applied:h===0,hashCount:(v=T?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(f=(m=(w=T?.bits)===null||w===void 0?void 0:w.bitmap)===null||m===void 0?void 0:m.length)!==null&&f!==void 0?f:0,padding:(g=(_=T?.bits)===null||_===void 0?void 0:_.padding)!==null&&g!==void 0?g:0},d&&(E.bloomFilter.mightContain=d)),E}(u.status,(r=u.nt)!==null&&r!==void 0?r:null,l,e.pe))}}}}tt(e,n){const{unchangedNames:r,count:i}=e.pe;if(!r||!r.bits)return{status:1};const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=r;let l,u;try{l=Li(s).toUint8Array()}catch(h){if(h instanceof wI)return Qs("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw h}try{u=new sy(l,o,a)}catch(h){return Qs(h instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",h),{status:1}}const c=h=>{const d=this.qe.rt();return u.mightContain(`projects/${d.projectId}/databases/${d.database}/documents/${h}`)};return u.de===0?{status:1}:{status:i===n-this.it(e.targetId,c)?0:2,nt:c}}it(e,n){const r=this.qe.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{n(s.path.canonicalString())||(this.ze(e,s,null),i++)}),i}st(e){const n=new Map;this.Qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&Gp(a.target)){const l=new Y(a.target.path);this.Ke.get(l)!==null||this.ot(o,l)||this.ze(o,l,At.newNoDocument(l,e))}s.Ce&&(n.set(o,s.Me()),s.xe())}});let r=fe();this.$e.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xe(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ke.forEach((s,o)=>o.setReadTime(e));const i=new kh(e,n,this.Ue,this.Ke,r);return this.Ke=yr(),this.$e=R0(),this.Ue=new Fe(ve),i}Ge(e,n){if(!this.Je(e))return;const r=this.ot(e,n.key)?2:0;this.He(e).Oe(n.key,r),this.Ke=this.Ke.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ot(e,n)?i.Oe(n,1):i.Ne(n),this.$e=this.$e.insert(n,this._t(n).delete(e)),r&&(this.Ke=this.Ke.insert(n,r))}removeTarget(e){this.Qe.delete(e)}et(e){const n=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let n=this.Qe.get(e);return n||(n=new A0,this.Qe.set(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Dt(ve),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.Qe.get(e);return n&&n.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new A0),this.qe.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ot(e,n){return this.qe.getRemoteKeysForTarget(e).has(n)}}function R0(){return new Fe(Y.comparator)}function P0(){return new Fe(Y.comparator)}const K2={asc:"ASCENDING",desc:"DESCENDING"},q2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H2={and:"AND",or:"OR"};class W2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Jp(t,e){return t.useProto3Json||Sh(e)?e:{value:e}}function Nc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(t,e){return Nc(t,e.toTimestamp())}function zn(t){return De(!!t),ae.fromTimestamp(function(n){const r=ei(n);return new Ze(r.seconds,r.nanos)}(t))}function oy(t,e){return function(r){return new xe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function WI(t){const e=xe.fromString(t);return De(XI(e)),e}function Zp(t,e){return oy(t.databaseId,e.path)}function Hd(t,e){const n=WI(e);if(n.get(1)!==t.databaseId.projectId)throw new K(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(QI(n))}function em(t,e){return oy(t.databaseId,e)}function G2(t){const e=WI(t);return e.length===4?xe.emptyPath():QI(e)}function tm(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QI(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C0(t,e,n){return{name:Zp(t,e),fields:n.value.mapValue.fields}}function Y2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(De(c===void 0||typeof c=="string"),bt.fromBase64String(c||"")):(De(c===void 0||c instanceof Uint8Array),bt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?x.UNKNOWN:zI(u.code);return new K(c,u.message||"")}(o);n=new qI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hd(t,r.document.name),s=zn(r.document.updateTime),o=r.document.createTime?zn(r.document.createTime):ae.min(),a=new dn({mapValue:{fields:r.document.fields}}),l=At.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Lu(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hd(t,r.document),s=r.readTime?zn(r.readTime):ae.min(),o=At.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Lu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hd(t,r.document),s=r.removedTargetIds||[];n=new Lu([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new F2(i,s),a=r.targetId;n=new KI(a,o)}}return n}function X2(t,e){let n;if(e instanceof Tl)n={update:C0(t,e.key,e.value)};else if(e instanceof BI)n={delete:Zp(t,e.key)};else if(e instanceof qi)n={update:C0(t,e.key,e.data),updateMask:oM(e.fieldMask)};else{if(!(e instanceof O2))return ne();n={verify:Zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Za)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),increment:a.Te};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Q2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function J2(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?zn(i.updateTime):zn(s);return o.isEqual(ae.min())&&(o=zn(s)),new b2(o,i.transformResults||[])}(n,e))):[]}function Z2(t,e){return{documents:[em(t,e.path)]}}function eM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=em(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=em(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return YI(kn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:ns(h.field),direction:rM(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Jp(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function tM(t){let e=G2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const d=GI(h);return d instanceof kn&&SI(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(y){return new Ns(rs(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Sh(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,p=h.values||[];return new xc(p,d)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const d=!h.before,p=h.values||[];return new xc(p,d)}(n.endAt)),w2(e,i,o,s,a,"F",l,u)}function nM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rs(n.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rs(n.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rs(n.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rs(n.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return He.create(rs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>GI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function rM(t){return K2[t]}function iM(t){return q2[t]}function sM(t){return H2[t]}function ns(t){return{fieldPath:t.canonicalString()}}function rs(t){return Pt.fromServerFormat(t.fieldPath)}function YI(t){return t instanceof He?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:iM(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(i=>YI(i));return r.length===1?r[0]:{compositeFilter:{op:sM(n.op),filters:r}}}(t):ne()}function oM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=bt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.ct=e}}function lM(t){const e=tM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.sn=new cM}addToCollectionParentIndex(e,n){return this.sn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Zr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class cM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new Js(0)}static On(){return new Js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ca(r.mutation,i,Sn.empty(),Ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=zo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=yr();const o=ua(),a=function(){return ua()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof qi)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),ca(c.mutation,u,c.mutation.getFieldMask(),Ze.now())):o.set(u.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new dM(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ua();let i=new Fe((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Sn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||fe()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=bI();c.forEach(d=>{if(!s.has(d)){const p=UI(n.get(d),r.get(d));p!==null&&h.set(d,p),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Ei());let a=-1,l=s;return o.next(u=>$.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?$.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,fe())).next(c=>({batchId:a,changes:NI(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=zo();return this.indexManager.getCollectionParents(e,i).next(o=>$.forEach(o,a=>{const l=function(c,h){return new fo(h,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{s=s.insert(c,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,At.newInvalidDocument(u)))});let o=zo();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&ca(u.mutation,l,Sn.empty(),Ze.now()),Ph(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,n){return $.resolve(this.ar.get(n))}saveBundleMetadata(e,n){return this.ar.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.ur.get(n))}saveNamedQuery(e,n){return this.ur.set(n.name,function(i){return{name:i.name,query:lM(i.bundledQuery),readTime:zn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.overlays=new Fe(Y.comparator),this.cr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ei();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.cr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.cr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Ei(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Ei(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Ei(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return $.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.cr.get(i.largestBatchId).delete(r.key);this.cr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L2(n,r));let s=this.cr.get(n);s===void 0&&(s=fe(),this.cr.set(n,s)),this.cr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.lr=new Dt(nt.hr),this.Pr=new Dt(nt.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.lr=this.lr.add(r),this.Pr=this.Pr.add(r)}Tr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Er(new nt(e,n))}dr(e,n){e.forEach(r=>this.removeReference(r,n))}Ar(e){const n=new Y(new xe([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.Pr.forEachInRange([r,i],o=>{this.Er(o),s.push(o.key)}),s}Rr(){this.lr.forEach(e=>this.Er(e))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const n=new Y(new xe([])),r=new nt(n,e),i=new nt(n,e+1);let s=fe();return this.Pr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new nt(e,0),r=this.lr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.mr=n}static hr(e,n){return Y.comparator(e.key,n.key)||ve(e.mr,n.mr)}static Ir(e,n){return ve(e.mr,n.mr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.gr=1,this.pr=new Dt(nt.hr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new $2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.pr=this.pr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.yr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.wr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.gr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.pr.forEachInRange([r,i],o=>{const a=this.yr(o.mr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(ve);return n.forEach(i=>{const s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.pr.forEachInRange([s,o],a=>{r=r.add(a.mr)})}),$.resolve(this.Sr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Y.isDocumentKey(s)||(s=s.child(""));const o=new nt(new Y(s),0);let a=new Dt(ve);return this.pr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.mr)),!0)},o),$.resolve(this.Sr(a))}Sr(e){const n=[];return e.forEach(r=>{const i=this.yr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.br(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.pr;return $.forEach(n.mutations,i=>{const s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.pr=r})}Cn(e){}containsKey(e,n){const r=new nt(n,0),i=this.pr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}br(e,n){return this.wr(e)}wr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}yr(e){const n=this.wr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.Dr=e,this.docs=function(){return new Fe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Dr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=yr();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||r2(n2(c),r)<=0||(i.has(c.key)||Ph(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}vr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vM(this)}getSize(e){return $.resolve(this.size)}}class vM extends hM{constructor(e){super(),this.sr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.sr.addEntry(e,i)):this.sr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.sr.getEntry(e,n)}getAllFromCache(e,n){return this.sr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.persistence=e,this.Cr=new po(n=>Zg(n),ey),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new ay,this.targetCount=0,this.Or=Js.xn()}forEachTarget(e,n){return this.Cr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Fr&&(this.Fr=n),$.resolve()}Ln(e){this.Cr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Or=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,n){return this.Ln(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Ln(n),$.resolve()}removeTargetData(e,n){return this.Cr.delete(n.target),this.Mr.Ar(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Cr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Cr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Cr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Mr.Tr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Mr.dr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Mr.Ar(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Mr.Vr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Mr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){this.Nr={},this.overlays={},this.Br=new Gg(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new _M(this),this.indexManager=new uM,this.remoteDocumentCache=function(i){return new yM(i)}(r=>this.referenceDelegate.qr(r)),this.serializer=new aM(n),this.Qr=new pM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Nr[e.toKey()];return r||(r=new gM(n,this.referenceDelegate),this.Nr[e.toKey()]=r),r}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new EM(this.Br.next());return this.referenceDelegate.Kr(),r(i).next(s=>this.referenceDelegate.$r(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ur(e,n){return $.or(Object.values(this.Nr).map(r=>()=>r.containsKey(e,n)))}}class EM extends s2{constructor(e){super(),this.currentSequenceNumber=e}}class ly{constructor(e){this.persistence=e,this.Wr=new ay,this.Gr=null}static zr(e){return new ly(e)}get jr(){if(this.Gr)return this.Gr;throw ne()}addReference(e,n,r){return this.Wr.addReference(r,n),this.jr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Wr.removeReference(r,n),this.jr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.jr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Wr.Ar(n.targetId).forEach(i=>this.jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Kr(){this.Gr=new Set}$r(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.jr,r=>{const i=Y.fromPath(r);return this.Hr(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Gr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hr(e,n).next(r=>{r?this.jr.delete(n.toString()):this.jr.add(n.toString())})}qr(e){return 0}Hr(e,n){return $.or([()=>$.resolve(this.Wr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ur(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Li=r,this.ki=i}static qi(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new uy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.Qi=!1}initialize(e,n){this.Ki=e,this.indexManager=n,this.Qi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.$i(e,n).next(s=>s||this.Ui(e,n,i,r)).next(s=>s||this.Wi(e,n))}$i(e,n){if(v0(n))return $.resolve(null);let r=gr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kc(n,null,"F"),r=gr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=fe(...s);return this.Ki.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Gi(n,a);return this.zi(n,u,o,l.readTime)?this.$i(e,kc(n,null,"F")):this.ji(e,u,n,l)}))})))}Ui(e,n,r,i){return v0(n)||i.isEqual(ae.min())?this.Wi(e,n):this.Ki.getDocuments(e,r).next(s=>{const o=this.Gi(n,s);return this.zi(n,o,r,i)?this.Wi(e,n):(l0()<=_e.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xp(n)),this.ji(e,o,n,t2(i,-1)))})}Gi(e,n){let r=new Dt(kI(e));return n.forEach((i,s)=>{Ph(e,s)&&(r=r.add(s))}),r}zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Wi(e,n){return l0()<=_e.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Xp(n)),this.Ki.getDocumentsMatchingQuery(e,n,Zr.min())}ji(e,n,r,i){return this.Ki.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.persistence=e,this.Hi=n,this.serializer=i,this.Ji=new Fe(ve),this.Yi=new po(s=>Zg(s),ey),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(r)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fM(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function SM(t,e,n,r){return new IM(t,e,n,r)}async function JI(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.es(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=fe();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function AM(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,d=h.keys();let p=$.resolve();return d.forEach(y=>{p=p.next(()=>c.getEntry(l,y)).next(v=>{const w=u.docVersions.get(y);De(w!==null),v.version.compareTo(w)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZI(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.kr.getLastRemoteSnapshotVersion(n))}function RM(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const a=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;a.push(n.kr.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.kr.addMatchingKeys(s,c.addedDocuments,h)));let p=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(bt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(v,w,m){return v.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(d,p,c)&&a.push(n.kr.updateTargetData(s,p))});let l=yr(),u=fe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(PM(s,o,e.documentUpdates).next(c=>{l=c.ns,u=c.rs})),!r.isEqual(ae.min())){const c=n.kr.getLastRemoteSnapshotVersion(s).next(h=>n.kr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ji=i,s))}function PM(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=yr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ns:o,rs:i}})}function CM(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xM(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.kr.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.kr.allocateTargetId(r).next(o=>(i=new Dr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.kr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ji.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(r.targetId,r),n.Yi.set(e,r.targetId)),r})}async function nm(t,e,n){const r=ue(t),i=r.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!El(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}function x0(t,e,n){const r=ue(t);let i=ae.min(),s=fe();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,u,c){const h=ue(l),d=h.Yi.get(c);return d!==void 0?$.resolve(h.Ji.get(d)):h.kr.getTargetData(u,c)}(r,o,gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Hi.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:fe())).next(a=>(kM(r,E2(e),a),{documents:a,ss:s})))}function kM(t,e,n){let r=t.Zi.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Zi.set(e,r)}class k0{constructor(){this.activeTargetIds=P2()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DM{constructor(){this.Hs=new k0,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,n,r){this.Js[e]=n}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new k0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{Ys(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function Wd(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class VM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.To=r+"://"+n.host,this.Eo=`projects/${i}/databases/${s}`,this.Ao=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Ro(){return!1}Vo(n,r,i,s,o){const a=Wd(),l=this.mo(n,r);Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(u,s,o),this.po(n,l,u,i).then(c=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Qs("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}yo(n,r,i,s,o,a){return this.Vo(n,r,i,s,o)}fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}mo(n,r){const i=bM[n];return`${this.To}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,n,r,i){const s=Wd();return new Promise((o,a)=>{const l=new Kb;l.setWithCredentials(!0),l.listenOnce(jb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case qd.NO_ERROR:const c=l.getResponseJson();Q(Tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case qd.TIMEOUT:Q(Tt,`RPC '${e}' ${s} timed out`),a(new K(x.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const h=l.getStatus();if(Q(Tt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=d?.error;if(p&&p.status&&p.message){const y=function(w){const m=w.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(m)>=0?m:x.UNKNOWN}(p.status);a(new K(y,p.message))}else a(new K(x.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(x.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{Q(Tt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Q(Tt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}wo(e,n,r){const i=Wd(),s=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fb(),a=Ub(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new zb({})),this.fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Q(Tt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let d=!1,p=!1;const y=new MM({so:w=>{p?Q(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(Q(Tt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Q(Tt,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},oo:()=>h.close()}),v=(w,m,f)=>{w.listen(m,_=>{try{f(_)}catch(g){setTimeout(()=>{throw g},0)}})};return v(h,uu.EventType.OPEN,()=>{p||Q(Tt,`RPC '${e}' stream ${i} transport opened.`)}),v(h,uu.EventType.CLOSE,()=>{p||(p=!0,Q(Tt,`RPC '${e}' stream ${i} transport closed`),y.Po())}),v(h,uu.EventType.ERROR,w=>{p||(p=!0,Qs(Tt,`RPC '${e}' stream ${i} transport errored:`,w),y.Po(new K(x.UNAVAILABLE,"The operation could not be completed")))}),v(h,uu.EventType.MESSAGE,w=>{var m;if(!p){const f=w.data[0];De(!!f);const _=f,g=_.error||((m=_[0])===null||m===void 0?void 0:m.error);if(g){Q(Tt,`RPC '${e}' stream ${i} received error:`,g);const E=g.status;let T=function(P){const D=ze[P];if(D!==void 0)return zI(D)}(E),I=g.message;T===void 0&&(T=x.INTERNAL,I="Unknown error status: "+E+" with message "+g.message),p=!0,y.Po(new K(T,I)),h.close()}else Q(Tt,`RPC '${e}' stream ${i} received:`,f),y.Io(f)}}),v(a,Bb.STAT_EVENT,w=>{w.stat===o0.PROXY?Q(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===o0.NOPROXY&&Q(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.ho()},0),y}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){return new W2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=n,this.So=r,this.bo=i,this.Do=s,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const n=Math.floor(this.vo+this.Oo()),r=Math.max(0,Date.now()-this.Fo),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.vo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Fo=Date.now(),e())),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){this.Co!==null&&(this.Co.skipDelay(),this.Co=null)}cancel(){this.Co!==null&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i,s,o,a,l){this.ii=e,this.Bo=r,this.Lo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new eS(e,n)}$o(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Wo()}async stop(){this.$o()&&await this.close(0)}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&this.qo===null&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,()=>this.jo()))}Ho(e){this.Jo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}async close(e,n){this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,e!==4?this.Ko.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Zo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(n)}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),n=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.ko===n&&this.e_(r,i)},r=>{e(()=>{const i=new K(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.t_(i)})})}e_(e,n){const r=this.Xo(this.ko);this.stream=this.n_(e,n),this.stream._o(()=>{r(()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener._o()))}),this.stream.uo(i=>{r(()=>this.t_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Wo(){this.state=5,this.Ko.xo(async()=>{this.state=0,this.start()})}t_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.ko===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OM extends tS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}n_(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.Ko.reset();const n=Y2(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?zn(o.readTime):ae.min()}(e);return this.listener.r_(n,r)}i_(e){const n={};n.database=tm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Gp(l)?{documents:Z2(s,l)}:{query:eM(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HI(s,o.resumeToken);const u=Jp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Nc(s,o.snapshotVersion.toTimestamp());const u=Jp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=nM(this.serializer,e);r&&(n.labels=r),this.Ho(n)}s_(e){const n={};n.database=tm(this.serializer),n.removeTarget=e,this.Ho(n)}}class $M extends tS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const n=J2(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.u_(r,n)}return De(!e.writeResults||e.writeResults.length===0),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=tm(this.serializer),this.Ho(e)}a_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>X2(this.serializer,r))};this.Ho(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.h_=!1}P_(){if(this.h_)throw new K(x.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,n,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Vo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(x.UNKNOWN,i.toString())})}yo(e,n,r,i){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.yo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(x.UNKNOWN,s.toString())})}terminate(){this.h_=!0}}class FM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){this.T_===0&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve())))}m_(e){this.state==="Online"?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,e==="Online"&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(mr(n),this.d_=!1):Q("OnlineStateTracker",n)}f_(){this.E_!==null&&(this.E_.cancel(),this.E_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=s,this.S_.Ys(o=>{r.enqueueAndForget(async()=>{Hi(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ue(l);u.y_.add(4),await Sl(u),u.b_.set("Unknown"),u.y_.delete(4),await Nh(u)}(this))})}),this.b_=new FM(r,i)}}async function Nh(t){if(Hi(t))for(const e of t.w_)await e(!0)}async function Sl(t){for(const e of t.w_)await e(!1)}function nS(t,e){const n=ue(t);n.p_.has(e.targetId)||(n.p_.set(e.targetId,e),dy(n)?hy(n):mo(n).Uo()&&cy(n,e))}function rS(t,e){const n=ue(t),r=mo(n);n.p_.delete(e),r.Uo()&&iS(n,e),n.p_.size===0&&(r.Uo()?r.zo():Hi(n)&&n.b_.set("Unknown"))}function cy(t,e){if(t.D_.Be(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(t).i_(e)}function iS(t,e){t.D_.Be(e),mo(t).s_(e)}function hy(t){t.D_=new z2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.p_.get(e)||null,rt:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.b_.A_()}function dy(t){return Hi(t)&&!mo(t).$o()&&t.p_.size>0}function Hi(t){return ue(t).y_.size===0}function sS(t){t.D_=void 0}async function jM(t){t.p_.forEach((e,n)=>{cy(t,e)})}async function BM(t,e){sS(t),dy(t)?(t.b_.m_(e),hy(t)):t.b_.set("Unknown")}async function zM(t,e,n){if(t.b_.set("Online"),e instanceof qI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.p_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.p_.delete(a),i.D_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bc(t,r)}else if(e instanceof Lu?t.D_.We(e):e instanceof KI?t.D_.Ze(e):t.D_.je(e),!n.isEqual(ae.min()))try{const r=await ZI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.D_.st(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.p_.get(u);c&&s.p_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.p_.get(l);if(!c)return;s.p_.set(l,c.withResumeToken(bt.EMPTY_BYTE_STRING,c.snapshotVersion)),iS(s,l);const h=new Dr(c.target,l,u,c.sequenceNumber);cy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await bc(t,r)}}async function bc(t,e,n){if(!El(e))throw e;t.y_.add(1),await Sl(t),t.b_.set("Offline"),n||(n=()=>ZI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.y_.delete(1),await Nh(t)})}function oS(t,e){return e().catch(n=>bc(t,n,e))}async function bh(t){const e=ue(t),n=ti(e);let r=e.g_.length>0?e.g_[e.g_.length-1].batchId:-1;for(;KM(e);)try{const i=await CM(e.localStore,r);if(i===null){e.g_.length===0&&n.zo();break}r=i.batchId,qM(e,i)}catch(i){await bc(e,i)}aS(e)&&lS(e)}function KM(t){return Hi(t)&&t.g_.length<10}function qM(t,e){t.g_.push(e);const n=ti(t);n.Uo()&&n.__&&n.a_(e.mutations)}function aS(t){return Hi(t)&&!ti(t).$o()&&t.g_.length>0}function lS(t){ti(t).start()}async function HM(t){ti(t).l_()}async function WM(t){const e=ti(t);for(const n of t.g_)e.a_(n.mutations)}async function QM(t,e,n){const r=t.g_.shift(),i=ry.from(r,e,n);await oS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bh(t)}async function GM(t,e){e&&ti(t).__&&await async function(r,i){if(function(o){return U2(o)&&o!==x.ABORTED}(i.code)){const s=r.g_.shift();ti(r).Go(),await oS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bh(r)}}(t,e),aS(t)&&lS(t)}async function N0(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Hi(n);n.y_.add(3),await Sl(n),r&&n.b_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.y_.delete(3),await Nh(n)}async function YM(t,e){const n=ue(t);e?(n.y_.delete(2),await Nh(n)):e||(n.y_.add(2),await Sl(n),n.b_.set("Unknown"))}function mo(t){return t.v_||(t.v_=function(n,r,i){const s=ue(n);return s.P_(),new OM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{_o:jM.bind(null,t),uo:BM.bind(null,t),r_:zM.bind(null,t)}),t.w_.push(async e=>{e?(t.v_.Go(),dy(t)?hy(t):t.b_.set("Unknown")):(await t.v_.stop(),sS(t))})),t.v_}function ti(t){return t.C_||(t.C_=function(n,r,i){const s=ue(n);return s.P_(),new $M(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{_o:HM.bind(null,t),uo:GM.bind(null,t),c_:WM.bind(null,t),u_:QM.bind(null,t)}),t.w_.push(async e=>{e?(t.C_.Go(),await bh(t)):(await t.C_.stop(),t.g_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.g_.length} pending writes`),t.g_=[]))})),t.C_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(t,e){if(mr("AsyncQueue",`${e}: ${t}`),El(t))return new K(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=zo(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Ms(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.F_=new Fe(Y.comparator)}track(e){const n=e.doc.key,r=this.F_.get(n);r?e.type!==0&&r.type===3?this.F_=this.F_.insert(n,e):e.type===3&&r.type!==1?this.F_=this.F_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.F_=this.F_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.F_=this.F_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.F_=this.F_.remove(n):e.type===1&&r.type===2?this.F_=this.F_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.F_=this.F_.insert(n,{type:2,doc:e.doc}):ne():this.F_=this.F_.insert(n,e)}M_(){const e=[];return this.F_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zs{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zs(e,n,Ms.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.x_=void 0,this.listeners=[]}}class JM{constructor(){this.queries=new po(e=>xI(e),Rh),this.onlineState="Unknown",this.O_=new Set}}async function uS(t,e){const n=ue(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new XM),i)try{s.x_=await n.onListen(r)}catch(o){const a=py(o,`Initialization of query '${Xp(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.N_(n.onlineState),s.x_&&e.B_(s.x_)&&my(n)}async function cS(t,e){const n=ue(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function ZM(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.B_(i)&&(r=!0);o.x_=i}}r&&my(n)}function eV(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function my(t){t.O_.forEach(e=>{e.next()})}class hS{constructor(e,n,r){this.query=e,this.L_=n,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=r||{}}B_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),n=!0):this.K_(e,this.onlineState)&&(this.U_(e),n=!0),this.q_=e,n}onError(e){this.L_.error(e)}N_(e){this.onlineState=e;let n=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),n=!0),n}K_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.W_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Q_(e){if(e.docChanges.length>0)return!0;const n=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}U_(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e){this.key=e}}class fS{constructor(e){this.key=e}}class tV{constructor(e,n){this.query=e,this.X_=n,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=fe(),this.mutatedKeys=fe(),this.na=kI(e),this.ra=new Ms(this.na)}get ia(){return this.X_}sa(e,n){const r=n?n.oa:new b0,i=n?n.ra:this.ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),p=Ph(this.query,h)?h:null,y=!!d&&this.mutatedKeys.has(d.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),w=!0):this._a(d,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.na(p,l)>0||u&&this.na(p,u)<0)&&(a=!0)):!d&&p?(r.track({type:0,doc:p}),w=!0):d&&!p&&(r.track({type:1,doc:d}),w=!0,(l||u)&&(a=!0)),w&&(p?(o=o.add(p),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ra:o,oa:r,zi:a,mutatedKeys:s}}_a(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;const s=e.oa.M_();s.sort((u,c)=>function(d,p){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return y(d)-y(p)}(u.type,c.type)||this.na(u.doc,c.doc)),this.aa(r);const o=n?this.ua():[],a=this.ta.size===0&&this.current?1:0,l=a!==this.ea;return this.ea=a,s.length!==0||l?{snapshot:new Zs(this.query,e.ra,i,s,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ca:o}:{ca:o}}N_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ra:this.ra,oa:new b0,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}aa(e){e&&(e.addedDocuments.forEach(n=>this.X_=this.X_.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.X_=this.X_.delete(n)),this.current=e.current)}ua(){if(!this.current)return[];const e=this.ta;this.ta=fe(),this.ra.forEach(r=>{this.la(r.key)&&(this.ta=this.ta.add(r.key))});const n=[];return e.forEach(r=>{this.ta.has(r)||n.push(new fS(r))}),this.ta.forEach(r=>{e.has(r)||n.push(new dS(r))}),n}ha(e){this.X_=e.ss,this.ta=fe();const n=this.sa(e.documents);return this.applyChanges(n,!0)}Pa(){return Zs.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,this.ea===0,this.hasCachedResults)}}class nV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rV{constructor(e){this.key=e,this.Ia=!1}}class iV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ta={},this.Ea=new po(a=>xI(a),Rh),this.da=new Map,this.Aa=new Set,this.Ra=new Fe(Y.comparator),this.Va=new Map,this.ma=new ay,this.fa={},this.ga=new Map,this.pa=Js.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return this.ya===!0}}async function sV(t,e){const n=mV(t);let r,i;const s=n.Ea.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const o=await xM(n.localStore,gr(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await oV(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&nS(n.remoteStore,o)}return i}async function oV(t,e,n,r,i){t.wa=(h,d,p)=>async function(v,w,m,f){let _=w.view.sa(m);_.zi&&(_=await x0(v.localStore,w.query,!1).then(({documents:T})=>w.view.sa(T,_)));const g=f&&f.targetChanges.get(w.targetId),E=w.view.applyChanges(_,v.isPrimaryClient,g);return V0(v,w.targetId,E.ca),E.snapshot}(t,h,d,p);const s=await x0(t.localStore,e,!0),o=new tV(e,s.ss),a=o.sa(s.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);V0(t,n,u.ca);const c=new nV(e,n,o);return t.Ea.set(e,c),t.da.has(n)?t.da.get(n).push(e):t.da.set(n,[e]),u.snapshot}async function aV(t,e){const n=ue(t),r=n.Ea.get(e),i=n.da.get(r.targetId);if(i.length>1)return n.da.set(r.targetId,i.filter(s=>!Rh(s,e))),void n.Ea.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await nm(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),rS(n.remoteStore,r.targetId),rm(n,r.targetId)}).catch(wl)):(rm(n,r.targetId),await nm(n.localStore,r.targetId,!0))}async function lV(t,e,n){const r=gV(t);try{const i=await function(o,a){const l=ue(o),u=Ze.now(),c=a.reduce((p,y)=>p.add(y.key),fe());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=yr(),v=fe();return l.Xi.getEntries(p,c).next(w=>{y=w,y.forEach((m,f)=>{f.isValidDocument()||(v=v.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,y)).next(w=>{h=w;const m=[];for(const f of a){const _=V2(f,h.get(f.key).overlayedDocument);_!=null&&m.push(new qi(f.key,_,EI(_.value.mapValue),lr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,m,a)}).next(w=>{d=w;const m=w.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(p,w.batchId,m)})}).then(()=>({batchId:d.batchId,changes:NI(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.fa[o.currentUser.toKey()];u||(u=new Fe(ve)),u=u.insert(a,l),o.fa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Al(r,i.changes),await bh(r.remoteStore)}catch(i){const s=py(i,"Failed to persist write");n.reject(s)}}async function pS(t,e){const n=ue(t);try{const r=await RM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Va.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ia=!0:i.modifiedDocuments.size>0?De(o.Ia):i.removedDocuments.size>0&&(De(o.Ia),o.Ia=!1))}),await Al(n,r,e)}catch(r){await wl(r)}}function M0(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Ea.forEach((s,o)=>{const a=o.view.N_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.listeners)d.N_(a)&&(u=!0)}),u&&my(l)}(r.eventManager,e),i.length&&r.Ta.r_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uV(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Va.get(e),s=i&&i.key;if(s){let o=new Fe(Y.comparator);o=o.insert(s,At.newNoDocument(s,ae.min()));const a=fe().add(s),l=new kh(ae.min(),new Map,new Fe(ve),o,a);await pS(r,l),r.Ra=r.Ra.remove(s),r.Va.delete(e),gy(r)}else await nm(r.localStore,e,!1).then(()=>rm(r,e,n)).catch(wl)}async function cV(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await AM(n.localStore,e);gS(n,r,null),mS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Al(n,i)}catch(i){await wl(i)}}async function hV(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(De(h!==null),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);gS(r,e,n),mS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Al(r,i)}catch(i){await wl(i)}}function mS(t,e){(t.ga.get(e)||[]).forEach(n=>{n.resolve()}),t.ga.delete(e)}function gS(t,e,n){const r=ue(t);let i=r.fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fa[r.currentUser.toKey()]=i}}function rm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.da.get(e))t.Ea.delete(r),n&&t.Ta.Sa(r,n);t.da.delete(e),t.isPrimaryClient&&t.ma.Ar(e).forEach(r=>{t.ma.containsKey(r)||yS(t,r)})}function yS(t,e){t.Aa.delete(e.path.canonicalString());const n=t.Ra.get(e);n!==null&&(rS(t.remoteStore,n),t.Ra=t.Ra.remove(e),t.Va.delete(n),gy(t))}function V0(t,e,n){for(const r of n)r instanceof dS?(t.ma.addReference(r.key,e),dV(t,r)):r instanceof fS?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.ma.removeReference(r.key,e),t.ma.containsKey(r.key)||yS(t,r.key)):ne()}function dV(t,e){const n=e.key,r=n.path.canonicalString();t.Ra.get(n)||t.Aa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.Aa.add(r),gy(t))}function gy(t){for(;t.Aa.size>0&&t.Ra.size<t.maxConcurrentLimboResolutions;){const e=t.Aa.values().next().value;t.Aa.delete(e);const n=new Y(xe.fromString(e)),r=t.pa.next();t.Va.set(r,new rV(n)),t.Ra=t.Ra.insert(n,r),nS(t.remoteStore,new Dr(gr(ty(n.path)),r,"TargetPurposeLimboResolution",Gg.ae))}}async function Al(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Ea.isEmpty()||(r.Ea.forEach((a,l)=>{o.push(r.wa(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);const c=uy.qi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Ta.r_(i),await async function(l,u){const c=ue(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>$.forEach(u,d=>$.forEach(d.Li,p=>c.persistence.referenceDelegate.addReference(h,d.targetId,p)).next(()=>$.forEach(d.ki,p=>c.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))}catch(h){if(!El(h))throw h;Q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=c.Ji.get(d),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);c.Ji=c.Ji.insert(d,v)}}}(r.localStore,s))}async function fV(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await JI(n.localStore,e);n.currentUser=e,function(s,o){s.ga.forEach(a=>{a.forEach(l=>{l.reject(new K(x.CANCELLED,o))})}),s.ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Al(n,r.ts)}}function pV(t,e){const n=ue(t),r=n.Va.get(e);if(r&&r.Ia)return fe().add(r.key);{let i=fe();const s=n.da.get(e);if(!s)return i;for(const o of s){const a=n.Ea.get(o);i=i.unionWith(a.view.ia)}return i}}function mV(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uV.bind(null,e),e.Ta.r_=ZM.bind(null,e.eventManager),e.Ta.Sa=eV.bind(null,e.eventManager),e}function gV(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hV.bind(null,e),e}class O0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Dh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SM(this.persistence,new TM,e.initialUser,this.serializer)}createPersistence(e){return new wM(ly.zr,this.serializer)}createSharedClientState(e){return new DM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class yV{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>M0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await YM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JM}()}createDatastore(e){const n=Dh(e.databaseInfo.databaseId),r=function(s){return new VM(s)}(e.databaseInfo);return function(s,o,a,l){return new LM(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new UM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>M0(this.syncEngine,n,0),function(){return D0.v()?new D0:new NM}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new iV(i,s,o,a,l,u);return c&&(h.ya=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ue(n);Q("RemoteStore","RemoteStore shutting down."),r.y_.add(5),await Sl(r),r.S_.shutdown(),r.b_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.va(this.observer.next,e)}error(e){this.observer.error?this.va(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString())}Ca(){this.muted=!0}va(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=vI.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=py(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gd(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wV(t);Q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>N0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>N0(e.remoteStore,s)),t._onlineComponents=e}function _V(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function wV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!_V(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await Gd(t,new O0)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Gd(t,new O0);return t._offlineComponents}async function _S(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await $0(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await $0(t,new yV))),t._onlineComponents}function EV(t){return _S(t).then(e=>e.syncEngine)}async function wS(t){const e=await _S(t),n=e.eventManager;return n.onListen=sV.bind(null,e.syncEngine),n.onUnlisten=aV.bind(null,e.syncEngine),n}function TV(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new vS({next:d=>{o.enqueueAndForget(()=>cS(s,h));const p=d.docs.has(a);!p&&d.fromCache?u.reject(new K(x.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&l.source==="server"?u.reject(new K(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new hS(ty(a.path),c,{includeMetadataChanges:!0,W_:!0});return uS(s,h)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}function IV(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new vS({next:d=>{o.enqueueAndForget(()=>cS(s,h)),d.fromCache&&l.source==="server"?u.reject(new K(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new hS(a,c,{includeMetadataChanges:!0,W_:!0});return uS(s,h)}(await wS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e,n){if(!n)throw new K(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SV(t,e,n,r){if(e===!0&&r===!0)throw new K(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F0(t){if(!Y.isDocumentKey(t))throw new K(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U0(t){if(Y.isDocumentKey(t))throw new K(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function Ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(t);throw new K(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hb;switch(r.type){case"firstParty":return new Yb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=L0.get(n);r&&(Q("ComponentProvider","Removing Datastore"),L0.delete(n),r.terminate())}(this),Promise.resolve()}}function AV(t,e,n,r={}){var i;const s=(t=Ui(t,Vh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=It.MOCK_USER;else{a=TD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new It(u)}t._authCredentials=new Wb(new yI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class zr extends ui{constructor(e,n,r){super(e,n,ty(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Y(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function IS(t,e,...n){if(t=Hs(t),TS("collection","path",e),t instanceof Vh){const r=xe.fromString(e,...n);return U0(r),new zr(t,null,r)}{if(!(t instanceof Qt||t instanceof zr))throw new K(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return U0(r),new zr(t.firestore,null,r)}}function Oh(t,e,...n){if(t=Hs(t),arguments.length===1&&(e=vI.V()),TS("doc","path",e),t instanceof Vh){const r=xe.fromString(e,...n);return F0(r),new Qt(t,null,new Y(r))}{if(!(t instanceof Qt||t instanceof zr))throw new K(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return F0(r),new Qt(t.firestore,t instanceof zr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new eS(this,"async_queue_retry"),this.Xa=()=>{const n=Qd();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Ko.No()};const e=Qd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise(()=>{});const n=new ar;return this.tu(()=>this.za&&this.Ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ga.push(e),this.nu()))}async nu(){if(this.Ga.length!==0){try{await this.Ga[0](),this.Ga.shift(),this.Ko.reset()}catch(e){if(!El(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Ga.length>0&&this.Ko.xo(()=>this.nu())}}tu(e){const n=this.Wa.then(()=>(this.Ja=!0,e().catch(r=>{this.Ha=r,this.Ja=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ja=!1,r))));return this.Wa=n,n}enqueueAfterDelay(e,n,r){this.eu(),this.Za.indexOf(e)>-1&&(n=0);const i=fy.createAndSchedule(this,e,n,r,s=>this.ru(s));return this.ja.push(i),i}eu(){this.Ha&&ne()}verifyOperationInProgress(){}async iu(){let e;do e=this.Wa,await e;while(e!==this.Wa)}su(e){for(const n of this.ja)if(n.timerId===e)return!0;return!1}ou(e){return this.iu().then(()=>{this.ja.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ja)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.iu()})}_u(e){this.Za.push(e)}ru(e){const n=this.ja.indexOf(e);this.ja.splice(n,1)}}class $h extends Vh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new RV}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||SS(this),this._firestoreClient.terminate()}}function PV(t,e){const n=typeof t=="object"?t:RN(),r=typeof t=="string"?t:"(default)",i=TN(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=wD("firestore");s&&AV(i,...s)}return i}function yy(t){return t._firestoreClient||SS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function SS(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new l2(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ES(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new vV(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eo(bt.fromBase64String(e))}catch(n){throw new K(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eo(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/^__.*__$/;class xV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}function AS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}class Ey{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.au(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new Ey(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.cu({path:r,hu:!1});return i.Pu(e),i}Iu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.cu({path:r,hu:!1});return i.au(),i}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return Mc(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(e.length===0)throw this.Eu("Document fields must not be empty");if(AS(this.uu)&&CV.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class kV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dh(e)}Ru(e,n,r,i=!1){return new Ey({uu:e,methodName:n,Au:r,path:Pt.emptyPath(),hu:!1,du:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RS(t){const e=t._freezeSettings(),n=Dh(t._databaseId);return new kV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DV(t,e,n,r,i,s={}){const o=t.Ru(s.merge||s.mergeFields?2:0,e,n,i);xS("Data must be an object, but it was:",o,r);const a=PS(r,o);let l,u;if(s.merge)l=new Sn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=bV(e,h,n);if(!o.contains(d))throw new K(x.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);VV(c,d)||c.push(d)}l=new Sn(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new xV(new dn(a),l,u)}class Ty extends _y{_toFieldTransform(e){return new D2(e.path,new Xa)}isEqual(e){return e instanceof Ty}}function NV(t,e,n,r=!1){return Iy(n,t.Ru(r?4:3,e))}function Iy(t,e){if(CS(t=Hs(t)))return xS("Unsupported field value:",e,t),PS(t,e);if(t instanceof _y)return function(r,i){if(!AS(i.uu))throw i.Eu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Eu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.hu&&e.uu!==4)throw e.Eu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Iy(a,i.Tu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Hs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return C2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ze.fromDate(r);return{timestampValue:Nc(i.serializer,s)}}if(r instanceof Ze){const s=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nc(i.serializer,s)}}if(r instanceof wy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eo)return{bytesValue:HI(i.serializer,r._byteString)};if(r instanceof Qt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Eu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Eu(`Unsupported field value: ${Mh(r)}`)}(t,e)}function PS(t,e){const n={};return _I(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ho(t,(r,i)=>{const s=Iy(i,e.lu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof wy||t instanceof eo||t instanceof Qt||t instanceof _y)}function xS(t,e,n){if(!CS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mh(n);throw r==="an object"?e.Eu(t+" a custom object"):e.Eu(t+" "+r)}}function bV(t,e,n){if((e=Hs(e))instanceof vy)return e._internalPath;if(typeof e=="string")return kS(t,e);throw Mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const MV=new RegExp("[~\\*/\\[\\]]");function kS(t,e,n){if(e.search(MV)>=0)throw Mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vy(...e.split("."))._internalPath}catch{throw Mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K(x.INVALID_ARGUMENT,a+t+l)}function VV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OV extends DS{data(){return super.data()}}function Lh(t,e){return typeof e=="string"?kS(t,e):e instanceof vy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sy{}class Ay extends Sy{}function Fh(t,e,...n){let r=[];e instanceof Sy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ry).length,a=s.filter(l=>l instanceof Uh).length;if(o>1||o>0&&a>0)throw new K(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Uh extends Ay{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uh(e,n,r)}_apply(e){const n=this._parse(e);return MS(e._query,n),new ui(e.firestore,e.converter,Yp(e._query,n))}_parse(e){const n=RS(e.firestore);return function(s,o,a,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new K(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){z0(h,c);const p=[];for(const y of h)p.push(B0(l,s,y));d={arrayValue:{values:p}}}else d=B0(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||z0(h,c),d=NV(a,o,h,c==="in"||c==="not-in");return He.create(u,c,d)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function el(t,e,n){const r=e,i=Lh("where",t);return Uh._create(i,r,n)}class Ry extends Sy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ry(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)MS(o,l),o=Yp(o,l)}(e._query,n),new ui(e.firestore,e.converter,Yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Py extends Ay{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Py(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new K(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Ns(s,o);return function(u,c){if(ny(u)===null){const h=Ah(u);h!==null&&VS(u,h,c.field)}}(i,a),a}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function NS(t,e="asc"){const n=e,r=Lh("orderBy",t);return Py._create(r,n)}class Cy extends Ay{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Cy(e,n,r)}_apply(e){return new ui(e.firestore,e.converter,kc(e._query,this._limit,this._limitType))}}function bS(t){return Cy._create("limit",t,"F")}function B0(t,e,n){if(typeof(n=Hs(n))=="string"){if(n==="")throw new K(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CI(e)&&n.indexOf("/")!==-1)throw new K(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!Y.isDocumentKey(r))throw new K(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return d0(t,new Y(r))}if(n instanceof Qt)return d0(t,n._key);throw new K(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function z0(t,e){if(!Array.isArray(t)||t.length===0)throw new K(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MS(t,e){if(e.isInequality()){const r=Ah(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new K(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=ny(t);s!==null&&VS(t,i,s)}const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function VS(t,e,n){if(!n.isEqual(e))throw new K(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class LV{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ho(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new wy(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const n=ei(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);De(XI(r));const i=new Ga(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OS extends DS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Fu extends OS{data(e={}){return super.data(e)}}class UV{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new qo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fu(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:jV(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function jV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){t=Ui(t,Qt);const e=Ui(t.firestore,$h);return TV(yy(e),t._key).then(n=>zV(e,t,n))}class LS extends LV{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function go(t){t=Ui(t,ui);const e=Ui(t.firestore,$h),n=yy(e),r=new LS(e);return $V(t._query),IV(n,t._query).then(i=>new UV(e,r,t,i))}function FS(t,e,n){t=Ui(t,Qt);const r=Ui(t.firestore,$h),i=FV(t.converter,e,n);return BV(r,[DV(RS(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lr.none())])}function BV(t,e){return function(r,i){const s=new ar;return r.asyncQueue.enqueueAndForget(async()=>lV(await EV(r),i,s)),s.promise}(yy(t),e)}function zV(t,e,n){const r=n.docs.get(e._key),i=new LS(t);return new OS(t,i,e._key,r,new qo(n.hasPendingWrites,n.fromCache),e.converter)}function US(){return new Ty("serverTimestamp")}(function(e,n=!0){(function(i){co=i})(AN),wc(new $a("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $h(new Qb(r.getProvider("auth-internal")),new Jb(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xs(a0,"4.1.0",e),xs(a0,"4.1.0","esm2017")})();const KV={apiKey:"AIzaSyAF3tpp9m9ny4_YKjVzRcPB_QiR9_90sto",authDomain:"bg-data-tools.firebaseapp.com",projectId:"bg-data-tools",storageBucket:"bg-data-tools.appspot.com",messagingSenderId:"253384170563",appId:"1:253384170563:web:599551a1af7ca193bc88f6",measurementId:"G-PX20MHWLZ9"},qV=fT(KV),jS=PV(qV);var BS={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(W0,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",h="month",d="quarter",p="year",y="date",v="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var M=["th","st","nd","rd"],L=z%100;return"["+z+(M[(L-20)%10]||M[L]||M[0])+"]"}},_=function(z,M,L){var B=String(z);return!B||B.length>=M?z:""+Array(M+1-B.length).join(L)+z},g={s:_,z:function(z){var M=-z.utcOffset(),L=Math.abs(M),B=Math.floor(L/60),O=L%60;return(M<=0?"+":"-")+_(B,2,"0")+":"+_(O,2,"0")},m:function z(M,L){if(M.date()<L.date())return-z(L,M);var B=12*(L.year()-M.year())+(L.month()-M.month()),O=M.clone().add(B,h),C=L-O<0,b=M.clone().add(B+(C?-1:1),h);return+(-(B+(L-O)/(C?O-b:b-O))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:h,y:p,w:c,d:u,D:y,h:l,m:a,s:o,ms:s,Q:d}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},E="en",T={};T[E]=f;var I=function(z){return z instanceof J},k=function z(M,L,B){var O;if(!M)return E;if(typeof M=="string"){var C=M.toLowerCase();T[C]&&(O=C),L&&(T[C]=L,O=C);var b=M.split("-");if(!O&&b.length>1)return z(b[0])}else{var j=M.name;T[j]=M,O=j}return!B&&O&&(E=O),O||!B&&E},P=function(z,M){if(I(z))return z.clone();var L=typeof M=="object"?M:{};return L.date=z,L.args=arguments,new J(L)},D=g;D.l=k,D.i=I,D.w=function(z,M){return P(z,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var J=function(){function z(L){this.$L=k(L.locale,null,!0),this.parse(L)}var M=z.prototype;return M.parse=function(L){this.$d=function(B){var O=B.date,C=B.utc;if(O===null)return new Date(NaN);if(D.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var b=O.match(w);if(b){var j=b[2]-1||0,re=(b[7]||"0").substring(0,3);return C?new Date(Date.UTC(b[1],j,b[3]||1,b[4]||0,b[5]||0,b[6]||0,re)):new Date(b[1],j,b[3]||1,b[4]||0,b[5]||0,b[6]||0,re)}}return new Date(O)}(L),this.$x=L.x||{},this.init()},M.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},M.$utils=function(){return D},M.isValid=function(){return this.$d.toString()!==v},M.isSame=function(L,B){var O=P(L);return this.startOf(B)<=O&&O<=this.endOf(B)},M.isAfter=function(L,B){return P(L)<this.startOf(B)},M.isBefore=function(L,B){return this.endOf(B)<P(L)},M.$g=function(L,B,O){return D.u(L)?this[B]:this.set(O,L)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(L,B){var O=this,C=!!D.u(B)||B,b=D.p(L),j=function(vt,_t){var Dn=D.w(O.$u?Date.UTC(O.$y,_t,vt):new Date(O.$y,_t,vt),O);return C?Dn:Dn.endOf(u)},re=function(vt,_t){return D.w(O.toDate()[vt].apply(O.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(_t)),O)},he=this.$W,Ve=this.$M,de=this.$D,yt="set"+(this.$u?"UTC":"");switch(b){case p:return C?j(1,0):j(31,11);case h:return C?j(1,Ve):j(0,Ve+1);case c:var et=this.$locale().weekStart||0,on=(he<et?he+7:he)-et;return j(C?de-on:de+(6-on),Ve);case u:case y:return re(yt+"Hours",0);case l:return re(yt+"Minutes",1);case a:return re(yt+"Seconds",2);case o:return re(yt+"Milliseconds",3);default:return this.clone()}},M.endOf=function(L){return this.startOf(L,!1)},M.$set=function(L,B){var O,C=D.p(L),b="set"+(this.$u?"UTC":""),j=(O={},O[u]=b+"Date",O[y]=b+"Date",O[h]=b+"Month",O[p]=b+"FullYear",O[l]=b+"Hours",O[a]=b+"Minutes",O[o]=b+"Seconds",O[s]=b+"Milliseconds",O)[C],re=C===u?this.$D+(B-this.$W):B;if(C===h||C===p){var he=this.clone().set(y,1);he.$d[j](re),he.init(),this.$d=he.set(y,Math.min(this.$D,he.daysInMonth())).$d}else j&&this.$d[j](re);return this.init(),this},M.set=function(L,B){return this.clone().$set(L,B)},M.get=function(L){return this[D.p(L)]()},M.add=function(L,B){var O,C=this;L=Number(L);var b=D.p(B),j=function(Ve){var de=P(C);return D.w(de.date(de.date()+Math.round(Ve*L)),C)};if(b===h)return this.set(h,this.$M+L);if(b===p)return this.set(p,this.$y+L);if(b===u)return j(1);if(b===c)return j(7);var re=(O={},O[a]=r,O[l]=i,O[o]=n,O)[b]||1,he=this.$d.getTime()+L*re;return D.w(he,this)},M.subtract=function(L,B){return this.add(-1*L,B)},M.format=function(L){var B=this,O=this.$locale();if(!this.isValid())return O.invalidDate||v;var C=L||"YYYY-MM-DDTHH:mm:ssZ",b=D.z(this),j=this.$H,re=this.$m,he=this.$M,Ve=O.weekdays,de=O.months,yt=O.meridiem,et=function(_t,Dn,_r,Qi){return _t&&(_t[Dn]||_t(B,C))||_r[Dn].slice(0,Qi)},on=function(_t){return D.s(j%12||12,_t,"0")},vt=yt||function(_t,Dn,_r){var Qi=_t<12?"AM":"PM";return _r?Qi.toLowerCase():Qi};return C.replace(m,function(_t,Dn){return Dn||function(_r){switch(_r){case"YY":return String(B.$y).slice(-2);case"YYYY":return D.s(B.$y,4,"0");case"M":return he+1;case"MM":return D.s(he+1,2,"0");case"MMM":return et(O.monthsShort,he,de,3);case"MMMM":return et(de,he);case"D":return B.$D;case"DD":return D.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return et(O.weekdaysMin,B.$W,Ve,2);case"ddd":return et(O.weekdaysShort,B.$W,Ve,3);case"dddd":return Ve[B.$W];case"H":return String(j);case"HH":return D.s(j,2,"0");case"h":return on(1);case"hh":return on(2);case"a":return vt(j,re,!0);case"A":return vt(j,re,!1);case"m":return String(re);case"mm":return D.s(re,2,"0");case"s":return String(B.$s);case"ss":return D.s(B.$s,2,"0");case"SSS":return D.s(B.$ms,3,"0");case"Z":return b}return null}(_t)||b.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(L,B,O){var C,b=this,j=D.p(B),re=P(L),he=(re.utcOffset()-this.utcOffset())*r,Ve=this-re,de=function(){return D.m(b,re)};switch(j){case p:C=de()/12;break;case h:C=de();break;case d:C=de()/3;break;case c:C=(Ve-he)/6048e5;break;case u:C=(Ve-he)/864e5;break;case l:C=Ve/i;break;case a:C=Ve/r;break;case o:C=Ve/n;break;default:C=Ve}return O?C:D.a(C)},M.daysInMonth=function(){return this.endOf(h).$D},M.$locale=function(){return T[this.$L]},M.locale=function(L,B){if(!L)return this.$L;var O=this.clone(),C=k(L,B,!0);return C&&(O.$L=C),O},M.clone=function(){return D.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},z}(),te=J.prototype;return P.prototype=te,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",h],["$y",p],["$D",y]].forEach(function(z){te[z[1]]=function(M){return this.$g(M,z[0],z[1])}}),P.extend=function(z,M){return z.$i||(z(M,J,P),z.$i=!0),P},P.locale=k,P.isDayjs=I,P.unix=function(z){return P(1e3*z)},P.en=T[E],P.Ls=T,P.p={},P})})(BS);var HV=BS.exports;const tl=om(HV);function im(t){return tl.unix(t).format("YYYY-MM-DD")}const WV="bggUsers",Wi=IS(jS,WV),QV=await go(Wi);async function GV(t){try{return await FS(Oh(Wi,t.bggUserId.toString()),{bggUserId:t.bggUserId,username:t.username,createdAt:US()},{merge:!0}),await ZV(t.username)}catch(e){console.error("Error adding document: ",e)}}async function YV(){return Rl(QV)}async function XV(t){try{const n=(await $S(Oh(Wi,t.toString()))).data();return n?zS(n):void 0}catch(e){throw console.error("Error getting document: ",e),e}}async function JV(t){const e=Fh(Wi,el("username","==",t)),n=await go(e);return Rl(n)[0]}async function ZV(t){const e=Fh(Wi,el("username","==",t),NS("createdAt","desc"),bS(1)),n=await go(e);return Rl(n)[0]}async function eO(t){const e=Fh(Wi,el("bggUserId","==",t),NS("createdAt","desc"),bS(1)),n=await go(e);return Rl(n)[0]}const tO=tl().format("YYYY-MM-DD");async function nO(t,e=tO){const n=K0(t),r=K0(e,!0);console.log({start:n,end:r});const i=Fh(Wi,el("createdAt",">=",n),el("createdAt","<=",r)),s=await go(i);return Rl(s)}const zS=t=>{const{createdAt:e,bggUserId:n,username:r}=t,i=im(e.seconds);return{bggUserId:n,username:r,createdAt:i}},Rl=t=>t.docs.map(n=>{const r=n.data();return zS(r)}),K0=(t,e=!1)=>{const n=tl(t);let r=n.year(),i=n.month(),s=n.date(),o=e?23:0,a=e?59:0,l=e?59:0;return new Date(r,i,s,o,a,l)},rO={add:GV,getAll:YV,getByUserId:XV,getByUsername:JV,getByCreatedDate:nO},iO="usageHistory",xy=IS(jS,iO);async function sO(t,e,n,r){try{return await FS(Oh(xy),{bggUserId:t,page:n,bggUser:e,uniqueId:r,createdAt:US()},{merge:!0}),await eO(t)}catch(i){console.error("Error adding document: ",i)}}async function oO(){try{const t=await go(xy);return lO(t)}catch(t){throw console.error("Error getting documents: ",t),t}}async function aO(t){try{const n=(await $S(Oh(xy,t))).data();if(!n)throw new Error("No document data found");return KS(n)}catch(e){throw console.error("Error getting document: ",e),e}}const KS=t=>{const{bggUserId:e,page:n,createdAt:r,user:i}=t,s=i.data(),{username:o}=s;return{bggUserId:e,page:n,createdAt:im(r.seconds),user:{bggUserId:e,username:o,createdAt:im(s.createdAt.seconds)}}},lO=t=>t.docs.map(n=>{const r=n.data();return KS(r)}),uO={add:sO,getAll:oO,getById:aO},cO={users:rO,usageHistory:uO},sm=cO,qS=st.createContext(void 0),hO={user:void 0,error:void 0,loading:void 0},dO=(t,e)=>{switch(e.type){case"setUser":return{...t,user:e.payload};case"setLoading":return{...t,loading:e.payload};case"setError":return{...t,error:e.payload};default:throw new Error(`Unhandled action type: ${e.type}`)}};function fO({children:t}){const[e,n]=st.useReducer(dO,hO),r={state:e,dispatch:n};return F.jsx(qS.Provider,{value:r,children:t})}function ky(){const t=st.useContext(qS);if(t===void 0)throw new Error("useUserContext must be used within a UserProvider");return t}const HS=()=>{const{state:t,dispatch:e}=ky(),{user:n}=t,r=S.useCallback(i=>{e({type:"setUser",payload:i})},[]);return{user:n,setUser:r}},pO=()=>{const{state:t,dispatch:e}=ky(),{loading:n}=t,r=S.useCallback(i=>{e({type:"setLoading",payload:i})},[]);return{loading:n,setLoading:r}},mO=()=>{const{state:t,dispatch:e}=ky(),{error:n}=t,r=S.useCallback(i=>{e({type:"setError",payload:i})},[]);return{error:n,setError:r}};function WS(){const{user:t,setUser:e}=HS(),{loading:n,setLoading:r}=pO(),{error:i,setError:s}=mO();return{user:t,getUser:async a=>{r(!0),s(void 0);const l=await Jr.users.where("username").equals(a).first();if(l)return e(l),r(!1),l;{const u=await uD(a);if(!u){s("There was an error getting user info from BGG. Please try again later.");return}if(yO(u)||s(`"${a}" doesn't seem to be a valid user. Please check your spelling and try again.`),u)return e(u),gO(u),await sm.users.getByUserId(u.userId)||sm.users.add({username:u.username,bggUserId:u.userId}),r(!1),u}},loading:n,error:i}}const gO=async t=>{try{await Jr.users.add(t)}catch{}},yO=t=>{console.log("userInfo",t);const{avatarLink:e,country:n,name:r,stateOrProvince:i,userId:s,username:o,yearRegistered:a}=t,l=c=>c!=="N/A"&&c.trim().length>0,u=c=>!isNaN(c);return l(e)||l(n)||l(r)||l(i)||u(s)||l(o)||u(a)},vO=(t,e)=>{switch(e.type){case"add":return[...t,e.filter];case"remove":return t.filter(s=>s.order!==e.filter.order);case"update":return t.map(s=>s.order===e.filter.order?e.filter:s);case"clear filter":return t.map(s=>s.order===e.filter.order?{...e.filter,arg:null}:s);case"upsert":return t.find(s=>s.order===e.filter.order)?t.map(o=>o.order===e.filter.order?e.filter:o):[...t,e.filter];default:throw new Error("Unknown action type of "+e.type)}},QS=st.createContext(void 0);function _O({children:t}){const[e,n]=st.useReducer(vO,[]),i={state:e,dispatch:n,removeFilter:s=>{n({type:"remove",filter:s})}};return F.jsx(QS.Provider,{value:i,children:t})}function wO(){const t=st.useContext(QS);if(t===void 0)throw new Error("usePlayFilterContext must be used within a PlayFilterProvider");return t}const EO=(t,e)=>{switch(e.type){case"setFilteredResults":return e.payload;default:return[]}},GS=st.createContext(void 0);function TO({children:t}){const[e,n]=st.useReducer(EO,[]),i={state:e,dispatch:n,setFilteredResults:s=>{n({type:"setFilteredResults",payload:s})}};return F.jsx(GS.Provider,{value:i,children:t})}function IO(){const t=st.useContext(GS);if(t===void 0)throw new Error("usePlayResultsContext must be used within a PlayFilterProvider");return t}function SO(t){return e=>{if(t==="plays")return e.reduce((n,r)=>{const i=r.quantity??1;return n+i},0);if(t==="locations"){let n=e.map(i=>i?.location||null).filter(i=>i!==null);return Array.from(new Set(n)).length}if(t==="games"){const n=e.filter(i=>i.gameName).map(i=>i.gameName);return Array.from(new Set(n)).length}if(t==="people"){const n=AO(e[0]),r=e.map(s=>s.players.map(o=>o.name).filter(o=>o!==n)).flat();return Array.from(new Set(r)).length}if(t==="days"){const n=e.map(i=>i.date);return Array.from(new Set(n)).length}return 0}}const AO=t=>{const e=t.recordingUserId;return t.players.find(r=>r.userId===e)?.name};function RO(){return t=>{const e=t.map(n=>n.gameName);return Array.from(new Set(e))}}function PO(){return t=>{const e=t.filter(n=>n?.location&&n.location.length>0).map(n=>n.location);return Array.from(new Set(e))}}function CO(){return t=>{const e=t.map(n=>n.players.map(i=>i.name)).flat();return Array.from(new Set(e))}}function xO(){return t=>{const e=t.map(n=>n.date);return Array.from(new Set(e))}}function kO(){return t=>t}function DO(t){return e=>e.filter(n=>{const r=n.players.map(i=>i.name);return t.every(i=>r.includes(i))})}function NO(t){return e=>e.filter(n=>{const r=t.slice().sort(),i=n.players.map(s=>s.name).sort();return r.every((s,o)=>s===i[o])})}function bO(t){return e=>e.filter(n=>n.players.filter(i=>t.includes(i.name)).length>0)}function MO(t){return e=>e.filter(n=>n.players.filter(i=>t===i.name).length>0)}function VO(t){return e=>e.filter(n=>n.players.filter(i=>t===i.name&&i.new).length>0)}function OO(t){return e=>e.filter(n=>{const r=n.players.some(s=>s.name===t&&s.win),i=n.players.reduce((s,o)=>s+(o.win?1:0),0)===1;return r&&i})}function $O(t){return e=>e.filter(n=>t.every(i=>n.players.some(s=>s.win&&s.name===i)))}function LO(t){return e=>e.filter(n=>n.date===t)}function FO(t){return e=>e.filter(n=>n.date<t)}function UO(t){return e=>e.filter(n=>n.date>t)}function jO(t){let[e,n]=t;return r=>r.filter(i=>i.date>=e&&i.date<=n)}function BO(t){return e=>e.filter(n=>n.gameName===t)}function zO(t){return e=>e.filter(n=>t.includes(n.gameName))}function KO(t){return e=>e.filter(n=>n.location===t)}function qO(t){return e=>e.filter(n=>n?.location&&t.includes(n.location))}const HO=async t=>{try{return(await Jr.plays.where("recordingUserId").equals(t).toArray()).sort((r,i)=>r.date>i.date?-1:r.date<i.date?1:0)||[]}catch(e){return console.log(e),[]}},WO={count:SO,listLocations:PO,listGameNames:RO,listPlayerNames:CO,listDates:xO,listRecordedPlays:kO,gameName:BO,gameNames:zO,location:KO,locations:qO,withPlayerName:MO,withAllPlayerNames:DO,withOnlyPlayerNames:NO,withAnyPlayerNames:bO,wherePlayerNamesWon:$O,whereSinglePlayerNameWon:OO,newForPlayerName:VO,onDate:LO,beforeDate:FO,afterDate:UO,betweenDates:jO},QO=(t,...e)=>e.reduce((n,r)=>r(n),t);function GO(t,e){return QO(t,...e.map(({filter:n,arg:r})=>{const i=WO[n];return i(r)}))}async function YO(t,e){const n=await HO(t);return GO(n,e)}function XO(){const{user:t}=WS(),{state:e,dispatch:n}=wO(),{dispatch:r}=IO(),i=S.useCallback(async()=>{if(!t?.userId)return;let s=JSON.parse(JSON.stringify(e)),o=s.findIndex(u=>u.order==="aggregator");s[o].order=1e3,s.sort((u,c)=>u.order>c.order?1:u.order<c.order?-1:0);const a=s.filter(u=>u.filter==="listRecordedPlays"||u?.arg?.length),l=await YO(t.userId,a);r({type:"setFilteredResults",payload:l})},[e,t?.userId,r]);return S.useEffect(function(){n({type:"upsert",filter:{order:"aggregator",filter:"listRecordedPlays",label:"",arg:""}})},[n]),S.useEffect(function(){i()},[i]),{handleFiltering:i}}function YS(t,e){const[n,r]=S.useState(()=>{if(typeof window>"u")return e;try{const s=window.sessionStorage.getItem(t);if(!s){let o=JSON.stringify(e);window.sessionStorage.setItem(t,o)}return s?JSON.parse(s):e}catch(s){return console.log(s),e}});return[n,s=>{try{const o=s instanceof Function?s(n):s;r(o),typeof window<"u"&&window.sessionStorage.setItem(t,JSON.stringify(o))}catch(o){console.log(o)}}]}function JO(){const[t,e]=YS("fetchedUsers",[]),n=s=>{!s||i(s)||e([...t,s])},r=s=>{e(t.filter(o=>o!==s))},i=s=>t?s?t?.includes(s):!0:!1;return{addFetchedUser:n,removeFetchedUser:r,isUserFetched:i,fetchedUsers:t}}function ZO(){const{user:t}=WS(),[e,n]=S.useState(!1),[r,i]=S.useState(!1),[s,o]=S.useState(0),[a,l]=S.useState(null),[u,c]=S.useState(!1),{handleFiltering:h}=XO(),{addFetchedUser:d,isUserFetched:p}=JO(),y=t?.username,v=async(m,f=!1)=>{try{if(!m||!y)throw Error("We cannot fetch user play data unless a user is set.");if(!f&&p(y))return;const{latestPlayDate:_,latestPlayId:g}=await sD(m.userId);if(_&&g){const E=await cD(y,_);if(!E||g===E.latestPlayId)return;i(!0),n(!0);const I=(await V_({username:y,pages:E.pages,startdate:_,setPercentDone:o})).filter(k=>k.playId>g);M_(I),h&&h(),n(!1),d(y),l(null)}else{c(!0);const E=await aD(y);if(E.pages===0)return;i(!0),n(!0);const T=await V_({username:y,pages:E.pages,setPercentDone:o});M_(T),h&&h(),n(!1),d(y),l(null)}}catch(_){throw console.log(_),o(0),l(_.message),Error(_)}},w=async m=>{m.preventDefault(),t&&await v(t,!0)};return S.useEffect(()=>{y&&v(t)},[t]),{percentDone:s,manuallyUpdate:w,error:a,userFirstTime:u,showProgress:r,loading:e}}let pu;const e$=new Uint8Array(16);function t$(){if(!pu&&(pu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pu(e$)}const ut=[];for(let t=0;t<256;++t)ut.push((t+256).toString(16).slice(1));function n$(t,e=0){return(ut[t[e+0]]+ut[t[e+1]]+ut[t[e+2]]+ut[t[e+3]]+"-"+ut[t[e+4]]+ut[t[e+5]]+"-"+ut[t[e+6]]+ut[t[e+7]]+"-"+ut[t[e+8]]+ut[t[e+9]]+"-"+ut[t[e+10]]+ut[t[e+11]]+ut[t[e+12]]+ut[t[e+13]]+ut[t[e+14]]+ut[t[e+15]]).toLowerCase()}const r$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),q0={randomUUID:r$};function i$(t,e,n){if(q0.randomUUID&&!e&&!t)return q0.randomUUID();t=t||{};const r=t.random||(t.rng||t$)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,n$(r)}function s$(t,e){const[n,r]=S.useState(()=>{if(typeof window>"u")return e;try{const s=window.localStorage.getItem(t);if(!s){let o=JSON.stringify(e);window.localStorage.setItem(t,o)}return s?JSON.parse(s):e}catch(s){return console.log(s),e}});return[n,s=>{try{const o=s instanceof Function?s(n):s;r(o),typeof window<"u"&&window.localStorage.setItem(t,JSON.stringify(o))}catch(o){console.log(o)}}]}function o$(){const[t,e]=s$("uniqueId","");return S.useEffect(()=>{if(t)return;let n=a$();e(n)},[]),t}function a$(){return i$()}function l$(){const{user:t}=HS(),[e,n]=YS("pageViews",[]),[r,i]=st.useState(!1),s=o$(),o=async l=>{if(!t||a(l)||r)return;i(!0),await sm.usageHistory.add(t.userId,t.username,l,s);let u=tl().format("YYYY-MM-DD"),c={userId:t.userId,page:l,date:u};n([...e,c]),i(!1)},a=l=>t?e.some(c=>c.userId===t.userId&&c.page===l&&c.date===tl().format("YYYY-MM-DD")):!1;return{addPageView:o,loading:r}}const u$=[{href:"/about",label:"About",icon:F.jsx(hk,{width:16})},{href:"/how-to-use",label:"How to Use",icon:F.jsx(dk,{width:16})},{href:"/feedback",label:"Feedback",icon:F.jsx(uk,{width:16})}],c$=(t,e)=>[{href:`/${t}/plays`,label:"Plays Dashboard",icon:F.jsx(E_,{width:16}),onlyWithUsername:!0},{href:`/${t}/tools/first-plays`,label:"First Recorded Plays Tool",icon:F.jsx(E_,{width:16}),onlyWithUsername:!0},{href:"/settings",label:"Manage your data",icon:F.jsx(ck,{width:16})}].filter(r=>{if(!t)return!r?.onlyWithUsername;const i=e.split("/").pop(),s=r.href.split("/").pop();return i!==s}),H0="text-sm font-semibold uppercase opacity-60";function h$(){const{username:t}=AC(),{pathname:e}=io(),{addPageView:n}=l$(),r=c$(t,e),{manuallyUpdate:i,loading:s}=ZO();async function o(a,l){await i(a),n("get-newest-data"),l()}return F.jsxs(Xi,{children:[F.jsx(Xi.Button,{className:"text-slate-100","aria-label":"Open navigation menu",children:F.jsx(ok,{})}),F.jsxs(Xi.Items,{className:"absolute right-0 z-10 flex flex-col gap-4 p-4 text-white rounded-md top-8 w-max bg-slate-900",children:[F.jsx("h3",{className:H0,children:"Tools"}),r?.map(a=>F.jsx(Xi.Item,{as:S.Fragment,children:F.jsx(Xf,{to:a.href,children:F.jsxs("div",{className:"flex items-center gap-2",children:[a.icon," ",a.label]})})},a.href)),t&&F.jsx(Xi.Item,{as:S.Fragment,children:({close:a})=>F.jsx("button",{onClick:l=>o(l,a),children:F.jsxs("div",{className:"flex items-center gap-2",children:[F.jsx(lk,{width:16,className:`${s?"animate-spin":""}`}),`Get ${t}'${t[t.length-1]!=="s"?"s":""} newest data`]})})}),F.jsx("h3",{className:H0,children:"Resources"}),u$?.map(a=>F.jsx(Xi.Item,{as:S.Fragment,children:F.jsx(Xf,{to:a.href,children:F.jsxs("div",{className:"flex items-center gap-2",children:[a.icon," ",a.label]})})},a.href))]})]})}function d$(){return F.jsxs("nav",{className:"flex items-center justify-between px-2 py-4 lg:px-8",children:[F.jsx(Xf,{to:"/",className:"flex text-slate-100","aria-label":"Home",children:F.jsx(ak,{width:24})}),F.jsx("div",{className:"relative",children:F.jsx(h$,{})})]})}function f$(){return F.jsxs("div",{className:"relative min-h-screen bgg-gradient",children:[F.jsx(d$,{}),F.jsx(jC,{})]})}const p$=ex(Yf(F.jsxs(vn,{path:"/",element:F.jsx(f$,{}),children:[F.jsx(vn,{index:!0,lazy:()=>Qn(()=>import("./index-Bgb5IR2q.js"),__vite__mapDeps([0,1]))}),F.jsx(vn,{path:"settings",lazy:()=>Qn(()=>import("./settings-ZQG_Acqp.js"),__vite__mapDeps([2,3]))}),F.jsx(vn,{path:"feedback",lazy:()=>Qn(()=>import("./feedback-BxKRKtpL.js"),__vite__mapDeps([4,5]))}),F.jsx(vn,{path:"about",lazy:()=>Qn(()=>import("./about-BS4eJHrf.js"),__vite__mapDeps([6,5]))}),F.jsx(vn,{path:"how-to-use",lazy:()=>Qn(()=>import("./how-to-use-Br9TEu2p.js"),__vite__mapDeps([7,5]))}),F.jsxs(vn,{path:":username",lazy:()=>Qn(()=>import("./_username-DPxEzjPz.js"),__vite__mapDeps([8,9])),children:[F.jsx(vn,{path:"plays",lazy:()=>Qn(()=>import("./_username.plays-C7lA5--w.js"),__vite__mapDeps([10,11,12,3,1,9]))}),F.jsx(vn,{path:"tools/first-plays",lazy:()=>Qn(()=>import("./_username.tools.first-plays-CLYtn94I.js"),__vite__mapDeps([13,11]))}),F.jsx(vn,{path:"tools",lazy:()=>Qn(()=>import("./_username.tools-5_objLhw.js"),__vite__mapDeps([14,12]))})]})]})));Yd.createRoot(document.getElementById("root")).render(F.jsx(st.StrictMode,{children:F.jsx(fO,{children:F.jsx(_O,{children:F.jsx(TO,{children:F.jsx(FC,{router:p$})})})})}));export{wO as $,$x as A,xa as B,y_ as C,nh as D,Cx as E,Ox as F,Zc as G,Px as H,lg as I,jx as J,Lx as K,Xf as L,In as M,ht as N,jC as O,Mx as P,Ks as Q,st as R,tp as S,_$ as T,Dx as U,TE as V,wE as W,th as X,Ax as Y,ep as Z,vx as _,S as a,tl as a0,Xi as a1,s$ as a2,W0 as a3,m$ as a4,wA as a5,ZO as a6,y$ as a7,Nx as a8,g_ as a9,Jr as aa,xx as ab,om as ac,l$ as b,WS as c,E$ as d,IO as e,AC as f,w$ as g,EC as h,io as i,F as j,ag as k,Si as l,yx as m,Fx as n,zt as o,Ur as p,kP as q,g$ as r,Rx as s,gx as t,JO as u,ul as v,cg as w,ug as x,eh as y,_E as z};
