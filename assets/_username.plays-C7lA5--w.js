import{a as y,s as Sh,k as Ca,o as z,t as Oh,R as I,D as Ve,y as Ne,T as vu,n as Zn,l as yu,m as Mh,p as Bt,q as Is,X as Ie,I as at,S as Yn,v as rt,H as xu,w as _u,x as wu,z as _i,A as Du,B as Dt,C as Su,E as Fs,F as $s,G as Ou,J as Ch,K as kh,M as nt,N as se,P as Xa,Q as fs,U as Ph,V as Eh,W as Bs,Y as vn,Z as Ht,_ as hs,j as v,$ as Fe,e as nn,c as Ws,a0 as Re,a1 as Ut,a2 as Ah,a3 as P,a4 as Th,a5 as Mu,a6 as Lh,b as Rh}from"./index-zwKx1JV-.js";/* empty css                         */import{c as zn,p as Hn,T as Cu,e as Nh,i as ku,a as jh,b as Un,o as Ih,d as Fh,f as Vs,g as Ys,h as $i,u as Pu,j as Eu,M as Au,W as xt,k as Tu,l as Lu,m as gs,S as Ru,n as Nu,C as ju,q as $h,D as Bh,r as Iu,s as Za,P as S,_ as ka,t as Pa,v as Wh,w as Q,x as Vh,y as Yh,z as zh,F as Hh,A as Fu,B as Uh,E as qh,G as Lr,H as Kh,I as Gh,J as Xh,K as Zh,L as Qh,N as Jh,O as $u,Q as $e,R as Qa}from"./TableWithPagination-BKcqby4q.js";import{C as wi}from"./Container-DVclZq4Q.js";import{$ as eg}from"./transition-BCoZV1NX.js";import{U as tg}from"./UsernameForm-ATbpFmvj.js";var It=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(It||{});function Bu(){let t=y.useRef(0);return Sh("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function ng(t,e,n,i){let a=Ca(n);y.useEffect(()=>{t=t??window;function r(s){a.current(s)}return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r,i)},[t,e,i])}function ig(t){let e=z(t),n=y.useRef(!1);y.useEffect(()=>(n.current=!1,()=>{n.current=!0,Oh(()=>{n.current&&e()})}),[e])}let ag=y.createContext(!1);function rg(){return y.useContext(ag)}function sg(t){let e=rg(),n=y.useContext(Wu),i=Zn(t),[a,r]=y.useState(()=>{if(!e&&n!==null||yu.isServer)return null;let s=i?.getElementById("headlessui-portal-root");if(s)return s;if(i===null)return null;let o=i.createElement("div");return o.setAttribute("id","headlessui-portal-root"),i.body.appendChild(o)});return y.useEffect(()=>{a!==null&&(i!=null&&i.body.contains(a)||i==null||i.body.appendChild(a))},[a,i]),y.useEffect(()=>{e||n!==null&&r(n.current)},[n,r,e]),a}let og=y.Fragment;function lg(t,e){let n=t,i=y.useRef(null),a=Ne(vu(u=>{i.current=u}),e),r=Zn(i),s=sg(i),[o]=y.useState(()=>{var u;return yu.isServer?null:(u=r?.createElement("div"))!=null?u:null}),l=y.useContext(ps),c=Mh();return Bt(()=>{!s||!o||s.contains(o)||(o.setAttribute("data-headlessui-portal",""),s.appendChild(o))},[s,o]),Bt(()=>{if(o&&l)return l.register(o)},[l,o]),ig(()=>{var u;!s||!o||(o instanceof Node&&s.contains(o)&&s.removeChild(o),s.childNodes.length<=0&&((u=s.parentElement)==null||u.removeChild(s)))}),c?!s||!o?null:Is.createPortal(Ie({ourProps:{ref:a},theirProps:n,defaultTag:og,name:"Portal"}),o):null}let cg=y.Fragment,Wu=y.createContext(null);function ug(t,e){let{target:n,...i}=t,a={ref:Ne(e)};return I.createElement(Wu.Provider,{value:n},Ie({ourProps:a,theirProps:i,defaultTag:cg,name:"Popover.Group"}))}let ps=y.createContext(null);function dg(){let t=y.useContext(ps),e=y.useRef([]),n=z(r=>(e.current.push(r),t&&t.register(r),()=>i(r))),i=z(r=>{let s=e.current.indexOf(r);s!==-1&&e.current.splice(s,1),t&&t.unregister(r)}),a=y.useMemo(()=>({register:n,unregister:i,portals:e}),[n,i,e]);return[e,y.useMemo(()=>function({children:r}){return I.createElement(ps.Provider,{value:a},r)},[a])]}let fg=Ve(lg),hg=Ve(ug);Object.assign(fg,{Group:hg});let Vu=y.createContext(null);function Yu(){let t=y.useContext(Vu);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Yu),e}return t}function gg(){let[t,e]=y.useState([]);return[t.length>0?t.join(" "):void 0,y.useMemo(()=>function(n){let i=z(r=>(e(s=>[...s,r]),()=>e(s=>{let o=s.slice(),l=o.indexOf(r);return l!==-1&&o.splice(l,1),o}))),a=y.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props}),[i,n.slot,n.name,n.props]);return I.createElement(Vu.Provider,{value:a},n.children)},[e])]}let pg="p";function mg(t,e){let n=at(),{id:i=`headlessui-description-${n}`,...a}=t,r=Yu(),s=Ne(e);Bt(()=>r.register(i),[i,r.register]);let o={ref:s,...r.props,id:i};return Ie({ourProps:o,theirProps:a,slot:r.slot||{},defaultTag:pg,name:r.name||"Description"})}let bg=Ve(mg),vg=Object.assign(bg,{});function yg({defaultContainers:t=[],portals:e}={}){let n=y.useRef(null),i=Zn(n),a=z(()=>{var r;let s=[];for(let o of t)o!==null&&(o instanceof HTMLElement?s.push(o):"current"in o&&o.current instanceof HTMLElement&&s.push(o.current));if(e!=null&&e.current)for(let o of e.current)s.push(o);for(let o of(r=i?.querySelectorAll("html > *, body > *"))!=null?r:[])o!==document.body&&o!==document.head&&o instanceof HTMLElement&&o.id!=="headlessui-portal-root"&&(o.contains(n.current)||s.some(l=>o.contains(l))||s.push(o));return s});return{resolveContainers:a,contains:z(r=>a().some(s=>s.contains(r))),mainTreeNodeRef:n,MainTreeNode:y.useMemo(()=>function(){return I.createElement(zn,{features:Hn.Hidden,ref:n})},[n])}}var xg=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(xg||{}),_g=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(_g||{}),wg=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(wg||{}),Dg=(t=>(t[t.OpenListbox=0]="OpenListbox",t[t.CloseListbox=1]="CloseListbox",t[t.GoToOption=2]="GoToOption",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterOption=5]="RegisterOption",t[t.UnregisterOption=6]="UnregisterOption",t[t.RegisterLabel=7]="RegisterLabel",t))(Dg||{});function Rr(t,e=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,i=Eh(e(t.options.slice()),r=>r.dataRef.current.domRef.current),a=n?i.indexOf(n):null;return a===-1&&(a=null),{options:i,activeOptionIndex:a}}let Sg={1(t){return t.dataRef.current.disabled||t.listboxState===1?t:{...t,activeOptionIndex:null,listboxState:1}},0(t){if(t.dataRef.current.disabled||t.listboxState===0)return t;let e=t.activeOptionIndex,{isSelected:n}=t.dataRef.current,i=t.options.findIndex(a=>n(a.dataRef.current.value));return i!==-1&&(e=i),{...t,listboxState:0,activeOptionIndex:e}},2(t,e){var n;if(t.dataRef.current.disabled||t.listboxState===1)return t;let i=Rr(t),a=Ph(e,{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return{...t,...i,searchQuery:"",activeOptionIndex:a,activationTrigger:(n=e.trigger)!=null?n:1}},3:(t,e)=>{if(t.dataRef.current.disabled||t.listboxState===1)return t;let n=t.searchQuery!==""?0:1,i=t.searchQuery+e.value.toLowerCase(),a=(t.activeOptionIndex!==null?t.options.slice(t.activeOptionIndex+n).concat(t.options.slice(0,t.activeOptionIndex+n)):t.options).find(s=>{var o;return!s.dataRef.current.disabled&&((o=s.dataRef.current.textValue)==null?void 0:o.startsWith(i))}),r=a?t.options.indexOf(a):-1;return r===-1||r===t.activeOptionIndex?{...t,searchQuery:i}:{...t,searchQuery:i,activeOptionIndex:r,activationTrigger:1}},4(t){return t.dataRef.current.disabled||t.listboxState===1||t.searchQuery===""?t:{...t,searchQuery:""}},5:(t,e)=>{let n={id:e.id,dataRef:e.dataRef},i=Rr(t,a=>[...a,n]);return t.activeOptionIndex===null&&t.dataRef.current.isSelected(e.dataRef.current.value)&&(i.activeOptionIndex=i.options.indexOf(n)),{...t,...i}},6:(t,e)=>{let n=Rr(t,i=>{let a=i.findIndex(r=>r.id===e.id);return a!==-1&&i.splice(a,1),i});return{...t,...n,activationTrigger:1}},7:(t,e)=>({...t,labelId:e.id})},zs=y.createContext(null);zs.displayName="ListboxActionsContext";function Bi(t){let e=y.useContext(zs);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Bi),n}return e}let Hs=y.createContext(null);Hs.displayName="ListboxDataContext";function Wi(t){let e=y.useContext(Hs);if(e===null){let n=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Wi),n}return e}function Og(t,e){return rt(e.type,Sg,t,e)}let Mg=y.Fragment;function Cg(t,e){let{value:n,defaultValue:i,form:a,name:r,onChange:s,by:o=(Y,G)=>Y===G,disabled:l=!1,horizontal:c=!1,multiple:u=!1,...d}=t;const f=c?"horizontal":"vertical";let h=Ne(e),[g=u?[]:void 0,p]=Cu(n,s,i),[m,b]=y.useReducer(Og,{dataRef:y.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),x=y.useRef({static:!1,hold:!1}),_=y.useRef(null),D=y.useRef(null),w=y.useRef(null),C=z(typeof o=="string"?(Y,G)=>{let te=o;return Y?.[te]===G?.[te]}:o),O=y.useCallback(Y=>rt(M.mode,{1:()=>g.some(G=>C(G,Y)),0:()=>C(g,Y)}),[g]),M=y.useMemo(()=>({...m,value:g,disabled:l,mode:u?1:0,orientation:f,compare:C,isSelected:O,optionsPropsRef:x,labelRef:_,buttonRef:D,optionsRef:w}),[g,l,u,m]);Bt(()=>{m.dataRef.current=M},[M]),xu([M.buttonRef,M.optionsRef],(Y,G)=>{var te;b({type:1}),_u(G,wu.Loose)||(Y.preventDefault(),(te=M.buttonRef.current)==null||te.focus())},M.listboxState===0);let T=y.useMemo(()=>({open:M.listboxState===0,disabled:l,value:g}),[M,l,g]),j=z(Y=>{let G=M.options.find(te=>te.id===Y);G&&$(G.dataRef.current.value)}),E=z(()=>{if(M.activeOptionIndex!==null){let{dataRef:Y,id:G}=M.options[M.activeOptionIndex];$(Y.current.value),b({type:2,focus:nt.Specific,id:G})}}),L=z(()=>b({type:0})),A=z(()=>b({type:1})),F=z((Y,G,te)=>Y===nt.Specific?b({type:2,focus:nt.Specific,id:G,trigger:te}):b({type:2,focus:Y,trigger:te})),R=z((Y,G)=>(b({type:5,id:Y,dataRef:G}),()=>b({type:6,id:Y}))),k=z(Y=>(b({type:7,id:Y}),()=>b({type:7,id:null}))),$=z(Y=>rt(M.mode,{0(){return p?.(Y)},1(){let G=M.value.slice(),te=G.findIndex(Pe=>C(Pe,Y));return te===-1?G.push(Y):G.splice(te,1),p?.(G)}})),H=z(Y=>b({type:3,value:Y})),q=z(()=>b({type:4})),K=y.useMemo(()=>({onChange:$,registerOption:R,registerLabel:k,goToOption:F,closeListbox:A,openListbox:L,selectActiveOption:E,selectOption:j,search:H,clearSearch:q}),[]),ie={ref:h},ne=y.useRef(null),ye=_i();return y.useEffect(()=>{ne.current&&i!==void 0&&ye.addEventListener(ne.current,"reset",()=>{$(i)})},[ne,$]),I.createElement(zs.Provider,{value:K},I.createElement(Hs.Provider,{value:M},I.createElement(Du,{value:rt(M.listboxState,{0:Dt.Open,1:Dt.Closed})},r!=null&&g!=null&&Nh({[r]:g}).map(([Y,G],te)=>I.createElement(zn,{features:Hn.Hidden,ref:te===0?Pe=>{var Xe;ne.current=(Xe=Pe?.closest("form"))!=null?Xe:null}:void 0,...Su({key:Y,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:a,name:Y,value:G})})),Ie({ourProps:ie,theirProps:d,slot:T,defaultTag:Mg,name:"Listbox"}))))}let kg="button";function Pg(t,e){var n;let i=at(),{id:a=`headlessui-listbox-button-${i}`,...r}=t,s=Wi("Listbox.Button"),o=Bi("Listbox.Button"),l=Ne(s.buttonRef,e),c=_i(),u=z(m=>{switch(m.key){case se.Space:case se.Enter:case se.ArrowDown:m.preventDefault(),o.openListbox(),c.nextFrame(()=>{s.value||o.goToOption(nt.First)});break;case se.ArrowUp:m.preventDefault(),o.openListbox(),c.nextFrame(()=>{s.value||o.goToOption(nt.Last)});break}}),d=z(m=>{switch(m.key){case se.Space:m.preventDefault();break}}),f=z(m=>{if(Xa(m.currentTarget))return m.preventDefault();s.listboxState===0?(o.closeListbox(),c.nextFrame(()=>{var b;return(b=s.buttonRef.current)==null?void 0:b.focus({preventScroll:!0})})):(m.preventDefault(),o.openListbox())}),h=ku(()=>{if(s.labelId)return[s.labelId,a].join(" ")},[s.labelId,a]),g=y.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled,value:s.value}),[s]),p={ref:l,id:a,type:Fs(t,s.buttonRef),"aria-haspopup":"listbox","aria-controls":(n=s.optionsRef.current)==null?void 0:n.id,"aria-expanded":s.disabled?void 0:s.listboxState===0,"aria-labelledby":h,disabled:s.disabled,onKeyDown:u,onKeyUp:d,onClick:f};return Ie({ourProps:p,theirProps:r,slot:g,defaultTag:kg,name:"Listbox.Button"})}let Eg="label";function Ag(t,e){let n=at(),{id:i=`headlessui-listbox-label-${n}`,...a}=t,r=Wi("Listbox.Label"),s=Bi("Listbox.Label"),o=Ne(r.labelRef,e);Bt(()=>s.registerLabel(i),[i]);let l=z(()=>{var u;return(u=r.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})}),c=y.useMemo(()=>({open:r.listboxState===0,disabled:r.disabled}),[r]);return Ie({ourProps:{ref:o,id:i,onClick:l},theirProps:a,slot:c,defaultTag:Eg,name:"Listbox.Label"})}let Tg="ul",Lg=Yn.RenderStrategy|Yn.Static;function Rg(t,e){var n;let i=at(),{id:a=`headlessui-listbox-options-${i}`,...r}=t,s=Wi("Listbox.Options"),o=Bi("Listbox.Options"),l=Ne(s.optionsRef,e),c=_i(),u=_i(),d=$s(),f=d!==null?(d&Dt.Open)===Dt.Open:s.listboxState===0;y.useEffect(()=>{var b;let x=s.optionsRef.current;x&&s.listboxState===0&&x!==((b=Ou(x))==null?void 0:b.activeElement)&&x.focus({preventScroll:!0})},[s.listboxState,s.optionsRef]);let h=z(b=>{switch(u.dispose(),b.key){case se.Space:if(s.searchQuery!=="")return b.preventDefault(),b.stopPropagation(),o.search(b.key);case se.Enter:if(b.preventDefault(),b.stopPropagation(),s.activeOptionIndex!==null){let{dataRef:x}=s.options[s.activeOptionIndex];o.onChange(x.current.value)}s.mode===0&&(o.closeListbox(),fs().nextFrame(()=>{var x;return(x=s.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})}));break;case rt(s.orientation,{vertical:se.ArrowDown,horizontal:se.ArrowRight}):return b.preventDefault(),b.stopPropagation(),o.goToOption(nt.Next);case rt(s.orientation,{vertical:se.ArrowUp,horizontal:se.ArrowLeft}):return b.preventDefault(),b.stopPropagation(),o.goToOption(nt.Previous);case se.Home:case se.PageUp:return b.preventDefault(),b.stopPropagation(),o.goToOption(nt.First);case se.End:case se.PageDown:return b.preventDefault(),b.stopPropagation(),o.goToOption(nt.Last);case se.Escape:return b.preventDefault(),b.stopPropagation(),o.closeListbox(),c.nextFrame(()=>{var x;return(x=s.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})});case se.Tab:b.preventDefault(),b.stopPropagation();break;default:b.key.length===1&&(o.search(b.key),u.setTimeout(()=>o.clearSearch(),350));break}}),g=ku(()=>{var b,x,_;return(_=(b=s.labelRef.current)==null?void 0:b.id)!=null?_:(x=s.buttonRef.current)==null?void 0:x.id},[s.labelRef.current,s.buttonRef.current]),p=y.useMemo(()=>({open:s.listboxState===0}),[s]),m={"aria-activedescendant":s.activeOptionIndex===null||(n=s.options[s.activeOptionIndex])==null?void 0:n.id,"aria-multiselectable":s.mode===1?!0:void 0,"aria-labelledby":g,"aria-orientation":s.orientation,id:a,onKeyDown:h,role:"listbox",tabIndex:0,ref:l};return Ie({ourProps:m,theirProps:r,slot:p,defaultTag:Tg,features:Lg,visible:f,name:"Listbox.Options"})}let Ng="li";function jg(t,e){let n=at(),{id:i=`headlessui-listbox-option-${n}`,disabled:a=!1,value:r,...s}=t,o=Wi("Listbox.Option"),l=Bi("Listbox.Option"),c=o.activeOptionIndex!==null?o.options[o.activeOptionIndex].id===i:!1,u=o.isSelected(r),d=y.useRef(null),f=Ch(d),h=Ca({disabled:a,value:r,domRef:d,get textValue(){return f()}}),g=Ne(e,d);Bt(()=>{if(o.listboxState!==0||!c||o.activationTrigger===0)return;let C=fs();return C.requestAnimationFrame(()=>{var O,M;(M=(O=d.current)==null?void 0:O.scrollIntoView)==null||M.call(O,{block:"nearest"})}),C.dispose},[d,c,o.listboxState,o.activationTrigger,o.activeOptionIndex]),Bt(()=>l.registerOption(i,h),[h,i]);let p=z(C=>{if(a)return C.preventDefault();l.onChange(r),o.mode===0&&(l.closeListbox(),fs().nextFrame(()=>{var O;return(O=o.buttonRef.current)==null?void 0:O.focus({preventScroll:!0})}))}),m=z(()=>{if(a)return l.goToOption(nt.Nothing);l.goToOption(nt.Specific,i)}),b=kh(),x=z(C=>b.update(C)),_=z(C=>{b.wasMoved(C)&&(a||c||l.goToOption(nt.Specific,i,0))}),D=z(C=>{b.wasMoved(C)&&(a||c&&l.goToOption(nt.Nothing))}),w=y.useMemo(()=>({active:c,selected:u,disabled:a}),[c,u,a]);return Ie({ourProps:{id:i,ref:g,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":u,disabled:void 0,onClick:p,onFocus:m,onPointerEnter:x,onMouseEnter:x,onPointerMove:_,onMouseMove:_,onPointerLeave:D,onMouseLeave:D},theirProps:s,slot:w,defaultTag:Ng,name:"Listbox.Option"})}let Ig=Ve(Cg),Fg=Ve(Pg),$g=Ve(Ag),Bg=Ve(Rg),Wg=Ve(jg),ta=Object.assign(Ig,{Button:Fg,Label:$g,Options:Bg,Option:Wg});var Vg=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Vg||{}),Yg=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(Yg||{});let zg={0:t=>{let e={...t,popoverState:rt(t.popoverState,{0:1,1:0})};return e.popoverState===0&&(e.__demoMode=!1),e},1(t){return t.popoverState===1?t:{...t,popoverState:1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},Us=y.createContext(null);Us.displayName="PopoverContext";function Ja(t){let e=y.useContext(Us);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ja),n}return e}let qs=y.createContext(null);qs.displayName="PopoverAPIContext";function Ks(t){let e=y.useContext(qs);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ks),n}return e}let Gs=y.createContext(null);Gs.displayName="PopoverGroupContext";function zu(){return y.useContext(Gs)}let er=y.createContext(null);er.displayName="PopoverPanelContext";function Hg(){return y.useContext(er)}function Ug(t,e){return rt(e.type,zg,t,e)}let qg="div";function Kg(t,e){var n;let{__demoMode:i=!1,...a}=t,r=y.useRef(null),s=Ne(e,vu(k=>{r.current=k})),o=y.useRef([]),l=y.useReducer(Ug,{__demoMode:i,popoverState:i?0:1,buttons:o,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:y.createRef(),afterPanelSentinel:y.createRef()}),[{popoverState:c,button:u,buttonId:d,panel:f,panelId:h,beforePanelSentinel:g,afterPanelSentinel:p},m]=l,b=Zn((n=r.current)!=null?n:u),x=y.useMemo(()=>{if(!u||!f)return!1;for(let ne of document.querySelectorAll("body > *"))if(Number(ne?.contains(u))^Number(ne?.contains(f)))return!0;let k=Bs(),$=k.indexOf(u),H=($+k.length-1)%k.length,q=($+1)%k.length,K=k[H],ie=k[q];return!f.contains(K)&&!f.contains(ie)},[u,f]),_=Ca(d),D=Ca(h),w=y.useMemo(()=>({buttonId:_,panelId:D,close:()=>m({type:1})}),[_,D,m]),C=zu(),O=C?.registerPopover,M=z(()=>{var k;return(k=C?.isFocusWithinPopoverGroup())!=null?k:b?.activeElement&&(u?.contains(b.activeElement)||f?.contains(b.activeElement))});y.useEffect(()=>O?.(w),[O,w]);let[T,j]=dg(),E=yg({portals:T,defaultContainers:[u,f]});ng(b?.defaultView,"focus",k=>{var $,H,q,K;k.target!==window&&k.target instanceof HTMLElement&&c===0&&(M()||u&&f&&(E.contains(k.target)||(H=($=g.current)==null?void 0:$.contains)!=null&&H.call($,k.target)||(K=(q=p.current)==null?void 0:q.contains)!=null&&K.call(q,k.target)||m({type:1})))},!0),xu(E.resolveContainers,(k,$)=>{m({type:1}),_u($,wu.Loose)||(k.preventDefault(),u?.focus())},c===0);let L=z(k=>{m({type:1});let $=k?k instanceof HTMLElement?k:"current"in k&&k.current instanceof HTMLElement?k.current:u:u;$?.focus()}),A=y.useMemo(()=>({close:L,isPortalled:x}),[L,x]),F=y.useMemo(()=>({open:c===0,close:L}),[c,L]),R={ref:s};return I.createElement(er.Provider,{value:null},I.createElement(Us.Provider,{value:l},I.createElement(qs.Provider,{value:A},I.createElement(Du,{value:rt(c,{0:Dt.Open,1:Dt.Closed})},I.createElement(j,null,Ie({ourProps:R,theirProps:a,slot:F,defaultTag:qg,name:"Popover"}),I.createElement(E.MainTreeNode,null))))))}let Gg="button";function Xg(t,e){let n=at(),{id:i=`headlessui-popover-button-${n}`,...a}=t,[r,s]=Ja("Popover.Button"),{isPortalled:o}=Ks("Popover.Button"),l=y.useRef(null),c=`headlessui-focus-sentinel-${at()}`,u=zu(),d=u?.closeOthers,f=Hg()!==null;y.useEffect(()=>{if(!f)return s({type:3,buttonId:i}),()=>{s({type:3,buttonId:null})}},[f,i,s]);let[h]=y.useState(()=>Symbol()),g=Ne(l,e,f?null:E=>{if(E)r.buttons.current.push(h);else{let L=r.buttons.current.indexOf(h);L!==-1&&r.buttons.current.splice(L,1)}r.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),E&&s({type:2,button:E})}),p=Ne(l,e),m=Zn(l),b=z(E=>{var L,A,F;if(f){if(r.popoverState===1)return;switch(E.key){case se.Space:case se.Enter:E.preventDefault(),(A=(L=E.target).click)==null||A.call(L),s({type:1}),(F=r.button)==null||F.focus();break}}else switch(E.key){case se.Space:case se.Enter:E.preventDefault(),E.stopPropagation(),r.popoverState===1&&d?.(r.buttonId),s({type:0});break;case se.Escape:if(r.popoverState!==0)return d?.(r.buttonId);if(!l.current||m!=null&&m.activeElement&&!l.current.contains(m.activeElement))return;E.preventDefault(),E.stopPropagation(),s({type:1});break}}),x=z(E=>{f||E.key===se.Space&&E.preventDefault()}),_=z(E=>{var L,A;Xa(E.currentTarget)||t.disabled||(f?(s({type:1}),(L=r.button)==null||L.focus()):(E.preventDefault(),E.stopPropagation(),r.popoverState===1&&d?.(r.buttonId),s({type:0}),(A=r.button)==null||A.focus()))}),D=z(E=>{E.preventDefault(),E.stopPropagation()}),w=r.popoverState===0,C=y.useMemo(()=>({open:w}),[w]),O=Fs(t,l),M=f?{ref:p,type:O,onKeyDown:b,onClick:_}:{ref:g,id:r.buttonId,type:O,"aria-expanded":t.disabled?void 0:r.popoverState===0,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:b,onKeyUp:x,onClick:_,onMouseDown:D},T=Bu(),j=z(()=>{let E=r.panel;if(!E)return;function L(){rt(T.current,{[It.Forwards]:()=>vn(E,Ht.First),[It.Backwards]:()=>vn(E,Ht.Last)})===hs.Error&&vn(Bs().filter(A=>A.dataset.headlessuiFocusGuard!=="true"),rt(T.current,{[It.Forwards]:Ht.Next,[It.Backwards]:Ht.Previous}),{relativeTo:r.button})}L()});return I.createElement(I.Fragment,null,Ie({ourProps:M,theirProps:a,slot:C,defaultTag:Gg,name:"Popover.Button"}),w&&!f&&o&&I.createElement(zn,{id:c,features:Hn.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:j}))}let Zg="div",Qg=Yn.RenderStrategy|Yn.Static;function Jg(t,e){let n=at(),{id:i=`headlessui-popover-overlay-${n}`,...a}=t,[{popoverState:r},s]=Ja("Popover.Overlay"),o=Ne(e),l=$s(),c=l!==null?(l&Dt.Open)===Dt.Open:r===0,u=z(f=>{if(Xa(f.currentTarget))return f.preventDefault();s({type:1})}),d=y.useMemo(()=>({open:r===0}),[r]);return Ie({ourProps:{ref:o,id:i,"aria-hidden":!0,onClick:u},theirProps:a,slot:d,defaultTag:Zg,features:Qg,visible:c,name:"Popover.Overlay"})}let ep="div",tp=Yn.RenderStrategy|Yn.Static;function np(t,e){let n=at(),{id:i=`headlessui-popover-panel-${n}`,focus:a=!1,...r}=t,[s,o]=Ja("Popover.Panel"),{close:l,isPortalled:c}=Ks("Popover.Panel"),u=`headlessui-focus-sentinel-before-${at()}`,d=`headlessui-focus-sentinel-after-${at()}`,f=y.useRef(null),h=Ne(f,e,O=>{o({type:4,panel:O})}),g=Zn(f);Bt(()=>(o({type:5,panelId:i}),()=>{o({type:5,panelId:null})}),[i,o]);let p=$s(),m=p!==null?(p&Dt.Open)===Dt.Open:s.popoverState===0,b=z(O=>{var M;switch(O.key){case se.Escape:if(s.popoverState!==0||!f.current||g!=null&&g.activeElement&&!f.current.contains(g.activeElement))return;O.preventDefault(),O.stopPropagation(),o({type:1}),(M=s.button)==null||M.focus();break}});y.useEffect(()=>{var O;t.static||s.popoverState===1&&((O=t.unmount)==null||O)&&o({type:4,panel:null})},[s.popoverState,t.unmount,t.static,o]),y.useEffect(()=>{if(s.__demoMode||!a||s.popoverState!==0||!f.current)return;let O=g?.activeElement;f.current.contains(O)||vn(f.current,Ht.First)},[s.__demoMode,a,f,s.popoverState]);let x=y.useMemo(()=>({open:s.popoverState===0,close:l}),[s,l]),_={ref:h,id:i,onKeyDown:b,onBlur:a&&s.popoverState===0?O=>{var M,T,j,E,L;let A=O.relatedTarget;A&&f.current&&((M=f.current)!=null&&M.contains(A)||(o({type:1}),((j=(T=s.beforePanelSentinel.current)==null?void 0:T.contains)!=null&&j.call(T,A)||(L=(E=s.afterPanelSentinel.current)==null?void 0:E.contains)!=null&&L.call(E,A))&&A.focus({preventScroll:!0})))}:void 0,tabIndex:-1},D=Bu(),w=z(()=>{let O=f.current;if(!O)return;function M(){rt(D.current,{[It.Forwards]:()=>{var T;vn(O,Ht.First)===hs.Error&&((T=s.afterPanelSentinel.current)==null||T.focus())},[It.Backwards]:()=>{var T;(T=s.button)==null||T.focus({preventScroll:!0})}})}M()}),C=z(()=>{let O=f.current;if(!O)return;function M(){rt(D.current,{[It.Forwards]:()=>{var T;if(!s.button)return;let j=Bs(),E=j.indexOf(s.button),L=j.slice(0,E+1),A=[...j.slice(E+1),...L];for(let F of A.slice())if(F.dataset.headlessuiFocusGuard==="true"||(T=s.panel)!=null&&T.contains(F)){let R=A.indexOf(F);R!==-1&&A.splice(R,1)}vn(A,Ht.First,{sorted:!1})},[It.Backwards]:()=>{var T;vn(O,Ht.Previous)===hs.Error&&((T=s.button)==null||T.focus())}})}M()});return I.createElement(er.Provider,{value:i},m&&c&&I.createElement(zn,{id:u,ref:s.beforePanelSentinel,features:Hn.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:w}),Ie({ourProps:_,theirProps:r,slot:x,defaultTag:ep,features:tp,visible:m,name:"Popover.Panel"}),m&&c&&I.createElement(zn,{id:d,ref:s.afterPanelSentinel,features:Hn.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C}))}let ip="div";function ap(t,e){let n=y.useRef(null),i=Ne(n,e),[a,r]=y.useState([]),s=z(g=>{r(p=>{let m=p.indexOf(g);if(m!==-1){let b=p.slice();return b.splice(m,1),b}return p})}),o=z(g=>(r(p=>[...p,g]),()=>s(g))),l=z(()=>{var g;let p=Ou(n);if(!p)return!1;let m=p.activeElement;return(g=n.current)!=null&&g.contains(m)?!0:a.some(b=>{var x,_;return((x=p.getElementById(b.buttonId.current))==null?void 0:x.contains(m))||((_=p.getElementById(b.panelId.current))==null?void 0:_.contains(m))})}),c=z(g=>{for(let p of a)p.buttonId.current!==g&&p.close()}),u=y.useMemo(()=>({registerPopover:o,unregisterPopover:s,isFocusWithinPopoverGroup:l,closeOthers:c}),[o,s,l,c]),d=y.useMemo(()=>({}),[]),f=t,h={ref:i};return I.createElement(Gs.Provider,{value:u},Ie({ourProps:h,theirProps:f,slot:d,defaultTag:ip,name:"Popover.Group"}))}let rp=Ve(Kg),sp=Ve(Xg),op=Ve(Jg),lp=Ve(np),cp=Ve(ap),Nr=Object.assign(rp,{Button:sp,Overlay:op,Panel:lp,Group:cp}),Hu=y.createContext(null);function Uu(){let t=y.useContext(Hu);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Uu),e}return t}function up(){let[t,e]=y.useState([]);return[t.length>0?t.join(" "):void 0,y.useMemo(()=>function(n){let i=z(r=>(e(s=>[...s,r]),()=>e(s=>{let o=s.slice(),l=o.indexOf(r);return l!==-1&&o.splice(l,1),o}))),a=y.useMemo(()=>({register:i,slot:n.slot,name:n.name,props:n.props}),[i,n.slot,n.name,n.props]);return I.createElement(Hu.Provider,{value:a},n.children)},[e])]}let dp="label";function fp(t,e){let n=at(),{id:i=`headlessui-label-${n}`,passive:a=!1,...r}=t,s=Uu(),o=Ne(e);Bt(()=>s.register(i),[i,s.register]);let l={ref:o,...s.props,id:i};return a&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in r&&delete r.onClick),Ie({ourProps:l,theirProps:r,slot:s.slot||{},defaultTag:dp,name:s.name||"Label"})}let hp=Ve(fp),gp=Object.assign(hp,{}),Xs=y.createContext(null);Xs.displayName="GroupContext";let pp=y.Fragment;function mp(t){var e;let[n,i]=y.useState(null),[a,r]=up(),[s,o]=gg(),l=y.useMemo(()=>({switch:n,setSwitch:i,labelledby:a,describedby:s}),[n,i,a,s]),c={},u=t;return I.createElement(o,{name:"Switch.Description"},I.createElement(r,{name:"Switch.Label",props:{htmlFor:(e=l.switch)==null?void 0:e.id,onClick(d){n&&(d.currentTarget.tagName==="LABEL"&&d.preventDefault(),n.click(),n.focus({preventScroll:!0}))}}},I.createElement(Xs.Provider,{value:l},Ie({ourProps:c,theirProps:u,defaultTag:pp,name:"Switch.Group"}))))}let bp="button";function vp(t,e){let n=at(),{id:i=`headlessui-switch-${n}`,checked:a,defaultChecked:r=!1,onChange:s,name:o,value:l,form:c,...u}=t,d=y.useContext(Xs),f=y.useRef(null),h=Ne(f,e,d===null?null:d.setSwitch),[g,p]=Cu(a,s,r),m=z(()=>p?.(!g)),b=z(O=>{if(Xa(O.currentTarget))return O.preventDefault();O.preventDefault(),m()}),x=z(O=>{O.key===se.Space?(O.preventDefault(),m()):O.key===se.Enter&&jh(O.currentTarget)}),_=z(O=>O.preventDefault()),D=y.useMemo(()=>({checked:g}),[g]),w={id:i,ref:h,role:"switch",type:Fs(t,f),tabIndex:0,"aria-checked":g,"aria-labelledby":d?.labelledby,"aria-describedby":d?.describedby,onClick:b,onKeyUp:x,onKeyPress:_},C=_i();return y.useEffect(()=>{var O;let M=(O=f.current)==null?void 0:O.closest("form");M&&r!==void 0&&C.addEventListener(M,"reset",()=>{p(r)})},[f,p]),I.createElement(I.Fragment,null,o!=null&&g&&I.createElement(zn,{features:Hn.Hidden,...Su({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:c,checked:g,name:o,value:l})}),Ie({ourProps:w,theirProps:u,slot:D,defaultTag:bp,name:"Switch"}))}let yp=Ve(vp),xp=mp,_p=Object.assign(yp,{Group:xp,Label:gp,Description:vg});function wp({width:t,className:e}){return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${e} icon icon-tabler icon-tabler-backspace`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M20 6a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-11l-5 -5a1.5 1.5 0 0 1 0 -2l5 -5z"}),v.jsx("path",{d:"M12 10l4 4m0 -4l-4 4"})]})}function Dp({width:t=24,strokeWidth:e=2,className:n}){return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-dots ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("circle",{cx:5,cy:12,r:1}),v.jsx("circle",{cx:12,cy:12,r:1}),v.jsx("circle",{cx:19,cy:12,r:1})]})}function Sp({width:t=24,strokeWidth:e=2,className:n}){return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-exclamation-circle ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),v.jsx("path",{d:"M12 9v4"}),v.jsx("path",{d:"M12 16v.01"})]})}function Zs({width:t=24,strokeWidth:e=2,className:n=""}){return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-trophy-filled ${n}`,width:t,height:t,viewBox:"0 0 24 24",strokeWidth:e,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M8 21l8 0",fill:"currentColor"}),v.jsx("path",{d:"M12 17l0 4",fill:"currentColor"}),v.jsx("path",{d:"M7 4l10 0",fill:"currentColor"}),v.jsx("path",{d:"M17 4v8a5 5 0 0 1 -10 0v-8",fill:"currentColor"}),v.jsx("path",{d:"M5 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),v.jsx("path",{d:"M19 9m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"})]})}const Op={count:{filters:[{value:"plays",label:"game plays did I record"},{value:"games",label:"different games did I record playing"},{value:"locations",label:"play locations did I record"},{value:"people",label:"people did I record playing"},{value:"days",label:"days did I record playing games"}],"game name":[{value:"gameName",label:"of"},{value:"gameNames",label:"of these games:"}],time:[{value:"onDate",label:"on"},{value:"betweenDates",label:"between"},{value:"afterDate",label:"after"},{value:"beforeDate",label:"before"},{value:"all",label:"for all time"}],players:[{value:"withAllPlayerNames",label:"with"},{value:"withOnlyPlayerNames",label:"with only"},{value:"withAnyPlayerNames",label:"with any of"},{value:"whereSinglePlayerNameWon",label:"where the winner was"},{value:"wherePlayerNamesWon",label:"where the winners were"}],location:[{value:"location",label:"at"}]},listPlayerNames:{filters:[],"game name":[{value:"gameName",label:"of"},{value:"gameNames",label:"of these games:"}],time:[{value:"onDate",label:"on"},{value:"betweenDates",label:"between"},{value:"afterDate",label:"after"},{value:"beforeDate",label:"before"},{value:"all",label:"for all time"}],location:[{value:"location",label:"at"}]},listGameNames:{filters:[],time:[{value:"onDate",label:"on"},{value:"betweenDates",label:"between"},{value:"afterDate",label:"after"},{value:"beforeDate",label:"before"},{value:"all",label:"for all time"}],location:[{value:"location",label:"at"}],players:[{value:"withAllPlayerNames",label:"with"},{value:"withOnlyPlayerNames",label:"with only"},{value:"withAnyPlayerNames",label:"with any of"},{value:"whereSinglePlayerNameWon",label:"where the winner was"},{value:"wherePlayerNamesWon",label:"where the winners were"}]},listDates:{filters:[],"game name":[{value:"gameName",label:"of"},{value:"gameNames",label:"of these games:"}],time:[{value:"betweenDates",label:"between"},{value:"afterDate",label:"after"},{value:"beforeDate",label:"before"}],players:[{value:"withAllPlayerNames",label:"with"},{value:"withOnlyPlayerNames",label:"with only"},{value:"withAnyPlayerNames",label:"with any of"},{value:"whereSinglePlayerNameWon",label:"where the winner was"},{value:"wherePlayerNamesWon",label:"where the winners were"}],location:[{value:"location",label:"at"}]},listLocations:{filters:[],"game name":[{value:"gameName",label:"of"},{value:"gameNames",label:"of these games:"}],players:[{value:"withAllPlayerNames",label:"with"},{value:"withOnlyPlayerNames",label:"with only"},{value:"withAnyPlayerNames",label:"with any of"},{value:"whereSinglePlayerNameWon",label:"where the winner was"},{value:"wherePlayerNamesWon",label:"where the winners were"}],time:[{value:"onDate",label:"on"},{value:"betweenDates",label:"between"},{value:"afterDate",label:"after"},{value:"beforeDate",label:"before"},{value:"all",label:"for all time"}]},listRecordedPlays:{filters:[],"game name":[{value:"gameName",label:"Game"},{value:"gameNames",label:"Games"}],time:[{value:"onDate",label:"On"},{value:"betweenDates",label:"Between"},{value:"afterDate",label:"After"},{value:"beforeDate",label:"Before"}],players:[{value:"withPlayerName",label:"With player"},{value:"withAllPlayerNames",label:"With all"},{value:"withOnlyPlayerNames",label:"With only"},{value:"withAnyPlayerNames",label:"With any"},{value:"whereSinglePlayerNameWon",label:"Where the winner was"},{value:"wherePlayerNamesWon",label:"Where the winners were"},{value:"newForPlayerName",label:"First time played for"}],location:[{value:"location",label:"At"}]}};function Mp({addFilterButton:t,display:e}){const{state:n}=Fe(),[i,a]=y.useState({label:"",value:""}),[r,s]=y.useState([]),o=l=>{a(l),t(l)};return y.useEffect(()=>{const l=n.find(c=>c.order==="aggregator");if(l?.filter){const c=Op[l.filter],{filters:u,...d}=c,f=Cp(d);s(f)}},[n]),v.jsx("div",{className:`${e?"":"hidden"}`,children:v.jsx(ta,{value:i,onChange:o,children:({open:l})=>v.jsxs(v.Fragment,{children:[v.jsx(ta.Button,{className:`${Un} font-semibold  ${l?Ih:"border-transparent"}  `,children:"Add Filter +"}),v.jsx(ta.Options,{className:`mt-1 max-w-max shadow-lg hover:shadow-slate-500/10 ${Un} ${Fh}`,children:r.map((c,u)=>c.value==="heading"?v.jsx("div",{className:`uppercase text-slate-500 text-xs font-semibold ${u!==0?"mt-2":""}`,children:c.label},`option.label-${u}`):v.jsx(ta.Option,{value:c,as:y.Fragment,children:({active:d,selected:f})=>v.jsx("li",{className:`${Vs} ${d?Ys:""}`,children:c.label})},c.value))})]})})})}const Cp=t=>Object.entries(t).map(e=>{const n={value:"heading",label:e[0]},i=[...e[1]];return[n,...i]}).reduce((e,n)=>[...e,...n],[]);function qu({filter:t,onClick:e}){const{dispatch:n}=Fe(),i=r=>{n({type:"clear filter",filter:r})},a=()=>{i(t),e&&e()};return v.jsxs("div",{className:"flex justify-center items-center gap-2 hover:cursor-pointer font-semibold border border-slate-500 rounded-sm py-1 w-28 hover:bg-slate-200",onClick:a,children:[v.jsx("div",{children:"Clear"}),v.jsx(wp,{width:20})]})}function Xo(t,e){if(!e)return[];const n=[];return t.filter(i=>i.recordingUserId===e).forEach(i=>{const a={value:i?.gameId.toString(),label:i?.gameName};a?.value&&a?.label&&n.push(a)}),Qs(n)}const dn=(t,e)=>{const n=[];return t.filter(i=>i.recordingUserId===e).forEach(i=>{i.players.forEach(a=>{let r={value:a.name,label:a.name};n.push(r)})}),Qs(n)},kp=(t,e)=>{if(!e)return[];const n=[];return t.filter(i=>i.recordingUserId===e).forEach(i=>{const a={value:i.location?.replace(/\s+/g,""),label:i.location};i?.location&&n.push(a)}),Qs(n)},Qs=(t=[])=>{if(t.length===0)return[];const e=[...new Map(t.map(i=>[i.value,i])).values()];return Pp(e)},Pp=t=>t.sort((n,i)=>{let a=Zo(n.label.toLowerCase()),r=Zo(i.label.toLowerCase());return a>r?1:a<r?-1:0}),Zo=t=>t.startsWith("the ")?t.slice(3).trim():t.startsWith("a ")?t.slice(1).trim():t;function Ku({filteredPlays:t,filter:e,user:n}){if(!e||!n)return[];try{const{filter:i}=e;switch(i){case"gameName":return Xo(t,n?.userId||0);case"gameNames":return Xo(t,n?.userId||0);case"location":return kp(t,n?.userId||0);case"withPlayerName":return dn(t,n?.userId||0);case"whereSinglePlayerNameWon":return dn(t,n?.userId||0);case"withAllPlayerNames":return dn(t,n?.userId||0);case"withOnlyPlayerNames":return dn(t,n?.userId||0);case"withAnyPlayerNames":return dn(t,n?.userId||0);case"wherePlayerNamesWon":return dn(t,n?.userId||0);case"newForPlayerName":return dn(t,n?.userId||0);default:return[]}}catch(i){console.log(i)}}function Js({filter:t}){const{dispatch:e}=Fe(),n=i=>{e({type:"remove",filter:i})};return v.jsxs("div",{className:"flex justify-center items-center gap-2 hover:cursor-pointer font-semibold border border-slate-500 rounded-sm py-1 w-36 hover:bg-red-100",onClick:()=>{n(t)},children:[v.jsx("div",{children:"Remove"}),v.jsx($i,{width:20})]})}function eo(){const[t,e]=y.useState({width:window.innerWidth,height:window.innerHeight});return y.useEffect(()=>{function n(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),t}function to(){const{width:t}=eo();return t<640}function ri({filter:t}){const{dispatch:e,removeFilter:n}=Fe(),{state:i}=nn(),{user:a}=Ws();let r=`combobox-${t.order}`,s=y.useRef(null),o=y.useRef(null),l=y.useRef(null);const c=to(),[u,d]=y.useState([]),[f,h]=y.useState({}),[g,p]=y.useState(""),[m,b]=y.useState(""),x=Pu(g,350),[_,D]=y.useState(!1),w=x===""?u:u?.filter(A=>A.label.toLowerCase().includes(g.toLowerCase()));let{width:C}=eo();const O=A=>{if(!A)return"";if(c){let F=C/11;return A.label.length<F?A.label:`${A.label.slice(0,F-5)}...`}return A.label.length>20?`${A.label.slice(0,20)}...`:A.label},M=A=>{h(A),b(O(A)),A&&e({type:"upsert",filter:{order:t.order,filter:t.filter,label:t.label,arg:A.label}})},T=y.useCallback((A,F)=>{if(!F.arg||!A.length)return;let R=A.find(k=>k.label===F.arg);h(R||{}),b(O(R))},[]),j=y.useCallback(()=>{if(a)try{const A=Ku({filteredPlays:i,filter:t,user:a});A&&(d(A),T(A,t))}catch(A){console.log(A)}},[a,t,T,i]);y.useEffect(function(){t.arg||o?.current?.click()},[t.arg]),y.useEffect(function(){t&&j()},[t,j]);const E=()=>{o?.current?.click&&o.current.click()},L=()=>{h({value:"",label:""}),b("")};return v.jsxs("div",{className:`relative flex items-center ${Eu} hover:cursor-pointer`,children:[!c&&v.jsx(Au,{value:`${t.label}: ${m}`,visible:_,setVisible:D,impactedRef:l,addedWidth:m?40:0}),v.jsxs("div",{ref:l,className:"flex items-center justify-between w-full gap-4 overflow-hidden font-semibold text-left transition-all whitespace-nowrap sm:max-w-sm",onClick:E,children:[v.jsxs("span",{children:[t.label,": ",m]}),m?v.jsx("button",{className:"text-slate-400 hover:text-red-500",onClick:()=>n(t),children:v.jsx($i,{width:16})}):null]}),v.jsx("div",{className:"grid auto-rows-min",children:v.jsx(xt,{value:f,onChange:M,nullable:!0,children:({open:A})=>v.jsx("div",{className:`${A?"":"hidden"}`,children:v.jsxs("div",{className:`${Tu} ${Lu} divide-y divide-slate-500`,children:[v.jsxs("div",{className:`flex px-4 py-2  ${gs} relative md:static`,children:[v.jsx(xt.Input,{ref:s,onChange:F=>p(F.currentTarget.value),onClick:F=>{F.preventDefault()},autoFocus:!0,placeholder:"search",className:`flex-1 bg-transparent px-2 font-semibold transition transition-all duration-500 ease-in-out ${gs} focus:outline-0`}),v.jsx(Ru,{className:"cursor-default text-slate-500"}),v.jsx(xt.Button,{ref:o,className:"display-none"})]}),v.jsx(xt.Options,{id:r,className:"max-h-72 overflow-y-auto py-2",static:!0,children:w?.map(F=>v.jsx(xt.Option,{value:F,as:y.Fragment,children:({active:R,selected:k})=>v.jsxs("li",{className:`flex items-center gap-1  ${Vs} ${Nu} ${k?"font-bold":""} ${R?Ys:""}`,children:[k?v.jsx("div",{className:"w-4",children:v.jsx(ju,{width:16,strokeWidth:3,className:"text-green-500"})}):v.jsx("div",{className:"w-4"}),v.jsx("span",{className:"flex-1",children:F.label})]})},F.value))}),v.jsxs("div",{className:`flex justify-between gap-4 p-2 ${A?"":"hidden"}`,children:[v.jsx(qu,{filter:t,onClick:L}),v.jsx(Js,{filter:t})]})]})})})})]})}function si({filter:t}){const{dispatch:e,removeFilter:n}=Fe(),{state:i}=nn(),{user:a}=Ws();let r=y.useRef(null),s=y.useRef(null),o=y.useRef(null);const l=to(),[c,u]=y.useState([]),[d,f]=y.useState([]),[h,g]=y.useState([]),[p,m]=y.useState(""),[b,x]=y.useState(!1),[_,D]=y.useState(""),w=`${t.label}: ${_}`,O=(()=>{if(l){let{width:R}=eo(),k=R/10;return w.length<k?w:`${w.slice(0,k-5)}...`}return w.length>40?`${w.slice(0,40)}...`:w})(),M=Pu(p,350);y.useEffect(function(){const k=Ep(c);D(k)},[c]);const T=M===""?h:h?.filter(R=>{let k=R.label.toLowerCase().includes(p.toLowerCase()),$=c.find(H=>H.value===R.value);return k||$}),j=R=>{u(R),e({type:"upsert",filter:{order:t.order,filter:t.filter,label:t.label,arg:R.map(k=>k.label)}})},E=y.useCallback(()=>{if(!(!a||d.length))try{const R=Ku({filteredPlays:i,filter:t,user:a});R&&(f(R),g(R))}catch(R){console.log(R)}},[a,t,d,i]);y.useEffect(function(){t&&E()},[t,E]);const L=()=>{s?.current?.click&&s.current.click()};y.useEffect(()=>{L()},[]);const A=()=>{u([{value:"",label:""}])},F=R=>{if(R)return;if(!c.length){g(d);return}const k=d.sort(($,H)=>{let q=c.some(ie=>$.value===ie.value),K=c.some(ie=>H.value===ie.value);return q&&!K?-1:!q&&K?1:0});g(k)};return v.jsxs("div",{className:`relative ${Eu} hover:cursor-pointer`,children:[!l&&v.jsx(Au,{value:O,visible:b,setVisible:x,impactedRef:o,addedWidth:_?44:2}),v.jsxs("div",{ref:o,className:"flex items-center justify-between w-full gap-4 overflow-hidden font-semibold text-left transition-all whitespace-nowrap sm:max-w-sm",onClick:L,children:[O,_?v.jsx("button",{className:"text-slate-400 hover:text-red-500",onClick:()=>n(t),children:v.jsx($i,{width:16})}):null]}),v.jsx(xt,{value:c,onChange:j,multiple:!0,children:({open:R})=>v.jsxs("div",{className:`${R?"":"hidden"} flex flex-col md:flex-row`,children:[v.jsx(Ap,{open:R,onClose:()=>F(R)}),v.jsx("div",{children:v.jsxs("div",{className:`${Tu} ${$h} divide-y divide-slate-500`,children:[v.jsxs("div",{className:`flex px-4 py-2  ${gs} relative md:static`,children:[v.jsx(xt.Input,{ref:r,onChange:k=>{m(k.currentTarget.value)},className:"flex-1 bg-transparent font-semibold transition-all duration-500 ease-in-out placeholder:font-normal focus:outline-0",placeholder:"search"}),v.jsx(xt.Button,{ref:s,className:"display-none",children:v.jsx(Ru,{})})]}),v.jsx(xt.Options,{className:"max-h-72 overflow-y-auto py-2 ",hold:!0,static:!0,children:T.map(k=>v.jsx(xt.Option,{value:k,as:y.Fragment,children:({active:$,selected:H})=>v.jsxs("li",{className:`flex items-center gap-1 ${Vs} ${Nu} ${H?"font-semibold":""} ${$?Ys:""}
                        `,children:[H?v.jsx("div",{className:"w-4",children:v.jsx(ju,{width:16,strokeWidth:3,className:"text-green-500"})}):v.jsx("div",{className:"w-4"}),v.jsx("span",{className:"flex-1",children:k.label})]})},k.value))}),v.jsxs("div",{className:`flex justify-between gap-4 p-2 ${R?"":"hidden"}`,children:[v.jsx(qu,{filter:t,onClick:A}),v.jsx(Js,{filter:t})]})]})})]})})]})}const Ep=t=>t.map(n=>n.label).join(", "),Ap=({open:t,onClose:e})=>(y.useEffect(()=>{t||e()},[t,e]),v.jsx(v.Fragment,{}));function Tp(t,e){}const Lp=Object.freeze(Object.defineProperty({__proto__:null,default:Tp},Symbol.toStringTag,{value:"Module"})),Qo="YYYY-MM-DD";function Rp({filter:t}){const{dispatch:e}=Fe(),[n,i]=y.useState(!1),a=c=>c.map(d=>{let f=Re(d).year(),h=Re(d).month(),g=Re(d).date();return new Date(f,h,g)}),[r,s]=y.useState(typeof t.arg!="string"&&t?.arg?a(t.arg):[new Date,new Date]),o=c=>{console.log("typeof value",typeof c),s(c);let u=[...c].sort((d,f)=>{let h=Re(d).format(Qo),g=Re(f).format(Qo);return h>g?1:h<g?-1:0});console.log("sortedDates",u),e({type:"upsert",filter:{order:t.order,filter:t.filter,label:t.label,arg:u}})},l=c=>{c.stopPropagation(),e({type:"remove",filter:t})};return y.useEffect(()=>{const c=typeof t.arg!="string"&&t?.arg?a(t.arg):[new Date,new Date];s(c)},[t]),v.jsxs("div",{onClick:()=>i(!0),className:`relative flex flex-col sm:flex-row sm:items-center sm:gap-4 text-slate-700 ${Un} hover:cursor-pointer`,children:[v.jsxs("div",{className:"font-semibold",children:[t.label,":"]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx(Bh,{value:r,onChange:o,calendarIcon:null,clearIcon:null,showLeadingZeros:!0,locale:"en-US",nextLabel:v.jsx(Iu,{width:16}),prevLabel:v.jsx(Za,{width:16}),format:"yyyy-MM-dd",autoFocus:!1,openCalendarOnFocus:!0,isOpen:n,onCalendarClose:()=>i(!1),rangeDivider:"and"}),v.jsx("div",{onClick:l,className:"ml-auto hover:text-red-500",children:v.jsx($i,{width:16})})]})]})}function Np({filter:t}){return v.jsx("div",{className:"relative",children:v.jsxs(Ut,{children:[v.jsx(Ut.Button,{className:`${Un} font-semibold`,children:t.label}),v.jsx(Ut.Items,{className:`mt-1 ${Un} ${Lu} w-full`,children:v.jsx(Ut.Item,{children:v.jsx(Js,{filter:t})})})]})})}function Gu(t){var e=t.children;return I.createElement("span",{className:"react-date-picker__inputGroup__divider"},e)}Gu.propTypes={children:S.node};var Jo=function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},jp=["century","decade","year","month"],Ip=Jo(Jo([],jp.slice(1),!0),["day"],!1),Xu=S.oneOf(Ip),Mn=function(e,n,i){var a=e,r=n,s=a[r];if(!s)return null;if(!(s instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=e.maxDate;return o&&s>o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(i,"`, minDate cannot be larger than maxDate.")):null},Cn=function(e,n,i){var a=e,r=n,s=a[r];if(!s)return null;if(!(s instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(i,"`, expected instance of `Date`."));var o=e.minDate;return o&&s<o?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof s,"` supplied to `").concat(i,"`, maxDate cannot be smaller than minDate.")):null},Vi=S.oneOfType([S.func,S.exact({current:S.any})]),Fp=function(t){return S.arrayOf(t)},no=typeof document<"u",$p=no?y.useLayoutEffect:y.useEffect,Bp=no&&/(MSIE|Trident\/|Edge\/)/.test(navigator.userAgent),Wp=no&&/Firefox/.test(navigator.userAgent);function Vp(t){var e=t.target;Bp?requestAnimationFrame(function(){return e.select()}):e.select()}function Yp(t){if(document.readyState==="complete")return;function e(){ka(t)}window.addEventListener("load",e)}function zp(t){if(!document.fonts)return;var e=Wh(t);if(!e)return;var n=document.fonts.check(e);if(n)return;function i(){ka(t)}document.fonts.addEventListener("loadingdone",i)}function Hp(t){if(t&&"selectionStart"in t&&t.selectionStart!==null&&"selectionEnd"in t&&t.selectionEnd!==null)return t.value.slice(t.selectionStart,t.selectionEnd);if("getSelection"in window){var e=window.getSelection();return e&&e.toString()}return null}function Up(t){if(t!==null)return function(n){if(!Wp){var i=n.key,a=n.target,r=a.value,s=i.length===1&&/\d/.test(i),o=Hp(a);(!s||!(o||r.length<t))&&n.preventDefault()}}}function tr(t){var e=t.ariaLabel,n=t.autoFocus,i=t.className,a=t.disabled,r=t.inputRef,s=t.max,o=t.min,l=t.name,c=t.nameForClass,u=t.onChange,d=t.onKeyDown,f=t.onKeyUp,h=t.placeholder,g=h===void 0?"--":h,p=t.required,m=t.showLeadingZeros,b=t.step,x=t.value;$p(function(){!r||!r.current||(ka(r.current),Yp(r.current),zp(r.current))},[r,x]);var _=m&&x&&Number(x)<10&&(x==="0"||!x.toString().startsWith("0")),D=s?s.toString().length:null;return I.createElement(I.Fragment,null,_?I.createElement("span",{className:"".concat(i,"__leadingZero")},"0"):null,I.createElement("input",{"aria-label":e,autoComplete:"off",autoFocus:n,className:Pa("".concat(i,"__input"),"".concat(i,"__").concat(c||l),_&&"".concat(i,"__input--hasLeadingZero")),"data-input":"true",disabled:a,inputMode:"numeric",max:s,min:o,name:l,onChange:u,onFocus:Vp,onKeyDown:d,onKeyPress:Up(D),onKeyUp:function(w){ka(w.target),f&&f(w)},placeholder:g,ref:r,required:p,step:b,type:"number",value:x!==null?x:""}))}tr.propTypes={ariaLabel:S.string,autoFocus:S.bool,className:S.string.isRequired,disabled:S.bool,inputRef:Vi,max:S.number,min:S.number,name:S.string,nameForClass:S.string,onChange:S.func,onKeyDown:S.func,onKeyUp:S.func,placeholder:S.string,required:S.bool,showLeadingZeros:S.bool,step:S.number,value:S.string};function qp(t,e,n){return e&&e>t?e:n&&n<t?n:t}function Zu(t){return t!==null&&t!==!1&&!Number.isNaN(Number(t))}function nr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.min.apply(Math,t.filter(Zu))}function ir(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.max.apply(Math,t.filter(Zu))}var ms=function(){return ms=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ms.apply(this,arguments)},Kp=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};function Qu(t){var e=t.maxDate,n=t.minDate,i=t.month,a=t.year,r=Kp(t,["maxDate","minDate","month","year"]),s=function(){return i?Q.getDaysInMonth(new Date(Number(a),Number(i)-1,1)):31}();function o(u){return a===Q.getYear(u).toString()&&i===Q.getMonthHuman(u).toString()}var l=nr(s,e&&o(e)&&Q.getDate(e)),c=ir(1,n&&o(n)&&Q.getDate(n));return I.createElement(tr,ms({max:l,min:c,name:"day"},r))}Qu.propTypes={ariaLabel:S.string,className:S.string.isRequired,disabled:S.bool,inputRef:Vi,maxDate:Cn,minDate:Mn,month:S.string,onChange:S.func,onKeyDown:S.func,onKeyUp:S.func,placeholder:S.string,required:S.bool,showLeadingZeros:S.bool,value:S.string,year:S.string};var bs=function(){return bs=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},bs.apply(this,arguments)},Gp=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};function Ju(t){var e=t.maxDate,n=t.minDate,i=t.year,a=Gp(t,["maxDate","minDate","year"]);function r(l){return l&&i===Q.getYear(l).toString()}var s=nr(12,e&&r(e)&&Q.getMonthHuman(e)),o=ir(1,n&&r(n)&&Q.getMonthHuman(n));return I.createElement(tr,bs({max:s,min:o,name:"month"},a))}Ju.propTypes={ariaLabel:S.string,className:S.string.isRequired,disabled:S.bool,inputRef:Vi,maxDate:Cn,minDate:Mn,onChange:S.func,onKeyDown:S.func,onKeyUp:S.func,placeholder:S.string,required:S.bool,showLeadingZeros:S.bool,value:S.string,year:S.string};var jr=new Map;function vs(t){return function(n,i){var a=n||Vh();jr.has(a)||jr.set(a,new Map);var r=jr.get(a);return r.has(t)||r.set(t,new Intl.DateTimeFormat(a||void 0,t).format),r.get(t)(i)}}function Xp(t){var e=new Date(t);return new Date(e.setHours(12))}function ed(t){return function(e,n){return vs(t)(e,Xp(n))}}var Zp={month:"long"},Qp={month:"short"},Jp=ed(Zp),em=ed(Qp),tm=function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function td(t){var e=t.ariaLabel,n=t.autoFocus,i=t.className,a=t.disabled,r=t.inputRef,s=t.locale,o=t.maxDate,l=t.minDate,c=t.onChange,u=t.onKeyDown,d=t.placeholder,f=d===void 0?"--":d,h=t.required,g=t.short,p=t.value,m=t.year;function b(O){return O&&m===Q.getYear(O).toString()}var x=nr(12,o&&b(o)&&Q.getMonthHuman(o)),_=ir(1,l&&b(l)&&Q.getMonthHuman(l)),D=tm([],Array(12),!0).map(function(O,M){return new Date(2019,M,1)}),w="month",C=g?em:Jp;return I.createElement("select",{"aria-label":e,autoFocus:n,className:Pa("".concat(i,"__input"),"".concat(i,"__").concat(w)),"data-input":"true","data-select":"true",disabled:a,name:w,onChange:c,onKeyDown:u,ref:r,required:h,value:p!==null?p:""},!p&&I.createElement("option",{value:""},f),D.map(function(O){var M=Q.getMonthHuman(O),T=M<_||M>x;return I.createElement("option",{key:M,disabled:T,value:M},C(s,O))}))}td.propTypes={ariaLabel:S.string,autoFocus:S.bool,className:S.string.isRequired,disabled:S.bool,inputRef:Vi,locale:S.string,maxDate:Cn,minDate:Mn,onChange:S.func,onKeyDown:S.func,placeholder:S.string,required:S.bool,short:S.bool,value:S.string,year:S.string};var ys=function(){return ys=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ys.apply(this,arguments)},nm=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n};function nd(t){var e=t.maxDate,n=t.minDate,i=t.placeholder,a=i===void 0?"----":i,r=t.valueType,s=nm(t,["maxDate","minDate","placeholder","valueType"]),o=nr(275760,e&&Q.getYear(e)),l=ir(1,n&&Q.getYear(n)),c=function(){return r==="century"?10:1}();return I.createElement(tr,ys({max:o,min:l,name:"year",placeholder:a,step:c},s))}nd.propTypes={ariaLabel:S.string,className:S.string.isRequired,disabled:S.bool,inputRef:Vi,maxDate:Cn,minDate:Mn,onChange:S.func,onKeyDown:S.func,onKeyUp:S.func,placeholder:S.string,required:S.bool,value:S.string,valueType:Xu};function id(t){var e=t.ariaLabel,n=t.disabled,i=t.maxDate,a=t.minDate,r=t.name,s=t.onChange,o=t.required,l=t.value,c=t.valueType,u=function(){switch(c){case"decade":case"year":return"number";case"month":return"month";case"day":return"date";default:throw new Error("Invalid valueType")}}(),d=function(){switch(c){case"decade":case"year":return Q.getYear;case"month":return Q.getISOLocalMonth;case"day":return Q.getISOLocalDate;default:throw new Error("Invalid valueType")}}();function f(h){h.stopPropagation()}return I.createElement("input",{"aria-label":e,disabled:n,hidden:!0,max:i?d(i):void 0,min:a?d(a):void 0,name:r,onChange:s,onFocus:f,required:o,style:{visibility:"hidden",position:"absolute",zIndex:"-999"},type:u,value:l?d(l):""})}id.propTypes={ariaLabel:S.string,disabled:S.bool,maxDate:Cn,minDate:Mn,name:S.string,onChange:S.func,required:S.bool,value:S.instanceOf(Date),valueType:Xu};function im(t,e){switch(t){case"decade":return Q.getDecadeStart(e);case"year":return Q.getYearStart(e);case"month":return Q.getMonthStart(e);case"day":return Q.getDayStart(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function am(t,e){switch(t){case"decade":return Q.getDecadeEnd(e);case"year":return Q.getYearEnd(e);case"month":return Q.getMonthEnd(e);case"day":return Q.getDayEnd(e);default:throw new Error("Invalid rangeType: ".concat(t))}}var In=function(){return In=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},In.apply(this,arguments)},Ea=function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},na={},Aa=new Date;Aa.setFullYear(1,0,1);Aa.setHours(0,0,0,0);var el=new Date(864e13),ar=["century","decade","year","month"],rm=Ea(Ea([],ar.slice(1),!0),["day"],!1);function sm(t){return t instanceof Date?t:new Date(t)}function ad(t){var e=ar.indexOf(t);return rm[e]}function om(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var i=sm(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(t));return i}function rd(t,e){var n=t.value,i=t.minDate,a=t.maxDate,r=t.maxDetail,s=om(n,e);if(!s)return null;var o=ad(r),l=function(){switch(e){case 0:return im(o,s);case 1:return am(o,s);default:throw new Error("Invalid index value: ".concat(e))}}();return qp(l,i,a)}var xs=function(t){return rd(t,0)},sd=function(t){return rd(t,1)},lm=function(t){return[xs,sd].map(function(e){return e(t)})};function cm(t){return t.dataset.input==="true"}function tl(t,e){var n=t;do n=n[e];while(n&&!cm(n));return n}function Ir(t){t&&t.focus()}function um(t,e,n){var i=[],a=new RegExp(Object.keys(e).map(function(s){return"".concat(s,"+")}).join("|"),"g"),r=t.match(a);return t.split(a).reduce(function(s,o,l){var c=o&&I.createElement(Gu,{key:"separator_".concat(l)},o),u=Ea(Ea([],s,!0),[c],!1),d=r&&r[l];if(d){var f=e[d]||e[Object.keys(e).find(function(h){return d.match(h)})];if(!f)return u;!n&&i.includes(f)?u.push(d):(u.push(f(d,l)),i.push(f))}return u},[])}function od(t){var e=t.autoFocus,n=t.className,i=t.dayAriaLabel,a=t.dayPlaceholder,r=t.disabled,s=t.format,o=t.isCalendarOpen,l=o===void 0?null:o,c=t.locale,u=t.maxDate,d=t.maxDetail,f=d===void 0?"month":d,h=t.minDate,g=t.monthAriaLabel,p=t.monthPlaceholder,m=t.name,b=m===void 0?"date":m,x=t.nativeInputAriaLabel,_=t.onChange,D=t.onInvalidChange,w=t.required,C=t.returnValue,O=C===void 0?"start":C,M=t.showLeadingZeros,T=t.value,j=t.yearAriaLabel,E=t.yearPlaceholder,L=y.useState(null),A=L[0],F=L[1],R=y.useState(null),k=R[0],$=R[1],H=y.useState(null),q=H[0],K=H[1],ie=y.useState(null),ne=ie[0],ye=ie[1],Y=y.useRef(null),G=y.useRef(null),te=y.useRef(null),Pe=y.useRef(null),Xe=y.useState(l),Ze=Xe[0],Wt=Xe[1],Ot=y.useRef();y.useEffect(function(){Wt(l)},[l]),y.useEffect(function(){var N=xs({value:T,minDate:h,maxDate:u,maxDetail:f});N?(F(Q.getYear(N).toString()),$(Q.getMonthHuman(N).toString()),K(Q.getDate(N).toString()),ye(N)):(F(null),$(null),K(null),ye(null))},[T,h,u,f,Ze]);var Ee=ad(f),Mt=function(){var N=ar.indexOf(f),B=na[N]||function(){var J={year:"numeric"};return N>=2&&(J.month="numeric"),N>=3&&(J.day="numeric"),na[N]=J,J}();return vs(B)}();function le(N){var B=function(){switch(O){case"start":return xs;case"end":return sd;case"range":return lm;default:throw new Error("Invalid returnValue.")}}();return B({value:N,minDate:h,maxDate:u,maxDetail:f})}var st=s||function(){var N=2017,B=11,J=11,ce=new Date(N,B,J),ot=Mt(c,ce),We=["year","month","day"],Ye=["y","M","d"];function Te(ze,ut){var xe=na[ze]||function(){var _e,Se=(_e={},_e[ze]="numeric",_e);return na[ze]=Se,Se}();return vs(xe)(c,ut).match(/\d{1,}/)}var Je=ot;return We.forEach(function(ze,ut){var xe=Te(ze,ce);if(xe){var _e=xe[0],Se=Ye[ut];Je=Je.replace(_e,Se)}}),Je=Je.replace("17","y"),Je}(),Ae=function(){var N=st.match(/[^0-9a-z]/i);return N?N[0]:null}();function Qe(N){if(N.target===N.currentTarget){var B=N.target.children[1];Ir(B)}}function An(N){switch(Ot.current=N.key,N.key){case"ArrowLeft":case"ArrowRight":case Ae:{N.preventDefault();var B=N.target,J=N.key==="ArrowLeft"?"previousElementSibling":"nextElementSibling",ce=tl(B,J);Ir(ce);break}}}function Vt(N){var B=N.key,J=N.target,ce=Ot.current===B;if(ce){var ot=!isNaN(Number(B));if(ot){var We=J.getAttribute("max");if(We){var Ye=J.value;if(Number(Ye)*10>Number(We)||Ye.length>=We.length){var Te="nextElementSibling",Je=tl(J,Te);Ir(Je)}}}}}function ni(){if(!_)return;function N(xe){return!!xe}var B=[Pe.current,G.current,te.current,Y.current].filter(N),J={};B.forEach(function(xe){J[xe.name]="valueAsNumber"in xe?xe.valueAsNumber:Number(xe.value)});var ce=B.every(function(xe){return!xe.value});if(ce){_(null,!1);return}var ot=B.every(function(xe){return xe.value}),We=B.every(function(xe){return xe.validity.valid});if(ot&&We){var Ye=Number(J.year||new Date().getFullYear()),Te=Number(J.month||1)-1,Je=Number(J.day||1),ze=new Date;ze.setFullYear(Ye,Te,Je),ze.setHours(0,0,0,0);var ut=le(ze);_(ut,!1);return}D&&D()}function Yt(N){var B=N.target,J=B.name,ce=B.value;switch(J){case"year":F(ce);break;case"month":$(ce);break;case"day":K(ce);break}ni()}function ii(N){var B=N.target.value;if(_){var J=function(){if(!B)return null;var ce=B.split("-"),ot=ce[0],We=ce[1],Ye=ce[2],Te=Number(ot),Je=Number(We)-1||0,ze=Number(Ye)||1,ut=new Date;return ut.setFullYear(Te,Je,ze),ut.setHours(0,0,0,0),ut}();_(J,!1)}}var Ct={className:n,disabled:r,maxDate:u||el,minDate:h||Aa,onChange:Yt,onKeyDown:An,onKeyUp:Vt,required:!!(w||Ze)};function ln(N,B){if(N&&N.length>2)throw new Error("Unsupported token: ".concat(N));var J=N&&N.length===2;return I.createElement(Qu,In({key:"day"},Ct,{ariaLabel:i,autoFocus:B===0&&e,inputRef:Pe,month:k,placeholder:a,showLeadingZeros:J||M,value:q,year:A}))}function cn(N,B){if(N&&N.length>4)throw new Error("Unsupported token: ".concat(N));if(N.length>2)return I.createElement(td,In({key:"month"},Ct,{ariaLabel:g,autoFocus:B===0&&e,inputRef:te,locale:c,placeholder:p,short:N.length===3,value:k,year:A}));var J=N&&N.length===2;return I.createElement(Ju,In({key:"month"},Ct,{ariaLabel:g,autoFocus:B===0&&e,inputRef:G,placeholder:p,showLeadingZeros:J||M,value:k,year:A}))}function ai(N,B){return I.createElement(nd,In({key:"year"},Ct,{ariaLabel:j,autoFocus:B===0&&e,inputRef:Y,placeholder:E,value:A,valueType:Ee}))}function un(){var N={d:ln,M:cn,y:ai},B=typeof s<"u";return um(st,N,B)}function Tn(){return I.createElement(id,{key:"date",ariaLabel:x,disabled:r,maxDate:u||el,minDate:h||Aa,name:b,onChange:ii,required:w,value:ne,valueType:Ee})}return I.createElement("div",{className:n,onClick:Qe},Tn(),un())}var dm=S.oneOfType([S.string,S.instanceOf(Date)]);od.propTypes={autoFocus:S.bool,className:S.string.isRequired,dayAriaLabel:S.string,dayPlaceholder:S.string,disabled:S.bool,format:S.string,isCalendarOpen:S.bool,locale:S.string,maxDate:Cn,maxDetail:S.oneOf(ar),minDate:Mn,monthAriaLabel:S.string,monthPlaceholder:S.string,name:S.string,nativeInputAriaLabel:S.string,onChange:S.func,required:S.bool,returnValue:S.oneOf(["start","end","range"]),showLeadingZeros:S.bool,value:dm,yearAriaLabel:S.string,yearPlaceholder:S.string};var yn=function(){return yn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},yn.apply(this,arguments)},nl=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Ue="react-date-picker",fm=["mousedown","focusin","touchstart"],hm=["century","decade","year","month"],ld={xmlns:"http://www.w3.org/2000/svg",width:19,height:19,viewBox:"0 0 19 19",stroke:"black",strokeWidth:2},gm=I.createElement("svg",yn({},ld,{className:"".concat(Ue,"__calendar-button__icon ").concat(Ue,"__button__icon")}),I.createElement("rect",{fill:"none",height:"15",width:"15",x:"2",y:"2"}),I.createElement("line",{x1:"6",x2:"6",y1:"0",y2:"4"}),I.createElement("line",{x1:"13",x2:"13",y1:"0",y2:"4"})),pm=I.createElement("svg",yn({},ld,{className:"".concat(Ue,"__clear-button__icon ").concat(Ue,"__button__icon")}),I.createElement("line",{x1:"4",x2:"15",y1:"4",y2:"15"}),I.createElement("line",{x1:"15",x2:"4",y1:"4",y2:"15"}));function cd(t){var e=t.autoFocus,n=t.calendarAriaLabel,i=t.calendarIcon,a=i===void 0?gm:i,r=t.className,s=t.clearAriaLabel,o=t.clearIcon,l=o===void 0?pm:o,c=t.closeCalendar,u=c===void 0?!0:c,d=t["data-testid"],f=t.dayAriaLabel,h=t.dayPlaceholder,g=t.disableCalendar,p=t.disabled,m=t.format,b=t.id,x=t.isOpen,_=x===void 0?null:x,D=t.locale,w=t.maxDate,C=t.maxDetail,O=C===void 0?"month":C,M=t.minDate,T=t.monthAriaLabel,j=t.monthPlaceholder,E=t.name,L=E===void 0?"date":E,A=t.nativeInputAriaLabel,F=t.onCalendarClose,R=t.onCalendarOpen,k=t.onChange,$=t.onFocus,H=t.onInvalidChange,q=t.openCalendarOnFocus,K=q===void 0?!0:q,ie=t.required,ne=t.returnValue,ye=ne===void 0?"start":ne,Y=t.shouldCloseCalendar,G=t.shouldOpenCalendar,te=t.showLeadingZeros,Pe=t.value,Xe=t.yearAriaLabel,Ze=t.yearPlaceholder,Wt=nl(t,["autoFocus","calendarAriaLabel","calendarIcon","className","clearAriaLabel","clearIcon","closeCalendar","data-testid","dayAriaLabel","dayPlaceholder","disableCalendar","disabled","format","id","isOpen","locale","maxDate","maxDetail","minDate","monthAriaLabel","monthPlaceholder","name","nativeInputAriaLabel","onCalendarClose","onCalendarOpen","onChange","onFocus","onInvalidChange","openCalendarOnFocus","required","returnValue","shouldCloseCalendar","shouldOpenCalendar","showLeadingZeros","value","yearAriaLabel","yearPlaceholder"]),Ot=y.useState(_),Ee=Ot[0],Mt=Ot[1],le=y.useRef(null),st=y.useRef(null);y.useEffect(function(){Mt(_)},[_]);function Ae(N){var B=N.reason;G&&!G({reason:B})||(Mt(!0),R&&R())}var Qe=y.useCallback(function(N){var B=N.reason;Y&&!Y({reason:B})||(Mt(!1),F&&F())},[F,Y]);function An(){Ee?Qe({reason:"buttonClick"}):Ae({reason:"buttonClick"})}function Vt(N,B){B===void 0&&(B=u),B&&Qe({reason:"select"}),k&&k(N)}function ni(N){$&&$(N),!(p||Ee||!K||N.target.dataset.select==="true")&&Ae({reason:"focus"})}var Yt=y.useCallback(function(N){N.key==="Escape"&&Qe({reason:"escape"})},[Qe]);function ii(){Vt(null)}function Ct(N){N.stopPropagation()}var ln=y.useCallback(function(N){var B=le.current,J=st.current,ce="composedPath"in N?N.composedPath()[0]:N.target;ce&&B&&!B.contains(ce)&&(!J||!J.contains(ce))&&Qe({reason:"outsideAction"})},[st,Qe,le]),cn=y.useCallback(function(N){N===void 0&&(N=Ee),fm.forEach(function(B){N?document.addEventListener(B,ln):document.removeEventListener(B,ln)}),N?document.addEventListener("keydown",Yt):document.removeEventListener("keydown",Yt)},[Ee,ln,Yt]);y.useEffect(function(){return cn(),function(){cn(!1)}},[cn]);function ai(){var N=(Array.isArray(Pe)?Pe:[Pe])[0],B={dayAriaLabel:f,monthAriaLabel:T,nativeInputAriaLabel:A,yearAriaLabel:Xe},J={dayPlaceholder:h,monthPlaceholder:j,yearPlaceholder:Ze};return I.createElement("div",{className:"".concat(Ue,"__wrapper")},I.createElement(od,yn({},B,J,{autoFocus:e,className:"".concat(Ue,"__inputGroup"),disabled:p,format:m,isCalendarOpen:Ee,locale:D,maxDate:w,maxDetail:O,minDate:M,name:L,onChange:Vt,onInvalidChange:H,required:ie,returnValue:ye,showLeadingZeros:te,value:N})),l!==null&&I.createElement("button",{"aria-label":s,className:"".concat(Ue,"__clear-button ").concat(Ue,"__button"),disabled:p,onClick:ii,onFocus:Ct,type:"button"},typeof l=="function"?I.createElement(l):l),a!==null&&!g&&I.createElement("button",{"aria-label":n,className:"".concat(Ue,"__calendar-button ").concat(Ue,"__button"),disabled:p,onClick:An,onFocus:Ct,type:"button"},typeof a=="function"?I.createElement(a):a))}function un(){if(Ee===null||g)return null;var N=t.calendarClassName;t.className,t.onChange;var B=t.portalContainer,J=t.value,ce=nl(t,["calendarClassName","className","onChange","portalContainer","value"]),ot="".concat(Ue,"__calendar"),We=Pa(ot,"".concat(ot,"--").concat(Ee?"open":"closed")),Ye=I.createElement(zh,yn({className:N,onChange:function(Te){return Vt(Te)},value:J},ce));return B?Is.createPortal(I.createElement("div",{ref:st,className:We},Ye),B):I.createElement(Hh,null,I.createElement("div",{ref:function(Te){Te&&!Ee&&Te.removeAttribute("style")},className:We},Ye))}var Tn=y.useMemo(function(){return Yh(Wt)},[Wt]);return I.createElement("div",yn({className:Pa(Ue,"".concat(Ue,"--").concat(Ee?"open":"closed"),"".concat(Ue,"--").concat(p?"disabled":"enabled"),r),"data-testid":d,id:b},Tn,{onFocus:ni,ref:le}),ai(),un())}var il=S.oneOfType([S.string,S.instanceOf(Date)]),mm=S.oneOfType([il,Fp(il)]);cd.propTypes={autoFocus:S.bool,calendarAriaLabel:S.string,calendarClassName:S.oneOfType([S.string,S.arrayOf(S.string)]),calendarIcon:S.oneOfType([S.node,S.func]),className:S.oneOfType([S.string,S.arrayOf(S.string)]),clearAriaLabel:S.string,clearIcon:S.oneOfType([S.node,S.func]),closeCalendar:S.bool,"data-testid":S.string,dayAriaLabel:S.string,dayPlaceholder:S.string,disableCalendar:S.bool,disabled:S.bool,format:S.string,id:S.string,isOpen:S.bool,locale:S.string,maxDate:Cn,maxDetail:S.oneOf(hm),minDate:Mn,monthAriaLabel:S.string,monthPlaceholder:S.string,name:S.string,nativeInputAriaLabel:S.string,onCalendarClose:S.func,onCalendarOpen:S.func,onChange:S.func,onFocus:S.func,openCalendarOnFocus:S.bool,portalContainer:S.object,required:S.bool,returnValue:S.oneOf(["start","end","range"]),showLeadingZeros:S.bool,value:mm,yearAriaLabel:S.string,yearPlaceholder:S.string};function Fr({filter:t}){const{dispatch:e}=Fe(),[n,i]=I.useState(),[a,r]=y.useState(!1),s=l=>{i(l),e({type:"upsert",filter:{order:t.order,filter:t.filter,label:t.label,arg:Re(l).format("YYYY-MM-DD")}})},o=l=>{l.stopPropagation(),e({type:"remove",filter:t})};return y.useEffect(function(){t.filter||e({type:"upsert",filter:{order:t.order,filter:t.filter,label:t.label,arg:Re().format("YYYY-MM-DD")}})},[e,t]),v.jsxs("div",{className:`relative flex items-center gap-4 text-slate-700 ${Un} hover:cursor-pointer`,onClick:()=>{r(!0)},children:[v.jsxs("div",{className:"font-semibold",children:[t.label,":"]}),v.jsx("div",{children:v.jsx(cd,{value:n,onChange:s,onCalendarClose:()=>r(!1),calendarIcon:null,showLeadingZeros:!0,locale:"en-US",nextLabel:v.jsx(Iu,{width:16}),prevLabel:v.jsx(Za,{width:16}),format:"yyyy-MM-dd",autoFocus:!0,openCalendarOnFocus:!0,isOpen:a,clearIcon:v.jsx(Fu,{width:16}),clearAriaLabel:"Clear date"})}),v.jsx("div",{onClick:o,className:"ml-auto hover:text-red-500",children:v.jsx($i,{width:16})})]})}function bm({filter:t}){switch(t.filter){case"gameName":return v.jsx(ri,{filter:t},t.order);case"location":return v.jsx(ri,{filter:t},t.order);case"whereSinglePlayerNameWon":return v.jsx(ri,{filter:t},t.order);case"gameNames":return v.jsx(si,{filter:t},t.order);case"withPlayerName":return v.jsx(ri,{filter:t},t.order);case"withAllPlayerNames":return v.jsx(si,{filter:t},t.order);case"withOnlyPlayerNames":return v.jsx(si,{filter:t},t.order);case"withAnyPlayerNames":return v.jsx(si,{filter:t},t.order);case"wherePlayerNamesWon":return v.jsx(si,{filter:t},t.order);case"newForPlayerName":return v.jsx(ri,{filter:t},t.order);case"onDate":return v.jsx(Fr,{filter:t},t.order);case"afterDate":return v.jsx(Fr,{filter:t},t.order);case"beforeDate":return v.jsx(Fr,{filter:t},t.order);case"betweenDates":return v.jsx(Rp,{filter:t},t.order);case"all":return v.jsx(Np,{filter:t},t.order);default:return console.log("hitting default"),null}}function vm(){const{state:t,dispatch:e}=Fe(),n=i=>{let a={order:t.length+1,filter:i.value,label:i.label,arg:""};e({type:"upsert",filter:a})};return v.jsx(wi,{children:v.jsxs("div",{className:"flex flex-col flex-wrap gap-2 mb-8 filters sm:flex-row",children:[t.slice(1).map(i=>v.jsx(bm,{filter:i},i.order)),v.jsx(Mp,{addFilterButton:n,display:!0})]})})}function ym(){return v.jsx("div",{className:"inline-block px-4 py-2 mt-4 bg-white rounded-md",children:v.jsx("ul",{className:"inline-flex flex-wrap gap-8 text-gray-700",children:v.jsxs("li",{className:"flex items-center",children:[v.jsx(Zs,{width:14,className:"inline text-yellow-500"})," : Winner"]})})})}function xm({table:t}){return v.jsxs("div",{className:"grid gap-8",children:[v.jsx("div",{className:"grid gap-4",children:t.getRowModel().rows.map(e=>v.jsx(_m,{data:e.original},e.id))}),v.jsx(Uh,{table:t})]})}function _m({data:t}){return v.jsx("a",{className:"mt-[3px] text-slate-600",href:`https://www.boardgamegeek.com/play/details/${t.playId}`,target:"_blank",rel:"noopener noreferrer",children:v.jsxs("div",{className:"grid gap-6 p-2 bg-white border rounded",children:[v.jsxs("div",{className:"grid",children:[v.jsx("div",{className:"text-2xl font-semibold",children:t.gameName}),t.players.length>0&&v.jsx("div",{className:"flex flex-wrap items-center",children:v.jsx(wm,{players:t.players})})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-500",children:[v.jsx("div",{children:Re(t.date).format("MMM DD, YYYY")}),v.jsx("div",{children:t.location})]})]})})}const wm=({players:t})=>{let e=t.map((n,i,a)=>{let r=a.length,{userId:s,name:o,win:l}=n;return v.jsxs("span",{className:"inline-flex items-center",children:[l?v.jsx(Zs,{width:14,className:"inline text-yellow-500"}):"",o,i===r-1?"":", "]},`${o}${s}`)});return v.jsx(v.Fragment,{children:e})};function Dm(){const{state:t}=nn(),e=to(),n=Xh(),i=[n.accessor("playId",{cell:r=>{const s=r.getValue();return v.jsx("a",{href:`https://www.boardgamegeek.com/play/details/${s}`,target:"_blank",rel:"noopener noreferrer",children:v.jsx(qh,{width:16})})},header:()=>"",enableSorting:!1}),n.accessor("date",{cell:r=>r.getValue(),header:()=>"Date",sortingFn:Lr.datetime}),n.accessor("gameName",{cell:r=>r.getValue(),header:()=>"Game",sortingFn:Lr.basic}),n.accessor("location",{cell:r=>r.getValue(),header:()=>"Location",sortingFn:Lr.basic}),n.accessor("players",{cell:r=>r.getValue().map((o,l,c)=>{let u=c.length,{userId:d,name:f,win:h}=o;return v.jsxs("span",{className:"inline-flex items-center",children:[h?v.jsx(Zs,{width:14,className:"inline text-yellow-500"}):"",f,l===u-1?"":", "]},`${f}${d}`)}),header:()=>"Players",enableSorting:!1})],a=Kh({data:t,columns:i,getCoreRowModel:Zh(),getPaginationRowModel:Qh(),getSortedRowModel:Jh()});return v.jsxs(wi,{children:[e?v.jsx(xm,{table:a}):v.jsx(Gh,{table:a}),v.jsx(ym,{})]})}const ud=I.createContext(void 0),Sm=({children:t})=>{const[e,n]=Ah("aggregators",["daysPlayed","players","locations","recordedPlays","playCount"]),i={settings:e,setSettings:n};return v.jsx(ud.Provider,{value:i,children:t})};function dd(){const t=I.useContext(ud);if(t===void 0)throw new Error("useAggregatorContext must be used within a AggregatorProvider");return t}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Yi(t){return t+.5|0}const qt=(t,e,n)=>Math.max(Math.min(t,n),e);function fi(t){return qt(Yi(t*2.55),0,255)}function Zt(t){return qt(Yi(t*255),0,255)}function Nt(t){return qt(Yi(t/2.55)/100,0,1)}function al(t){return qt(Yi(t*100),0,100)}const lt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_s=[..."0123456789ABCDEF"],Om=t=>_s[t&15],Mm=t=>_s[(t&240)>>4]+_s[t&15],ia=t=>(t&240)>>4===(t&15),Cm=t=>ia(t.r)&&ia(t.g)&&ia(t.b)&&ia(t.a);function km(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&lt[t[1]]*17,g:255&lt[t[2]]*17,b:255&lt[t[3]]*17,a:e===5?lt[t[4]]*17:255}:(e===7||e===9)&&(n={r:lt[t[1]]<<4|lt[t[2]],g:lt[t[3]]<<4|lt[t[4]],b:lt[t[5]]<<4|lt[t[6]],a:e===9?lt[t[7]]<<4|lt[t[8]]:255})),n}const Pm=(t,e)=>t<255?e(t):"";function Em(t){var e=Cm(t)?Om:Mm;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Pm(t.a,e):void 0}const Am=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fd(t,e,n){const i=e*Math.min(n,1-n),a=(r,s=(r+t/30)%12)=>n-i*Math.max(Math.min(s-3,9-s,1),-1);return[a(0),a(8),a(4)]}function Tm(t,e,n){const i=(a,r=(a+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Lm(t,e,n){const i=fd(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)i[a]*=1-e-n,i[a]+=e;return i}function Rm(t,e,n,i,a){return t===a?(e-n)/i+(e<n?6:0):e===a?(n-t)/i+2:(t-e)/i+4}function io(t){const n=t.r/255,i=t.g/255,a=t.b/255,r=Math.max(n,i,a),s=Math.min(n,i,a),o=(r+s)/2;let l,c,u;return r!==s&&(u=r-s,c=o>.5?u/(2-r-s):u/(r+s),l=Rm(n,i,a,u,r),l=l*60+.5),[l|0,c||0,o]}function ao(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Zt)}function ro(t,e,n){return ao(fd,t,e,n)}function Nm(t,e,n){return ao(Lm,t,e,n)}function jm(t,e,n){return ao(Tm,t,e,n)}function hd(t){return(t%360+360)%360}function Im(t){const e=Am.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?fi(+e[5]):Zt(+e[5]));const a=hd(+e[2]),r=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?i=Nm(a,r,s):e[1]==="hsv"?i=jm(a,r,s):i=ro(a,r,s),{r:i[0],g:i[1],b:i[2],a:n}}function Fm(t,e){var n=io(t);n[0]=hd(n[0]+e),n=ro(n),t.r=n[0],t.g=n[1],t.b=n[2]}function $m(t){if(!t)return;const e=io(t),n=e[0],i=al(e[1]),a=al(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${a}%, ${Nt(t.a)})`:`hsl(${n}, ${i}%, ${a}%)`}const rl={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sl={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Bm(){const t={},e=Object.keys(sl),n=Object.keys(rl);let i,a,r,s,o;for(i=0;i<e.length;i++){for(s=o=e[i],a=0;a<n.length;a++)r=n[a],o=o.replace(r,rl[r]);r=parseInt(sl[s],16),t[o]=[r>>16&255,r>>8&255,r&255]}return t}let aa;function Wm(t){aa||(aa=Bm(),aa.transparent=[0,0,0,0]);const e=aa[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Vm=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ym(t){const e=Vm.exec(t);let n=255,i,a,r;if(e){if(e[7]!==i){const s=+e[7];n=e[8]?fi(s):qt(s*255,0,255)}return i=+e[1],a=+e[3],r=+e[5],i=255&(e[2]?fi(i):qt(i,0,255)),a=255&(e[4]?fi(a):qt(a,0,255)),r=255&(e[6]?fi(r):qt(r,0,255)),{r:i,g:a,b:r,a:n}}}function zm(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Nt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $r=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ln=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Hm(t,e,n){const i=Ln(Nt(t.r)),a=Ln(Nt(t.g)),r=Ln(Nt(t.b));return{r:Zt($r(i+n*(Ln(Nt(e.r))-i))),g:Zt($r(a+n*(Ln(Nt(e.g))-a))),b:Zt($r(r+n*(Ln(Nt(e.b))-r))),a:t.a+n*(e.a-t.a)}}function ra(t,e,n){if(t){let i=io(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=ro(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function gd(t,e){return t&&Object.assign(e||{},t)}function ol(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zt(t[3]))):(e=gd(t,{r:0,g:0,b:0,a:1}),e.a=Zt(e.a)),e}function Um(t){return t.charAt(0)==="r"?Ym(t):Im(t)}class Di{constructor(e){if(e instanceof Di)return e;const n=typeof e;let i;n==="object"?i=ol(e):n==="string"&&(i=km(e)||Wm(e)||Um(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=gd(this._rgb);return e&&(e.a=Nt(e.a)),e}set rgb(e){this._rgb=ol(e)}rgbString(){return this._valid?zm(this._rgb):void 0}hexString(){return this._valid?Em(this._rgb):void 0}hslString(){return this._valid?$m(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,a=e.rgb;let r;const s=n===r?.5:n,o=2*s-1,l=i.a-a.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;r=1-c,i.r=255&c*i.r+r*a.r+.5,i.g=255&c*i.g+r*a.g+.5,i.b=255&c*i.b+r*a.b+.5,i.a=s*i.a+(1-s)*a.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Hm(this._rgb,e._rgb,n)),this}clone(){return new Di(this.rgb)}alpha(e){return this._rgb.a=Zt(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Yi(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ra(this._rgb,2,e),this}darken(e){return ra(this._rgb,2,-e),this}saturate(e){return ra(this._rgb,1,e),this}desaturate(e){return ra(this._rgb,1,-e),this}rotate(e){return Fm(this._rgb,e),this}}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function kt(){}const qm=(()=>{let t=0;return()=>t++})();function re(t){return t===null||typeof t>"u"}function fe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ee(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function me(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function et(t,e){return me(t)?t:e}function X(t,e){return typeof t>"u"?e:t}const Km=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,pd=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ae(t,e,n,i){let a,r,s;if(fe(t))for(r=t.length,a=0;a<r;a++)e.call(n,t[a],a);else if(ee(t))for(s=Object.keys(t),r=s.length,a=0;a<r;a++)e.call(n,t[s[a]],s[a])}function Ta(t,e){let n,i,a,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(a=t[n],r=e[n],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function La(t){if(fe(t))return t.map(La);if(ee(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let a=0;for(;a<i;++a)e[n[a]]=La(t[n[a]]);return e}return t}function md(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Gm(t,e,n,i){if(!md(t))return;const a=e[t],r=n[t];ee(a)&&ee(r)?Si(a,r,i):e[t]=La(r)}function Si(t,e,n){const i=fe(e)?e:[e],a=i.length;if(!ee(t))return t;n=n||{};const r=n.merger||Gm;let s;for(let o=0;o<a;++o){if(s=i[o],!ee(s))continue;const l=Object.keys(s);for(let c=0,u=l.length;c<u;++c)r(l[c],t,s,n)}return t}function mi(t,e){return Si(t,e,{merger:Xm})}function Xm(t,e,n){if(!md(t))return;const i=e[t],a=n[t];ee(i)&&ee(a)?mi(i,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=La(a))}const ll={"":t=>t,x:t=>t.x,y:t=>t.y};function Zm(t){const e=t.split("."),n=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Qm(t){const e=Zm(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Dn(t,e){return(ll[e]||(ll[e]=Qm(e)))(t)}function so(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Oi=t=>typeof t<"u",Jt=t=>typeof t=="function",cl=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Jm(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const pe=Math.PI,ue=2*pe,eb=ue+pe,Ra=Number.POSITIVE_INFINITY,tb=pe/180,be=pe/2,fn=pe/4,ul=pe*2/3,Kt=Math.log10,wt=Math.sign;function bi(t,e,n){return Math.abs(t-e)<n}function dl(t){const e=Math.round(t);t=bi(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Kt(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function nb(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((a,r)=>a-r).pop(),e}function Na(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ib(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function bd(t,e,n){let i,a,r;for(i=0,a=t.length;i<a;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function _t(t){return t*(pe/180)}function oo(t){return t*(180/pe)}function fl(t){if(!me(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function vd(t,e){const n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*pe&&(r+=ue),{angle:r,distance:a}}function ws(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ab(t,e){return(t-e+eb)%ue-pe}function tt(t){return(t%ue+ue)%ue}function Mi(t,e,n,i){const a=tt(t),r=tt(e),s=tt(n),o=tt(r-a),l=tt(s-a),c=tt(a-r),u=tt(a-s);return a===r||a===s||i&&r===s||o>l&&c<u}function Ge(t,e,n){return Math.max(e,Math.min(n,t))}function rb(t){return Ge(t,-32768,32767)}function Ft(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function lo(t,e,n){n=n||(s=>t[s]<e);let i=t.length-1,a=0,r;for(;i-a>1;)r=a+i>>1,n(r)?a=r:i=r;return{lo:a,hi:i}}const Ds=(t,e,n,i)=>lo(t,n,i?a=>{const r=t[a][e];return r<n||r===n&&t[a+1][e]===n}:a=>t[a][e]<n),sb=(t,e,n)=>lo(t,n,i=>t[i][e]>=n);function ob(t,e,n){let i=0,a=t.length;for(;i<a&&t[i]<e;)i++;for(;a>i&&t[a-1]>n;)a--;return i>0||a<t.length?t.slice(i,a):t}const yd=["push","pop","shift","splice","unshift"];function lb(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),yd.forEach(n=>{const i="_onData"+so(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const s=a.apply(this,r);return t._chartjs.listeners.forEach(o=>{typeof o[i]=="function"&&o[i](...r)}),s}})})}function hl(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(yd.forEach(r=>{delete t[r]}),delete t._chartjs)}function xd(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const _d=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function wd(t,e){let n=[],i=!1;return function(...a){n=a,i||(i=!0,_d.call(window,()=>{i=!1,t.apply(e,n)}))}}function cb(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const co=t=>t==="start"?"left":t==="end"?"right":"center",Le=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,ub=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,sa=t=>t===0||t===1,gl=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ue/n)),pl=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ue/n)+1,vi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*be)+1,easeOutSine:t=>Math.sin(t*be),easeInOutSine:t=>-.5*(Math.cos(pe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>sa(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>sa(t)?t:gl(t,.075,.3),easeOutElastic:t=>sa(t)?t:pl(t,.075,.3),easeInOutElastic(t){return sa(t)?t:t<.5?.5*gl(t*2,.1125,.45):.5+.5*pl(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-vi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?vi.easeInBounce(t*2)*.5:vi.easeOutBounce(t*2-1)*.5+.5};function uo(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ml(t){return uo(t)?t:new Di(t)}function Br(t){return uo(t)?t:new Di(t).saturate(.5).darken(.1).hexString()}const db=["x","y","borderWidth","radius","tension"],fb=["color","borderColor","backgroundColor"];function hb(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:fb},numbers:{type:"number",properties:db}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gb(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bl=new Map;function pb(t,e){e=e||{};const n=t+JSON.stringify(e);let i=bl.get(n);return i||(i=new Intl.NumberFormat(t,e),bl.set(n,i)),i}function rr(t,e,n){return pb(e,n).format(t)}const Dd={values(t){return fe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let a,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(a="scientific"),r=mb(t,n)}const s=Kt(Math.abs(r)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:a,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),rr(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Kt(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Dd.numeric.call(this,t,e,n):""}};function mb(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var sr={formatters:Dd};function bb(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sr.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Sn=Object.create(null),Ss=Object.create(null);function yi(t,e){if(!e)return t;const n=e.split(".");for(let i=0,a=n.length;i<a;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function Wr(t,e,n){return typeof e=="string"?Si(yi(t,e),n):Si(yi(t,""),e)}class vb{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>Br(a.backgroundColor),this.hoverBorderColor=(i,a)=>Br(a.borderColor),this.hoverColor=(i,a)=>Br(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Wr(this,e,n)}get(e){return yi(this,e)}describe(e,n){return Wr(Ss,e,n)}override(e,n){return Wr(Sn,e,n)}route(e,n,i,a){const r=yi(this,e),s=yi(this,i),o="_"+n;Object.defineProperties(r,{[o]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[o],c=s[a];return ee(l)?Object.assign({},c,l):X(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(n=>n(this))}}var ve=new vb({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hb,gb,bb]);function yb(t){return!t||re(t.size)||re(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ja(t,e,n,i,a){let r=e[a];return r||(r=e[a]=t.measureText(a).width,n.push(a)),r>i&&(i=r),i}function xb(t,e,n,i){i=i||{};let a=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(a=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const o=n.length;let l,c,u,d,f;for(l=0;l<o;l++)if(d=n[l],d!=null&&!fe(d))s=ja(t,a,r,s,d);else if(fe(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!fe(f)&&(s=ja(t,a,r,s,f));t.restore();const h=r.length/2;if(h>n.length){for(l=0;l<h;l++)delete a[r[l]];r.splice(0,h)}return s}function hn(t,e,n){const i=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*i)/i+a}function vl(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function yl(t,e,n,i){Sd(t,e,n,i,null)}function Sd(t,e,n,i,a){let r,s,o,l,c,u,d,f;const h=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*tb;if(h&&typeof h=="object"&&(r=h.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(m),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),h){default:a?t.ellipse(n,i,a/2,p,0,0,ue):t.arc(n,i,p,0,ue),t.closePath();break;case"triangle":u=a?a/2:p,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*p),m+=ul,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*p),m+=ul,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*p),t.closePath();break;case"rectRounded":c=p*.516,l=p-c,s=Math.cos(m+fn)*l,d=Math.cos(m+fn)*(a?a/2-c:l),o=Math.sin(m+fn)*l,f=Math.sin(m+fn)*(a?a/2-c:l),t.arc(n-d,i-o,c,m-pe,m-be),t.arc(n+f,i-s,c,m-be,m),t.arc(n+d,i+o,c,m,m+be),t.arc(n-f,i+s,c,m+be,m+pe),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,u=a?a/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=fn;case"rectRot":d=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,f=Math.sin(m)*(a?a/2:p),t.moveTo(n-d,i-o),t.lineTo(n+f,i-s),t.lineTo(n+d,i+o),t.lineTo(n-f,i+s),t.closePath();break;case"crossRot":m+=fn;case"cross":d=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,f=Math.sin(m)*(a?a/2:p),t.moveTo(n-d,i-o),t.lineTo(n+d,i+o),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s);break;case"star":d=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,f=Math.sin(m)*(a?a/2:p),t.moveTo(n-d,i-o),t.lineTo(n+d,i+o),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s),m+=fn,d=Math.cos(m)*(a?a/2:p),s=Math.cos(m)*p,o=Math.sin(m)*p,f=Math.sin(m)*(a?a/2:p),t.moveTo(n-d,i-o),t.lineTo(n+d,i+o),t.moveTo(n+f,i-s),t.lineTo(n-f,i+s);break;case"line":s=a?a/2:Math.cos(m)*p,o=Math.sin(m)*p,t.moveTo(n-s,i-o),t.lineTo(n+s,i+o);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(a?a/2:p),i+Math.sin(m)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gt(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function or(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function lr(t){t.restore()}function _b(t,e,n,i,a){if(!e)return t.lineTo(n.x,n.y);if(a==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else a==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function wb(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Db(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),re(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Sb(t,e,n,i,a){if(a.strikethrough||a.underline){const r=t.measureText(i),s=e-r.actualBoundingBoxLeft,o=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=a.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(s,u),t.lineTo(o,u),t.stroke()}}function Ob(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function On(t,e,n,i,a,r={}){const s=fe(e)?e:[e],o=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=a.string,Db(t,r),l=0;l<s.length;++l)c=s[l],r.backdrop&&Ob(t,r.backdrop),o&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),re(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Sb(t,n,i,c,r),i+=Number(a.lineHeight);t.restore()}function Ci(t,e){const{x:n,y:i,w:a,h:r,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,-be,pe,!0),t.lineTo(n,i+r-s.bottomLeft),t.arc(n+s.bottomLeft,i+r-s.bottomLeft,s.bottomLeft,pe,be,!0),t.lineTo(n+a-s.bottomRight,i+r),t.arc(n+a-s.bottomRight,i+r-s.bottomRight,s.bottomRight,be,0,!0),t.lineTo(n+a,i+s.topRight),t.arc(n+a-s.topRight,i+s.topRight,s.topRight,0,-be,!0),t.lineTo(n+s.topLeft,i)}const Mb=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Cb=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kb(t,e){const n=(""+t).match(Mb);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Pb=t=>+t||0;function fo(t,e){const n={},i=ee(e),a=i?Object.keys(e):e,r=ee(t)?i?s=>X(t[s],t[e[s]]):s=>t[s]:()=>t;for(const s of a)n[s]=Pb(r(s));return n}function Od(t){return fo(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xn(t){return fo(t,["topLeft","topRight","bottomLeft","bottomRight"])}function je(t){const e=Od(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ke(t,e){t=t||{},e=e||ve.font;let n=X(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=X(t.style,e.style);i&&!(""+i).match(Cb)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:X(t.family,e.family),lineHeight:kb(X(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:X(t.weight,e.weight),string:""};return a.string=yb(a),a}function oa(t,e,n,i){let a,r,s;for(a=0,r=t.length;a<r;++a)if(s=t[a],s!==void 0&&s!==void 0)return s}function Eb(t,e,n){const{min:i,max:a}=t,r=pd(e,(a-i)/2),s=(o,l)=>n&&o===0?0:o+l;return{min:s(i,-Math.abs(r)),max:s(a,r)}}function an(t,e){return Object.assign(Object.create(t),e)}function ho(t,e=[""],n,i,a=()=>t[0]){const r=n||t;typeof i>"u"&&(i=Pd("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:a,override:o=>ho([o,...t],e,r,i)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return Cd(o,l,()=>Fb(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return _l(o).includes(l)},ownKeys(o){return _l(o)},set(o,l,c){const u=o._storage||(o._storage=a());return o[l]=u[l]=c,delete o._keys,!0}})}function qn(t,e,n,i){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Md(t,i),setContext:r=>qn(t,r,n,i),override:r=>qn(t.override(r),e,n,i)};return new Proxy(a,{deleteProperty(r,s){return delete r[s],delete t[s],!0},get(r,s,o){return Cd(r,s,()=>Tb(r,s,o))},getOwnPropertyDescriptor(r,s){return r._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(r,s,o){return t[s]=o,delete r[s],!0}})}function Md(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:i,isScriptable:Jt(n)?n:()=>n,isIndexable:Jt(i)?i:()=>i}}const Ab=(t,e)=>t?t+so(e):e,go=(t,e)=>ee(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Cd(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function Tb(t,e,n){const{_proxy:i,_context:a,_subProxy:r,_descriptors:s}=t;let o=i[e];return Jt(o)&&s.isScriptable(e)&&(o=Lb(e,o,t,n)),fe(o)&&o.length&&(o=Rb(e,o,t,s.isIndexable)),go(e,o)&&(o=qn(o,a,r&&r[e],s)),o}function Lb(t,e,n,i){const{_proxy:a,_context:r,_subProxy:s,_stack:o}=n;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(r,s||i);return o.delete(t),go(t,l)&&(l=po(a._scopes,a,t,l)),l}function Rb(t,e,n,i){const{_proxy:a,_context:r,_subProxy:s,_descriptors:o}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(ee(e[0])){const l=e,c=a._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=po(c,a,t,u);e.push(qn(d,r,s&&s[t],o))}}return e}function kd(t,e,n){return Jt(t)?t(e,n):t}const Nb=(t,e)=>t===!0?e:typeof t=="string"?Dn(e,t):void 0;function jb(t,e,n,i,a){for(const r of e){const s=Nb(n,r);if(s){t.add(s);const o=kd(s._fallback,n,a);if(typeof o<"u"&&o!==n&&o!==i)return o}else if(s===!1&&typeof i<"u"&&n!==i)return null}return!1}function po(t,e,n,i){const a=e._rootScopes,r=kd(e._fallback,n,i),s=[...t,...a],o=new Set;o.add(i);let l=xl(o,s,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=xl(o,s,r,l,i),l===null)?!1:ho(Array.from(o),[""],a,r,()=>Ib(e,n,i))}function xl(t,e,n,i,a){for(;n;)n=jb(t,e,n,i,a);return n}function Ib(t,e,n){const i=t._getTarget();e in i||(i[e]={});const a=i[e];return fe(a)&&ee(n)?n:a||{}}function Fb(t,e,n,i){let a;for(const r of e)if(a=Pd(Ab(r,t),n),typeof a<"u")return go(t,a)?po(n,i,t,a):a}function Pd(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function _l(t){let e=t._keys;return e||(e=t._keys=$b(t._scopes)),e}function $b(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}const Bb=Number.EPSILON||1e-14,Kn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ed=t=>t==="x"?"y":"x";function Wb(t,e,n,i){const a=t.skip?e:t,r=e,s=n.skip?e:n,o=ws(r,a),l=ws(s,r);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,f=i*u;return{previous:{x:r.x-d*(s.x-a.x),y:r.y-d*(s.y-a.y)},next:{x:r.x+f*(s.x-a.x),y:r.y+f*(s.y-a.y)}}}function Vb(t,e,n){const i=t.length;let a,r,s,o,l,c=Kn(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Kn(t,u+1),!(!l||!c)){if(bi(e[u],0,Bb)){n[u]=n[u+1]=0;continue}a=n[u]/e[u],r=n[u+1]/e[u],o=Math.pow(a,2)+Math.pow(r,2),!(o<=9)&&(s=3/Math.sqrt(o),n[u]=a*s*e[u],n[u+1]=r*s*e[u])}}function Yb(t,e,n="x"){const i=Ed(n),a=t.length;let r,s,o,l=Kn(t,0);for(let c=0;c<a;++c){if(s=o,o=l,l=Kn(t,c+1),!o)continue;const u=o[n],d=o[i];s&&(r=(u-s[n])/3,o[`cp1${n}`]=u-r,o[`cp1${i}`]=d-r*e[c]),l&&(r=(l[n]-u)/3,o[`cp2${n}`]=u+r,o[`cp2${i}`]=d+r*e[c])}}function zb(t,e="x"){const n=Ed(e),i=t.length,a=Array(i).fill(0),r=Array(i);let s,o,l,c=Kn(t,0);for(s=0;s<i;++s)if(o=l,l=c,c=Kn(t,s+1),!!l){if(c){const u=c[e]-l[e];a[s]=u!==0?(c[n]-l[n])/u:0}r[s]=o?c?wt(a[s-1])!==wt(a[s])?0:(a[s-1]+a[s])/2:a[s-1]:a[s]}Vb(t,a,r),Yb(t,r,e)}function la(t,e,n){return Math.max(Math.min(t,n),e)}function Hb(t,e){let n,i,a,r,s,o=Gt(t[0],e);for(n=0,i=t.length;n<i;++n)s=r,r=o,o=n<i-1&&Gt(t[n+1],e),r&&(a=t[n],s&&(a.cp1x=la(a.cp1x,e.left,e.right),a.cp1y=la(a.cp1y,e.top,e.bottom)),o&&(a.cp2x=la(a.cp2x,e.left,e.right),a.cp2y=la(a.cp2y,e.top,e.bottom)))}function Ub(t,e,n,i,a){let r,s,o,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")zb(t,a);else{let c=i?t[t.length-1]:t[0];for(r=0,s=t.length;r<s;++r)o=t[r],l=Wb(c,o,t[Math.min(r+1,s-(i?0:1))%s],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&Hb(t,n)}function Ad(){return typeof window<"u"&&typeof document<"u"}function mo(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ia(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const cr=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function qb(t,e){return cr(t).getPropertyValue(e)}const Kb=["top","right","bottom","left"];function _n(t,e,n){const i={};n=n?"-"+n:"";for(let a=0;a<4;a++){const r=Kb[a];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Gb=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Xb(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:a,offsetY:r}=i;let s=!1,o,l;if(Gb(a,r,t.target))o=a,l=r;else{const c=e.getBoundingClientRect();o=i.clientX-c.left,l=i.clientY-c.top,s=!0}return{x:o,y:l,box:s}}function mn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,a=cr(n),r=a.boxSizing==="border-box",s=_n(a,"padding"),o=_n(a,"border","width"),{x:l,y:c,box:u}=Xb(t,n),d=s.left+(u&&o.left),f=s.top+(u&&o.top);let{width:h,height:g}=e;return r&&(h-=s.width+o.width,g-=s.height+o.height),{x:Math.round((l-d)/h*n.width/i),y:Math.round((c-f)/g*n.height/i)}}function Zb(t,e,n){let i,a;if(e===void 0||n===void 0){const r=mo(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const s=r.getBoundingClientRect(),o=cr(r),l=_n(o,"border","width"),c=_n(o,"padding");e=s.width-c.width-l.width,n=s.height-c.height-l.height,i=Ia(o.maxWidth,r,"clientWidth"),a=Ia(o.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ra,maxHeight:a||Ra}}const ca=t=>Math.round(t*10)/10;function Qb(t,e,n,i){const a=cr(t),r=_n(a,"margin"),s=Ia(a.maxWidth,t,"clientWidth")||Ra,o=Ia(a.maxHeight,t,"clientHeight")||Ra,l=Zb(t,e,n);let{width:c,height:u}=l;if(a.boxSizing==="content-box"){const f=_n(a,"border","width"),h=_n(a,"padding");c-=h.width+f.width,u-=h.height+f.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=ca(Math.min(c,s,l.maxWidth)),u=ca(Math.min(u,o,l.maxHeight)),c&&!u&&(u=ca(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ca(Math.floor(u*i))),{width:c,height:u}}function wl(t,e,n){const i=e||1,a=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||s.height!==a||s.width!==r?(t.currentDevicePixelRatio=i,s.height=a,s.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Jb=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function Dl(t,e){const n=qb(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function bn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ev(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function tv(t,e,n,i){const a={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},s=bn(t,a,n),o=bn(a,r,n),l=bn(r,e,n),c=bn(s,o,n),u=bn(o,l,n);return bn(c,u,n)}const nv=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},iv=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Bn(t,e,n){return t?nv(e,n):iv()}function Td(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Ld(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Rd(t){return t==="angle"?{between:Mi,compare:ab,normalize:tt}:{between:Ft,compare:(e,n)=>e-n,normalize:e=>e}}function Sl({start:t,end:e,count:n,loop:i,style:a}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:a}}function av(t,e,n){const{property:i,start:a,end:r}=n,{between:s,normalize:o}=Rd(i),l=e.length;let{start:c,end:u,loop:d}=t,f,h;if(d){for(c+=l,u+=l,f=0,h=l;f<h&&s(o(e[c%l][i]),a,r);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function Nd(t,e,n){if(!n)return[t];const{property:i,start:a,end:r}=n,s=e.length,{compare:o,between:l,normalize:c}=Rd(i),{start:u,end:d,loop:f,style:h}=av(t,e,n),g=[];let p=!1,m=null,b,x,_;const D=()=>l(a,_,b)&&o(a,_)!==0,w=()=>o(r,b)===0||l(r,_,b),C=()=>p||D(),O=()=>!p||w();for(let M=u,T=u;M<=d;++M)x=e[M%s],!x.skip&&(b=c(x[i]),b!==_&&(p=l(b,a,r),m===null&&C()&&(m=o(b,a)===0?M:T),m!==null&&O()&&(g.push(Sl({start:m,end:M,loop:f,count:s,style:h})),m=null),T=M,_=b));return m!==null&&g.push(Sl({start:m,end:d,loop:f,count:s,style:h})),g}function jd(t,e){const n=[],i=t.segments;for(let a=0;a<i.length;a++){const r=Nd(i[a],t.points,e);r.length&&n.push(...r)}return n}function rv(t,e,n,i){let a=0,r=e-1;if(n&&!i)for(;a<e&&!t[a].skip;)a++;for(;a<e&&t[a].skip;)a++;for(a%=e,n&&(r+=a);r>a&&t[r%e].skip;)r--;return r%=e,{start:a,end:r}}function sv(t,e,n,i){const a=t.length,r=[];let s=e,o=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%a];c.skip||c.stop?o.skip||(i=!1,r.push({start:e%a,end:(l-1)%a,loop:i}),e=s=c.stop?l:null):(s=l,o.skip&&(e=l)),o=c}return s!==null&&r.push({start:e%a,end:s%a,loop:i}),r}function ov(t,e){const n=t.points,i=t.options.spanGaps,a=n.length;if(!a)return[];const r=!!t._loop,{start:s,end:o}=rv(n,a,r,i);if(i===!0)return Ol(t,[{start:s,end:o,loop:r}],n,e);const l=o<s?o+a:o,c=!!t._fullLoop&&s===0&&o===a-1;return Ol(t,sv(n,s,l,c),n,e)}function Ol(t,e,n,i){return!i||!i.setContext||!n?e:lv(t,e,n,i)}function lv(t,e,n,i){const a=t._chart.getContext(),r=Ml(t.options),{_datasetIndex:s,options:{spanGaps:o}}=t,l=n.length,c=[];let u=r,d=e[0].start,f=d;function h(g,p,m,b){const x=o?-1:1;if(g!==p){for(g+=l;n[g%l].skip;)g-=x;for(;n[p%l].skip;)p+=x;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:b}),u=b,d=p%l)}}for(const g of e){d=o?d:g.start;let p=n[d%l],m;for(f=d+1;f<=g.end;f++){const b=n[f%l];m=Ml(i.setContext(an(a,{type:"segment",p0:p,p1:b,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:s}))),cv(m,u)&&h(d,f-1,g.loop,u),p=b,u=m}d<f-1&&h(d,f-1,g.loop,u)}return c}function Ml(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function cv(t,e){if(!e)return!1;const n=[],i=function(a,r){return uo(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.3.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class uv{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,a){const r=n.listeners[a],s=n.duration;r.forEach(o=>o({chart:e,initial:n.initial,numSteps:s,currentStep:Math.min(i-n.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=_d.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const r=i.items;let s=r.length-1,o=!1,l;for(;s>=0;--s)l=r[s],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),o=!0):(r[s]=r[r.length-1],r.pop());o&&(a.draw(),this._notify(a,i,e,"progress")),r.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var At=new uv;const Cl="transparent",dv={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=ml(t||Cl),a=i.valid&&ml(e||Cl);return a&&a.valid?a.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class fv{constructor(e,n,i,a){const r=n[i];a=oa([e.to,a,r,e.from]);const s=oa([e.from,r,a]);this._active=!0,this._fn=e.fn||dv[e.type||typeof s],this._easing=vi[e.easing]||vi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=s,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const a=this._target[this._prop],r=i-this._start,s=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=oa([e.to,n,a,e.from]),this._from=oa([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,a=this._prop,r=this._from,s=this._loop,o=this._to;let l;if(this._active=r!==o&&(s||n<i),!this._active){this._target[a]=o,this._notify(!0);return}if(n<0){this._target[a]=r;return}l=n/i%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[a]=this._fn(r,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][n]()}}class Id{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ee(e))return;const n=Object.keys(ve.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const r=e[a];if(!ee(r))return;const s={};for(const o of n)s[o]=r[o];(fe(r.properties)&&r.properties||[a]).forEach(o=>{(o===a||!i.has(o))&&i.set(o,s)})})}_animateOptions(e,n){const i=n.options,a=gv(e,i);if(!a)return[];const r=this._createAnimations(a,i);return i.$shared&&hv(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,a=[],r=e.$animations||(e.$animations={}),s=Object.keys(n),o=Date.now();let l;for(l=s.length-1;l>=0;--l){const c=s[l];if(c.charAt(0)==="$")continue;if(c==="options"){a.push(...this._animateOptions(e,n));continue}const u=n[c];let d=r[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,u,o);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}r[c]=d=new fv(f,e,c,u),a.push(d)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return At.add(this._chart,i),!0}}function hv(t,e){const n=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const r=t[i[a]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function gv(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function kl(t,e){const n=t&&t.options||{},i=n.reverse,a=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:a,end:i?a:r}}function pv(t,e,n){if(n===!1)return!1;const i=kl(t,n),a=kl(e,n);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function mv(t){let e,n,i,a;return ee(t)?(e=t.top,n=t.right,i=t.bottom,a=t.left):e=n=i=a=t,{top:e,right:n,bottom:i,left:a,disabled:t===!1}}function Fd(t,e){const n=[],i=t._getSortedDatasetMetas(e);let a,r;for(a=0,r=i.length;a<r;++a)n.push(i[a].index);return n}function Pl(t,e,n,i={}){const a=t.keys,r=i.mode==="single";let s,o,l,c;if(e!==null){for(s=0,o=a.length;s<o;++s){if(l=+a[s],l===n){if(i.all)continue;break}c=t.values[l],me(c)&&(r||e===0||wt(e)===wt(c))&&(e+=c)}return e}}function bv(t){const e=Object.keys(t),n=new Array(e.length);let i,a,r;for(i=0,a=e.length;i<a;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function El(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function vv(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function yv(t){const{min:e,max:n,minDefined:i,maxDefined:a}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function xv(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Al(t,e,n,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const r=t[a.index];if(n&&r>0||!n&&r<0)return a.index}return null}function Tl(t,e){const{chart:n,_cachedMeta:i}=t,a=n._stacks||(n._stacks={}),{iScale:r,vScale:s,index:o}=i,l=r.axis,c=s.axis,u=vv(r,s,i),d=e.length;let f;for(let h=0;h<d;++h){const g=e[h],{[l]:p,[c]:m}=g,b=g._stacks||(g._stacks={});f=b[c]=xv(a,u,p),f[o]=m,f._top=Al(f,s,!0,i.type),f._bottom=Al(f,s,!1,i.type);const x=f._visualValues||(f._visualValues={});x[o]=m}}function Vr(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function _v(t,e){return an(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function wv(t,e,n){return an(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function oi(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const a of e){const r=a._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const Yr=t=>t==="reset"||t==="none",Ll=(t,e)=>e?t:Object.assign({},t),Dv=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Fd(n,!0),values:null};class bo{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=El(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),a=(d,f,h,g)=>d==="x"?f:d==="r"?g:h,r=n.xAxisID=X(i.xAxisID,Vr(e,"x")),s=n.yAxisID=X(i.yAxisID,Vr(e,"y")),o=n.rAxisID=X(i.rAxisID,Vr(e,"r")),l=n.indexAxis,c=n.iAxisID=a(l,r,s,o),u=n.vAxisID=a(l,s,r,o);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(s),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&hl(this._data,this),e._stacked&&oi(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ee(n))this._data=bv(n);else if(i!==n){if(i){hl(i,this);const a=this._cachedMeta;oi(a),a._parsed=[]}n&&Object.isExtensible(n)&&lb(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const r=n._stacked;n._stacked=El(n.vScale,n),n.stack!==i.stack&&(a=!0,oi(n),n.stack=i.stack),this._resyncElements(e),(a||r!==n._stacked)&&Tl(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:a}=this,{iScale:r,_stacked:s}=i,o=r.axis;let l=e===0&&n===a.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,d,f;if(this._parsing===!1)i._parsed=a,i._sorted=!0,f=a;else{fe(a[e])?f=this.parseArrayData(i,a,e,n):ee(a[e])?f=this.parseObjectData(i,a,e,n):f=this.parsePrimitiveData(i,a,e,n);const h=()=>d[o]===null||c&&d[o]<c[o];for(u=0;u<n;++u)i._parsed[u+e]=d=f[u],l&&(h()&&(l=!1),c=d);i._sorted=l}s&&Tl(this,f)}parsePrimitiveData(e,n,i,a){const{iScale:r,vScale:s}=e,o=r.axis,l=s.axis,c=r.getLabels(),u=r===s,d=new Array(a);let f,h,g;for(f=0,h=a;f<h;++f)g=f+i,d[f]={[o]:u||r.parse(c[g],g),[l]:s.parse(n[g],g)};return d}parseArrayData(e,n,i,a){const{xScale:r,yScale:s}=e,o=new Array(a);let l,c,u,d;for(l=0,c=a;l<c;++l)u=l+i,d=n[u],o[l]={x:r.parse(d[0],u),y:s.parse(d[1],u)};return o}parseObjectData(e,n,i,a){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(a);let u,d,f,h;for(u=0,d=a;u<d;++u)f=u+i,h=n[f],c[u]={x:r.parse(Dn(h,o),f),y:s.parse(Dn(h,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const a=this.chart,r=this._cachedMeta,s=n[e.axis],o={keys:Fd(a,!0),values:n._stacks[e.axis]._visualValues};return Pl(o,s,r.index,{mode:i})}updateRangeFromParsed(e,n,i,a){const r=i[n.axis];let s=r===null?NaN:r;const o=a&&i._stacks[n.axis];a&&o&&(a.values=o,s=Pl(a,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,n){const i=this._cachedMeta,a=i._parsed,r=i._sorted&&e===i.iScale,s=a.length,o=this._getOtherScale(e),l=Dv(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=yv(o);let f,h;function g(){h=a[f];const p=h[o.axis];return!me(h[e.axis])||u>p||d<p}for(f=0;f<s&&!(!g()&&(this.updateRangeFromParsed(c,e,h,l),r));++f);if(r){for(f=s-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,e,h,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let a,r,s;for(a=0,r=n.length;a<r;++a)s=n[a][e.axis],me(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,a=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:a?""+a.getLabelForValue(r[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=mv(X(this.options.clip,pv(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,a=i.data||[],r=n.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||a.length-o,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,o,l),u=o;u<o+l;++u){const d=a[u];d.hidden||(d.active&&c?s.push(d):d.draw(e,r))}for(u=0;u<s.length;++u)s[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const a=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];r=s.$context||(s.$context=wv(this.getContext(),e,s)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=_v(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const a=n==="active",r=this._cachedDataOpts,s=e+"-"+n,o=r[s],l=this.enableOptionSharing&&Oi(i);if(o)return Ll(o,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=a?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),h=Object.keys(ve.elements[e]),g=()=>this.getContext(i,a,n),p=c.resolveNamedOptions(f,h,g,d);return p.$shared&&(p.$shared=l,r[s]=Object.freeze(Ll(p,l))),p}_resolveAnimations(e,n,i){const a=this.chart,r=this._cachedDataOpts,s=`animation-${n}`,o=r[s];if(o)return o;let l;if(a.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,i,n))}const c=new Id(a,l&&l.animations);return l&&l._cacheable&&(r[s]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Yr(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),a=this._sharedOptions,r=this.getSharedOptions(i),s=this.includeOptions(n,r)||r!==a;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:s}}updateElement(e,n,i,a){Yr(a)?Object.assign(e,i):this._resolveAnimations(n,a).update(e,i)}updateSharedOptions(e,n,i){e&&!Yr(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,a){e.active=a;const r=this.getStyle(n,a);this._resolveAnimations(n,i,a).update(e,{options:!a&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const a=i.length,r=n.length,s=Math.min(r,a);s&&this.parse(0,s),r>a?this._insertElements(a,r-a,e):r<a&&this._removeElements(r,a-r)}_insertElements(e,n,i=!0){const a=this._cachedMeta,r=a.data,s=e+n;let o;const l=c=>{for(c.length+=n,o=c.length-1;o>=s;o--)c[o]=c[o-n]};for(l(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&l(a._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,a){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,n);i._stacked&&oi(i,a)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,a]=e;this[n](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Sv(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let a=0,r=n.length;a<r;a++)i=i.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=xd(i.sort((a,r)=>a-r))}return t._cache.$bar}function Ov(t){const e=t.iScale,n=Sv(e,t.type);let i=e._length,a,r,s,o;const l=()=>{s===32767||s===-32768||(Oi(o)&&(i=Math.min(i,Math.abs(s-o)||i)),o=s)};for(a=0,r=n.length;a<r;++a)s=e.getPixelForValue(n[a]),l();for(o=void 0,a=0,r=e.ticks.length;a<r;++a)s=e.getPixelForTick(a),l();return i}function Mv(t,e,n,i){const a=n.barThickness;let r,s;return re(a)?(r=e.min*n.categoryPercentage,s=n.barPercentage):(r=a*i,s=1),{chunk:r/i,ratio:s,start:e.pixels[t]-r/2}}function Cv(t,e,n,i){const a=e.pixels,r=a[t];let s=t>0?a[t-1]:null,o=t<a.length-1?a[t+1]:null;const l=n.categoryPercentage;s===null&&(s=r-(o===null?e.end-e.start:o-r)),o===null&&(o=r+r-s);const c=r-(r-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/i,ratio:n.barPercentage,start:c}}function kv(t,e,n,i){const a=n.parse(t[0],i),r=n.parse(t[1],i),s=Math.min(a,r),o=Math.max(a,r);let l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:a,end:r,min:s,max:o}}function $d(t,e,n,i){return fe(t)?kv(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Rl(t,e,n,i){const a=t.iScale,r=t.vScale,s=a.getLabels(),o=a===r,l=[];let c,u,d,f;for(c=n,u=n+i;c<u;++c)f=e[c],d={},d[a.axis]=o||a.parse(s[c],c),l.push($d(f,d,r,c));return l}function zr(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function Pv(t,e,n){return t!==0?wt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Ev(t){let e,n,i,a,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(a="end",r="start"):(a="start",r="end"),{start:n,end:i,reverse:e,top:a,bottom:r}}function Av(t,e,n,i){let a=e.borderSkipped;const r={};if(!a){t.borderSkipped=r;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:o,reverse:l,top:c,bottom:u}=Ev(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?a=c:(n._bottom||0)===i?a=u:(r[Nl(u,s,o,l)]=!0,a=c)),r[Nl(a,s,o,l)]=!0,t.borderSkipped=r}function Nl(t,e,n,i){return i?(t=Tv(t,e,n),t=jl(t,n,e)):t=jl(t,e,n),t}function Tv(t,e,n){return t===e?n:t===n?e:t}function jl(t,e,n){return t==="start"?e:t==="end"?n:t}function Lv(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Rv extends bo{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,i,a){return Rl(e,n,i,a)}parseArrayData(e,n,i,a){return Rl(e,n,i,a)}parseObjectData(e,n,i,a){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?o:l,u=s.axis==="x"?o:l,d=[];let f,h,g,p;for(f=i,h=i+a;f<h;++f)p=n[f],g={},g[r.axis]=r.parse(Dn(p,c),f),d.push($d(Dn(p,u),g,s,f));return d}updateRangeFromParsed(e,n,i,a){super.updateRangeFromParsed(e,n,i,a);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:a}=n,r=this.getParsed(e),s=r._custom,o=zr(s)?"["+s.start+", "+s.end+"]":""+a.getLabelForValue(r[a.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,a){const r=a==="reset",{index:s,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,a);for(let h=n;h<n+i;h++){const g=this.getParsed(h),p=r||re(g[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,u),b=(g._stacks||{})[o.axis],x={horizontal:c,base:p.base,enableBorderRadius:!b||zr(g._custom)||s===b._top||s===b._bottom,x:c?p.head:m.center,y:c?m.center:p.head,height:c?m.size:Math.abs(p.size),width:c?Math.abs(p.size):m.size};f&&(x.options=d||this.resolveDataElementOptions(h,e[h].active?"active":a));const _=x.options||e[h].options;Av(x,_,b,s),Lv(x,_,u.ratio),this.updateElement(e[h],h,x,a)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,a=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,s=[],o=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(re(u)||isNaN(u))return!0};for(const l of a)if(!(n!==void 0&&o(l))&&((r===!1||s.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&s.push(l.stack),l.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const a=this._getStacks(e,i),r=n!==void 0?a.indexOf(n):-1;return r===-1?a.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,a=[];let r,s;for(r=0,s=n.data.length;r<s;++r)a.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const o=e.barThickness;return{min:o||Ov(n),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:a},options:{base:r,minBarLength:s}}=this,o=r||0,l=this.getParsed(e),c=l._custom,u=zr(c);let d=l[n.axis],f=0,h=i?this.applyStack(n,l,i):d,g,p;h!==d&&(f=h-d,h=d),u&&(d=c.barStart,h=c.barEnd-c.barStart,d!==0&&wt(d)!==wt(c.barEnd)&&(f=0),f+=d);const m=!re(r)&&!u?r:f;let b=n.getPixelForValue(m);if(this.chart.getDataVisibility(e)?g=n.getPixelForValue(f+h):g=b,p=g-b,Math.abs(p)<s){p=Pv(p,n,o)*s,d===o&&(b-=p/2);const x=n.getPixelForDecimal(0),_=n.getPixelForDecimal(1),D=Math.min(x,_),w=Math.max(x,_);b=Math.max(Math.min(b,w),D),g=b+p,i&&!u&&(l._stacks[n.axis]._visualValues[a]=n.getValueForPixel(g)-n.getValueForPixel(b))}if(b===n.getPixelForValue(o)){const x=wt(p)*n.getLineWidthForValue(o)/2;b+=x,p-=x}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(e,n){const i=n.scale,a=this.options,r=a.skipNull,s=X(a.maxBarThickness,1/0);let o,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=a.barThickness==="flex"?Cv(e,n,a,c):Mv(e,n,a,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=u.start+u.chunk*d+u.chunk/2,l=Math.min(s,u.chunk*u.ratio)}else o=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(s,n.min*n.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,a=i.length;let r=0;for(;r<a;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}function Nv(t,e,n){let i=1,a=1,r=0,s=0;if(e<ue){const o=t,l=o+e,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),f=Math.sin(l),h=(_,D,w)=>Mi(_,o,l,!0)?1:Math.max(D,D*n,w,w*n),g=(_,D,w)=>Mi(_,o,l,!0)?-1:Math.min(D,D*n,w,w*n),p=h(0,c,d),m=h(be,u,f),b=g(pe,c,d),x=g(pe+be,u,f);i=(p-b)/2,a=(m-x)/2,r=-(p+b)/2,s=-(m+x)/2}return{ratioX:i,ratioY:a,offsetX:r,offsetY:s}}class jv extends bo{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:a}}=e.legend.options;return n.labels.map((r,s)=>{const l=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:a,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let r=l=>+i[l];if(ee(i[e])){const{key:l="value"}=this._parsing;r=c=>+Dn(i[c],l)}let s,o;for(s=e,o=e+n;s<o;++s)a._parsed[s]=r(s)}}_getRotation(){return _t(this.options.rotation-90)}_getCircumference(){return _t(this.options.circumference)}_getRotationExtents(){let e=ue,n=-ue;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,r=a._getRotation(),s=a._getCircumference();e=Math.min(e,r),n=Math.max(n,r+s)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,a=this._cachedMeta,r=a.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(i.width,i.height)-s)/2,0),l=Math.min(Km(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:g,offsetY:p}=Nv(d,u,l),m=(i.width-s)/f,b=(i.height-s)/h,x=Math.max(Math.min(m,b)/2,0),_=pd(this.options.radius,x),D=Math.max(_*l,0),w=(_-D)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=p*_,a.total=this.calculateTotal(),this.outerRadius=_-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,a=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*r/ue)}updateElements(e,n,i,a){const r=a==="reset",s=this.chart,o=s.chartArea,c=s.options.animation,u=(o.left+o.right)/2,d=(o.top+o.bottom)/2,f=r&&c.animateScale,h=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(n,a);let b=this._getRotation(),x;for(x=0;x<n;++x)b+=this._circumference(x,r);for(x=n;x<n+i;++x){const _=this._circumference(x,r),D=e[x],w={x:u+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+_,circumference:_,outerRadius:g,innerRadius:h};m&&(w.options=p||this.resolveDataElementOptions(x,D.active?"active":a)),b+=_,this.updateElement(D,x,w,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,a;for(a=0;a<n.length;a++){const r=e._parsed[a];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ue*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,a=i.data.labels||[],r=rr(n._parsed[e],i.options.locale);return{label:a[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let a,r,s,o,l;if(!e){for(a=0,r=i.data.datasets.length;a<r;++a)if(i.isDatasetVisible(a)){s=i.getDatasetMeta(a),e=s.data,o=s.controller;break}}if(!e)return 0;for(a=0,r=e.length;a<r;++a)l=o.resolveDataElementOptions(a),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,a=e.length;i<a;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(X(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Iv extends jv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function gn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class vo{static override(e){Object.assign(vo.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return gn()}parse(){return gn()}format(){return gn()}add(){return gn()}diff(){return gn()}startOf(){return gn()}endOf(){return gn()}}var Fv={_date:vo};function $v(t,e,n,i){const{controller:a,data:r,_sorted:s}=t,o=a._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&s&&r.length){const l=o._reversePixels?sb:Ds;if(i){if(a._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(r,e,n-u),f=l(r,e,n+u);return{lo:d.lo,hi:f.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function zi(t,e,n,i,a){const r=t.getSortedVisibleDatasetMetas(),s=n[e];for(let o=0,l=r.length;o<l;++o){const{index:c,data:u}=r[o],{lo:d,hi:f}=$v(r[o],e,s,a);for(let h=d;h<=f;++h){const g=u[h];g.skip||i(g,c,h)}}}function Bv(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,a){const r=e?Math.abs(i.x-a.x):0,s=n?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}function Hr(t,e,n,i,a){const r=[];return!a&&!t.isPointInArea(e)||zi(t,n,e,function(o,l,c){!a&&!Gt(o,t.chartArea,0)||o.inRange(e.x,e.y,i)&&r.push({element:o,datasetIndex:l,index:c})},!0),r}function Wv(t,e,n,i){let a=[];function r(s,o,l){const{startAngle:c,endAngle:u}=s.getProps(["startAngle","endAngle"],i),{angle:d}=vd(s,{x:e.x,y:e.y});Mi(d,c,u)&&a.push({element:s,datasetIndex:o,index:l})}return zi(t,n,e,r),a}function Vv(t,e,n,i,a,r){let s=[];const o=Bv(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const h=u.inRange(e.x,e.y,a);if(i&&!h)return;const g=u.getCenterPoint(a);if(!(!!r||t.isPointInArea(g))&&!h)return;const m=o(e,g);m<l?(s=[{element:u,datasetIndex:d,index:f}],l=m):m===l&&s.push({element:u,datasetIndex:d,index:f})}return zi(t,n,e,c),s}function Ur(t,e,n,i,a,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?Wv(t,e,n,a):Vv(t,e,n,i,a,r)}function Il(t,e,n,i,a){const r=[],s=n==="x"?"inXRange":"inYRange";let o=!1;return zi(t,n,e,(l,c,u)=>{l[s](e[n],a)&&(r.push({element:l,datasetIndex:c,index:u}),o=o||l.inRange(e.x,e.y,a))}),i&&!o?[]:r}var Yv={evaluateInteractionItems:zi,modes:{index(t,e,n,i){const a=mn(e,t),r=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?Hr(t,a,r,i,s):Ur(t,a,r,!1,i,s),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=o[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const a=mn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;let o=n.intersect?Hr(t,a,r,i,s):Ur(t,a,r,!1,i,s);if(o.length>0){const l=o[0].datasetIndex,c=t.getDatasetMeta(l).data;o=[];for(let u=0;u<c.length;++u)o.push({element:c[u],datasetIndex:l,index:u})}return o},point(t,e,n,i){const a=mn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;return Hr(t,a,r,i,s)},nearest(t,e,n,i){const a=mn(e,t),r=n.axis||"xy",s=n.includeInvisible||!1;return Ur(t,a,r,n.intersect,i,s)},x(t,e,n,i){const a=mn(e,t);return Il(t,a,"x",n.intersect,i)},y(t,e,n,i){const a=mn(e,t);return Il(t,a,"y",n.intersect,i)}}};const Bd=["left","top","right","bottom"];function li(t,e){return t.filter(n=>n.pos===e)}function Fl(t,e){return t.filter(n=>Bd.indexOf(n.pos)===-1&&n.box.axis===e)}function ci(t,e){return t.sort((n,i)=>{const a=e?i:n,r=e?n:i;return a.weight===r.weight?a.index-r.index:a.weight-r.weight})}function zv(t){const e=[];let n,i,a,r,s,o;for(n=0,i=(t||[]).length;n<i;++n)a=t[n],{position:r,options:{stack:s,stackWeight:o=1}}=a,e.push({index:n,box:a,pos:r,horizontal:a.isHorizontal(),weight:a.weight,stack:s&&r+s,stackWeight:o});return e}function Hv(t){const e={};for(const n of t){const{stack:i,pos:a,stackWeight:r}=n;if(!i||!Bd.includes(a))continue;const s=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return e}function Uv(t,e){const n=Hv(t),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let r,s,o;for(r=0,s=t.length;r<s;++r){o=t[r];const{fullSize:l}=o.box,c=n[o.stack],u=c&&o.stackWeight/c.weight;o.horizontal?(o.width=u?u*i:l&&e.availableWidth,o.height=a):(o.width=i,o.height=u?u*a:l&&e.availableHeight)}return n}function qv(t){const e=zv(t),n=ci(e.filter(c=>c.box.fullSize),!0),i=ci(li(e,"left"),!0),a=ci(li(e,"right")),r=ci(li(e,"top"),!0),s=ci(li(e,"bottom")),o=Fl(e,"x"),l=Fl(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:a.concat(l).concat(s).concat(o),chartArea:li(e,"chartArea"),vertical:i.concat(a).concat(l),horizontal:r.concat(s).concat(o)}}function $l(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Wd(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Kv(t,e,n,i){const{pos:a,box:r}=n,s=t.maxPadding;if(!ee(a)){n.size&&(t[a]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,t[a]+=n.size}r.getPadding&&Wd(s,r.getPadding());const o=Math.max(0,e.outerWidth-$l(s,t,"left","right")),l=Math.max(0,e.outerHeight-$l(s,t,"top","bottom")),c=o!==t.w,u=l!==t.h;return t.w=o,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Gv(t){const e=t.maxPadding;function n(i){const a=Math.max(e[i]-t[i],0);return t[i]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Xv(t,e){const n=e.maxPadding;function i(a){const r={left:0,top:0,right:0,bottom:0};return a.forEach(s=>{r[s]=Math.max(e[s],n[s])}),r}return i(t?["left","right"]:["top","bottom"])}function hi(t,e,n,i){const a=[];let r,s,o,l,c,u;for(r=0,s=t.length,c=0;r<s;++r){o=t[r],l=o.box,l.update(o.width||e.w,o.height||e.h,Xv(o.horizontal,e));const{same:d,other:f}=Kv(e,n,o,i);c|=d&&a.length,u=u||f,l.fullSize||a.push(o)}return c&&hi(a,e,n,i)||u}function ua(t,e,n,i,a){t.top=n,t.left=e,t.right=e+i,t.bottom=n+a,t.width=i,t.height=a}function Bl(t,e,n,i){const a=n.padding;let{x:r,y:s}=e;for(const o of t){const l=o.box,c=i[o.stack]||{count:1,placed:0,weight:1},u=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*u,f=c.size||l.height;Oi(c.start)&&(s=c.start),l.fullSize?ua(l,a.left,s,n.outerWidth-a.right-a.left,f):ua(l,e.left+c.placed,s,d,f),c.start=s,c.placed+=d,s=l.bottom}else{const d=e.h*u,f=c.size||l.width;Oi(c.start)&&(r=c.start),l.fullSize?ua(l,r,a.top,f,n.outerHeight-a.bottom-a.top):ua(l,r,e.top+c.placed,f,d),c.start=r,c.placed+=d,r=l.right}}e.x=r,e.y=s}var ct={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const a=je(t.options.layout.padding),r=Math.max(e-a.width,0),s=Math.max(n-a.height,0),o=qv(t.boxes),l=o.vertical,c=o.horizontal;ae(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:r,availableHeight:s,vBoxMaxWidth:r/2/u,hBoxMaxHeight:s/2}),f=Object.assign({},a);Wd(f,je(i));const h=Object.assign({maxPadding:f,w:r,h:s,x:a.left,y:a.top},a),g=Uv(l.concat(c),d);hi(o.fullSize,h,d,g),hi(l,h,d,g),hi(c,h,d,g)&&hi(l,h,d,g),Gv(h),Bl(o.leftAndTop,h,d,g),h.x+=h.w,h.y+=h.h,Bl(o.rightAndBottom,h,d,g),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},ae(o.chartArea,p=>{const m=p.box;Object.assign(m,t.chartArea),m.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class Vd{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,a){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):i)}}isAttached(e){return!0}updateConfig(e){}}class Zv extends Vd{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Sa="$chartjs",Qv={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wl=t=>t===null||t==="";function Jv(t,e){const n=t.style,i=t.getAttribute("height"),a=t.getAttribute("width");if(t[Sa]={initial:{height:i,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Wl(a)){const r=Dl(t,"width");r!==void 0&&(t.width=r)}if(Wl(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Dl(t,"height");r!==void 0&&(t.height=r)}return t}const Yd=Jb?{passive:!0}:!1;function ey(t,e,n){t.addEventListener(e,n,Yd)}function ty(t,e,n){t.canvas.removeEventListener(e,n,Yd)}function ny(t,e){const n=Qv[t.type]||t.type,{x:i,y:a}=mn(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:a!==void 0?a:null}}function Fa(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function iy(t,e,n){const i=t.canvas,a=new MutationObserver(r=>{let s=!1;for(const o of r)s=s||Fa(o.addedNodes,i),s=s&&!Fa(o.removedNodes,i);s&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function ay(t,e,n){const i=t.canvas,a=new MutationObserver(r=>{let s=!1;for(const o of r)s=s||Fa(o.removedNodes,i),s=s&&!Fa(o.addedNodes,i);s&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ki=new Map;let Vl=0;function zd(){const t=window.devicePixelRatio;t!==Vl&&(Vl=t,ki.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function ry(t,e){ki.size||window.addEventListener("resize",zd),ki.set(t,e)}function sy(t){ki.delete(t),ki.size||window.removeEventListener("resize",zd)}function oy(t,e,n){const i=t.canvas,a=i&&mo(i);if(!a)return;const r=wd((o,l)=>{const c=a.clientWidth;n(o,l),c<a.clientWidth&&n()},window),s=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return s.observe(a),ry(t,r),s}function qr(t,e,n){n&&n.disconnect(),e==="resize"&&sy(t)}function ly(t,e,n){const i=t.canvas,a=wd(r=>{t.ctx!==null&&n(ny(r,t))},t);return ey(i,e,a),a}class cy extends Vd{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Jv(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Sa])return!1;const i=n[Sa].initial;["height","width"].forEach(r=>{const s=i[r];re(s)?n.removeAttribute(r):n.setAttribute(r,s)});const a=i.style||{};return Object.keys(a).forEach(r=>{n.style[r]=a[r]}),n.width=n.width,delete n[Sa],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),s={attach:iy,detach:ay,resize:oy}[n]||ly;a[n]=s(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),a=i[n];if(!a)return;({attach:qr,detach:qr,resize:qr}[n]||ty)(e,n,a),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,a){return Qb(e,n,i,a)}isAttached(e){const n=mo(e);return!!(n&&n.isConnected)}}function uy(t){return!Ad()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Zv:cy}let rn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Na(this.x)&&Na(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const a={};return e.forEach(r=>{a[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),a}};function dy(t,e){const n=t.options.ticks,i=fy(t),a=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?gy(e):[],s=r.length,o=r[0],l=r[s-1],c=[];if(s>a)return py(e,c,r,s/a),c;const u=hy(r,e,a);if(s>0){let d,f;const h=s>1?Math.round((l-o)/(s-1)):null;for(da(e,c,u,re(h)?0:o-h,o),d=0,f=s-1;d<f;d++)da(e,c,u,r[d],r[d+1]);return da(e,c,u,l,re(h)?e.length:l+h),c}return da(e,c,u),c}function fy(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(i,a))}function hy(t,e,n){const i=my(t),a=e.length/n;if(!i)return Math.max(a,1);const r=nb(i);for(let s=0,o=r.length-1;s<o;s++){const l=r[s];if(l>a)return l}return Math.max(a,1)}function gy(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function py(t,e,n,i){let a=0,r=n[0],s;for(i=Math.ceil(i),s=0;s<t.length;s++)s===r&&(e.push(t[s]),a++,r=n[a*i])}function da(t,e,n,i,a){const r=X(i,0),s=Math.min(X(a,t.length),t.length);let o=0,l,c,u;for(n=Math.ceil(n),a&&(l=a-i,n=l/Math.floor(l/n)),u=r;u<0;)o++,u=Math.round(r+o*n);for(c=Math.max(r,0);c<s;c++)c===u&&(e.push(t[c]),o++,u=Math.round(r+o*n))}function my(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const by=t=>t==="left"?"right":t==="right"?"left":t,Yl=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,zl=(t,e)=>Math.min(e||t,t);function Hl(t,e){const n=[],i=t.length/e,a=t.length;let r=0;for(;r<a;r+=i)n.push(t[Math.floor(r)]);return n}function vy(t,e,n){const i=t.ticks.length,a=Math.min(e,i-1),r=t._startPixel,s=t._endPixel,o=1e-6;let l=t.getPixelForTick(a),c;if(!(n&&(i===1?c=Math.max(l-r,s-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(a-1))/2,l+=a<e?c:-c,l<r-o||l>s+o)))return l}function yy(t,e){ae(t,n=>{const i=n.gc,a=i.length/2;let r;if(a>e){for(r=0;r<a;++r)delete n.data[i[r]];i.splice(0,a)}})}function ui(t){return t.drawTicks?t.tickLength:0}function Ul(t,e){if(!t.display)return 0;const n=ke(t.font,e),i=je(t.padding);return(fe(t.text)?t.text.length:1)*n.lineHeight+i.height}function xy(t,e){return an(t,{scale:e,type:"scale"})}function _y(t,e,n){return an(t,{tick:n,index:e,type:"tick"})}function wy(t,e,n){let i=co(t);return(n&&e!=="right"||!n&&e==="right")&&(i=by(i)),i}function Dy(t,e,n,i){const{top:a,left:r,bottom:s,right:o,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,h,g;const p=s-a,m=o-r;if(t.isHorizontal()){if(h=Le(i,r,o),ee(n)){const b=Object.keys(n)[0],x=n[b];g=u[b].getPixelForValue(x)+p-e}else n==="center"?g=(c.bottom+c.top)/2+p-e:g=Yl(t,n,e);f=o-r}else{if(ee(n)){const b=Object.keys(n)[0],x=n[b];h=u[b].getPixelForValue(x)-m+e}else n==="center"?h=(c.left+c.right)/2-m+e:h=Yl(t,n,e);g=Le(i,s,a),d=n==="left"?-be:be}return{titleX:h,titleY:g,maxWidth:f,rotation:d}}class kn extends rn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:a}=this;return e=et(e,Number.POSITIVE_INFINITY),n=et(n,Number.NEGATIVE_INFINITY),i=et(i,Number.POSITIVE_INFINITY),a=et(a,Number.NEGATIVE_INFINITY),{min:et(e,i),max:et(n,a),minDefined:me(e),maxDefined:me(n)}}getMinMax(e){let{min:n,max:i,minDefined:a,maxDefined:r}=this.getUserBounds(),s;if(a&&r)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)s=o[l].controller.getMinMax(this,e),a||(n=Math.min(n,s.min)),r||(i=Math.max(i,s.max));return n=r&&n>i?i:n,i=a&&n>i?n:i,{min:et(n,et(i,n)),max:et(i,et(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:a,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Eb(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Hl(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=dy(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,a,r;for(i=0,a=e.length;i<a;i++)r=e[i],r.label=oe(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=zl(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,r=n.maxRotation;let s=a,o,l,c;if(!this._isVisible()||!n.display||a>=r||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,h=Ge(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/i:h/(i-1),d+6>o&&(o=h/(i-(e.offset?.5:1)),l=this.maxHeight-ui(e.grid)-n.padding-Ul(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),s=oo(Math.min(Math.asin(Ge((u.highest.height+6)/o,-1,1)),Math.asin(Ge(l/c,-1,1))-Math.asin(Ge(f/c,-1,1)))),s=Math.max(a,Math.min(r,s))),this.labelRotation=s}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:a,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const l=Ul(a,n.options.font);if(o?(e.width=this.maxWidth,e.height=ui(r)+l):(e.height=this.maxHeight,e.width=ui(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),h=i.padding*2,g=_t(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(o){const b=i.mirror?0:m*d.width+p*f.height;e.height=Math.min(this.maxHeight,e.height+b+h)}else{const b=i.mirror?0:p*d.width+m*f.height;e.width=Math.min(this.maxWidth,e.width+b+h)}this._calculatePadding(c,u,m,p)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,a){const{ticks:{align:r,padding:s},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?c?(f=a*e.width,h=i*n.height):(f=i*e.height,h=a*n.width):r==="start"?h=n.width:r==="end"?f=e.width:r!=="inner"&&(f=e.width/2,h=n.width/2),this.paddingLeft=Math.max((f-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-d+s)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;r==="start"?(u=0,d=e.height):r==="end"&&(u=n.height,d=0),this.paddingTop=u+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)re(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Hl(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:a,_longestTextCache:r}=this,s=[],o=[],l=Math.floor(n/zl(n,i));let c=0,u=0,d,f,h,g,p,m,b,x,_,D,w;for(d=0;d<n;d+=l){if(g=e[d].label,p=this._resolveTickFontOptions(d),a.font=m=p.string,b=r[m]=r[m]||{data:{},gc:[]},x=p.lineHeight,_=D=0,!re(g)&&!fe(g))_=ja(a,b.data,b.gc,_,g),D=x;else if(fe(g))for(f=0,h=g.length;f<h;++f)w=g[f],!re(w)&&!fe(w)&&(_=ja(a,b.data,b.gc,_,w),D+=x);s.push(_),o.push(D),c=Math.max(_,c),u=Math.max(D,u)}yy(r,n);const C=s.indexOf(c),O=o.indexOf(u),M=T=>({width:s[T]||0,height:o[T]||0});return{first:M(0),last:M(n-1),widest:M(C),highest:M(O),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return rb(this._alignToPixels?hn(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=_y(this.getContext(),e,i))}return this.$context||(this.$context=xy(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=_t(this.labelRotation),i=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,l=r?r.highest.height+s:0;return this.isHorizontal()?l*i>o*a?o/i:l/a:l*a<o*i?l/i:o/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,a=this.options,{grid:r,position:s,border:o}=a,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=ui(r),h=[],g=o.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,b=function(k){return hn(i,k,p)};let x,_,D,w,C,O,M,T,j,E,L,A;if(s==="top")x=b(this.bottom),O=this.bottom-f,T=x-m,E=b(e.top)+m,A=e.bottom;else if(s==="bottom")x=b(this.top),E=e.top,A=b(e.bottom)-m,O=x+m,T=this.top+f;else if(s==="left")x=b(this.right),C=this.right-f,M=x-m,j=b(e.left)+m,L=e.right;else if(s==="right")x=b(this.left),j=e.left,L=b(e.right)-m,C=x+m,M=this.left+f;else if(n==="x"){if(s==="center")x=b((e.top+e.bottom)/2+.5);else if(ee(s)){const k=Object.keys(s)[0],$=s[k];x=b(this.chart.scales[k].getPixelForValue($))}E=e.top,A=e.bottom,O=x+m,T=O+f}else if(n==="y"){if(s==="center")x=b((e.left+e.right)/2);else if(ee(s)){const k=Object.keys(s)[0],$=s[k];x=b(this.chart.scales[k].getPixelForValue($))}C=x-m,M=C-f,j=e.left,L=e.right}const F=X(a.ticks.maxTicksLimit,d),R=Math.max(1,Math.ceil(d/F));for(_=0;_<d;_+=R){const k=this.getContext(_),$=r.setContext(k),H=o.setContext(k),q=$.lineWidth,K=$.color,ie=H.dash||[],ne=H.dashOffset,ye=$.tickWidth,Y=$.tickColor,G=$.tickBorderDash||[],te=$.tickBorderDashOffset;D=vy(this,_,l),D!==void 0&&(w=hn(i,D,q),c?C=M=j=L=w:O=T=E=A=w,h.push({tx1:C,ty1:O,tx2:M,ty2:T,x1:j,y1:E,x2:L,y2:A,width:q,color:K,borderDash:ie,borderDashOffset:ne,tickWidth:ye,tickColor:Y,tickBorderDash:G,tickBorderDashOffset:te}))}return this._ticksLength=d,this._borderValue=x,h}_computeLabelItems(e){const n=this.axis,i=this.options,{position:a,ticks:r}=i,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,f=ui(i.grid),h=f+u,g=d?-u:h,p=-_t(this.labelRotation),m=[];let b,x,_,D,w,C,O,M,T,j,E,L,A="middle";if(a==="top")C=this.bottom-g,O=this._getXAxisLabelAlignment();else if(a==="bottom")C=this.top+g,O=this._getXAxisLabelAlignment();else if(a==="left"){const R=this._getYAxisLabelAlignment(f);O=R.textAlign,w=R.x}else if(a==="right"){const R=this._getYAxisLabelAlignment(f);O=R.textAlign,w=R.x}else if(n==="x"){if(a==="center")C=(e.top+e.bottom)/2+h;else if(ee(a)){const R=Object.keys(a)[0],k=a[R];C=this.chart.scales[R].getPixelForValue(k)+h}O=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")w=(e.left+e.right)/2-h;else if(ee(a)){const R=Object.keys(a)[0],k=a[R];w=this.chart.scales[R].getPixelForValue(k)}O=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const F=this._getLabelSizes();for(b=0,x=o.length;b<x;++b){_=o[b],D=_.label;const R=r.setContext(this.getContext(b));M=this.getPixelForTick(b)+r.labelOffset,T=this._resolveTickFontOptions(b),j=T.lineHeight,E=fe(D)?D.length:1;const k=E/2,$=R.color,H=R.textStrokeColor,q=R.textStrokeWidth;let K=O;s?(w=M,O==="inner"&&(b===x-1?K=this.options.reverse?"left":"right":b===0?K=this.options.reverse?"right":"left":K="center"),a==="top"?c==="near"||p!==0?L=-E*j+j/2:c==="center"?L=-F.highest.height/2-k*j+j:L=-F.highest.height+j/2:c==="near"||p!==0?L=j/2:c==="center"?L=F.highest.height/2-k*j:L=F.highest.height-E*j,d&&(L*=-1),p!==0&&!R.showLabelBackdrop&&(w+=j/2*Math.sin(p))):(C=M,L=(1-E)*j/2);let ie;if(R.showLabelBackdrop){const ne=je(R.backdropPadding),ye=F.heights[b],Y=F.widths[b];let G=L-ne.top,te=0-ne.left;switch(A){case"middle":G-=ye/2;break;case"bottom":G-=ye;break}switch(O){case"center":te-=Y/2;break;case"right":te-=Y;break}ie={left:te,top:G,width:Y+ne.width,height:ye+ne.height,color:R.backdropColor}}m.push({label:D,font:T,textOffset:L,options:{rotation:p,color:$,strokeColor:H,strokeWidth:q,textAlign:K,textBaseline:A,translation:[w,C],backdrop:ie}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-_t(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:a,padding:r}}=this.options,s=this._getLabelSizes(),o=e+r,l=s.widest.width;let c,u;return n==="left"?a?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?a?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:a,width:r,height:s}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,a,r,s),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(r=>r.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,s=a.length;r<s;++r){const l=a[r];n.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:a}}=this,r=i.setContext(this.getContext()),s=i.display?r.width:0;if(!s)return;const o=a.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=hn(e,this.left,s)-s/2,u=hn(e,this.right,o)+o/2,d=f=l):(d=hn(e,this.top,s)-s/2,f=hn(e,this.bottom,o)+o/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&or(i,a);const r=this.getLabelItems(e);for(const s of r){const o=s.options,l=s.font,c=s.label,u=s.textOffset;On(i,c,0,u,l,o)}a&&lr(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:a}}=this;if(!i.display)return;const r=ke(i.font),s=je(i.padding),o=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||ee(n)?(l+=s.bottom,fe(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=s.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=Dy(this,l,n,o);On(e,i.text,0,0,r,{color:i.color,maxWidth:d,rotation:f,textAlign:wy(o,n,a),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=X(e.grid&&e.grid.z,-1),a=X(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==kn.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];o[i]===this.id&&(!e||o.type===e)&&a.push(o)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ke(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fa{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;My(n)&&(i=this.register(n));const a=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in a||(a[r]=e,Sy(e,s,i),this.override&&ve.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,a=this.scope;i in n&&delete n[i],a&&i in ve[a]&&(delete ve[a][i],this.override&&delete Sn[i])}}function Sy(t,e,n){const i=Si(Object.create(null),[n?ve.get(n):{},ve.get(e),t.defaults]);ve.set(e,i),t.defaultRoutes&&Oy(e,t.defaultRoutes),t.descriptors&&ve.describe(e,t.descriptors)}function Oy(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),a=i.pop(),r=[t].concat(i).join("."),s=e[n].split("."),o=s.pop(),l=s.join(".");ve.route(r,a,l,o)})}function My(t){return"id"in t&&"defaults"in t}class Cy{constructor(){this.controllers=new fa(bo,"datasets",!0),this.elements=new fa(rn,"elements"),this.plugins=new fa(Object,"plugins"),this.scales=new fa(kn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(a=>{const r=i||this._getRegistryForType(a);i||r.isForType(a)||r===this.plugins&&a.id?this._exec(e,r,a):ae(a,s=>{const o=i||this._getRegistryForType(s);this._exec(e,o,s)})})}_exec(e,n,i){const a=so(e);oe(i["before"+a],[],i),n[e](i),oe(i["after"+a],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var yt=new Cy;class ky{constructor(){this._init=[]}notify(e,n,i,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=a?this._descriptors(e).filter(a):this._descriptors(e),s=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,n,i,a){a=a||{};for(const r of e){const s=r.plugin,o=s[i],l=[n,a,r.options];if(oe(o,l,s)===!1&&a.cancelable)return!1}return!0}invalidate(){re(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,a=X(i.options&&i.options.plugins,{}),r=Py(i);return a===!1&&!n?[]:Ay(e,r,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,a=(r,s)=>r.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(a(n,i),e,"stop"),this._notify(a(i,n),e,"start")}}function Py(t){const e={},n=[],i=Object.keys(yt.plugins.items);for(let r=0;r<i.length;r++)n.push(yt.getPlugin(i[r]));const a=t.plugins||[];for(let r=0;r<a.length;r++){const s=a[r];n.indexOf(s)===-1&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}function Ey(t,e){return!e&&t===!1?null:t===!0?{}:t}function Ay(t,{plugins:e,localIds:n},i,a){const r=[],s=t.getContext();for(const o of e){const l=o.id,c=Ey(i[l],a);c!==null&&r.push({plugin:o,options:Ty(t.config,{plugin:o,local:n[l]},c,s)})}return r}function Ty(t,{plugin:e,local:n},i,a){const r=t.pluginScopeKeys(e),s=t.getOptionScopes(i,r);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Os(t,e){const n=ve.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Ly(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Ry(t,e){return t===e?"_index_":"_value_"}function ql(t){if(t==="x"||t==="y"||t==="r")return t}function Ny(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ms(t,...e){if(ql(t))return t;for(const n of e){const i=n.axis||Ny(n.position)||t.length>1&&ql(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Kl(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function jy(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Kl(t,"x",n[0])||Kl(t,"y",n[0])}return{}}function Iy(t,e){const n=Sn[t.type]||{scales:{}},i=e.scales||{},a=Os(t.type,e),r=Object.create(null);return Object.keys(i).forEach(s=>{const o=i[s];if(!ee(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=Ms(s,o,jy(s,t),ve.scales[o.type]),c=Ry(l,a),u=n.scales||{};r[s]=mi(Object.create(null),[{axis:l},o,u[l],u[c]])}),t.data.datasets.forEach(s=>{const o=s.type||t.type,l=s.indexAxis||Os(o,e),u=(Sn[o]||{}).scales||{};Object.keys(u).forEach(d=>{const f=Ly(d,l),h=s[f+"AxisID"]||f;r[h]=r[h]||Object.create(null),mi(r[h],[{axis:f},i[h],u[d]])})}),Object.keys(r).forEach(s=>{const o=r[s];mi(o,[ve.scales[o.type],ve.scale])}),r}function Hd(t){const e=t.options||(t.options={});e.plugins=X(e.plugins,{}),e.scales=Iy(t,e)}function Ud(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Fy(t){return t=t||{},t.data=Ud(t.data),Hd(t),t}const Gl=new Map,qd=new Set;function ha(t,e){let n=Gl.get(t);return n||(n=e(),Gl.set(t,n),qd.add(n)),n}const di=(t,e,n)=>{const i=Dn(e,n);i!==void 0&&t.add(i)};class $y{constructor(e){this._config=Fy(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ud(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Hd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ha(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return ha(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return ha(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return ha(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let a=i.get(e);return(!a||n)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,n,i){const{options:a,type:r}=this,s=this._cachedScopes(e,i),o=s.get(n);if(o)return o;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>di(l,e,d))),u.forEach(d=>di(l,a,d)),u.forEach(d=>di(l,Sn[r]||{},d)),u.forEach(d=>di(l,ve,d)),u.forEach(d=>di(l,Ss,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),qd.has(n)&&s.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Sn[n]||{},ve.datasets[n]||{},{type:n},ve,Ss]}resolveNamedOptions(e,n,i,a=[""]){const r={$shared:!0},{resolver:s,subPrefixes:o}=Xl(this._resolverCache,e,a);let l=s;if(Wy(s,n)){r.$shared=!1,i=Jt(i)?i():i;const c=this.createResolver(e,i,o);l=qn(s,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],a){const{resolver:r}=Xl(this._resolverCache,e,i);return ee(n)?qn(r,n,void 0,a):r}}function Xl(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const a=n.join();let r=i.get(a);return r||(r={resolver:ho(e,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},i.set(a,r)),r}const By=t=>ee(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Jt(t[n]),!1);function Wy(t,e){const{isScriptable:n,isIndexable:i}=Md(t);for(const a of e){const r=n(a),s=i(a),o=(s||r)&&t[a];if(r&&(Jt(o)||By(o))||s&&fe(o))return!0}return!1}var Vy="4.3.0";const Yy=["top","bottom","left","right","chartArea"];function Zl(t,e){return t==="top"||t==="bottom"||Yy.indexOf(t)===-1&&e==="x"}function Ql(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Jl(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),oe(n&&n.onComplete,[t],e)}function zy(t){const e=t.chart,n=e.options.animation;oe(n&&n.onProgress,[t],e)}function Kd(t){return Ad()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Oa={},ec=t=>{const e=Kd(t);return Object.values(Oa).filter(n=>n.canvas===e).pop()};function Hy(t,e,n){const i=Object.keys(t);for(const a of i){const r=+a;if(r>=e){const s=t[a];delete t[a],(n>0||r>e)&&(t[r+n]=s)}}}function Uy(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function qy(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}let Pn=class{static defaults=ve;static instances=Oa;static overrides=Sn;static registry=yt;static version=Vy;static getChart=ec;static register(...e){yt.add(...e),tc()}static unregister(...e){yt.remove(...e),tc()}constructor(e,n){const i=this.config=new $y(n),a=Kd(e),r=ec(a);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||uy(a)),this.platform.updateConfig(i);const o=this.platform.acquireContext(a,s.aspectRatio),l=o&&o.canvas,c=l&&l.height,u=l&&l.width;if(this.id=qm(),this.ctx=o,this.canvas=l,this.width=u,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ky,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cb(d=>this.update(d),s.resizeDelay||0),this._dataChanges=[],Oa[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}At.listen(this,"complete",Jl),At.listen(this,"progress",zy),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:a,_aspectRatio:r}=this;return re(e)?n&&r?r:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wl(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vl(this.canvas,this.ctx),this}stop(){return At.stop(this),this}resize(e,n){At.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,a=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(a,e,n,r),o=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,wl(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),oe(i.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ae(n,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,a=Object.keys(i).reduce((s,o)=>(s[o]=!1,s),{});let r=[];n&&(r=r.concat(Object.keys(n).map(s=>{const o=n[s],l=Ms(s,o),c=l==="r",u=l==="x";return{options:o,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ae(r,s=>{const o=s.options,l=o.id,c=Ms(l,o),u=X(o.type,s.dtype);(o.position===void 0||Zl(o.position,c)!==Zl(s.dposition))&&(o.position=s.dposition),a[l]=!0;let d=null;if(l in i&&i[l].type===u)d=i[l];else{const f=yt.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(o,e)}),ae(a,(s,o)=>{s||delete i[o]}),ae(i,s=>{ct.configure(this,s,s.options),ct.addBox(this,s)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((a,r)=>a.index-r.index),i>n){for(let a=n;a<i;++a)this._destroyDatasetMeta(a);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Ql("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,a)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=n.length;i<a;i++){const r=n[i];let s=this.getDatasetMeta(i);const o=r.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=o,s.indexAxis=r.indexAxis||Os(o,this.options),s.order=r.order||0,s.index=i,s.label=""+r.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{const l=yt.getController(o),{datasetElementType:c,dataElementType:u}=ve.datasets[o];Object.assign(l,{dataElementType:yt.getElement(u),datasetElementType:c&&yt.getElement(c)}),s.controller=new l(this,i),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){ae(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!a&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),s=Math.max(+d.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),a||ae(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ql("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ae(this.scales,e=>{ct.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!cl(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:r}of n){const s=i==="_removeElements"?-r:r;Hy(e,a,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(s=>s[0]===r).map((s,o)=>o+","+s.splice(1).join(","))),a=i(0);for(let r=1;r<n;r++)if(!cl(a,i(r)))return;return Array.from(a).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ct.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ae(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,r)=>{a._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Jt(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(At.has(this)?this.attached&&!At.running(this)&&At.start(this):(this.draw(),Jl({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resize(i,a),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let a,r;for(a=0,r=n.length;a<r;++a){const s=n[a];(!e||s.visible)&&i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,a=!i.disabled,r=qy(e)||this.chartArea,s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&or(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),a&&lr(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Gt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,a){const r=Yv.modes[n];return typeof r=="function"?r(this,e,i,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let a=i.filter(r=>r&&r._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=an(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const a=i?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,a);Oi(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),s.update(r,{visible:i}),this.update(o=>o.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),At.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vl(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Oa[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,s)=>{n.addEventListener(this,r,s),e[r]=s},a=(r,s,o)=>{r.offsetX=s,r.offsetY=o,this._eventHandler(r)};ae(this.options.events,r=>i(r,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},a=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let s;const o=()=>{a("attach",o),this.attached=!0,this.resize(),i("resize",r),i("detach",s)};s=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),i("attach",o)},n.isAttached(this.canvas)?o():s()}unbindEvents(){ae(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ae(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const a=i?"set":"remove";let r,s,o,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+a+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){s=e[o];const c=s&&this.getDatasetMeta(s.datasetIndex).controller;c&&c[a+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:s})=>{const o=this.getDatasetMeta(r);if(!o)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:o.data[s],index:s}});!Ta(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const a=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),s=r(n,e),o=i?e:r(e,n);s.length&&this.updateHoverStyle(s,a.mode,!1),o.length&&a.mode&&this.updateHoverStyle(o,a.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:a=[],options:r}=this,s=n,o=this._getActiveElements(e,a,i,s),l=Jm(e),c=Uy(e,this._lastEvent,i,l);i&&(this._lastEvent=null,oe(r.onHover,[e,o,this],this),l&&oe(r.onClick,[e,o,this],this));const u=!Ta(o,a);return(u||n)&&(this._active=o,this._updateHoverStyles(o,a,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,a){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,a)}};function tc(){return ae(Pn.instances,t=>t._plugins.invalidate())}function Ky(t,e,n){const{startAngle:i,pixelMargin:a,x:r,y:s,outerRadius:o,innerRadius:l}=e;let c=a/o;t.beginPath(),t.arc(r,s,o,i-c,n+c),l>a?(c=a/l,t.arc(r,s,l,n+c,i-c,!0)):t.arc(r,s,a,n+be,i-be),t.closePath(),t.clip()}function Gy(t){return fo(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Xy(t,e,n,i){const a=Gy(t.options.borderRadius),r=(n-e)/2,s=Math.min(r,i*e/2),o=l=>{const c=(n-Math.min(r,l))*i/2;return Ge(l,0,Math.min(r,c))};return{outerStart:o(a.outerStart),outerEnd:o(a.outerEnd),innerStart:Ge(a.innerStart,0,s),innerEnd:Ge(a.innerEnd,0,s)}}function Rn(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function $a(t,e,n,i,a,r){const{x:s,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+n-c,0),f=u>0?u+i+n+c:0;let h=0;const g=a-l;if(i){const R=u>0?u-i:0,k=d>0?d-i:0,$=(R+k)/2,H=$!==0?g*$/($+i):g;h=(g-H)/2}const p=Math.max(.001,g*d-n/pe)/d,m=(g-p)/2,b=l+m+h,x=a-m-h,{outerStart:_,outerEnd:D,innerStart:w,innerEnd:C}=Xy(e,f,d,x-b),O=d-_,M=d-D,T=b+_/O,j=x-D/M,E=f+w,L=f+C,A=b+w/E,F=x-C/L;if(t.beginPath(),r){const R=(T+j)/2;if(t.arc(s,o,d,T,R),t.arc(s,o,d,R,j),D>0){const q=Rn(M,j,s,o);t.arc(q.x,q.y,D,j,x+be)}const k=Rn(L,x,s,o);if(t.lineTo(k.x,k.y),C>0){const q=Rn(L,F,s,o);t.arc(q.x,q.y,C,x+be,F+Math.PI)}const $=(x-C/f+(b+w/f))/2;if(t.arc(s,o,f,x-C/f,$,!0),t.arc(s,o,f,$,b+w/f,!0),w>0){const q=Rn(E,A,s,o);t.arc(q.x,q.y,w,A+Math.PI,b-be)}const H=Rn(O,b,s,o);if(t.lineTo(H.x,H.y),_>0){const q=Rn(O,T,s,o);t.arc(q.x,q.y,_,b-be,T)}}else{t.moveTo(s,o);const R=Math.cos(T)*d+s,k=Math.sin(T)*d+o;t.lineTo(R,k);const $=Math.cos(j)*d+s,H=Math.sin(j)*d+o;t.lineTo($,H)}t.closePath()}function Zy(t,e,n,i,a){const{fullCircles:r,startAngle:s,circumference:o}=e;let l=e.endAngle;if(r){$a(t,e,n,i,l,a);for(let c=0;c<r;++c)t.fill();isNaN(o)||(l=s+(o%ue||ue))}return $a(t,e,n,i,l,a),t.fill(),l}function Qy(t,e,n,i,a){const{fullCircles:r,startAngle:s,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f}=l,h=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,h?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let g=e.endAngle;if(r){$a(t,e,n,i,g,a);for(let p=0;p<r;++p)t.stroke();isNaN(o)||(g=s+(o%ue||ue))}h&&Ky(t,e,g),r||($a(t,e,n,i,g,a),t.stroke())}class Gd extends rn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const a=this.getProps(["x","y"],i),{angle:r,distance:s}=vd(a,{x:e,y:n}),{startAngle:o,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=(this.options.spacing+this.options.borderWidth)/2,g=X(d,l-o)>=ue||Mi(r,o,l),p=Ft(s,c+f,u+f);return g&&p}getCenterPoint(e){const{x:n,y:i,startAngle:a,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(a+r)/2,d=(s+o+c+l)/2;return{x:n+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,a=(n.offset||0)/4,r=(n.spacing||0)/2,s=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>ue?Math.floor(i/ue):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*a,Math.sin(o)*a);const l=1-Math.sin(Math.min(pe,i||0)),c=a*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,Zy(e,this,c,r,s),Qy(e,this,c,r,s),e.restore()}}function Xd(t,e,n=e){t.lineCap=X(n.borderCapStyle,e.borderCapStyle),t.setLineDash(X(n.borderDash,e.borderDash)),t.lineDashOffset=X(n.borderDashOffset,e.borderDashOffset),t.lineJoin=X(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=X(n.borderWidth,e.borderWidth),t.strokeStyle=X(n.borderColor,e.borderColor)}function Jy(t,e,n){t.lineTo(n.x,n.y)}function ex(t){return t.stepped?_b:t.tension||t.cubicInterpolationMode==="monotone"?wb:Jy}function Zd(t,e,n={}){const i=t.length,{start:a=0,end:r=i-1}=n,{start:s,end:o}=e,l=Math.max(a,s),c=Math.min(r,o),u=a<s&&r<s||a>o&&r>o;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function tx(t,e,n,i){const{points:a,options:r}=e,{count:s,start:o,loop:l,ilen:c}=Zd(a,n,i),u=ex(r);let{move:d=!0,reverse:f}=i||{},h,g,p;for(h=0;h<=c;++h)g=a[(o+(f?c-h:h))%s],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,p,g,f,r.stepped),p=g);return l&&(g=a[(o+(f?c:0))%s],u(t,p,g,f,r.stepped)),!!l}function nx(t,e,n,i){const a=e.points,{count:r,start:s,ilen:o}=Zd(a,n,i),{move:l=!0,reverse:c}=i||{};let u=0,d=0,f,h,g,p,m,b;const x=D=>(s+(c?o-D:D))%r,_=()=>{p!==m&&(t.lineTo(u,m),t.lineTo(u,p),t.lineTo(u,b))};for(l&&(h=a[x(0)],t.moveTo(h.x,h.y)),f=0;f<=o;++f){if(h=a[x(f)],h.skip)continue;const D=h.x,w=h.y,C=D|0;C===g?(w<p?p=w:w>m&&(m=w),u=(d*u+D)/++d):(_(),t.lineTo(D,w),g=C,d=0,p=m=w),b=w}_()}function Cs(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?nx:tx}function ix(t){return t.stepped?ev:t.tension||t.cubicInterpolationMode==="monotone"?tv:bn}function ax(t,e,n,i){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,i)&&a.closePath()),Xd(t,e.options),t.stroke(a)}function rx(t,e,n,i){const{segments:a,options:r}=e,s=Cs(e);for(const o of a)Xd(t,r,o.style),t.beginPath(),s(t,e,o,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const sx=typeof Path2D=="function";function ox(t,e,n,i){sx&&!e.options.segment?ax(t,e,n,i):rx(t,e,n,i)}class yo extends rn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const a=i.spanGaps?this._loop:this._fullLoop;Ub(this._points,i,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ov(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,a=e[n],r=this.points,s=jd(this,{property:n,start:a,end:a});if(!s.length)return;const o=[],l=ix(i);let c,u;for(c=0,u=s.length;c<u;++c){const{start:d,end:f}=s[c],h=r[d],g=r[f];if(h===g){o.push(h);continue}const p=Math.abs((a-h[n])/(g[n]-h[n])),m=l(h,g,p,i.stepped);m[n]=e[n],o.push(m)}return o.length===1?o[0]:o}pathSegment(e,n,i){return Cs(this)(e,this,n,i)}path(e,n,i){const a=this.segments,r=Cs(this);let s=this._loop;n=n||0,i=i||this.points.length-n;for(const o of a)s&=r(e,this,o,{start:n,end:n+i-1});return!!s}draw(e,n,i,a){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),ox(e,this,i,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Qd(t,e){const{x:n,y:i,base:a,width:r,height:s}=t.getProps(["x","y","base","width","height"],e);let o,l,c,u,d;return t.horizontal?(d=s/2,o=Math.min(n,a),l=Math.max(n,a),c=i-d,u=i+d):(d=r/2,o=n-d,l=n+d,c=Math.min(i,a),u=Math.max(i,a)),{left:o,top:c,right:l,bottom:u}}function Xt(t,e,n,i){return t?0:Ge(e,n,i)}function lx(t,e,n){const i=t.options.borderWidth,a=t.borderSkipped,r=Od(i);return{t:Xt(a.top,r.top,0,n),r:Xt(a.right,r.right,0,e),b:Xt(a.bottom,r.bottom,0,n),l:Xt(a.left,r.left,0,e)}}function cx(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,r=xn(a),s=Math.min(e,n),o=t.borderSkipped,l=i||ee(a);return{topLeft:Xt(!l||o.top||o.left,r.topLeft,0,s),topRight:Xt(!l||o.top||o.right,r.topRight,0,s),bottomLeft:Xt(!l||o.bottom||o.left,r.bottomLeft,0,s),bottomRight:Xt(!l||o.bottom||o.right,r.bottomRight,0,s)}}function ux(t){const e=Qd(t),n=e.right-e.left,i=e.bottom-e.top,a=lx(t,n/2,i/2),r=cx(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:i-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function Kr(t,e,n,i){const a=e===null,r=n===null,o=t&&!(a&&r)&&Qd(t,i);return o&&(a||Ft(e,o.left,o.right))&&(r||Ft(n,o.top,o.bottom))}function dx(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function fx(t,e){t.rect(e.x,e.y,e.w,e.h)}function Gr(t,e,n={}){const i=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+i,y:t.y+a,w:t.w+r,h:t.h+s,radius:t.radius}}class Jd extends rn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:a}}=this,{inner:r,outer:s}=ux(this),o=dx(s.radius)?Ci:fx;e.save(),(s.w!==r.w||s.h!==r.h)&&(e.beginPath(),o(e,Gr(s,n,r)),e.clip(),o(e,Gr(r,-n,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),o(e,Gr(r,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,i){return Kr(this,e,n,i)}inXRange(e,n){return Kr(this,e,null,n)}inYRange(e,n){return Kr(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:a,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+a)/2:n,y:r?i:(i+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function hx(t,e,n){const i=t.segments,a=t.points,r=e.points,s=[];for(const o of i){let{start:l,end:c}=o;c=xo(l,c,a);const u=ks(n,a[l],a[c],o.loop);if(!e.segments){s.push({source:o,target:u,start:a[l],end:a[c]});continue}const d=jd(e,u);for(const f of d){const h=ks(n,r[f.start],r[f.end],f.loop),g=Nd(o,a,h);for(const p of g)s.push({source:p,target:f,start:{[n]:nc(u,h,"start",Math.max)},end:{[n]:nc(u,h,"end",Math.min)}})}}return s}function ks(t,e,n,i){if(i)return;let a=e[t],r=n[t];return t==="angle"&&(a=tt(a),r=tt(r)),{property:t,start:a,end:r}}function gx(t,e){const{x:n=null,y:i=null}=t||{},a=e.points,r=[];return e.segments.forEach(({start:s,end:o})=>{o=xo(s,o,a);const l=a[s],c=a[o];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function xo(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function nc(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function ef(t,e){let n=[],i=!1;return fe(t)?(i=!0,n=t):n=gx(t,e),n.length?new yo({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function ic(t){return t&&t.fill!==!1}function px(t,e,n){let a=t[e].fill;const r=[e];let s;if(!n)return a;for(;a!==!1&&r.indexOf(a)===-1;){if(!me(a))return a;if(s=t[a],!s)return!1;if(s.visible)return a;r.push(a),a=s.fill}return!1}function mx(t,e,n){const i=xx(t);if(ee(i))return isNaN(i.value)?!1:i;let a=parseFloat(i);return me(a)&&Math.floor(a)===a?bx(i[0],e,a,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function bx(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function vx(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ee(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function yx(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:ee(t)?i=t.value:i=e.getBaseValue(),i}function xx(t){const e=t.options,n=e.fill;let i=X(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function _x(t){const{scale:e,index:n,line:i}=t,a=[],r=i.segments,s=i.points,o=wx(e,n);o.push(ef({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)Dx(a,s[u],o)}return new yo({points:a,options:{}})}function wx(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let a=0;a<i.length;a++){const r=i[a];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function Dx(t,e,n){const i=[];for(let a=0;a<n.length;a++){const r=n[a],{first:s,last:o,point:l}=Sx(r,e,"x");if(!(!l||s&&o)){if(s)i.unshift(l);else if(t.push(l),!o)break}}t.push(...i)}function Sx(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const a=i[n],r=t.segments,s=t.points;let o=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],d=s[u.start][n],f=s[u.end][n];if(Ft(a,d,f)){o=a===d,l=a===f;break}}return{first:o,last:l,point:i}}class tf{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:a,y:r,radius:s}=this;return n=n||{start:0,end:ue},e.arc(a,r,s,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:a}=this,r=e.angle;return{x:n+Math.cos(r)*a,y:i+Math.sin(r)*a,angle:r}}}function Ox(t){const{chart:e,fill:n,line:i}=t;if(me(n))return Mx(e,n);if(n==="stack")return _x(t);if(n==="shape")return!0;const a=Cx(t);return a instanceof tf?a:ef(a,i)}function Mx(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Cx(t){return(t.scale||{}).getPointPositionForValue?Px(t):kx(t)}function kx(t){const{scale:e={},fill:n}=t,i=vx(n,e);if(me(i)){const a=e.isHorizontal();return{x:a?i:null,y:a?null:i}}return null}function Px(t){const{scale:e,fill:n}=t,i=e.options,a=e.getLabels().length,r=i.reverse?e.max:e.min,s=yx(n,e,r),o=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new tf({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<a;++l)o.push(e.getPointPositionForValue(l,s));return o}function Xr(t,e,n){const i=Ox(e),{line:a,scale:r,axis:s}=e,o=a.options,l=o.fill,c=o.backgroundColor,{above:u=c,below:d=c}=l||{};i&&a.points.length&&(or(t,n),Ex(t,{line:a,target:i,above:u,below:d,area:n,scale:r,axis:s}),lr(t))}function Ex(t,e){const{line:n,target:i,above:a,below:r,area:s,scale:o}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&r!==a&&(ac(t,i,s.top),rc(t,{line:n,target:i,color:a,scale:o,property:l}),t.restore(),t.save(),ac(t,i,s.bottom)),rc(t,{line:n,target:i,color:r,scale:o,property:l}),t.restore()}function ac(t,e,n){const{segments:i,points:a}=e;let r=!0,s=!1;t.beginPath();for(const o of i){const{start:l,end:c}=o,u=a[l],d=a[xo(l,c,a)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),s=!!e.pathSegment(t,o,{move:s}),s?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function rc(t,e){const{line:n,target:i,property:a,color:r,scale:s}=e,o=hx(n,i,a);for(const{source:l,target:c,start:u,end:d}of o){const{style:{backgroundColor:f=r}={}}=l,h=i!==!0;t.save(),t.fillStyle=f,Ax(t,s,h&&ks(a,u,d)),t.beginPath();const g=!!n.pathSegment(t,l);let p;if(h){g?t.closePath():sc(t,i,d,a);const m=!!i.pathSegment(t,c,{move:g,reverse:!0});p=g&&m,p||sc(t,i,u,a)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Ax(t,e,n){const{top:i,bottom:a}=e.chart.chartArea,{property:r,start:s,end:o}=n||{};r==="x"&&(t.beginPath(),t.rect(s,i,o-s,a-i),t.clip())}function sc(t,e,n,i){const a=e.interpolate(n,i);a&&t.lineTo(a.x,a.y)}var nf={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,a=[];let r,s,o,l;for(s=0;s<i;++s)r=t.getDatasetMeta(s),o=r.dataset,l=null,o&&o.options&&o instanceof yo&&(l={visible:t.isDatasetVisible(s),index:s,fill:mx(o,s,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=l,a.push(l);for(s=0;s<i;++s)l=a[s],!(!l||l.fill===!1)&&(l.fill=px(a,s,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",a=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let s=a.length-1;s>=0;--s){const o=a[s].$filler;o&&(o.line.updateControlPoints(r,o.axis),i&&o.fill&&Xr(t.ctx,o,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let a=i.length-1;a>=0;--a){const r=i[a].$filler;ic(r)&&Xr(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!ic(i)||n.drawTime!=="beforeDatasetDraw"||Xr(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const oc=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},Tx=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class lc extends rn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,a)=>e.sort(i,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,a=ke(i.font),r=a.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=oc(i,r);let c,u;n.font=a.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(s,r,o,l)+10):(u=this.maxHeight,c=this._fitCols(s,a,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,a){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=a+o;let d=e;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-u;return this.legendItems.forEach((g,p)=>{const m=i+n/2+r.measureText(g.text).width;(p===0||c[c.length-1]+m+2*o>s)&&(d+=u,c[c.length-(p>0?0:1)]=0,h+=u,f++),l[p]={left:0,top:h,row:f,width:m,height:a},c[c.length-1]+=m+o}),d}_fitCols(e,n,i,a){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=s-e;let d=o,f=0,h=0,g=0,p=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:x,itemHeight:_}=Lx(i,n,r,m,a);b>0&&h+_+2*o>u&&(d+=f+o,c.push({width:f,height:h}),g+=f+o,p++,f=h=0),l[b]={left:g,top:h,col:p,width:x,height:_},f=Math.max(f,x),h+=_+o}),d+=f,c.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:a},rtl:r}}=this,s=Bn(r,this.left,this.width);if(this.isHorizontal()){let o=0,l=Le(i,this.left+a,this.right-this.lineWidths[o]);for(const c of n)o!==c.row&&(o=c.row,l=Le(i,this.left+a,this.right-this.lineWidths[o])),c.top+=this.top+e+a,c.left=s.leftForLtr(s.x(l),c.width),l+=c.width+a}else{let o=0,l=Le(i,this.top+e+a,this.bottom-this.columnSizes[o].height);for(const c of n)c.col!==o&&(o=c.col,l=Le(i,this.top+e+a,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+a,c.left=s.leftForLtr(s.x(c.left),c.width),l+=c.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;or(e,this),this._draw(),lr(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:a}=this,{align:r,labels:s}=e,o=ve.color,l=Bn(e.rtl,this.left,this.width),c=ke(s.font),{padding:u}=s,d=c.size,f=d/2;let h;this.drawTitle(),a.textAlign=l.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=oc(s,d),b=function(C,O,M){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;a.save();const T=X(M.lineWidth,1);if(a.fillStyle=X(M.fillStyle,o),a.lineCap=X(M.lineCap,"butt"),a.lineDashOffset=X(M.lineDashOffset,0),a.lineJoin=X(M.lineJoin,"miter"),a.lineWidth=T,a.strokeStyle=X(M.strokeStyle,o),a.setLineDash(X(M.lineDash,[])),s.usePointStyle){const j={radius:p*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:T},E=l.xPlus(C,g/2),L=O+f;Sd(a,j,E,L,s.pointStyleWidth&&g)}else{const j=O+Math.max((d-p)/2,0),E=l.leftForLtr(C,g),L=xn(M.borderRadius);a.beginPath(),Object.values(L).some(A=>A!==0)?Ci(a,{x:E,y:j,w:g,h:p,radius:L}):a.rect(E,j,g,p),a.fill(),T!==0&&a.stroke()}a.restore()},x=function(C,O,M){On(a,M.text,C,O+m/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},_=this.isHorizontal(),D=this._computeTitleHeight();_?h={x:Le(r,this.left+u,this.right-i[0]),y:this.top+u+D,line:0}:h={x:this.left+u,y:Le(r,this.top+D+u,this.bottom-n[0].height),line:0},Td(this.ctx,e.textDirection);const w=m+u;this.legendItems.forEach((C,O)=>{a.strokeStyle=C.fontColor,a.fillStyle=C.fontColor;const M=a.measureText(C.text).width,T=l.textAlign(C.textAlign||(C.textAlign=s.textAlign)),j=g+f+M;let E=h.x,L=h.y;l.setWidth(this.width),_?O>0&&E+j+u>this.right&&(L=h.y+=w,h.line++,E=h.x=Le(r,this.left+u,this.right-i[h.line])):O>0&&L+w>this.bottom&&(E=h.x=E+n[h.line].width+u,h.line++,L=h.y=Le(r,this.top+D+u,this.bottom-n[h.line].height));const A=l.x(E);if(b(A,L,C),E=ub(T,E+g+f,_?E+j:this.right,e.rtl),x(l.x(E),L,C),_)h.x+=j+u;else if(typeof C.text!="string"){const F=c.lineHeight;h.y+=af(C,F)}else h.y+=w}),Ld(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ke(n.font),a=je(n.padding);if(!n.display)return;const r=Bn(e.rtl,this.left,this.width),s=this.ctx,o=n.position,l=i.size/2,c=a.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Le(e.align,d,this.right-f);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);u=c+Le(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const h=Le(o,d,d+f);s.textAlign=r.textAlign(co(o)),s.textBaseline="middle",s.strokeStyle=n.color,s.fillStyle=n.color,s.font=i.string,On(s,n.text,h,u,i)}_computeTitleHeight(){const e=this.options.title,n=ke(e.font),i=je(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,a,r;if(Ft(e,this.left,this.right)&&Ft(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(a=r[i],Ft(e,a.left,a.left+a.width)&&Ft(n,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!jx(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,r=Tx(a,i);a&&!r&&oe(n.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!r&&oe(n.onHover,[e,i,this],this)}else i&&oe(n.onClick,[e,i,this],this)}}function Lx(t,e,n,i,a){const r=Rx(i,t,e,n),s=Nx(a,i,e.lineHeight);return{itemWidth:r,itemHeight:s}}function Rx(t,e,n,i){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((r,s)=>r.length>s.length?r:s)),e+n.size/2+i.measureText(a).width}function Nx(t,e,n){let i=t;return typeof e.text!="string"&&(i=af(e,n)),i}function af(t,e){const n=t.text?t.text.length+.5:0;return e*n}function jx(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ur={id:"legend",_element:lc,start(t,e,n){const i=t.legend=new lc({ctx:t.ctx,options:n,chart:t});ct.configure(t,i,n),ct.addBox(t,i)},stop(t){ct.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ct.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,a=n.chart;a.isDatasetVisible(i)?(a.hide(i),e.hidden=!0):(a.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:a,color:r,useBorderRadius:s,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=je(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:a||c.textAlign,borderRadius:s&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class rf extends rn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=fe(i.text)?i.text.length:1;this._padding=je(i.padding);const r=a*ke(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:a,right:r,options:s}=this,o=s.align;let l=0,c,u,d;return this.isHorizontal()?(u=Le(o,i,r),d=n+e,c=r-i):(s.position==="left"?(u=i+e,d=Le(o,a,n),l=pe*-.5):(u=r-e,d=Le(o,n,a),l=pe*.5),c=a-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=ke(n.font),r=i.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(r);On(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:co(n.align),textBaseline:"middle",translation:[s,o]})}}function Ix(t,e){const n=new rf({ctx:t.ctx,options:e,chart:t});ct.configure(t,n,e),ct.addBox(t,n),t.titleBlock=n}var sf={id:"title",_element:rf,start(t,e,n){Ix(t,n)},stop(t){const e=t.titleBlock;ct.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;ct.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const gi={average(t){if(!t.length)return!1;let e,n,i=0,a=0,r=0;for(e=0,n=t.length;e<n;++e){const s=t[e].element;if(s&&s.hasValue()){const o=s.tooltipPosition();i+=o.x,a+=o.y,++r}}return{x:i/r,y:a/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,a=Number.POSITIVE_INFINITY,r,s,o;for(r=0,s=t.length;r<s;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ws(e,c);u<a&&(a=u,o=l)}}if(o){const l=o.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function vt(t,e){return e&&(fe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Tt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Fx(t,e){const{element:n,datasetIndex:i,index:a}=e,r=t.getDatasetMeta(i).controller,{label:s,value:o}=r.getLabelAndValue(a);return{chart:t,label:s,parsed:r.getParsed(a),raw:t.data.datasets[i].data[a],formattedValue:o,dataset:r.getDataset(),dataIndex:a,datasetIndex:i,element:n}}function cc(t,e){const n=t.chart.ctx,{body:i,footer:a,title:r}=t,{boxWidth:s,boxHeight:o}=e,l=ke(e.bodyFont),c=ke(e.titleFont),u=ke(e.footerFont),d=r.length,f=a.length,h=i.length,g=je(e.padding);let p=g.height,m=0,b=i.reduce((D,w)=>D+w.before.length+w.lines.length+w.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const D=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;p+=h*D+(b-h)*l.lineHeight+(b-1)*e.bodySpacing}f&&(p+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let x=0;const _=function(D){m=Math.max(m,n.measureText(D).width+x)};return n.save(),n.font=c.string,ae(t.title,_),n.font=l.string,ae(t.beforeBody.concat(t.afterBody),_),x=e.displayColors?s+2+e.boxPadding:0,ae(i,D=>{ae(D.before,_),ae(D.lines,_),ae(D.after,_)}),x=0,n.font=u.string,ae(t.footer,_),n.restore(),m+=g.width,{width:m,height:p}}function $x(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function Bx(t,e,n,i){const{x:a,width:r}=i,s=n.caretSize+n.caretPadding;if(t==="left"&&a+r+s>e.width||t==="right"&&a-r-s<0)return!0}function Wx(t,e,n,i){const{x:a,width:r}=n,{width:s,chartArea:{left:o,right:l}}=t;let c="center";return i==="center"?c=a<=(o+l)/2?"left":"right":a<=r/2?c="left":a>=s-r/2&&(c="right"),Bx(c,t,e,n)&&(c="center"),c}function uc(t,e,n){const i=n.yAlign||e.yAlign||$x(t,n);return{xAlign:n.xAlign||e.xAlign||Wx(t,e,n,i),yAlign:i}}function Vx(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function Yx(t,e,n){let{y:i,height:a}=t;return e==="top"?i+=n:e==="bottom"?i-=a+n:i-=a/2,i}function dc(t,e,n,i){const{caretSize:a,caretPadding:r,cornerRadius:s}=t,{xAlign:o,yAlign:l}=n,c=a+r,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:h}=xn(s);let g=Vx(e,o);const p=Yx(e,l,c);return l==="center"?o==="left"?g+=c:o==="right"&&(g-=c):o==="left"?g-=Math.max(u,f)+a:o==="right"&&(g+=Math.max(d,h)+a),{x:Ge(g,0,i.width-e.width),y:Ge(p,0,i.height-e.height)}}function ga(t,e,n){const i=je(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function fc(t){return vt([],Tt(t))}function zx(t,e,n){return an(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hc(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const of={beforeTitle:kt,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:kt,beforeBody:kt,beforeLabel:kt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return re(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:kt,afterBody:kt,beforeFooter:kt,footer:kt,afterFooter:kt};function He(t,e,n,i){const a=t[e].call(n,i);return typeof a>"u"?of[e].call(n,i):a}class gc extends rn{static positioners=gi;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&n.options.animation&&i.animations,r=new Id(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=zx(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,a=He(i,"beforeTitle",this,e),r=He(i,"title",this,e),s=He(i,"afterTitle",this,e);let o=[];return o=vt(o,Tt(a)),o=vt(o,Tt(r)),o=vt(o,Tt(s)),o}getBeforeBody(e,n){return fc(He(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,a=[];return ae(e,r=>{const s={before:[],lines:[],after:[]},o=hc(i,r);vt(s.before,Tt(He(o,"beforeLabel",this,r))),vt(s.lines,He(o,"label",this,r)),vt(s.after,Tt(He(o,"afterLabel",this,r))),a.push(s)}),a}getAfterBody(e,n){return fc(He(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,a=He(i,"beforeFooter",this,e),r=He(i,"footer",this,e),s=He(i,"afterFooter",this,e);let o=[];return o=vt(o,Tt(a)),o=vt(o,Tt(r)),o=vt(o,Tt(s)),o}_createItems(e){const n=this._active,i=this.chart.data,a=[],r=[],s=[];let o=[],l,c;for(l=0,c=n.length;l<c;++l)o.push(Fx(this.chart,n[l]));return e.filter&&(o=o.filter((u,d,f)=>e.filter(u,d,f,i))),e.itemSort&&(o=o.sort((u,d)=>e.itemSort(u,d,i))),ae(o,u=>{const d=hc(e.callbacks,u);a.push(He(d,"labelColor",this,u)),r.push(He(d,"labelPointStyle",this,u)),s.push(He(d,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=o,o}update(e,n){const i=this.options.setContext(this.getContext()),a=this._active;let r,s=[];if(!a.length)this.opacity!==0&&(r={opacity:0});else{const o=gi[i.position].call(this,a,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);const l=this._size=cc(this,i),c=Object.assign({},o,l),u=uc(this.chart,i,c),d=dc(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,a){const r=this.getCaretPosition(e,i,a);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:a,yAlign:r}=this,{caretSize:s,cornerRadius:o}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=xn(o),{x:f,y:h}=e,{width:g,height:p}=n;let m,b,x,_,D,w;return r==="center"?(D=h+p/2,a==="left"?(m=f,b=m-s,_=D+s,w=D-s):(m=f+g,b=m+s,_=D-s,w=D+s),x=m):(a==="left"?b=f+Math.max(l,u)+s:a==="right"?b=f+g-Math.max(c,d)-s:b=this.caretX,r==="top"?(_=h,D=_-s,m=b-s,x=b+s):(_=h+p,D=_+s,m=b+s,x=b-s),w=_),{x1:m,x2:b,x3:x,y1:_,y2:D,y3:w}}drawTitle(e,n,i){const a=this.title,r=a.length;let s,o,l;if(r){const c=Bn(i.rtl,this.x,this.width);for(e.x=ga(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",s=ke(i.titleFont),o=i.titleSpacing,n.fillStyle=i.titleColor,n.font=s.string,l=0;l<r;++l)n.fillText(a[l],c.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,l+1===r&&(e.y+=i.titleMarginBottom-o)}}_drawColorBox(e,n,i,a,r){const s=this.labelColors[i],o=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=ke(r.bodyFont),d=ga(this,"left",r),f=a.x(d),h=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+h;if(r.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},m=a.leftForLtr(f,c)+c/2,b=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,yl(e,p,m,b),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,yl(e,p,m,b)}else{e.lineWidth=ee(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const p=a.leftForLtr(f,c),m=a.leftForLtr(a.xPlus(f,1),c-2),b=xn(s.borderRadius);Object.values(b).some(x=>x!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Ci(e,{x:p,y:g,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Ci(e,{x:m,y:g+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(p,g,c,l),e.strokeRect(p,g,c,l),e.fillStyle=s.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:a}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:u}=i,d=ke(i.bodyFont);let f=d.lineHeight,h=0;const g=Bn(i.rtl,this.x,this.width),p=function(M){n.fillText(M,g.x(e.x+h),e.y+f/2),e.y+=f+r},m=g.textAlign(s);let b,x,_,D,w,C,O;for(n.textAlign=s,n.textBaseline="middle",n.font=d.string,e.x=ga(this,m,i),n.fillStyle=i.bodyColor,ae(this.beforeBody,p),h=o&&m!=="right"?s==="center"?c/2+u:c+2+u:0,D=0,C=a.length;D<C;++D){for(b=a[D],x=this.labelTextColors[D],n.fillStyle=x,ae(b.before,p),_=b.lines,o&&_.length&&(this._drawColorBox(n,e,D,g,i),f=Math.max(d.lineHeight,l)),w=0,O=_.length;w<O;++w)p(_[w]),f=d.lineHeight;ae(b.after,p)}h=0,f=d.lineHeight,ae(this.afterBody,p),e.y-=r}drawFooter(e,n,i){const a=this.footer,r=a.length;let s,o;if(r){const l=Bn(i.rtl,this.x,this.width);for(e.x=ga(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",s=ke(i.footerFont),n.fillStyle=i.footerColor,n.font=s.string,o=0;o<r;++o)n.fillText(a[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i.footerSpacing}}drawBackground(e,n,i,a){const{xAlign:r,yAlign:s}=this,{x:o,y:l}=e,{width:c,height:u}=i,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:g}=xn(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(o+d,l),s==="top"&&this.drawCaret(e,n,i,a),n.lineTo(o+c-f,l),n.quadraticCurveTo(o+c,l,o+c,l+f),s==="center"&&r==="right"&&this.drawCaret(e,n,i,a),n.lineTo(o+c,l+u-g),n.quadraticCurveTo(o+c,l+u,o+c-g,l+u),s==="bottom"&&this.drawCaret(e,n,i,a),n.lineTo(o+h,l+u),n.quadraticCurveTo(o,l+u,o,l+u-h),s==="center"&&r==="left"&&this.drawCaret(e,n,i,a),n.lineTo(o,l+d),n.quadraticCurveTo(o,l,o+d,l),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,a=i&&i.x,r=i&&i.y;if(a||r){const s=gi[e.position].call(this,this._active,this._eventPosition);if(!s)return;const o=this._size=cc(this,e),l=Object.assign({},s,this._size),c=uc(n,e,l),u=dc(e,l,c,n);(a._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const s=je(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,a,n),Td(e,n.textDirection),r.y+=s.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Ld(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,a=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),r=!Ta(i,a),s=this._positionChanged(a,n);(r||s)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,r=this._active||[],s=this._getActiveElements(e,r,n,i),o=this._positionChanged(s,e),l=n||!Ta(s,r)||o;return l&&(this._active=s,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,a){const r=this.options;if(e.type==="mouseout")return[];if(!a)return n;const s=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&s.reverse(),s}_positionChanged(e,n){const{caretX:i,caretY:a,options:r}=this,s=gi[r.position].call(this,e,n);return s!==!1&&(i!==s.x||a!==s.y)}}var dr={id:"tooltip",_element:gc,positioners:gi,afterInit(t,e,n){n&&(t.tooltip=new gc({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:of},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Hx=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Ux(t,e,n,i){const a=t.indexOf(e);if(a===-1)return Hx(t,e,n,i);const r=t.lastIndexOf(e);return a!==r?n:a}const qx=(t,e)=>t===null?null:Ge(Math.round(t),0,e);function pc(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class lf extends kn{static id="category";static defaults={ticks:{callback:pc}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:a,label:r}of n)i[a]===r&&i.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(re(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:Ux(i,e,X(n,e),this._addedLabels),qx(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,a=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=e;s<=n;s++)a.push({value:s});return a}getLabelForValue(e){return pc.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Kx(t,e){const n=[],{bounds:a,step:r,min:s,max:o,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,h=r||1,g=u-1,{min:p,max:m}=e,b=!re(s),x=!re(o),_=!re(c),D=(m-p)/(d+1);let w=dl((m-p)/g/h)*h,C,O,M,T;if(w<1e-14&&!b&&!x)return[{value:p},{value:m}];T=Math.ceil(m/w)-Math.floor(p/w),T>g&&(w=dl(T*w/g/h)*h),re(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),a==="ticks"?(O=Math.floor(p/w)*w,M=Math.ceil(m/w)*w):(O=p,M=m),b&&x&&r&&ib((o-s)/r,w/1e3)?(T=Math.round(Math.min((o-s)/w,u)),w=(o-s)/T,O=s,M=o):_?(O=b?s:O,M=x?o:M,T=c-1,w=(M-O)/T):(T=(M-O)/w,bi(T,Math.round(T),w/1e3)?T=Math.round(T):T=Math.ceil(T));const j=Math.max(fl(w),fl(O));C=Math.pow(10,re(l)?j:l),O=Math.round(O*C)/C,M=Math.round(M*C)/C;let E=0;for(b&&(f&&O!==s?(n.push({value:s}),O<s&&E++,bi(Math.round((O+E*w)*C)/C,s,mc(s,D,t))&&E++):O<s&&E++);E<T;++E){const L=Math.round((O+E*w)*C)/C;if(x&&L>o)break;n.push({value:L})}return x&&f&&M!==o?n.length&&bi(n[n.length-1].value,o,mc(o,D,t))?n[n.length-1].value=o:n.push({value:o}):(!x||M===o)&&n.push({value:M}),n}function mc(t,e,{horizontal:n,minRotation:i}){const a=_t(i),r=(n?Math.sin(a):Math.cos(a))||.001,s=.75*e*(""+t).length;return Math.min(e/r,s)}class Ba extends kn{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return re(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:a,max:r}=this;const s=l=>a=n?a:l,o=l=>r=i?r:l;if(e){const l=wt(a),c=wt(r);l<0&&c<0?o(0):l>0&&c>0&&s(0)}if(a===r){let l=r===0?1:Math.abs(r*.05);o(r+l),e||s(a-l)}this.min=a,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,s=Kx(a,r);return e.bounds==="ticks"&&bd(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-n)/Math.max(e.length-1,1)/2;n-=a,i+=a}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return rr(e,this.chart.options.locale,this.options.ticks.format)}}class cf extends Ba{static id="linear";static defaults={ticks:{callback:sr.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=me(e)?e:0,this.max=me(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=_t(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Pi=t=>Math.floor(Kt(t)),pn=(t,e)=>Math.pow(10,Pi(t)+e);function bc(t){return t/Math.pow(10,Pi(t))===1}function vc(t,e,n){const i=Math.pow(10,n),a=Math.floor(t/i);return Math.ceil(e/i)-a}function Gx(t,e){const n=e-t;let i=Pi(n);for(;vc(t,e,i)>10;)i++;for(;vc(t,e,i)<10;)i--;return Math.min(i,Pi(t))}function Xx(t,{min:e,max:n}){e=et(t.min,e);const i=[],a=Pi(e);let r=Gx(e,n),s=r<0?Math.pow(10,Math.abs(r)):1;const o=Math.pow(10,r),l=a>r?Math.pow(10,a):0,c=Math.round((e-l)*s)/s,u=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-u)/Math.pow(10,r)),f=et(t.min,Math.round((l+u+d*Math.pow(10,r))*s)/s);for(;f<n;)i.push({value:f,major:bc(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,s=r>=0?1:s),f=Math.round((l+u+d*Math.pow(10,r))*s)/s;const h=et(t.max,f);return i.push({value:h,major:bc(h),significand:d}),i}class c1 extends kn{static id="logarithmic";static defaults={ticks:{callback:sr.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Ba.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return me(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=me(e)?Math.max(0,e):null,this.max=me(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!me(this._userMin)&&(this.min=e===pn(this.min,0)?pn(this.min,-1):pn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,a=this.max;const r=o=>i=e?i:o,s=o=>a=n?a:o;i===a&&(i<=0?(r(1),s(10)):(r(pn(i,-1)),s(pn(a,1)))),i<=0&&r(pn(a,-1)),a<=0&&s(pn(i,1)),this.min=i,this.max=a}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=Xx(n,this);return e.bounds==="ticks"&&bd(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":rr(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Kt(e),this._valueRange=Kt(this.max)-Kt(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Kt(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function Ps(t){const e=t.ticks;if(e.display&&t.display){const n=je(e.backdropPadding);return X(e.font&&e.font.size,ve.font.size)+n.height}return 0}function Zx(t,e,n){return n=fe(n)?n:[n],{w:xb(t,e.string,n),h:n.length*e.lineHeight}}function yc(t,e,n,i,a){return t===i||t===a?{start:e-n/2,end:e+n/2}:t<i||t>a?{start:e-n,end:e}:{start:e,end:e+n}}function Qx(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],a=[],r=t._pointLabels.length,s=t.options.pointLabels,o=s.centerPointLabels?pe/r:0;for(let l=0;l<r;l++){const c=s.setContext(t.getPointLabelContext(l));a[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+a[l],o),d=ke(c.font),f=Zx(t.ctx,d,t._pointLabels[l]);i[l]=f;const h=tt(t.getIndexAngle(l)+o),g=Math.round(oo(h)),p=yc(g,u.x,f.w,0,180),m=yc(g,u.y,f.h,90,270);Jx(n,e,h,p,m)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=n0(t,i,a)}function Jx(t,e,n,i,a){const r=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let o=0,l=0;i.start<e.l?(o=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-o)):i.end>e.r&&(o=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+o)),a.start<e.t?(l=(e.t-a.start)/s,t.t=Math.min(t.t,e.t-l)):a.end>e.b&&(l=(a.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function e0(t,e,n){const i=t.drawingArea,{extra:a,additionalAngle:r,padding:s,size:o}=n,l=t.getPointPosition(e,i+a+s,r),c=Math.round(oo(tt(l.angle+be))),u=r0(l.y,o.h,c),d=i0(c),f=a0(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+o.w,bottom:u+o.h}}function t0(t,e){if(!e)return!0;const{left:n,top:i,right:a,bottom:r}=t;return!(Gt({x:n,y:i},e)||Gt({x:n,y:r},e)||Gt({x:a,y:i},e)||Gt({x:a,y:r},e))}function n0(t,e,n){const i=[],a=t._pointLabels.length,r=t.options,{centerPointLabels:s,display:o}=r.pointLabels,l={extra:Ps(r)/2,additionalAngle:s?pe/a:0};let c;for(let u=0;u<a;u++){l.padding=n[u],l.size=e[u];const d=e0(t,u,l);i.push(d),o==="auto"&&(d.visible=t0(d,c),d.visible&&(c=d))}return i}function i0(t){return t===0||t===180?"center":t<180?"left":"right"}function a0(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function r0(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function s0(t,e,n){const{left:i,top:a,right:r,bottom:s}=n,{backdropColor:o}=e;if(!re(o)){const l=xn(e.borderRadius),c=je(e.backdropPadding);t.fillStyle=o;const u=i-c.left,d=a-c.top,f=r-i+c.width,h=s-a+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),Ci(t,{x:u,y:d,w:f,h,radius:l}),t.fill()):t.fillRect(u,d,f,h)}}function o0(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let a=e-1;a>=0;a--){const r=t._pointLabelItems[a];if(!r.visible)continue;const s=i.setContext(t.getPointLabelContext(a));s0(n,s,r);const o=ke(s.font),{x:l,y:c,textAlign:u}=r;On(n,t._pointLabels[a],l,c+o.lineHeight/2,o,{color:s.color,textAlign:u,textBaseline:"middle"})}}function uf(t,e,n,i){const{ctx:a}=t;if(n)a.arc(t.xCenter,t.yCenter,e,0,ue);else{let r=t.getPointPosition(0,e);a.moveTo(r.x,r.y);for(let s=1;s<i;s++)r=t.getPointPosition(s,e),a.lineTo(r.x,r.y)}}function l0(t,e,n,i,a){const r=t.ctx,s=e.circular,{color:o,lineWidth:l}=e;!s&&!i||!o||!l||n<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(a.dash),r.lineDashOffset=a.dashOffset,r.beginPath(),uf(t,n,s,i),r.closePath(),r.stroke(),r.restore())}function c0(t,e,n){return an(t,{label:n,index:e,type:"pointLabel"})}class u1 extends Ba{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sr.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=je(Ps(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=me(e)&&!isNaN(e)?e:0,this.max=me(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ps(this.options))}generateTickLabels(e){Ba.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const a=oe(this.options.pointLabels.callback,[n,i],this);return a||a===0?a:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Qx(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,a){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,a))}getIndexAngle(e){const n=ue/(this._pointLabels.length||1),i=this.options.startAngle||0;return tt(e*n+_t(i))}getDistanceFromCenterForValue(e){if(re(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(re(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return c0(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const a=this.getIndexAngle(e)-be+i;return{x:Math.cos(a)*n+this.xCenter,y:Math.sin(a)*n+this.yCenter,angle:a}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:a,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:a,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),uf(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:a,border:r}=n,s=this._pointLabels.length;let o,l,c;if(n.pointLabels.display&&o0(this,s),a.display&&this.ticks.forEach((u,d)=>{if(d!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),h=a.setContext(f),g=r.setContext(f);l0(this,h,l,s,g)}}),i.display){for(e.save(),o=s-1;o>=0;o--){const u=i.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const a=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=ke(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,s=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=je(c.backdropPadding);e.fillRect(-s/2-d.left,-r-u.size/2-d.top,s+d.width,u.size+d.height)}On(e,o.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}const fr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ke=Object.keys(fr);function u0(t,e){return t-e}function xc(t,e){if(re(e))return null;const n=t._adapter,{parser:i,round:a,isoWeekday:r}=t._parseOpts;let s=e;return typeof i=="function"&&(s=i(s)),me(s)||(s=typeof i=="string"?n.parse(s,i):n.parse(s)),s===null?null:(a&&(s=a==="week"&&(Na(r)||r===!0)?n.startOf(s,"isoWeek",r):n.startOf(s,a)),+s)}function _c(t,e,n,i){const a=Ke.length;for(let r=Ke.indexOf(t);r<a-1;++r){const s=fr[Ke[r]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((n-e)/(o*s.size))<=i)return Ke[r]}return Ke[a-1]}function d0(t,e,n,i,a){for(let r=Ke.length-1;r>=Ke.indexOf(n);r--){const s=Ke[r];if(fr[s].common&&t._adapter.diff(a,i,s)>=e-1)return s}return Ke[n?Ke.indexOf(n):0]}function f0(t){for(let e=Ke.indexOf(t)+1,n=Ke.length;e<n;++e)if(fr[Ke[e]].common)return Ke[e]}function wc(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:a}=lo(n,e),r=n[i]>=e?n[i]:n[a];t[r]=!0}}function h0(t,e,n,i){const a=t._adapter,r=+a.startOf(e[0].value,i),s=e[e.length-1].value;let o,l;for(o=r;o<=s;o=+a.add(o,1,i))l=n[o],l>=0&&(e[l].major=!0);return e}function Dc(t,e,n){const i=[],a={},r=e.length;let s,o;for(s=0;s<r;++s)o=e[s],a[o]=s,i.push({value:o,major:!1});return r===0||!n?i:h0(t,i,a,n)}class Sc extends kn{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),a=this._adapter=new Fv._date(e.adapters.date);a.init(n),mi(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:xc(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:a,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function l(c){!s&&!isNaN(c.min)&&(a=Math.min(a,c.min)),!o&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!s||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),a=me(a)&&!isNaN(a)?a:+n.startOf(Date.now(),i),r=me(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const r=this.min,s=this.max,o=ob(a,r,s);return this._unit=n.unit||(i.autoSkip?_c(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):d0(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:f0(this._unit),this.initOffsets(a),e.reverse&&o.reverse(),Dc(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,a,r;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;n=Ge(n,0,s),i=Ge(i,0,s),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,a=this.options,r=a.time,s=r.unit||_c(r.minUnit,n,i,this._getLabelCapacity(n)),o=X(a.ticks.stepSize,1),l=s==="week"?r.isoWeekday:!1,c=Na(l)||l===!0,u={};let d=n,f,h;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":s),e.diff(i,n,s)>1e5*o)throw new Error(n+" and "+i+" are too far apart with stepSize of "+o+" "+s);const g=a.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<i;f=+e.add(f,o,s),h++)wc(u,f,g);return(f===i||a.bounds==="ticks"||h===1)&&wc(u,f,g),Object.keys(u).sort((p,m)=>p-m).map(p=>+p)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,r=this._unit,s=n||a[r];return this._adapter.format(e,s)}_tickFormatFunction(e,n,i,a){const r=this.options,s=r.ticks.callback;if(s)return oe(s,[e,n,i],this);const o=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&o[l],d=c&&o[c],f=i[n],h=c&&d&&f&&f.major;return this._adapter.format(e,a||(h?d:u))}generateTickLabels(e){let n,i,a;for(n=0,i=e.length;n<i;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,a=_t(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(a),s=Math.sin(a),o=this._resolveTickFontOptions(0).size;return{w:i*r+o*s,h:i*s+o*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,a=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Dc(this,[e],this._majorUnit),a),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,i=a.length;n<i;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const a=this.getLabels();for(n=0,i=a.length;n<i;++n)e.push(xc(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return xd(e.sort(u0))}}function pa(t,e,n){let i=0,a=t.length-1,r,s,o,l;n?(e>=t[i].pos&&e<=t[a].pos&&({lo:i,hi:a}=Ds(t,"pos",e)),{pos:r,time:o}=t[i],{pos:s,time:l}=t[a]):(e>=t[i].time&&e<=t[a].time&&({lo:i,hi:a}=Ds(t,"time",e)),{time:r,pos:o}=t[i],{time:s,pos:l}=t[a]);const c=s-r;return c?o+(l-o)*(e-r)/c:o}class d1 extends Sc{static id="timeseries";static defaults=Sc.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=pa(n,this.min),this._tableRange=pa(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,a=[],r=[];let s,o,l,c,u;for(s=0,o=e.length;s<o;++s)c=e[s],c>=n&&c<=i&&a.push(c);if(a.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(s=0,o=a.length;s<o;++s)u=a[s+1],l=a[s-1],c=a[s],Math.round((u+l)/2)!==c&&r.push({time:c,pos:s/(o-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(pa(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return pa(this._table,i*this._tableRange+this._minPos,!0)}}const df="label";function Oc(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function g0(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ff(t,e){t.labels=e}function hf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:df;const i=[];t.datasets=e.map(a=>{const r=t.datasets.find(s=>s[n]===a[n]);return!r||!a.data||i.includes(r)?{...a}:(i.push(r),Object.assign(r,a),r)})}function p0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:df;const n={labels:[],datasets:[]};return ff(n,t.labels),hf(n,t.datasets,e),n}function hr(t,e){return t.getElementsAtEventForMode(e.nativeEvent,"nearest",{intersect:!0},!1)}function m0(t,e){const{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:r,type:s,data:o,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...f}=t,h=y.useRef(null),g=y.useRef(),p=()=>{h.current&&(g.current=new Pn(h.current,{type:s,data:p0(o,r),options:l&&{...l},plugins:c}),Oc(e,g.current))},m=()=>{Oc(e,null),g.current&&(g.current.destroy(),g.current=null)};return y.useEffect(()=>{!a&&g.current&&l&&g0(g.current,l)},[a,l]),y.useEffect(()=>{!a&&g.current&&ff(g.current.config.data,o.labels)},[a,o.labels]),y.useEffect(()=>{!a&&g.current&&o.datasets&&hf(g.current.config.data,o.datasets,r)},[a,o.datasets]),y.useEffect(()=>{g.current&&(a?(m(),setTimeout(p)):g.current.update(d))},[a,l,o.labels,o.datasets,d]),y.useEffect(()=>{g.current&&(m(),setTimeout(p))},[s]),y.useEffect(()=>(p(),()=>m()),[]),I.createElement("canvas",Object.assign({ref:h,role:"img",height:n,width:i},f),u)}const b0=y.forwardRef(m0);function gf(t,e){return Pn.register(e),y.forwardRef((n,i)=>I.createElement(b0,Object.assign({},n,{ref:i,type:t})))}const pf=gf("bar",Rv),mf=gf("pie",Iv);function Hi({children:t}){return v.jsx("div",{className:"relative flex flex-col items-center flex-1 gap-4 px-2 py-4 border rounded-md shadow-lg basis-52 border-slate-500 bg-slate-100",children:t})}const Ui=({children:t})=>v.jsx("h3",{className:"relative text-xl font-semibold",children:t}),bf=({children:t})=>v.jsx("div",{className:"text-lg",children:t}),gr={grape:"#3F3A60bb",bluejeans:"#00A6FBbb",orange:"#FF5100bb",yellow:"#F1D302bb",persiangreen:"#17A398bb",pink:"#FF579Fbb",seagreen:"#09814Abb"};function qi({card:t}){const{settings:e,setSettings:n}=dd(),i=()=>{const a=e.filter(r=>r!==t);n(a)};return v.jsx("button",{onClick:i,className:"absolute top-0 right-0 px-1 py-2",children:v.jsx(Fu,{stroke:"hsl(0 0% 0% / .3)",width:16})})}Pn.register(Gd,dr,ur,nf);const v0={labels:[],datasets:[{label:"Locations",data:[],backgroundColor:Object.values(gr)}]};function y0(){const t=y.useRef(),{state:e}=nn(),{state:n,dispatch:i}=Fe(),[a,r]=y.useState();I.useEffect(()=>{const l=JSON.parse(JSON.stringify(v0)),c=e.reduce((u,d)=>{if(!d.location)return u;const f=u.labels.indexOf(d.location);return f===-1?(u.labels.push(d.location),u.datasets[0].data.push(1),u):(u.datasets[0].data[f]=u.datasets[0].data[f]+1,u)},l);r(c)},[e]);const s=l=>{if(!t?.current)return;const c=hr(t.current,l);if(!c.length)return;const{index:u}=c[0];return a?.labels[u]},o=l=>{const c=s(l);if(!c)return;const u=n.map(d=>d.order).length;i({type:"upsert",filter:{order:u,filter:"location",label:"At",arg:c}})};return a?v.jsxs(Hi,{children:[v.jsx(Ui,{children:"Locations"}),v.jsx(qi,{card:"locations"}),v.jsx(mf,{ref:t,updateMode:"show",data:a,options:{responsive:!0,plugins:{title:{display:!1},legend:{display:!1}}},onClick:o}),v.jsxs(bf,{children:["Total: ",a.labels.length]})]}):null}Pn.register(Gd,dr,ur,nf);const Mc={labels:[],datasets:[{label:"Players",data:[],backgroundColor:Object.values(gr)}]};function x0(){const t=y.useRef(),{state:e}=nn(),{state:n,dispatch:i}=Fe(),[a,r]=y.useState(),[s,o]=y.useState(0);I.useEffect(()=>{JSON.parse(JSON.stringify(Mc));const u=e.reduce((p,m)=>(m.players.length&&m.players.map(b=>{const{name:x,username:_}=b;if(!x)return p;p[x]?p[x]+=1:p[x]=1}),p),{}),d=Object.keys(u).length;o(d);const f=Object.values(u).reduce((p,m)=>p+m,0),h=Object.entries(u).reduce((p,m)=>{const[b,x]=m;return x/f*100<.5?(p.Other?p.Other+=x:p.Other=x,p):(p[b]=x,p)},{}),g=JSON.parse(JSON.stringify(Mc));g.labels=Object.keys(h),g.datasets[0].data=Object.values(h),r(g)},[e]);const l=u=>{if(!t?.current)return;const d=hr(t.current,u);if(!d.length)return;const{datasetIndex:f,index:h}=d[0];return a?.labels[h]},c=u=>{const d=l(u);if(!d||d==="Other")return;const f=n.map(h=>h.order).length;i({type:"upsert",filter:{order:f,filter:"withPlayerName",label:"With player",arg:d}})};return a?v.jsxs(Hi,{children:[v.jsx(Ui,{children:"Players"}),v.jsx(qi,{card:"players"}),v.jsx(mf,{ref:t,id:"players",updateMode:"show",data:a,options:{responsive:!0,plugins:{title:{display:!1},legend:{display:!1}}},onMouseMove:u=>{if(!t?.current)return;if(l(u)=="Other"){t.current.canvas.style.cursor="default";return}else{t.current.canvas.style.cursor="pointer";return}},onClick:c}),v.jsxs(bf,{children:["Total: ",s]})]}):null}function _0(){const{state:t}=nn(),[e,n]=y.useState(0),i=y.useCallback(async()=>{try{const a=t.reduce((r,s)=>s.quantity?r+s.quantity:r+1,0);n(a)}catch(a){console.error(a)}},[t]);return y.useEffect(()=>{i()},[i]),v.jsxs(Hi,{children:[v.jsx(Ui,{children:"Total Plays"}),v.jsx(qi,{card:"recordedPlays"}),v.jsx("div",{className:"flex items-center justify-center text-4xl font-semibold grow",children:e.toLocaleString("en-US")})]})}const w0={screen:"year",year:null,month:null,days:[],filterOrder:null},D0=(t,e)=>{switch(e.type){case"setScreen":return{...t,screen:e.payload};case"setYear":return{...t,year:e.payload};case"setMonth":return{...t,month:e.payload};case"setDays":return{...t,days:e.payload};case"setFilterOrder":return{...t,filterOrder:e.payload};default:throw new Error(`Unhandled action type: ${e.type}`)}},vf=I.createContext(void 0),S0=({children:t})=>{const[e,n]=I.useReducer(D0,w0),l={state:e,dispatch:n,setScreen:c=>{n({type:"setScreen",payload:c})},setYear:c=>{n({type:"setYear",payload:c})},setMonth:c=>{n({type:"setMonth",payload:c})},setDays:c=>{n({type:"setDays",payload:c})},setFilterOrder:c=>{n({type:"setFilterOrder",payload:c})}};return v.jsx(vf.Provider,{value:l,children:t})};function sn(){const t=I.useContext(vf);if(t===void 0)throw new Error("useCalendarScreenContext must be used within a CalendarScreenProvider");return t}function O0(){const{state:{screen:t,filterOrder:e,year:n},setScreen:i,setYear:a,setMonth:r,setDays:s}=sn(),{state:o,dispatch:l,removeFilter:c}=Fe(),u=()=>{const d=e&&o[e];if(d)switch(t){case"months":i("year"),a(null),c(d);break;case"month":i("months"),r(null),s([]);const f=`${n}-01-01`,h=`${n}-12-31`;l({type:"upsert",filter:{...d,arg:[f,h]}});break;default:i("year")}};return t==="year"?null:v.jsx("button",{className:"absolute left-0 top-[1.15rem]",onClick:u,children:v.jsx(Za,{})})}const M0=t=>t.reduce((n,i)=>{const a=Re(i.date);let r=a.format("YYYY"),s=a.format("MMM"),o=a.month(),l=n.findIndex(d=>d.year===r);if(l===-1)return n.push({year:r,count:1,months:[{month:s,count:1,monthNum:o,dates:[i.date]}]}),n;let c=n[l].months.findIndex(d=>d.month===s);return c===-1?(n[l].months.push({month:s,count:1,monthNum:o,dates:[i.date]}),n[l].count+=1,n):(n[l].months[c].dates.findIndex(d=>d===i.date)===-1&&(n[l].count+=1,n[l].months[c].dates.push(i.date),n[l].months[c].count+=1),n)},[]);function C0(t){const e=t.map(i=>i.year.toString()),n=t.map(i=>i.count);return{labels:e,datasets:[{label:"# of Dates",data:n,backgroundColor:Object.values(gr)}]}}Pn.register(lf,cf,Jd,sf,dr,ur);const k0={indexAxis:"y",updateMode:"show",responsive:!0,aspectRatio:.8,plugins:{legend:{display:!1,position:"top"},title:{display:!1,text:"Years"}}},Cc=(t,e,n)=>{if(!e?.current)return;const i=hr(e.current,t);if(!i.length)return;const{index:a}=i[0];return n?.labels[a]};function yf({data:t,setYear:e,setFilterOrder:n}){const{state:i,dispatch:a}=Fe(),{setScreen:r}=sn(),s=y.useRef(null),o=C0(t),l=u=>{const d=Cc(u,s,o);if(!d)return;const f=i.findIndex(m=>m.filter==="betweenDates"),h=f!==-1?f:i.length;n(h);const g=`${d}-01-01`,p=`${d}-12-31`;r("months"),e(parseInt(d)),a({type:"upsert",filter:{order:h,filter:"betweenDates",label:"Between",arg:[g,p]}})},c=u=>{if(!s?.current)return;Cc(u,s,o)?s.current.canvas.style.cursor="pointer":s.current.canvas.style.cursor="default"};return v.jsx("div",{style:{width:"100%"},children:v.jsx(pf,{ref:s,data:o,options:k0,onClick:l,onMouseMove:c})})}function P0(t){const e=t[0]?.months||[],n=e.map(a=>a.month),i=e.map(a=>a.count);return{labels:n,datasets:[{label:"# of Dates",data:i,backgroundColor:Object.values(gr)}]}}const _o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"};Pn.register(lf,cf,Jd,sf,dr,ur);const E0={indexAxis:"y",updateMode:"show",responsive:!0,aspectRatio:.8,plugins:{legend:{display:!1,position:"top"},title:{display:!1,text:"Months"}}},kc=(t,e,n)=>{if(!e?.current)return;const i=hr(e?.current,t);if(!i.length)return;const{index:a}=i[0];return n?.labels[a]};function xf({data:t}){const{state:e,dispatch:n}=Fe(),{state:{year:i},setMonth:a,setScreen:r}=sn(),s=y.useRef(null),o=P0(t),l=u=>{const d=kc(u,s,o);if(!d)return;a(d),r("month");const f=e.findIndex(x=>x.filter==="betweenDates"),h=f!==-1?f:e.length,g=_o[d],p=Re(`${i}-${g}-01`).endOf("month").date(),m=`${i}-${g}-01`,b=`${i}-${g}-${p}`;n({type:"upsert",filter:{order:h,filter:"betweenDates",label:"Between",arg:[m,b]}})},c=u=>{if(!s?.current)return;kc(u,s,o)?s.current.canvas.style.cursor="pointer":s.current.canvas.style.cursor="default"};return v.jsx("div",{style:{width:"100%"},children:v.jsx(pf,{ref:s,data:o,options:E0,onClick:l,onMouseMove:c})})}function _f({data:t,year:e,month:n}){return!t||!e||!n?null:t.months.find(a=>a.month===n)?.dates}var qe={},wo={},pr={},V={},Ki={};(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.WEEKDAYS=t.CALENDAR_TYPE_LOCALES=t.DEPRECATED_CALENDAR_TYPES=t.CALENDAR_TYPES=void 0,t.CALENDAR_TYPES={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},t.DEPRECATED_CALENDAR_TYPES={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},t.CALENDAR_TYPE_LOCALES=(e={},e[t.CALENDAR_TYPES.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],e[t.CALENDAR_TYPES.HEBREW]=["he","he-IL"],e[t.CALENDAR_TYPES.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],e),t.WEEKDAYS=[0,1,2,3,4,5,6]})(Ki);var de={},A0=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(de,"__esModule",{value:!0});de.formatYear=de.formatWeekday=de.formatShortWeekday=de.formatMonthYear=de.formatMonth=de.formatLongDate=de.formatDay=de.formatDate=void 0;var T0=A0($u),Zr=new Map;function L0(t){return function(n,i){var a=n||(0,T0.default)();Zr.has(a)||Zr.set(a,new Map);var r=Zr.get(a);return r.has(t)||r.set(t,new Intl.DateTimeFormat(a||void 0,t).format),r.get(t)(i)}}function R0(t){var e=new Date(t);return new Date(e.setHours(12))}function on(t){return function(e,n){return L0(t)(e,R0(n))}}var N0={day:"numeric",month:"numeric",year:"numeric"},j0={day:"numeric"},I0={day:"numeric",month:"long",year:"numeric"},F0={month:"long"},$0={month:"long",year:"numeric"},B0={weekday:"short"},W0={weekday:"long"},V0={year:"numeric"};de.formatDate=on(N0);de.formatDay=on(j0);de.formatLongDate=on(I0);de.formatMonth=on(F0);de.formatMonthYear=on($0);de.formatShortWeekday=on(B0);de.formatWeekday=on(W0);de.formatYear=on(V0);Object.defineProperty(V,"__esModule",{value:!0});V.isWeekend=V.isCurrentDayOfWeek=V.getDecadeLabel=V.getCenturyLabel=V.getValueRange=V.getRange=V.getEndPrevious2=V.getEndPrevious=V.getEnd=V.getBeginNext2=V.getBeginPrevious2=V.getBeginNext=V.getBeginPrevious=V.getBegin=V.getWeekNumber=V.getBeginOfWeek=V.getBeginOfDecadeYear=V.getBeginOfCenturyYear=V.getDayOfWeek=void 0;var U=Q,Ce=Ki,Y0=de,z0=Ce.WEEKDAYS[0],H0=Ce.WEEKDAYS[5],Pc=Ce.WEEKDAYS[6];function wf(t,e){e===void 0&&(e=Ce.CALENDAR_TYPES.ISO_8601);var n=t.getDay();switch(e){case Ce.CALENDAR_TYPES.ISO_8601:return(n+6)%7;case Ce.CALENDAR_TYPES.ISLAMIC:return(n+1)%7;case Ce.CALENDAR_TYPES.HEBREW:case Ce.CALENDAR_TYPES.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}V.getDayOfWeek=wf;function U0(t){var e=(0,U.getCenturyStart)(t);return(0,U.getYear)(e)}V.getBeginOfCenturyYear=U0;function q0(t){var e=(0,U.getDecadeStart)(t);return(0,U.getYear)(e)}V.getBeginOfDecadeYear=q0;function Es(t,e){e===void 0&&(e=Ce.CALENDAR_TYPES.ISO_8601);var n=(0,U.getYear)(t),i=(0,U.getMonth)(t),a=t.getDate()-wf(t,e);return new Date(n,i,a)}V.getBeginOfWeek=Es;function K0(t,e){e===void 0&&(e=Ce.CALENDAR_TYPES.ISO_8601);var n=e===Ce.CALENDAR_TYPES.GREGORY?Ce.CALENDAR_TYPES.GREGORY:Ce.CALENDAR_TYPES.ISO_8601,i=Es(t,e),a=(0,U.getYear)(t)+1,r,s;do r=new Date(a,0,n===Ce.CALENDAR_TYPES.ISO_8601?4:1),s=Es(r,e),a-=1;while(t<s);return Math.round((i.getTime()-s.getTime())/(864e5*7))+1}V.getWeekNumber=K0;function Df(t,e){switch(t){case"century":return(0,U.getCenturyStart)(e);case"decade":return(0,U.getDecadeStart)(e);case"year":return(0,U.getYearStart)(e);case"month":return(0,U.getMonthStart)(e);case"day":return(0,U.getDayStart)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getBegin=Df;function G0(t,e){switch(t){case"century":return(0,U.getPreviousCenturyStart)(e);case"decade":return(0,U.getPreviousDecadeStart)(e);case"year":return(0,U.getPreviousYearStart)(e);case"month":return(0,U.getPreviousMonthStart)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getBeginPrevious=G0;function X0(t,e){switch(t){case"century":return(0,U.getNextCenturyStart)(e);case"decade":return(0,U.getNextDecadeStart)(e);case"year":return(0,U.getNextYearStart)(e);case"month":return(0,U.getNextMonthStart)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getBeginNext=X0;function Z0(t,e){switch(t){case"decade":return(0,U.getPreviousDecadeStart)(e,-100);case"year":return(0,U.getPreviousYearStart)(e,-10);case"month":return(0,U.getPreviousMonthStart)(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getBeginPrevious2=Z0;function Q0(t,e){switch(t){case"decade":return(0,U.getNextDecadeStart)(e,100);case"year":return(0,U.getNextYearStart)(e,10);case"month":return(0,U.getNextMonthStart)(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getBeginNext2=Q0;function Sf(t,e){switch(t){case"century":return(0,U.getCenturyEnd)(e);case"decade":return(0,U.getDecadeEnd)(e);case"year":return(0,U.getYearEnd)(e);case"month":return(0,U.getMonthEnd)(e);case"day":return(0,U.getDayEnd)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getEnd=Sf;function J0(t,e){switch(t){case"century":return(0,U.getPreviousCenturyEnd)(e);case"decade":return(0,U.getPreviousDecadeEnd)(e);case"year":return(0,U.getPreviousYearEnd)(e);case"month":return(0,U.getPreviousMonthEnd)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getEndPrevious=J0;function e_(t,e){switch(t){case"decade":return(0,U.getPreviousDecadeEnd)(e,-100);case"year":return(0,U.getPreviousYearEnd)(e,-10);case"month":return(0,U.getPreviousMonthEnd)(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getEndPrevious2=e_;function t_(t,e){switch(t){case"century":return(0,U.getCenturyRange)(e);case"decade":return(0,U.getDecadeRange)(e);case"year":return(0,U.getYearRange)(e);case"month":return(0,U.getMonthRange)(e);case"day":return(0,U.getDayRange)(e);default:throw new Error("Invalid rangeType: ".concat(t))}}V.getRange=t_;function n_(t,e,n){var i=[e,n].sort(function(a,r){return a.getTime()-r.getTime()});return[Df(t,i[0]),Sf(t,i[1])]}V.getValueRange=n_;function Of(t,e,n){return e===void 0&&(e=Y0.formatYear),n.map(function(i){return e(t,i)}).join(" – ")}function i_(t,e,n){return Of(t,e,(0,U.getCenturyRange)(n))}V.getCenturyLabel=i_;function a_(t,e,n){return Of(t,e,(0,U.getDecadeRange)(n))}V.getDecadeLabel=a_;function r_(t){return t.getDay()===new Date().getDay()}V.isCurrentDayOfWeek=r_;function s_(t,e){e===void 0&&(e=Ce.CALENDAR_TYPES.ISO_8601);var n=t.getDay();switch(e){case Ce.CALENDAR_TYPES.ISLAMIC:case Ce.CALENDAR_TYPES.HEBREW:return n===H0||n===Pc;case Ce.CALENDAR_TYPES.ISO_8601:case Ce.CALENDAR_TYPES.GREGORY:return n===Pc||n===z0;default:throw new Error("Unsupported calendar type.")}}V.isWeekend=s_;var Be={};(function(t){var e=P&&P.__spreadArray||function(f,h,g){if(g||arguments.length===2)for(var p=0,m=h.length,b;p<m;p++)(b||!(p in h))&&(b||(b=Array.prototype.slice.call(h,0,p)),b[p]=h[p]);return f.concat(b||Array.prototype.slice.call(h))},n=P&&P.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.tileProps=t.tileGroupProps=t.rangeOf=t.isView=t.isViews=t.isValue=t.isRef=t.isMaxDate=t.isMinDate=t.isClassName=t.isCalendarType=void 0;var i=n($e),a=Ki,r=Object.values(a.CALENDAR_TYPES),s=Object.values(a.DEPRECATED_CALENDAR_TYPES),o=["century","decade","year","month"];t.isCalendarType=i.default.oneOf(e(e([],r,!0),s,!0)),t.isClassName=i.default.oneOfType([i.default.string,i.default.arrayOf(i.default.string)]);var l=function(h,g,p){var m=h,b=g,x=m[b];if(!x)return null;if(!(x instanceof Date))return new Error("Invalid prop `".concat(g,"` of type `").concat(typeof x,"` supplied to `").concat(p,"`, expected instance of `Date`."));var _=h.maxDate;return _&&x>_?new Error("Invalid prop `".concat(g,"` of type `").concat(typeof x,"` supplied to `").concat(p,"`, minDate cannot be larger than maxDate.")):null};t.isMinDate=l;var c=function(h,g,p){var m=h,b=g,x=m[b];if(!x)return null;if(!(x instanceof Date))return new Error("Invalid prop `".concat(g,"` of type `").concat(typeof x,"` supplied to `").concat(p,"`, expected instance of `Date`."));var _=h.minDate;return _&&x<_?new Error("Invalid prop `".concat(g,"` of type `").concat(typeof x,"` supplied to `").concat(p,"`, maxDate cannot be smaller than minDate.")):null};t.isMaxDate=c,t.isRef=i.default.oneOfType([i.default.func,i.default.exact({current:i.default.any})]),t.isValue=i.default.oneOfType([i.default.instanceOf(Date),i.default.arrayOf(i.default.instanceOf(Date))]),t.isViews=i.default.arrayOf(i.default.oneOf(o));var u=function(h,g,p){var m=h,b=g,x=m[b];return x!==void 0&&(typeof x!="string"||o.indexOf(x)===-1)?new Error("Invalid prop `".concat(g,"` of value `").concat(x,"` supplied to `").concat(p,"`, expected one of [").concat(o.map(function(_){return'"'.concat(_,'"')}).join(", "),"].")):null};t.isView=u,t.isView.isRequired=function(h,g,p,m,b){var x=h,_=g,D=x[_];return D?(0,t.isView)(h,g,p,m,b):new Error("The prop `".concat(g,"` is marked as required in `").concat(p,"`, but its value is `").concat(D,"`."))};var d=function(f){return i.default.arrayOf(f)};t.rangeOf=d,t.tileGroupProps={activeStartDate:i.default.instanceOf(Date).isRequired,hover:i.default.instanceOf(Date),locale:i.default.string,maxDate:t.isMaxDate,minDate:t.isMinDate,onClick:i.default.func,onMouseOver:i.default.func,tileClassName:i.default.oneOfType([i.default.func,t.isClassName]),tileContent:i.default.oneOfType([i.default.func,i.default.node]),value:t.isValue,valueType:i.default.string},t.tileProps={activeStartDate:i.default.instanceOf(Date).isRequired,classes:i.default.arrayOf(i.default.string).isRequired,date:i.default.instanceOf(Date).isRequired,locale:i.default.string,maxDate:t.isMaxDate,minDate:t.isMinDate,onClick:i.default.func,onMouseOver:i.default.func,style:i.default.objectOf(i.default.oneOfType([i.default.string,i.default.number])),tileClassName:i.default.oneOfType([i.default.func,t.isClassName]),tileContent:i.default.oneOfType([i.default.func,i.default.node]),tileDisabled:i.default.func}})(Be);var Mf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pr,"__esModule",{value:!0});var ht=Mf(y),De=Mf($e),o_=$u,zt=V,Ec=de,Ac=Be,mt="react-calendar__navigation";function Cf(t){var e=t.activeStartDate,n=t.drillUp,i=t.formatMonthYear,a=i===void 0?Ec.formatMonthYear:i,r=t.formatYear,s=r===void 0?Ec.formatYear:r,o=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,d=u===void 0?"":u,f=t.navigationAriaLive,h=t.navigationLabel,g=t.next2AriaLabel,p=g===void 0?"":g,m=t.next2Label,b=m===void 0?"»":m,x=t.nextAriaLabel,_=x===void 0?"":x,D=t.nextLabel,w=D===void 0?"›":D,C=t.prev2AriaLabel,O=C===void 0?"":C,M=t.prev2Label,T=M===void 0?"«":M,j=t.prevAriaLabel,E=j===void 0?"":j,L=t.prevLabel,A=L===void 0?"‹":L,F=t.setActiveStartDate,R=t.showDoubleView,k=t.view,$=t.views,H=$.indexOf(k)>0,q=k!=="century",K=(0,zt.getBeginPrevious)(k,e),ie=q?(0,zt.getBeginPrevious2)(k,e):void 0,ne=(0,zt.getBeginNext)(k,e),ye=q?(0,zt.getBeginNext2)(k,e):void 0,Y=function(){if(K.getFullYear()<0)return!0;var le=(0,zt.getEndPrevious)(k,e);return c&&c>=le}(),G=q&&function(){if(ie.getFullYear()<0)return!0;var le=(0,zt.getEndPrevious2)(k,e);return c&&c>=le}(),te=l&&l<ne,Pe=q&&l&&l<ye;function Xe(){F(K,"prev")}function Ze(){F(ie,"prev2")}function Wt(){F(ne,"next")}function Ot(){F(ye,"next2")}function Ee(le){var st=function(){switch(k){case"century":return(0,zt.getCenturyLabel)(o,s,le);case"decade":return(0,zt.getDecadeLabel)(o,s,le);case"year":return s(o,le);case"month":return a(o,le);default:throw new Error("Invalid view: ".concat(k,"."))}}();return h?h({date:le,label:st,locale:o||(0,o_.getUserLocale)()||void 0,view:k}):st}function Mt(){var le="".concat(mt,"__label");return ht.default.createElement("button",{"aria-label":d,"aria-live":f,className:le,disabled:!H,onClick:n,style:{flexGrow:1},type:"button"},ht.default.createElement("span",{className:"".concat(le,"__labelText ").concat(le,"__labelText--from")},Ee(e)),R?ht.default.createElement(ht.default.Fragment,null,ht.default.createElement("span",{className:"".concat(le,"__divider")}," – "),ht.default.createElement("span",{className:"".concat(le,"__labelText ").concat(le,"__labelText--to")},Ee(ne))):null)}return ht.default.createElement("div",{className:mt},T!==null&&q?ht.default.createElement("button",{"aria-label":O,className:"".concat(mt,"__arrow ").concat(mt,"__prev2-button"),disabled:G,onClick:Ze,type:"button"},T):null,A!==null&&ht.default.createElement("button",{"aria-label":E,className:"".concat(mt,"__arrow ").concat(mt,"__prev-button"),disabled:Y,onClick:Xe,type:"button"},A),Mt(),w!==null&&ht.default.createElement("button",{"aria-label":_,className:"".concat(mt,"__arrow ").concat(mt,"__next-button"),disabled:te,onClick:Wt,type:"button"},w),b!==null&&q?ht.default.createElement("button",{"aria-label":p,className:"".concat(mt,"__arrow ").concat(mt,"__next2-button"),disabled:Pe,onClick:Ot,type:"button"},b):null)}pr.default=Cf;Cf.propTypes={activeStartDate:De.default.instanceOf(Date).isRequired,drillUp:De.default.func.isRequired,formatMonthYear:De.default.func,formatYear:De.default.func,locale:De.default.string,maxDate:De.default.instanceOf(Date),minDate:De.default.instanceOf(Date),navigationAriaLabel:De.default.string,navigationAriaLive:De.default.string,navigationLabel:De.default.func,next2AriaLabel:De.default.string,next2Label:De.default.node,nextAriaLabel:De.default.string,nextLabel:De.default.node,prev2AriaLabel:De.default.string,prev2Label:De.default.node,prevAriaLabel:De.default.string,prevLabel:De.default.node,setActiveStartDate:De.default.func.isRequired,showDoubleView:De.default.bool,view:Ac.isView.isRequired,views:Ac.isViews.isRequired};var mr={},Do={},Qn={},Gi={},Fn=P&&P.__assign||function(){return Fn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Fn.apply(this,arguments)},l_=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},kf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});var Qr=kf(y),bt=kf($e);function Tc(t){return"".concat(t,"%")}function Pf(t){var e=t.children,n=t.className,i=t.count,a=t.direction,r=t.offset,s=t.style,o=t.wrap,l=l_(t,["children","className","count","direction","offset","style","wrap"]);return Qr.default.createElement("div",Fn({className:n,style:Fn({display:"flex",flexDirection:a,flexWrap:o?"wrap":"nowrap"},s)},l),Qr.default.Children.map(e,function(c,u){var d=r&&u===0?Tc(100*r/i):null;return Qr.default.cloneElement(c,Fn(Fn({},c.props),{style:{flexBasis:Tc(100/i),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:d,marginInlineStart:d,marginInlineEnd:0}}))}))}Gi.default=Pf;Pf.propTypes={children:bt.default.node,className:bt.default.string,count:bt.default.number.isRequired,direction:bt.default.string,offset:bt.default.number,style:bt.default.objectOf(bt.default.oneOfType([bt.default.string,bt.default.number])),wrap:bt.default.bool};var Me={};const c_=Th(Lp);var u_=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Nn;Object.defineProperty(Me,"__esModule",{value:!0});Me.mapCalendarType=Me.getTileClasses=Me.doRangesOverlap=Me.isRangeWithinRange=Me.isValueWithinRange=Me.between=void 0;var d_=u_(c_),Lt=Ki,Lc=V;function f_(t,e,n){return e&&e>t?e:n&&n<t?n:t}Me.between=f_;function Gn(t,e){return e[0]<=t&&e[1]>=t}Me.isValueWithinRange=Gn;function Ef(t,e){return t[0]<=e[0]&&t[1]>=e[1]}Me.isRangeWithinRange=Ef;function So(t,e){return Gn(t[0],e)||Gn(t[1],e)}Me.doRangesOverlap=So;function Rc(t,e,n){var i=So(e,t),a=[];if(i){a.push(n);var r=Gn(t[0],e),s=Gn(t[1],e);r&&a.push("".concat(n,"Start")),s&&a.push("".concat(n,"End")),r&&s&&a.push("".concat(n,"BothEnds"))}return a}function h_(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,i=t.hover,a="react-calendar__tile",r=[a];if(!n)return r;var s=new Date,o=function(){if(Array.isArray(n))return n;var h=t.dateType;if(!h)throw new Error("dateType is required when date is not an array of two dates");return(0,Lc.getRange)(h,n)}();if(Gn(s,o)&&r.push("".concat(a,"--now")),!e)return r;var l=function(){if(Array.isArray(e))return e;var h=t.valueType;if(!h)throw new Error("valueType is required when value is not an array of two dates");return(0,Lc.getRange)(h,e)}();Ef(l,o)?r.push("".concat(a,"--active")):So(l,o)&&r.push("".concat(a,"--hasActive"));var c=Rc(l,o,"".concat(a,"--range"));r.push.apply(r,c);var u=Array.isArray(e)?e:[e];if(i&&u.length===1){var d=i>l[0]?[l[0],i]:[i,l[0]],f=Rc(d,o,"".concat(a,"--hover"));r.push.apply(r,f)}return r}Me.getTileClasses=h_;var g_=(Nn={},Nn[Lt.DEPRECATED_CALENDAR_TYPES.ARABIC]=Lt.CALENDAR_TYPES.ISLAMIC,Nn[Lt.DEPRECATED_CALENDAR_TYPES.HEBREW]=Lt.CALENDAR_TYPES.HEBREW,Nn[Lt.DEPRECATED_CALENDAR_TYPES.ISO_8601]=Lt.CALENDAR_TYPES.ISO_8601,Nn[Lt.DEPRECATED_CALENDAR_TYPES.US]=Lt.CALENDAR_TYPES.GREGORY,Nn);function p_(t){return t!==void 0&&t in Lt.DEPRECATED_CALENDAR_TYPES}var Nc=!1;function m_(t){if(p_(t)){var e=g_[t];return(0,d_.default)(Nc,'Specifying calendarType="'.concat(t,'" is deprecated. Use calendarType="').concat(e,'" instead.')),Nc=!0,e}return t}Me.mapCalendarType=m_;var Ei=P&&P.__assign||function(){return Ei=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ei.apply(this,arguments)},b_=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Oo=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qn,"__esModule",{value:!0});var jc=Oo(y),Pt=Oo($e),v_=Oo(Gi),y_=Me,x_=Be;function Af(t){for(var e=t.className,n=t.count,i=n===void 0?3:n,a=t.dateTransform,r=t.dateType,s=t.end,o=t.hover,l=t.offset,c=t.start,u=t.step,d=u===void 0?1:u,f=t.tile,h=t.value,g=t.valueType,p=b_(t,["className","count","dateTransform","dateType","end","hover","offset","start","step","tile","value","valueType"]),m=[],b=c;b<=s;b+=d){var x=a(b);m.push(jc.default.createElement(f,Ei({key:x.getTime(),classes:(0,y_.getTileClasses)({value:h,valueType:g,date:x,dateType:r,hover:o}),date:x,point:b},p)))}return jc.default.createElement(v_.default,{className:e,count:i,offset:l,wrap:!0},m)}Qn.default=Af;Af.propTypes=Ei(Ei({},x_.tileGroupProps),{className:Pt.default.string,count:Pt.default.number,dateTransform:Pt.default.func.isRequired,dateType:Pt.default.string,end:Pt.default.number.isRequired,offset:Pt.default.number,step:Pt.default.number,start:Pt.default.number.isRequired,tile:Pt.default.func.isRequired});var Mo={},Jn={},Wa=P&&P.__assign||function(){return Wa=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Wa.apply(this,arguments)},__=P&&P.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,a)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),w_=P&&P.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),D_=P&&P.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&__(e,t,n);return w_(e,t),e},Tf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jn,"__esModule",{value:!0});var ma=D_(y),ba=Tf($e),S_=Tf(Qa),O_=Be;function Lf(t){var e=t.activeStartDate,n=t.children,i=t.classes,a=t.date,r=t.formatAbbr,s=t.locale,o=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,d=t.onClick,f=t.onMouseOver,h=t.style,g=t.tileClassName,p=t.tileContent,m=t.tileDisabled,b=t.view,x=(0,ma.useMemo)(function(){var D={activeStartDate:e,date:a,view:b};return typeof g=="function"?g(D):g},[e,a,g,b]),_=(0,ma.useMemo)(function(){var D={activeStartDate:e,date:a,view:b};return typeof p=="function"?p(D):p},[e,a,p,b]);return ma.default.createElement("button",{className:(0,S_.default)(i,x),disabled:c&&u(c)>a||o&&l(o)<a||m&&m({activeStartDate:e,date:a,view:b}),onClick:d?function(D){return d(a,D)}:void 0,onFocus:f?function(){return f(a)}:void 0,onMouseOver:f?function(){return f(a)}:void 0,style:h,type:"button"},r?ma.default.createElement("abbr",{"aria-label":r(s,a)},n):n,_)}Jn.default=Lf;Lf.propTypes=Wa(Wa({},O_.tileProps),{children:ba.default.node.isRequired,formatAbbr:ba.default.func,maxDateTransform:ba.default.func.isRequired,minDateTransform:ba.default.func.isRequired});var Ai=P&&P.__assign||function(){return Ai=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ai.apply(this,arguments)},M_=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Ic=P&&P.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Co=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mo,"__esModule",{value:!0});var C_=Co(y),k_=Co($e),Fc=Q,P_=Co(Jn),E_=V,A_=de,T_=Be,L_="react-calendar__century-view__decades__decade";function Rf(t){var e=t.classes,n=e===void 0?[]:e,i=t.formatYear,a=i===void 0?A_.formatYear:i,r=M_(t,["classes","formatYear"]),s=r.date,o=r.locale;return C_.default.createElement(P_.default,Ai({},r,{classes:Ic(Ic([],n,!0),[L_],!1),maxDateTransform:Fc.getDecadeEnd,minDateTransform:Fc.getDecadeStart,view:"century"}),(0,E_.getDecadeLabel)(o,a,s))}Mo.default=Rf;Rf.propTypes=Ai(Ai({},T_.tileProps),{formatYear:k_.default.func});var Va=P&&P.__assign||function(){return Va=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Va.apply(this,arguments)},ko=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Do,"__esModule",{value:!0});var R_=ko(y),N_=Q,j_=ko(Qn),I_=ko(Mo),F_=V,$_=Be;function Nf(t){var e=t.activeStartDate,n=(0,F_.getBeginOfCenturyYear)(e),i=n+99;return R_.default.createElement(j_.default,Va({},t,{className:"react-calendar__century-view__decades",dateTransform:N_.getDecadeStart,dateType:"decade",end:i,start:n,step:10,tile:I_.default}))}Do.default=Nf;Nf.propTypes=Va({},$_.tileGroupProps);var As=P&&P.__assign||function(){return As=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},As.apply(this,arguments)},jf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mr,"__esModule",{value:!0});var $c=jf(y),B_=jf(Do);function W_(t){function e(){return $c.default.createElement(B_.default,As({},t))}return $c.default.createElement("div",{className:"react-calendar__century-view"},e())}mr.default=W_;var br={},Po={},Eo={},Ti=P&&P.__assign||function(){return Ti=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ti.apply(this,arguments)},V_=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Bc=P&&P.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},Ao=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Eo,"__esModule",{value:!0});var Y_=Ao(y),z_=Ao($e),Wc=Q,H_=Ao(Jn),U_=de,q_=Be,K_="react-calendar__decade-view__years__year";function If(t){var e=t.classes,n=e===void 0?[]:e,i=t.formatYear,a=i===void 0?U_.formatYear:i,r=V_(t,["classes","formatYear"]),s=r.date,o=r.locale;return Y_.default.createElement(H_.default,Ti({},r,{classes:Bc(Bc([],n,!0),[K_],!1),maxDateTransform:Wc.getYearEnd,minDateTransform:Wc.getYearStart,view:"decade"}),a(o,s))}Eo.default=If;If.propTypes=Ti(Ti({},q_.tileProps),{formatYear:z_.default.func});var Ya=P&&P.__assign||function(){return Ya=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ya.apply(this,arguments)},To=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Po,"__esModule",{value:!0});var G_=To(y),X_=To(Qn),Z_=To(Eo),Q_=V,J_=Be;function Ff(t){var e=t.activeStartDate,n=(0,Q_.getBeginOfDecadeYear)(e),i=n+9;return G_.default.createElement(X_.default,Ya({},t,{className:"react-calendar__decade-view__years",dateTransform:function(a){var r=new Date;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r},dateType:"year",end:i,start:n,tile:Z_.default}))}Po.default=Ff;Ff.propTypes=Ya({},J_.tileGroupProps);var Ts=P&&P.__assign||function(){return Ts=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ts.apply(this,arguments)},$f=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(br,"__esModule",{value:!0});var Vc=$f(y),ew=$f(Po);function tw(t){function e(){return Vc.default.createElement(ew.default,Ts({},t))}return Vc.default.createElement("div",{className:"react-calendar__decade-view"},e())}br.default=tw;var vr={},Lo={},Ro={},Li=P&&P.__assign||function(){return Li=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Li.apply(this,arguments)},nw=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Yc=P&&P.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,r;i<a;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},No=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ro,"__esModule",{value:!0});var iw=No(y),zc=No($e),Hc=Q,aw=No(Jn),Uc=de,rw=Be,sw="react-calendar__year-view__months__month";function Bf(t){var e=t.classes,n=e===void 0?[]:e,i=t.formatMonth,a=i===void 0?Uc.formatMonth:i,r=t.formatMonthYear,s=r===void 0?Uc.formatMonthYear:r,o=nw(t,["classes","formatMonth","formatMonthYear"]),l=o.date,c=o.locale;return iw.default.createElement(aw.default,Li({},o,{classes:Yc(Yc([],n,!0),[sw],!1),formatAbbr:s,maxDateTransform:Hc.getMonthEnd,minDateTransform:Hc.getMonthStart,view:"year"}),a(c,l))}Ro.default=Bf;Bf.propTypes=Li(Li({},rw.tileProps),{formatMonth:zc.default.func,formatMonthYear:zc.default.func});var Ri=P&&P.__assign||function(){return Ri=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ri.apply(this,arguments)},yr=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lo,"__esModule",{value:!0});var ow=yr(y),lw=yr($e),cw=Q,uw=yr(Qn),dw=yr(Ro),fw=Be;function Wf(t){var e=t.activeStartDate,n=0,i=11,a=(0,cw.getYear)(e);return ow.default.createElement(uw.default,Ri({},t,{className:"react-calendar__year-view__months",dateTransform:function(r){var s=new Date;return s.setFullYear(a,r,1),s.setHours(0,0,0,0),s},dateType:"month",end:i,start:n,tile:dw.default}))}Lo.default=Wf;Wf.propTypes=Ri(Ri({},fw.tileGroupProps),{locale:lw.default.string});var Ls=P&&P.__assign||function(){return Ls=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ls.apply(this,arguments)},Vf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vr,"__esModule",{value:!0});var qc=Vf(y),hw=Vf(Lo);function gw(t){function e(){return qc.default.createElement(hw.default,Ls({},t))}return qc.default.createElement("div",{className:"react-calendar__year-view"},e())}vr.default=gw;var xr={},jo={},Io={},Ni=P&&P.__assign||function(){return Ni=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ni.apply(this,arguments)},pw=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},Fo=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Io,"__esModule",{value:!0});var mw=Fo(y),Jr=Fo($e),Kc=Q,bw=Fo(Jn),vw=V,Gc=de,yw=Be,xw=Me,es="react-calendar__month-view__days__day";function Yf(t){var e=t.calendarType,n=t.classes,i=n===void 0?[]:n,a=t.currentMonthIndex,r=t.formatDay,s=r===void 0?Gc.formatDay:r,o=t.formatLongDate,l=o===void 0?Gc.formatLongDate:o,c=pw(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=(0,xw.mapCalendarType)(e),d=c.date,f=c.locale,h=[];return i&&h.push.apply(h,i),h.push(es),(0,vw.isWeekend)(d,u)&&h.push("".concat(es,"--weekend")),d.getMonth()!==a&&h.push("".concat(es,"--neighboringMonth")),mw.default.createElement(bw.default,Ni({},c,{classes:h,formatAbbr:l,maxDateTransform:Kc.getDayEnd,minDateTransform:Kc.getDayStart,view:"month"}),s(f,d))}Io.default=Yf;Yf.propTypes=Ni(Ni({},yw.tileProps),{currentMonthIndex:Jr.default.number.isRequired,formatDay:Jr.default.func,formatLongDate:Jr.default.func});var za=P&&P.__assign||function(){return za=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},za.apply(this,arguments)},_w=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},_r=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jo,"__esModule",{value:!0});var ww=_r(y),Xc=_r($e),ts=Q,Dw=_r(Qn),Sw=_r(Io),Zc=V,Qc=Be,Ow=Me;function zf(t){var e=t.activeStartDate,n=t.calendarType,i=t.showFixedNumberOfWeeks,a=t.showNeighboringMonth,r=_w(t,["showFixedNumberOfWeeks","showNeighboringMonth"]),s=(0,Ow.mapCalendarType)(n),o=(0,ts.getYear)(e),l=(0,ts.getMonth)(e),c=i||a,u=(0,Zc.getDayOfWeek)(e,s),d=c?0:u,f=(c?-u:0)+1,h=function(){if(i)return f+6*7-1;var g=(0,ts.getDaysInMonth)(e);if(a){var p=new Date;p.setFullYear(o,l,g),p.setHours(0,0,0,0);var m=7-(0,Zc.getDayOfWeek)(p,s)-1;return g+m}return g}();return ww.default.createElement(Dw.default,za({},r,{className:"react-calendar__month-view__days",count:7,currentMonthIndex:l,dateTransform:function(g){var p=new Date;return p.setFullYear(o,l,g),p.setHours(0,0,0,0),p},dateType:"day",end:h,offset:d,start:f,tile:Sw.default}))}jo.default=zf;zf.propTypes=za({calendarType:Qc.isCalendarType,showFixedNumberOfWeeks:Xc.default.bool,showNeighboringMonth:Xc.default.bool},Qc.tileGroupProps);var $o={},wr=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($o,"__esModule",{value:!0});var ns=wr(y),va=wr($e),Mw=wr(Qa),is=Q,Cw=wr(Gi),as=V,Jc=de,kw=Be,Pw=Me,Hf="react-calendar__month-view__weekdays",rs="".concat(Hf,"__weekday");function Uf(t){for(var e=t.calendarType,n=t.formatShortWeekday,i=n===void 0?Jc.formatShortWeekday:n,a=t.formatWeekday,r=a===void 0?Jc.formatWeekday:a,s=t.locale,o=t.onMouseLeave,l=(0,Pw.mapCalendarType)(e),c=new Date,u=(0,is.getMonthStart)(c),d=(0,is.getYear)(u),f=(0,is.getMonth)(u),h=[],g=1;g<=7;g+=1){var p=new Date(d,f,g-(0,as.getDayOfWeek)(u,l)),m=r(s,p);h.push(ns.default.createElement("div",{key:g,className:(0,Mw.default)(rs,(0,as.isCurrentDayOfWeek)(p)&&"".concat(rs,"--current"),(0,as.isWeekend)(p,l)&&"".concat(rs,"--weekend"))},ns.default.createElement("abbr",{"aria-label":m,title:m},i(s,p).replace(".",""))))}return ns.default.createElement(Cw.default,{className:Hf,count:7,onFocus:o,onMouseOver:o},h)}$o.default=Uf;Uf.propTypes={calendarType:kw.isCalendarType,formatShortWeekday:va.default.func,formatWeekday:va.default.func,locale:va.default.string,onMouseLeave:va.default.func};var Bo={},Wo={},Ha=P&&P.__assign||function(){return Ha=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ha.apply(this,arguments)},eu=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},qf=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wo,"__esModule",{value:!0});var ss=qf(y),os=qf($e),tu="react-calendar__tile";function Kf(t){var e=t.onClickWeekNumber,n=t.weekNumber,i=ss.default.createElement("span",null,n);if(e){var a=t.date,r=t.onClickWeekNumber,s=t.weekNumber,o=eu(t,["date","onClickWeekNumber","weekNumber"]);return ss.default.createElement("button",Ha({},o,{className:tu,onClick:function(l){return r(s,a,l)},type:"button"}),i)}else{t.date,t.onClickWeekNumber,t.weekNumber;var o=eu(t,["date","onClickWeekNumber","weekNumber"]);return ss.default.createElement("div",Ha({},o,{className:tu}),i)}}Wo.default=Kf;Kf.propTypes={date:os.default.instanceOf(Date).isRequired,onClickWeekNumber:os.default.func,weekNumber:os.default.node.isRequired};var Dr=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bo,"__esModule",{value:!0});var nu=Dr(y),ya=Dr($e),xa=Q,Ew=Dr(Wo),Aw=Dr(Gi),ls=V,Tw=Be,Lw=Me;function Gf(t){var e=t.activeStartDate,n=t.calendarType,i=t.onClickWeekNumber,a=t.onMouseLeave,r=t.showFixedNumberOfWeeks,s=(0,Lw.mapCalendarType)(n),o=function(){if(r)return 6;var u=(0,xa.getDaysInMonth)(e),d=(0,ls.getDayOfWeek)(e,s),f=u-(7-d);return 1+Math.ceil(f/7)}(),l=function(){for(var u=(0,xa.getYear)(e),d=(0,xa.getMonth)(e),f=(0,xa.getDate)(e),h=[],g=0;g<o;g+=1)h.push((0,ls.getBeginOfWeek)(new Date(u,d,f+g*7),s));return h}(),c=l.map(function(u){return(0,ls.getWeekNumber)(u,s)});return nu.default.createElement(Aw.default,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:a,onMouseOver:a,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},c.map(function(u,d){var f=l[d];if(!f)throw new Error("date is not defined");return nu.default.createElement(Ew.default,{key:u,date:f,onClickWeekNumber:i,weekNumber:u})}))}Bo.default=Gf;Gf.propTypes={activeStartDate:ya.default.instanceOf(Date).isRequired,calendarType:Tw.isCalendarType,onClickWeekNumber:ya.default.func,onMouseLeave:ya.default.func,showFixedNumberOfWeeks:ya.default.bool};var ji=P&&P.__assign||function(){return ji=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ji.apply(this,arguments)},Rw=P&&P.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n},ei=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xr,"__esModule",{value:!0});var jn=ei(y),Et=ei($e),Nw=ei(Qa),jw=ei(jo),Iw=ei($o),Fw=ei(Bo),iu=Ki,au=Be;function $w(t){for(var e=0,n=Object.entries(iu.CALENDAR_TYPE_LOCALES);e<n.length;e++){var i=n[e],a=i[0],r=i[1];if(r.includes(t))return a}return iu.CALENDAR_TYPES.ISO_8601}function Xf(t){var e=t.activeStartDate,n=t.locale,i=t.onMouseLeave,a=t.showFixedNumberOfWeeks,r=t.calendarType,s=r===void 0?$w(n):r,o=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,d=Rw(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function f(){return jn.default.createElement(Iw.default,{calendarType:s,formatShortWeekday:o,formatWeekday:l,locale:n,onMouseLeave:i})}function h(){return u?jn.default.createElement(Fw.default,{activeStartDate:e,calendarType:s,onClickWeekNumber:c,onMouseLeave:i,showFixedNumberOfWeeks:a}):null}function g(){return jn.default.createElement(jw.default,ji({calendarType:s},d))}var p="react-calendar__month-view";return jn.default.createElement("div",{className:(0,Nw.default)(p,u?"".concat(p,"--weekNumbers"):"")},jn.default.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},h(),jn.default.createElement("div",{style:{flexGrow:1,width:"100%"}},f(),g())))}xr.default=Xf;Xf.propTypes=ji(ji({},au.tileGroupProps),{calendarType:au.isCalendarType,formatDay:Et.default.func,formatLongDate:Et.default.func,formatShortWeekday:Et.default.func,formatWeekday:Et.default.func,onClickWeekNumber:Et.default.func,onMouseLeave:Et.default.func,showFixedNumberOfWeeks:Et.default.bool,showNeighboringMonth:Et.default.bool,showWeekNumbers:Et.default.bool});var $n=P&&P.__assign||function(){return $n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},$n.apply(this,arguments)},Bw=P&&P.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,a)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Ww=P&&P.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vw=P&&P.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Bw(e,t,n);return Ww(e,t),e},En=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wo,"__esModule",{value:!0});var Oe=Vw(y),W=En($e),Yw=En(Qa),zw=En(pr),Hw=En(mr),Uw=En(br),qw=En(vr),Kw=En(xr),jt=V,Rt=Be,Gw=Me,_a="react-calendar",Wn=["century","decade","year","month"],Xw=["decade","year","month","day"],Vo=new Date;Vo.setFullYear(1,0,1);Vo.setHours(0,0,0,0);var Zw=new Date(864e13);function pi(t){return t instanceof Date?t:new Date(t)}function Zf(t,e){return Wn.slice(Wn.indexOf(t),Wn.indexOf(e)+1)}function Qw(t,e,n){var i=Zf(e,n);return i.indexOf(t)!==-1}function Yo(t,e,n){return t&&Qw(t,e,n)?t:n}function Qf(t){var e=Wn.indexOf(t);return Xw[e]}function Jw(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var i=pi(n);if(isNaN(i.getTime()))throw new Error("Invalid date: ".concat(t));return i}function Jf(t,e){var n=t.value,i=t.minDate,a=t.maxDate,r=t.maxDetail,s=Jw(n,e);if(!s)return null;var o=Qf(r),l=function(){switch(e){case 0:return(0,jt.getBegin)(o,s);case 1:return(0,jt.getEnd)(o,s);default:throw new Error("Invalid index value: ".concat(e))}}();return(0,Gw.between)(l,i,a)}var zo=function(t){return Jf(t,0)},eh=function(t){return Jf(t,1)},eD=function(t){return[zo,eh].map(function(e){return e(t)})};function th(t){var e=t.maxDate,n=t.maxDetail,i=t.minDate,a=t.minDetail,r=t.value,s=t.view,o=Yo(s,a,n),l=zo({value:r,minDate:i,maxDate:e,maxDetail:n})||new Date;return(0,jt.getBegin)(o,l)}function tD(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,i=t.defaultValue,a=t.defaultView,r=t.maxDate,s=t.maxDetail,o=t.minDate,l=t.minDetail,c=t.value,u=t.view,d=Yo(u,l,s),f=e||n;return f?(0,jt.getBegin)(d,f):th({maxDate:r,maxDetail:s,minDate:o,minDetail:l,value:c||i,view:u||a})}function cs(t){return t&&(!Array.isArray(t)||t.length===1)}function wa(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var nh=(0,Oe.forwardRef)(function(e,n){var i=e.activeStartDate,a=e.allowPartialRange,r=e.calendarType,s=e.className,o=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,d=e.formatLongDate,f=e.formatMonth,h=e.formatMonthYear,g=e.formatShortWeekday,p=e.formatWeekday,m=e.formatYear,b=e.goToRangeStartOnSelect,x=b===void 0?!0:b,_=e.inputRef,D=e.locale,w=e.maxDate,C=w===void 0?Zw:w,O=e.maxDetail,M=O===void 0?"month":O,T=e.minDate,j=T===void 0?Vo:T,E=e.minDetail,L=E===void 0?"century":E,A=e.navigationAriaLabel,F=e.navigationAriaLive,R=e.navigationLabel,k=e.next2AriaLabel,$=e.next2Label,H=e.nextAriaLabel,q=e.nextLabel,K=e.onActiveStartDateChange,ie=e.onChange,ne=e.onClickDay,ye=e.onClickDecade,Y=e.onClickMonth,G=e.onClickWeekNumber,te=e.onClickYear,Pe=e.onDrillDown,Xe=e.onDrillUp,Ze=e.onViewChange,Wt=e.prev2AriaLabel,Ot=e.prev2Label,Ee=e.prevAriaLabel,Mt=e.prevLabel,le=e.returnValue,st=le===void 0?"start":le,Ae=e.selectRange,Qe=e.showDoubleView,An=e.showFixedNumberOfWeeks,Vt=e.showNavigation,ni=Vt===void 0?!0:Vt,Yt=e.showNeighboringMonth,ii=Yt===void 0?!0:Yt,Ct=e.showWeekNumbers,ln=e.tileClassName,cn=e.tileContent,ai=e.tileDisabled,un=e.value,Tn=e.view,N=(0,Oe.useState)(o),B=N[0],J=N[1],ce=(0,Oe.useState)(null),ot=ce[0],We=ce[1],Ye=(0,Oe.useState)(Array.isArray(l)?l.map(function(Z){return Z!==null?pi(Z):Z}):l!=null?pi(l):l),Te=Ye[0],Je=Ye[1],ze=(0,Oe.useState)(c),ut=ze[0],xe=ze[1],_e=i||B||tD({activeStartDate:i,defaultActiveStartDate:o,defaultValue:l,defaultView:c,maxDate:C,maxDetail:M,minDate:j,minDetail:L,value:un,view:Tn}),Se=function(){var Z=function(){return Ae&&cs(Te)?Te:un!==void 0?un:Te}();return Z?Array.isArray(Z)?Z.map(function(ge){return ge!==null?pi(ge):ge}):Z!==null?pi(Z):Z:null}(),Ji=Qf(M),he=Yo(Tn||ut,L,M),pt=Zf(L,M),vh=Ae?ot:null,Mr=pt.indexOf(he)<pt.length-1,qo=pt.indexOf(he)>0,Ko=(0,Oe.useCallback)(function(Z){var ge=function(){switch(st){case"start":return zo;case"end":return eh;case"range":return eD;default:throw new Error("Invalid returnValue.")}}();return ge({maxDate:C,maxDetail:M,minDate:j,value:Z})},[C,M,j,st]),Cr=(0,Oe.useCallback)(function(Z,ge){J(Z);var we={action:ge,activeStartDate:Z,value:Se,view:he};K&&!wa(_e,Z)&&K(we)},[_e,K,Se,he]),ea=(0,Oe.useCallback)(function(Z,ge){var we=function(){switch(he){case"century":return ye;case"decade":return te;case"year":return Y;case"month":return ne;default:throw new Error("Invalid view: ".concat(he,"."))}}();we&&we(Z,ge)},[ne,ye,Y,te,he]),kr=(0,Oe.useCallback)(function(Z,ge){if(Mr){ea(Z,ge);var we=pt[pt.indexOf(he)+1];if(!we)throw new Error("Attempted to drill down from the lowest view.");J(Z),xe(we);var dt={action:"drillDown",activeStartDate:Z,value:Se,view:we};K&&!wa(_e,Z)&&K(dt),Ze&&he!==we&&Ze(dt),Pe&&Pe(dt)}},[_e,Mr,K,ea,Pe,Ze,Se,he,pt]),Pr=(0,Oe.useCallback)(function(){if(qo){var Z=pt[pt.indexOf(he)-1];if(!Z)throw new Error("Attempted to drill up from the highest view.");var ge=(0,jt.getBegin)(Z,_e);J(ge),xe(Z);var we={action:"drillUp",activeStartDate:ge,value:Se,view:Z};K&&!wa(_e,ge)&&K(we),Ze&&he!==Z&&Ze(we),Xe&&Xe(we)}},[_e,qo,K,Xe,Ze,Se,he,pt]),Er=(0,Oe.useCallback)(function(Z,ge){var we=Se;ea(Z,ge);var dt=Ae&&!cs(we),ft;if(Ae)if(dt)ft=(0,jt.getBegin)(Ji,Z);else{if(!we)throw new Error("previousValue is required");if(Array.isArray(we))throw new Error("previousValue must not be an array");ft=(0,jt.getValueRange)(Ji,we,Z)}else ft=Ko(Z);var Tr=!Ae||dt||x?th({maxDate:C,maxDetail:M,minDate:j,minDetail:L,value:ft,view:he}):null;ge.persist(),J(Tr),Je(ft);var wh={action:"onChange",activeStartDate:Tr,value:ft,view:he};if(K&&!wa(_e,Tr)&&K(wh),ie)if(Ae){var Dh=cs(ft);if(!Dh)ie(ft||null,ge);else if(a){if(Array.isArray(ft))throw new Error("value must not be an array");ie([ft||null,null],ge)}}else ie(ft||null,ge)},[_e,a,Ko,x,C,M,j,L,K,ie,ea,Ae,Se,Ji,he]);function yh(Z){We(Z)}function Ar(){We(null)}(0,Oe.useImperativeHandle)(n,function(){return{activeStartDate:_e,drillDown:kr,drillUp:Pr,onChange:Er,setActiveStartDate:Cr,value:Se,view:he}},[_e,kr,Pr,Er,Cr,Se,he]);function Go(Z){var ge=Z?(0,jt.getBeginNext)(he,_e):(0,jt.getBegin)(he,_e),we=Mr?kr:Er,dt={activeStartDate:ge,hover:vh,locale:D,maxDate:C,minDate:j,onClick:we,onMouseOver:Ae?yh:null,tileClassName:ln,tileContent:cn,tileDisabled:ai,value:Se,valueType:Ji};switch(he){case"century":return Oe.default.createElement(Hw.default,$n({formatYear:m},dt));case"decade":return Oe.default.createElement(Uw.default,$n({formatYear:m},dt));case"year":return Oe.default.createElement(qw.default,$n({formatMonth:f,formatMonthYear:h},dt));case"month":return Oe.default.createElement(Kw.default,$n({calendarType:r,formatDay:u,formatLongDate:d,formatShortWeekday:g,formatWeekday:p,onClickWeekNumber:G,onMouseLeave:Ae?Ar:null,showFixedNumberOfWeeks:typeof An<"u"?An:Qe,showNeighboringMonth:ii,showWeekNumbers:Ct},dt));default:throw new Error("Invalid view: ".concat(he,"."))}}function xh(){return ni?Oe.default.createElement(zw.default,{activeStartDate:_e,drillUp:Pr,formatMonthYear:h,formatYear:m,locale:D,maxDate:C,minDate:j,navigationAriaLabel:A,navigationAriaLive:F,navigationLabel:R,next2AriaLabel:k,next2Label:$,nextAriaLabel:H,nextLabel:q,prev2AriaLabel:Wt,prev2Label:Ot,prevAriaLabel:Ee,prevLabel:Mt,setActiveStartDate:Cr,showDoubleView:Qe,view:he,views:pt}):null}var _h=Array.isArray(Se)?Se:[Se];return Oe.default.createElement("div",{className:(0,Yw.default)(_a,Ae&&_h.length===1&&"".concat(_a,"--selectRange"),Qe&&"".concat(_a,"--doubleView"),s),ref:_},xh(),Oe.default.createElement("div",{className:"".concat(_a,"__viewContainer"),onBlur:Ae?Ar:void 0,onMouseLeave:Ae?Ar:void 0},Go(),Qe?Go(!0):null))}),ru=W.default.instanceOf(Date),su=W.default.oneOfType([W.default.string,W.default.instanceOf(Date)]),ou=W.default.oneOfType([su,(0,Rt.rangeOf)(su)]);nh.propTypes={activeStartDate:ru,allowPartialRange:W.default.bool,calendarType:Rt.isCalendarType,className:Rt.isClassName,defaultActiveStartDate:ru,defaultValue:ou,defaultView:Rt.isView,formatDay:W.default.func,formatLongDate:W.default.func,formatMonth:W.default.func,formatMonthYear:W.default.func,formatShortWeekday:W.default.func,formatWeekday:W.default.func,formatYear:W.default.func,goToRangeStartOnSelect:W.default.bool,inputRef:Rt.isRef,locale:W.default.string,maxDate:Rt.isMaxDate,maxDetail:W.default.oneOf(Wn),minDate:Rt.isMinDate,minDetail:W.default.oneOf(Wn),navigationAriaLabel:W.default.string,navigationAriaLive:W.default.oneOf(["off","polite","assertive"]),navigationLabel:W.default.func,next2AriaLabel:W.default.string,next2Label:W.default.node,nextAriaLabel:W.default.string,nextLabel:W.default.node,onActiveStartDateChange:W.default.func,onChange:W.default.func,onClickDay:W.default.func,onClickDecade:W.default.func,onClickMonth:W.default.func,onClickWeekNumber:W.default.func,onClickYear:W.default.func,onDrillDown:W.default.func,onDrillUp:W.default.func,onViewChange:W.default.func,prev2AriaLabel:W.default.string,prev2Label:W.default.node,prevAriaLabel:W.default.string,prevLabel:W.default.node,returnValue:W.default.oneOf(["start","end","range"]),selectRange:W.default.bool,showDoubleView:W.default.bool,showFixedNumberOfWeeks:W.default.bool,showNavigation:W.default.bool,showNeighboringMonth:W.default.bool,showWeekNumbers:W.default.bool,tileClassName:W.default.oneOfType([W.default.func,Rt.isClassName]),tileContent:W.default.oneOfType([W.default.func,W.default.node]),tileDisabled:W.default.func,value:ou,view:Rt.isView};wo.default=nh;var ti=P&&P.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qe,"__esModule",{value:!0});qe.MonthView=qe.YearView=qe.DecadeView=qe.CenturyView=qe.Navigation=qe.Calendar=void 0;var ih=ti(wo);qe.Calendar=ih.default;var nD=ti(pr);qe.Navigation=nD.default;var iD=ti(mr);qe.CenturyView=iD.default;var aD=ti(br);qe.DecadeView=aD.default;var rD=ti(vr);qe.YearView=rD.default;var sD=ti(xr);qe.MonthView=sD.default;var ah=qe.default=ih.default;function oD({data:t}){const{state:{year:e,month:n}}=sn(),i=_f({data:t[0],year:e,month:n});return!e||!n?null:v.jsx("div",{className:"w-full",children:v.jsx(ah,{className:"dashboard_month_calendar",value:new Date(e,parseInt(_o[n])-1),tileClassName:({date:a,view:r})=>{let s=Re(a).format("YYYY-MM-DD");if(i?.includes(s))return"recorded-play-date"},showNavigation:!1,formatShortWeekday:(a,r)=>Re(r).format("dd").slice(0,1),calendarType:"gregory",onClickDay:a=>console.log(a)})})}function lD(){const{state:t}=nn(),{state:e}=Fe(),{state:n,setYear:i,setFilterOrder:a,setScreen:r}=sn(),[s,o]=y.useState([]),{year:l,month:c,screen:u}=n;y.useEffect(function(){const h=M0(t);o(h)},[t]),y.useEffect(function(){if(u==="year")return;e.some(g=>g.filter==="onDate"||g.filter==="beforeDate"||g.filter==="afterDate"||g.filter==="betweenDates")||(console.log("typeof setScreen",typeof r),r("year"))},[e,r,u]);const d=u==="year"?"# Days Played":u==="months"?`# Days ${l}`:`# Days ${c} ${l}`;return v.jsxs(Hi,{children:[v.jsxs("div",{children:[v.jsx(O0,{}),v.jsx(Ui,{children:d}),v.jsx(qi,{card:"daysPlayed"})]}),u==="year"&&v.jsx(yf,{data:s,setYear:i,setFilterOrder:a}),u==="months"&&v.jsx(xf,{data:s}),u==="month"&&v.jsx(oD,{data:s})]})}const cD={screen:"year",year:null,month:null,days:[],filterOrder:null},uD=(t,e)=>{switch(e.type){case"setScreen":return{...t,screen:e.payload};case"setYear":return{...t,year:e.payload};case"setMonth":return{...t,month:e.payload};case"setDays":return{...t,days:e.payload};case"setFilterOrder":return{...t,filterOrder:e.payload};default:throw new Error(`Unhandled action type: ${e.type}`)}},dD=I.createContext(void 0),rh=({children:t})=>{const[e,n]=I.useReducer(uD,cD),l={state:e,dispatch:n,setScreen:c=>{n({type:"setScreen",payload:c})},setYear:c=>{n({type:"setYear",payload:c})},setMonth:c=>{n({type:"setMonth",payload:c})},setDays:c=>{n({type:"setDays",payload:c})},setFilterOrder:c=>{n({type:"setFilterOrder",payload:c})}};return v.jsx(dD.Provider,{value:l,children:t})};function fD({userId:t}){return v.jsx(rh,{children:v.jsx(lD,{})})}function hD({settings:t,setSettings:e}){const n=[{value:"daysPlayed",label:"# Days Played"},{value:"players",label:"Players"},{value:"locations",label:"Locations"},{value:"recordedPlays",label:"Total Plays"},{value:"playCount",label:"# Plays By Date"}],i=(a,r)=>{if(t.some(o=>o===a)){let o=t.filter(l=>l!==a);e(o)}else{let o=[...t,a];e(o)}};return v.jsxs(Ut,{as:"div",className:"relative",children:[v.jsxs(Ut.Button,{className:"text-white opacity-50  hover:opacity-100 transition-all",children:[v.jsx(Dp,{width:24}),v.jsx("span",{className:"sr-only",children:"Chart Options"})]}),v.jsx(Ut.Items,{className:"absolute left-0 flex flex-col gap-4 p-4 rounded-md border-[1px] border-slate-400 bg-slate-100 shadow-md shadow-slate-500/40  z-10  w-max",children:n.map(a=>{const r=t.some(s=>s===a.value);return v.jsxs(Ut.Item,{as:"div",className:"flex gap-4 font-medium",children:[v.jsxs(_p,{checked:r,onChange:s=>i(a.value),className:`${r?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 items-center rounded-full`,children:[v.jsxs("span",{className:"sr-only",children:["Enable ",a.label]}),v.jsx("span",{className:`${r?"translate-x-6":"translate-x-1"} inline-block h-4 w-4 transform rounded-full bg-white transition`})]}),a.label]},a.value)})})]})}const gD=t=>t.reduce((n,i)=>{const a=Re(i.date);let r=a.format("YYYY"),s=a.format("MMM"),o=a.month(),l=n.findIndex(f=>f.year===r),c=i?.quantity||1;if(l===-1)return n.push({year:r,count:c,months:[{month:s,count:c,monthNum:o,dates:[{day:i.date,count:c}]}]}),n;let u=n[l].months.findIndex(f=>f.month===s);if(u===-1)return n[l].months.push({month:s,count:c,monthNum:o,dates:[{day:i.date,count:c}]}),n[l].count+=c,n;let d=n[l].months[u].dates.findIndex(f=>f.day===i.date);return d===-1?(n[l].count+=c,n[l].months[u].count+=c,n[l].months[u].dates.push({day:i.date,count:c}),n):(n[l].count+=c,n[l].months[u].count+=c,n[l].months[u].dates[d].count+=c,n)},[]);function Xi(t){return t.split("-")[1]}function Ho(t){return t==="y"?"height":"width"}function wn(t){return t.split("-")[0]}function Zi(t){return["top","bottom"].includes(wn(t))?"x":"y"}function lu(t,e,n){let{reference:i,floating:a}=t;const r=i.x+i.width/2-a.width/2,s=i.y+i.height/2-a.height/2,o=Zi(e),l=Ho(o),c=i[l]/2-a[l]/2,u=o==="x";let d;switch(wn(e)){case"top":d={x:r,y:i.y-a.height};break;case"bottom":d={x:r,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:s};break;case"left":d={x:i.x-a.width,y:s};break;default:d={x:i.x,y:i.y}}switch(Xi(e)){case"start":d[o]-=c*(n&&u?-1:1);break;case"end":d[o]+=c*(n&&u?-1:1)}return d}const pD=async(t,e,n)=>{const{placement:i="bottom",strategy:a="absolute",middleware:r=[],platform:s}=n,o=r.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:a}),{x:u,y:d}=lu(c,i,l),f=i,h={},g=0;for(let p=0;p<o.length;p++){const{name:m,fn:b}=o[p],{x,y:_,data:D,reset:w}=await b({x:u,y:d,initialPlacement:i,placement:f,strategy:a,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=x??u,d=_??d,h={...h,[m]:{...h[m],...D}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:a}):w.rects),{x:u,y:d}=lu(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:a,middlewareData:h}};function Qi(t,e){return typeof t=="function"?t(e):t}function sh(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Ua(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function oh(t,e){var n;e===void 0&&(e={});const{x:i,y:a,platform:r,rects:s,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Qi(e,t),g=sh(h),p=o[f?d==="floating"?"reference":"floating":d],m=Ua(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(p)))==null||n?p:p.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{...s.floating,x:i,y:a}:s.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),_=await(r.isElement==null?void 0:r.isElement(x))&&await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1},D=Ua(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:x,strategy:l}):b);return{top:(m.top-D.top+g.top)/_.y,bottom:(D.bottom-m.bottom+g.bottom)/_.y,left:(m.left-D.left+g.left)/_.x,right:(D.right-m.right+g.right)/_.x}}const Rs=Math.min,mD=Math.max;function Ns(t,e,n){return mD(t,Rs(e,n))}const cu=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:a,rects:r,platform:s,elements:o}=e,{element:l,padding:c=0}=Qi(t,e)||{};if(l==null)return{};const u=sh(c),d={x:n,y:i},f=Zi(a),h=Ho(f),g=await s.getDimensions(l),p=f==="y",m=p?"top":"left",b=p?"bottom":"right",x=p?"clientHeight":"clientWidth",_=r.reference[h]+r.reference[f]-d[f]-r.floating[h],D=d[f]-r.reference[f],w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let C=w?w[x]:0;C&&await(s.isElement==null?void 0:s.isElement(w))||(C=o.floating[x]||r.floating[h]);const O=_/2-D/2,M=C/2-g[h]/2-1,T=Rs(u[m],M),j=Rs(u[b],M),E=T,L=C-g[h]-j,A=C/2-g[h]/2+O,F=Ns(E,A,L),R=Xi(a)!=null&&A!=F&&r.reference[h]/2-(A<E?T:j)-g[h]/2<0?A<E?E-A:L-A:0;return{[f]:d[f]-R,data:{[f]:F,centerOffset:A-F+R}}}}),bD=["top","right","bottom","left"];bD.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const vD={left:"right",right:"left",bottom:"top",top:"bottom"};function qa(t){return t.replace(/left|right|bottom|top/g,e=>vD[e])}function yD(t,e,n){n===void 0&&(n=!1);const i=Xi(t),a=Zi(t),r=Ho(a);let s=a==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(s=qa(s)),{main:s,cross:qa(s)}}const xD={start:"end",end:"start"};function us(t){return t.replace(/start|end/g,e=>xD[e])}const _D=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:i,middlewareData:a,rects:r,initialPlacement:s,platform:o,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...p}=Qi(t,e),m=wn(i),b=wn(s)===s,x=await(o.isRTL==null?void 0:o.isRTL(l.floating)),_=d||(b||!g?[qa(s)]:function(E){const L=qa(E);return[us(E),L,us(L)]}(s));d||h==="none"||_.push(...function(E,L,A,F){const R=Xi(E);let k=function($,H,q){const K=["left","right"],ie=["right","left"],ne=["top","bottom"],ye=["bottom","top"];switch($){case"top":case"bottom":return q?H?ie:K:H?K:ie;case"left":case"right":return H?ne:ye;default:return[]}}(wn(E),A==="start",F);return R&&(k=k.map($=>$+"-"+R),L&&(k=k.concat(k.map(us)))),k}(s,g,h,x));const D=[s,..._],w=await oh(e,p),C=[];let O=((n=a.flip)==null?void 0:n.overflows)||[];if(c&&C.push(w[m]),u){const{main:E,cross:L}=yD(i,r,x);C.push(w[E],w[L])}if(O=[...O,{placement:i,overflows:C}],!C.every(E=>E<=0)){var M,T;const E=(((M=a.flip)==null?void 0:M.index)||0)+1,L=D[E];if(L)return{data:{index:E,overflows:O},reset:{placement:L}};let A=(T=O.filter(F=>F.overflows[0]<=0).sort((F,R)=>F.overflows[1]-R.overflows[1])[0])==null?void 0:T.placement;if(!A)switch(f){case"bestFit":{var j;const F=(j=O.map(R=>[R.placement,R.overflows.filter(k=>k>0).reduce((k,$)=>k+$,0)]).sort((R,k)=>R[1]-k[1])[0])==null?void 0:j[0];F&&(A=F);break}case"initialPlacement":A=s}if(i!==A)return{reset:{placement:A}}}return{}}}},wD=function(t){return{name:"offset",options:t,async fn(e){const{x:n,y:i}=e,a=await async function(r,s){const{placement:o,platform:l,elements:c}=r,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),d=wn(o),f=Xi(o),h=Zi(o)==="x",g=["left","top"].includes(d)?-1:1,p=u&&h?-1:1,m=Qi(s,r);let{mainAxis:b,crossAxis:x,alignmentAxis:_}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return f&&typeof _=="number"&&(x=f==="end"?-1*_:_),h?{x:x*p,y:b*g}:{x:b*g,y:x*p}}(e,t);return{x:n+a.x,y:i+a.y,data:a}}}};function DD(t){return t==="x"?"y":"x"}const SD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:a}=e,{mainAxis:r=!0,crossAxis:s=!1,limiter:o={fn:m=>{let{x:b,y:x}=m;return{x:b,y:x}}},...l}=Qi(t,e),c={x:n,y:i},u=await oh(e,l),d=Zi(wn(a)),f=DD(d);let h=c[d],g=c[f];if(r){const m=d==="y"?"bottom":"right";h=Ns(h+u[d==="y"?"top":"left"],h,h-u[m])}if(s){const m=f==="y"?"bottom":"right";g=Ns(g+u[f==="y"?"top":"left"],g,g-u[m])}const p=o.fn({...e,[d]:h,[f]:g});return{...p,data:{x:p.x-n,y:p.y-i}}}}};function it(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function St(t){return it(t).getComputedStyle(t)}function lh(t){return t instanceof it(t).Node}function en(t){return lh(t)?(t.nodeName||"").toLowerCase():"#document"}function gt(t){return t instanceof HTMLElement||t instanceof it(t).HTMLElement}function uu(t){return typeof ShadowRoot<"u"&&(t instanceof it(t).ShadowRoot||t instanceof ShadowRoot)}function Ii(t){const{overflow:e,overflowX:n,overflowY:i,display:a}=St(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(a)}function OD(t){return["table","td","th"].includes(en(t))}function js(t){const e=Uo(),n=St(t);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Uo(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Sr(t){return["html","body","#document"].includes(en(t))}const du=Math.min,xi=Math.max,Ka=Math.round,tn=t=>({x:t,y:t});function ch(t){const e=St(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=gt(t),r=a?t.offsetWidth:n,s=a?t.offsetHeight:i,o=Ka(n)!==r||Ka(i)!==s;return o&&(n=r,i=s),{width:n,height:i,$:o}}function $t(t){return t instanceof Element||t instanceof it(t).Element}function uh(t){return $t(t)?t:t.contextElement}function Vn(t){const e=uh(t);if(!gt(e))return tn(1);const n=e.getBoundingClientRect(),{width:i,height:a,$:r}=ch(e);let s=(r?Ka(n.width):n.width)/i,o=(r?Ka(n.height):n.height)/a;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const MD=tn(0);function dh(t){const e=it(t);return Uo()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:MD}function Fi(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),r=uh(t);let s=tn(1);e&&(i?$t(i)&&(s=Vn(i)):s=Vn(t));const o=function(f,h,g){return h===void 0&&(h=!1),!(!g||h&&g!==it(f))&&h}(r,n,i)?dh(r):tn(0);let l=(a.left+o.x)/s.x,c=(a.top+o.y)/s.y,u=a.width/s.x,d=a.height/s.y;if(r){const f=it(r),h=i&&$t(i)?it(i):i;let g=f.frameElement;for(;g&&i&&h!==f;){const p=Vn(g),m=g.getBoundingClientRect(),b=getComputedStyle(g),x=m.left+(g.clientLeft+parseFloat(b.paddingLeft))*p.x,_=m.top+(g.clientTop+parseFloat(b.paddingTop))*p.y;l*=p.x,c*=p.y,u*=p.x,d*=p.y,l+=x,c+=_,g=it(g).frameElement}}return Ua({width:u,height:d,x:l,y:c})}function Or(t){return $t(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Qt(t){var e;return(e=(lh(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function fh(t){return Fi(Qt(t)).left+Or(t).scrollLeft}function Xn(t){if(en(t)==="html")return t;const e=t.assignedSlot||t.parentNode||uu(t)&&t.host||Qt(t);return uu(e)?e.host:e}function hh(t){const e=Xn(t);return Sr(e)?t.ownerDocument?t.ownerDocument.body:t.body:gt(e)&&Ii(e)?e:hh(e)}function gh(t,e){var n;e===void 0&&(e=[]);const i=hh(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),r=it(i);return a?e.concat(r,r.visualViewport||[],Ii(i)?i:[]):e.concat(i,gh(i))}function fu(t,e,n){let i;if(e==="viewport")i=function(a,r){const s=it(a),o=Qt(a),l=s.visualViewport;let c=o.clientWidth,u=o.clientHeight,d=0,f=0;if(l){c=l.width,u=l.height;const h=Uo();(!h||h&&r==="fixed")&&(d=l.offsetLeft,f=l.offsetTop)}return{width:c,height:u,x:d,y:f}}(t,n);else if(e==="document")i=function(a){const r=Qt(a),s=Or(a),o=a.ownerDocument.body,l=xi(r.scrollWidth,r.clientWidth,o.scrollWidth,o.clientWidth),c=xi(r.scrollHeight,r.clientHeight,o.scrollHeight,o.clientHeight);let u=-s.scrollLeft+fh(a);const d=-s.scrollTop;return St(o).direction==="rtl"&&(u+=xi(r.clientWidth,o.clientWidth)-l),{width:l,height:c,x:u,y:d}}(Qt(t));else if($t(e))i=function(a,r){const s=Fi(a,!0,r==="fixed"),o=s.top+a.clientTop,l=s.left+a.clientLeft,c=gt(a)?Vn(a):tn(1);return{width:a.clientWidth*c.x,height:a.clientHeight*c.y,x:l*c.x,y:o*c.y}}(e,n);else{const a=dh(t);i={...e,x:e.x-a.x,y:e.y-a.y}}return Ua(i)}function ph(t,e){const n=Xn(t);return!(n===e||!$t(n)||Sr(n))&&(St(n).position==="fixed"||ph(n,e))}function CD(t,e,n){const i=gt(e),a=Qt(e),r=n==="fixed",s=Fi(t,!0,r,e);let o={scrollLeft:0,scrollTop:0};const l=tn(0);if(i||!i&&!r)if((en(e)!=="body"||Ii(a))&&(o=Or(e)),gt(e)){const c=Fi(e,!0,r,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else a&&(l.x=fh(a));return{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function hu(t,e){return gt(t)&&St(t).position!=="fixed"?e?e(t):t.offsetParent:null}function gu(t,e){const n=it(t);if(!gt(t))return n;let i=hu(t,e);for(;i&&OD(i)&&St(i).position==="static";)i=hu(i,e);return i&&(en(i)==="html"||en(i)==="body"&&St(i).position==="static"&&!js(i))?n:i||function(a){let r=Xn(a);for(;gt(r)&&!Sr(r);){if(js(r))return r;r=Xn(r)}return null}(t)||n}const kD={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:i}=t;const a=gt(n),r=Qt(n);if(n===r)return e;let s={scrollLeft:0,scrollTop:0},o=tn(1);const l=tn(0);if((a||!a&&i!=="fixed")&&((en(n)!=="body"||Ii(r))&&(s=Or(n)),gt(n))){const c=Fi(n);o=Vn(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-s.scrollLeft*o.x+l.x,y:e.y*o.y-s.scrollTop*o.y+l.y}},getDocumentElement:Qt,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:a}=t;const r=[...n==="clippingAncestors"?function(l,c){const u=c.get(l);if(u)return u;let d=gh(l).filter(p=>$t(p)&&en(p)!=="body"),f=null;const h=St(l).position==="fixed";let g=h?Xn(l):l;for(;$t(g)&&!Sr(g);){const p=St(g),m=js(g);m||p.position!=="fixed"||(f=null),(h?!m&&!f:!m&&p.position==="static"&&f&&["absolute","fixed"].includes(f.position)||Ii(g)&&!m&&ph(l,g))?d=d.filter(b=>b!==g):f=p,g=Xn(g)}return c.set(l,d),d}(e,this._c):[].concat(n),i],s=r[0],o=r.reduce((l,c)=>{const u=fu(e,c,a);return l.top=xi(u.top,l.top),l.right=du(u.right,l.right),l.bottom=du(u.bottom,l.bottom),l.left=xi(u.left,l.left),l},fu(e,s,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:gu,getElementRects:async function(t){let{reference:e,floating:n,strategy:i}=t;const a=this.getOffsetParent||gu,r=this.getDimensions;return{reference:CD(e,await a(n),i),floating:{x:0,y:0,...await r(n)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return ch(t)},getScale:Vn,isElement:$t,isRTL:function(t){return getComputedStyle(t).direction==="rtl"}},PD=(t,e,n)=>{const i=new Map,a={platform:kD,...n},r={...a.platform,_c:i};return pD(t,e,{...a,platform:r})},ED=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:a}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?cu({element:i.current,padding:a}).fn(n):{}:i?cu({element:i,padding:a}).fn(n):{}}}};var Ma=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ga(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!Ga(t[i],e[i]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,a[i]))return!1;for(i=n;i--!==0;){const r=a[i];if(!(r==="_owner"&&t.$$typeof)&&!Ga(t[r],e[r]))return!1}return!0}return t!==t&&e!==e}function mh(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pu(t,e){const n=mh(t);return Math.round(e*n)/n}function mu(t){const e=y.useRef(t);return Ma(()=>{e.current=t}),e}function AD(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:a,elements:{reference:r,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,d]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=y.useState(i);Ga(f,i)||h(i);const[g,p]=y.useState(null),[m,b]=y.useState(null),x=y.useCallback(k=>{k!=C.current&&(C.current=k,p(k))},[p]),_=y.useCallback(k=>{k!==O.current&&(O.current=k,b(k))},[b]),D=r||g,w=s||m,C=y.useRef(null),O=y.useRef(null),M=y.useRef(u),T=mu(l),j=mu(a),E=y.useCallback(()=>{if(!C.current||!O.current)return;const k={placement:e,strategy:n,middleware:f};j.current&&(k.platform=j.current),PD(C.current,O.current,k).then($=>{const H={...$,isPositioned:!0};L.current&&!Ga(M.current,H)&&(M.current=H,Is.flushSync(()=>{d(H)}))})},[f,e,n,j]);Ma(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,d(k=>({...k,isPositioned:!1})))},[c]);const L=y.useRef(!1);Ma(()=>(L.current=!0,()=>{L.current=!1}),[]),Ma(()=>{if(D&&(C.current=D),w&&(O.current=w),D&&w){if(T.current)return T.current(D,w,E);E()}},[D,w,E,T]);const A=y.useMemo(()=>({reference:C,floating:O,setReference:x,setFloating:_}),[x,_]),F=y.useMemo(()=>({reference:D,floating:w}),[D,w]),R=y.useMemo(()=>{const k={position:n,left:0,top:0};if(!F.floating)return k;const $=pu(F.floating,u.x),H=pu(F.floating,u.y);return o?{...k,transform:"translate("+$+"px, "+H+"px)",...mh(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:H}},[n,o,F.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:E,refs:A,elements:F,floatingStyles:R}),[u,E,A,F,R])}var bh=typeof document<"u"?y.useLayoutEffect:y.useEffect;let ds=!1,TD=0;const bu=()=>"floating-ui-"+TD++;function LD(){const[t,e]=y.useState(()=>ds?bu():void 0);return bh(()=>{t==null&&e(bu())},[]),y.useEffect(()=>{ds||(ds=!0)},[]),t}const RD=Mu.useId,ND=RD||LD;function jD(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(a=>a(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var i;t.set(e,((i=t.get(e))==null?void 0:i.filter(a=>a!==n))||[])}}}const ID=y.createContext(null),FD=()=>y.useContext(ID);function $D(t){return t?.ownerDocument||document}function BD(t){return $D(t).defaultView||window}function Da(t){return t?t instanceof Element||t instanceof BD(t).Element:!1}const WD=Mu.useInsertionEffect,VD=WD||(t=>t());function YD(t){const e=y.useRef(()=>{});return VD(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e.current==null?void 0:e.current(...i)},[])}function zD(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:i,nodeId:a}=t,[r,s]=y.useState(null),o=((e=t.elements)==null?void 0:e.reference)||r,l=AD(t),c=FD(),u=YD((D,w)=>{D&&(f.current.openEvent=w),i?.(D,w)}),d=y.useRef(null),f=y.useRef({}),h=y.useState(()=>jD())[0],g=ND(),p=y.useCallback(D=>{const w=Da(D)?{getBoundingClientRect:()=>D.getBoundingClientRect(),contextElement:D}:D;l.refs.setReference(w)},[l.refs]),m=y.useCallback(D=>{(Da(D)||D===null)&&(d.current=D,s(D)),(Da(l.refs.reference.current)||l.refs.reference.current===null||D!==null&&!Da(D))&&l.refs.setReference(D)},[l.refs]),b=y.useMemo(()=>({...l.refs,setReference:m,setPositionReference:p,domReference:d}),[l.refs,m,p]),x=y.useMemo(()=>({...l.elements,domReference:o}),[l.elements,o]),_=y.useMemo(()=>({...l,refs:b,elements:x,dataRef:f,nodeId:a,floatingId:g,events:h,open:n,onOpenChange:u}),[l,a,g,h,n,u,b,x]);return bh(()=>{const D=c?.nodesRef.current.find(w=>w.id===a);D&&(D.context=_)}),y.useMemo(()=>({...l,context:_,refs:b,elements:x}),[l,b,x,_])}function HD({date:t,view:e,dates:n}){const i=y.useRef(null),{x:a,y:r,strategy:s,refs:o}=zD({placement:"top",middleware:[wD(5),_D(),SD(),ED({element:i})]});if(e!=="month")return null;let c=Re(t).format("YYYY-MM-DD"),u=n.find(h=>h.day===c);if(!u)return null;const d={position:s,top:r??0,left:a??0,width:"max-content"},f={left:a!==null?Math.abs(a)+13:0};return v.jsxs(Nr,{children:[v.jsx(Nr.Button,{as:"div",ref:o.setReference,className:"absolute top-0 bottom-0 left-0 right-0"}),v.jsxs(Nr.Panel,{ref:o.setFloating,style:d,className:"relative z-10 p-4 font-normal text-white rounded-md bg-slate-800",children:[v.jsxs("div",{children:[u.count," game",u.count>1?"s":""," recorded"]}),v.jsx("div",{ref:i,id:"arrow",className:"absolute w-[1.25rem] h-[1.25rem] rotate-45 bg-slate-800 z-0",style:f})]})]})}function UD({data:t}){const{state:{year:e,month:n}}=sn(),i=_f({data:t[0],year:e,month:n});return e?v.jsx("div",{className:"w-full",children:v.jsx(ah,{className:"dashboard_month_calendar",value:new Date(e,parseInt(_o[n])-1),tileClassName:({date:a,view:r})=>{let s=Re(a).format("YYYY-MM-DD");if(i?.some(o=>o.day===s))return"recorded-play-date"},showNavigation:!1,formatShortWeekday:(a,r)=>Re(r).format("dd").slice(0,1),calendarType:"gregory",onClickDay:(a,r)=>{},tileContent:({date:a,view:r})=>v.jsx(HD,{date:a,view:r,dates:i})})}):null}function qD(){const{state:{filterOrder:t,year:e,screen:n},setYear:i,setMonth:a,setDays:r,setScreen:s}=sn(),{state:o,dispatch:l,removeFilter:c}=Fe(),u=()=>{const d=t&&o[t];if(d)switch(n){case"months":s("year"),i(null),c(d);break;case"month":s("months"),a(null),r([]);const f=`${e}-01-01`,h=`${e}-12-31`;l({type:"upsert",filter:{...d,arg:[f,h]}});break;default:s("year")}};return n==="year"?null:v.jsx("button",{className:"absolute left-0 top-[1.15rem]",onClick:u,children:v.jsx(Za,{})})}function KD(){const{state:t}=nn(),{state:e}=Fe(),{state:n,setYear:i,setFilterOrder:a,setScreen:r}=sn(),[s,o]=y.useState([]),{year:l,month:c,screen:u}=n;y.useEffect(function(){const h=gD(t);o(h)},[t]),y.useEffect(function(){if(u==="year")return;e.some(g=>g.filter==="onDate"||g.filter==="beforeDate"||g.filter==="afterDate"||g.filter==="betweenDates")||r("year")},[e,r,u]);const d=u==="year"?"# of Plays":u==="months"?`# Plays ${l}`:`# Plays ${c} ${l}`;return v.jsxs(Hi,{children:[v.jsxs("div",{children:[v.jsx(qD,{}),v.jsx(Ui,{children:d}),v.jsx(qi,{card:"playCount"})]}),u==="year"&&v.jsx(yf,{data:s,setYear:i,setFilterOrder:a}),u==="months"&&v.jsx(xf,{data:s}),u==="month"&&v.jsx(UD,{data:s})]})}function GD({userId:t}){return v.jsx(rh,{children:v.jsx(KD,{})})}function XD({userId:t}){const{settings:e,setSettings:n}=dd();return v.jsx(S0,{children:v.jsx(wi,{className:"relative mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[ZD(e,t),v.jsx("div",{className:"absolute left-2 -bottom-7",children:v.jsx(hD,{settings:e,setSettings:n})})]})})})}const ZD=(t,e)=>t.map(n=>{switch(n){case"daysPlayed":return v.jsx(fD,{userId:e},n);case"players":return v.jsx(x0,{},n);case"locations":return v.jsx(y0,{},n);case"recordedPlays":return v.jsx(_0,{},n);case"playCount":return v.jsx(GD,{userId:e},n);default:return null}});function QD({userId:t}){return v.jsx(Sm,{children:v.jsx(XD,{userId:t})})}function JD({percentDone:t,error:e,userFirstTime:n,showProgress:i}){const[a,r]=y.useState(!1),[s,o]=y.useState(),l=n?"Downloading":"Updating",c=parseFloat(t.toFixed(2)),[u,d]=y.useState(),[f,h]=y.useState(!1);return y.useEffect(function(){if(!i){r(!1);return}r(!0)},[t,e,l,i]),y.useEffect(function(){if(t<100)return;let p;return p=setTimeout(()=>{r(!1)},3e3),()=>clearTimeout(p)},[t]),y.useEffect(function(){if(!e)return;o(`Something went wrong ${l.toLowerCase()} your play data. Reload the page to try again.`);let p;return p=setTimeout(()=>{r(!1)},1e4),()=>clearTimeout(p)},[e]),y.useEffect(function(){if(t===100){d(void 0),h(!1);return}let p=performance.now();if(!u){d(p);return}if(p-u>1e3){h(!0);return}h(!1)},[t,e,u]),v.jsxs(eg,{show:a,appear:!0,enter:"transition-transform duration-300 ease-linear",enterFrom:"-translate-y-32",enterTo:"translate-y-0",leave:"transition-transform duration-300 ease-linear",leaveFrom:"translate-y-0",leaveTo:"-translate-y-32",className:"absolute flex flex-col items-center justify-center p-4 text-white -translate-x-1/2 bg-black rounded-md bg-opacity-80 top-4 left-1/2 w-content z-10",children:[s||`${l} your play data. ${c}% done.`,f?v.jsxs("div",{className:"mt-4 text-center",children:["Don't worry. We're still downloading. ",v.jsx("br",{}),"Large collections can take a couple of minutes."]}):null]})}function e1(){const{user:t,error:e}=Ws(),{percentDone:n,error:i,userFirstTime:a,showProgress:r}=Lh(),{addPageView:s,loading:o}=Rh();if(y.useEffect(()=>{o||s("plays")},[]),!t)return null;const l=t?.name&&t.name.trim().length>0?t.name:t.username;return e?v.jsx(wi,{children:v.jsxs("div",{className:"absolute flex flex-col items-center justify-center gap-8 mt-8 -translate-x-1/2 -translate-y-1/3 top-1/3 left-1/2 w-fit sm:w-max",children:[v.jsxs("div",{className:"p-4 text-yellow-700 bg-yellow-100 rounded-md",children:[v.jsx(Sp,{className:"inline"})," ",v.jsx("span",{className:"ml2",children:e})]}),v.jsx(tg,{})]})}):v.jsxs("div",{className:"pb-8",children:[v.jsx(JD,{percentDone:n,error:i,userFirstTime:a,showProgress:r}),v.jsx(wi,{children:v.jsxs("h1",{className:"mb-8 text-5xl font-semibold text-white",children:["Recorded plays for ",l]})}),v.jsx(QD,{userId:t.userId}),v.jsx(vm,{}),v.jsx(Dm,{})]})}function f1(){return v.jsx(e1,{})}export{f1 as Component};
