import{a as l,p as Q,v as $,Q as X,z as Z,k as y,S as de,D as _,y as ee,a8 as w,m as re,o as P,a9 as fe,R as F,A as ve,B as R,X as te,F as ne}from"./index-zwKx1JV-.js";function q(){let e=l.useRef(!1);return Q(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function pe(e=0){let[r,t]=l.useState(e),i=q(),f=l.useCallback(s=>{i.current&&t(a=>a|s)},[r,i]),p=l.useCallback(s=>!!(r&s),[r]),v=l.useCallback(s=>{i.current&&t(a=>a&~s)},[t,i]),c=l.useCallback(s=>{i.current&&t(a=>a^s)},[t]);return{flags:r,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function he(e){let r={called:!1};return(...t)=>{if(!r.called)return r.called=!0,e(...t)}}function G(e,...r){e&&r.length>0&&e.classList.add(...r)}function J(e,...r){e&&r.length>0&&e.classList.remove(...r)}function me(e,r){let t=X();if(!e)return t.dispose;let{transitionDuration:i,transitionDelay:f}=getComputedStyle(e),[p,v]=[i,f].map(s=>{let[a=0]=s.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,E)=>E-o);return a}),c=p+v;if(c!==0){t.group(a=>{a.setTimeout(()=>{r(),a.dispose()},c),a.addEventListener(e,"transitionrun",o=>{o.target===o.currentTarget&&a.dispose()})});let s=t.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(r(),s())})}else r();return t.add(()=>r()),t.dispose}function ge(e,r,t,i){let f=t?"enter":"leave",p=X(),v=i!==void 0?he(i):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=$(f,{enter:()=>r.enter,leave:()=>r.leave}),s=$(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),a=$(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return J(e,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),G(e,...c,...a),p.nextFrame(()=>{J(e,...a),G(e,...s),me(e,()=>(J(e,...c),G(e,...r.entered),v()))}),p.dispose}function be({container:e,direction:r,classes:t,onStart:i,onStop:f}){let p=q(),v=Z(),c=y(r);Q(()=>{let s=X();v.add(s.dispose);let a=e.current;if(a&&c.current!=="idle"&&p.current)return s.dispose(),i.current(c.current),s.add(ge(a,t.current,c.current==="enter",()=>{s.dispose(),f.current(c.current)})),s.dispose},[r])}function S(e=""){return e.split(" ").filter(r=>r.trim().length>1)}let k=l.createContext(null);k.displayName="TransitionContext";var Ee=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ee||{});function Te(){let e=l.useContext(k);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=l.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let A=l.createContext(null);A.displayName="NestingContext";function B(e){return"children"in e?B(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function le(e,r){let t=y(e),i=l.useRef([]),f=q(),p=Z(),v=P((d,n=w.Hidden)=>{let h=i.current.findIndex(({el:u})=>u===d);h!==-1&&($(n,{[w.Unmount](){i.current.splice(h,1)},[w.Hidden](){i.current[h].state="hidden"}}),p.microTask(()=>{var u;!B(i)&&f.current&&((u=t.current)==null||u.call(t))}))}),c=P(d=>{let n=i.current.find(({el:h})=>h===d);return n?n.state!=="visible"&&(n.state="visible"):i.current.push({el:d,state:"visible"}),()=>v(d,w.Unmount)}),s=l.useRef([]),a=l.useRef(Promise.resolve()),o=l.useRef({enter:[],leave:[],idle:[]}),E=P((d,n,h)=>{s.current.splice(0),r&&(r.chains.current[n]=r.chains.current[n].filter(([u])=>u!==d)),r?.chains.current[n].push([d,new Promise(u=>{s.current.push(u)})]),r?.chains.current[n].push([d,new Promise(u=>{Promise.all(o.current[n].map(([m,L])=>L)).then(()=>u())})]),n==="enter"?a.current=a.current.then(()=>r?.wait.current).then(()=>h(n)):h(n)}),T=P((d,n,h)=>{Promise.all(o.current[n].splice(0).map(([u,m])=>m)).then(()=>{var u;(u=s.current.shift())==null||u()}).then(()=>h(n))});return l.useMemo(()=>({children:i,register:c,unregister:v,onStart:E,onStop:T,wait:a,chains:o}),[c,v,i,E,T,o,a])}function Ce(){}let Re=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Y(e){var r;let t={};for(let i of Re)t[i]=(r=e[i])!=null?r:Ce;return t}function $e(e){let r=l.useRef(Y(e));return l.useEffect(()=>{r.current=Y(e)},[e]),r}let we="div",ie=de.RenderStrategy;function Pe(e,r){let{beforeEnter:t,afterEnter:i,beforeLeave:f,afterLeave:p,enter:v,enterFrom:c,enterTo:s,entered:a,leave:o,leaveFrom:E,leaveTo:T,...d}=e,n=l.useRef(null),h=ee(n,r),u=d.unmount?w.Unmount:w.Hidden,{show:m,appear:L,initial:b}=Te(),[g,M]=l.useState(m?"visible":"hidden"),W=Fe(),{register:H,unregister:D}=W,U=l.useRef(null);l.useEffect(()=>H(n),[H,n]),l.useEffect(()=>{if(u===w.Hidden&&n.current){if(m&&g!=="visible"){M("visible");return}return $(g,{hidden:()=>D(n),visible:()=>H(n)})}},[g,n,H,D,m,u]);let j=y({enter:S(v),enterFrom:S(c),enterTo:S(s),entered:S(a),leave:S(o),leaveFrom:S(E),leaveTo:S(T)}),N=$e({beforeEnter:t,afterEnter:i,beforeLeave:f,afterLeave:p}),z=re();l.useEffect(()=>{if(z&&g==="visible"&&n.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[n,g,z]);let I=b&&!L,se=!z||I||U.current===m?"idle":m?"enter":"leave",x=pe(0),ue=P(C=>$(C,{enter:()=>{x.addFlag(R.Opening),N.current.beforeEnter()},leave:()=>{x.addFlag(R.Closing),N.current.beforeLeave()},idle:()=>{}})),oe=P(C=>$(C,{enter:()=>{x.removeFlag(R.Opening),N.current.afterEnter()},leave:()=>{x.removeFlag(R.Closing),N.current.afterLeave()},idle:()=>{}})),O=le(()=>{M("hidden"),D(n)},W);be({container:n,classes:j,direction:se,onStart:y(C=>{O.onStart(n,C,ue)}),onStop:y(C=>{O.onStop(n,C,oe),C==="leave"&&!B(O)&&(M("hidden"),D(n))})}),l.useEffect(()=>{I&&(u===w.Hidden?U.current=null:U.current=m)},[m,I,g]);let V=d,ce={ref:h};return L&&m&&b&&(V={...V,className:fe(d.className,...j.current.enter,...j.current.enterFrom)}),F.createElement(A.Provider,{value:O},F.createElement(ve,{value:$(g,{visible:R.Open,hidden:R.Closed})|x.flags},te({ourProps:ce,theirProps:V,defaultTag:we,features:ie,visible:g==="visible",name:"Transition.Child"})))}function Se(e,r){let{show:t,appear:i=!1,unmount:f,...p}=e,v=l.useRef(null),c=ee(v,r);re();let s=ne();if(t===void 0&&s!==null&&(t=(s&R.Open)===R.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,o]=l.useState(t?"visible":"hidden"),E=le(()=>{o("hidden")}),[T,d]=l.useState(!0),n=l.useRef([t]);Q(()=>{T!==!1&&n.current[n.current.length-1]!==t&&(n.current.push(t),d(!1))},[n,t]);let h=l.useMemo(()=>({show:t,appear:i,initial:T}),[t,i,T]);l.useEffect(()=>{if(t)o("visible");else if(!B(E))o("hidden");else{let b=v.current;if(!b)return;let g=b.getBoundingClientRect();g.x===0&&g.y===0&&g.width===0&&g.height===0&&o("hidden")}},[t,E]);let u={unmount:f},m=P(()=>{var b;T&&d(!1),(b=e.beforeEnter)==null||b.call(e)}),L=P(()=>{var b;T&&d(!1),(b=e.beforeLeave)==null||b.call(e)});return F.createElement(A.Provider,{value:E},F.createElement(k.Provider,{value:h},te({ourProps:{...u,as:l.Fragment,children:F.createElement(ae,{ref:c,...u,...p,beforeEnter:m,beforeLeave:L})},theirProps:{},defaultTag:l.Fragment,features:ie,visible:a==="visible",name:"Transition"})))}function Le(e,r){let t=l.useContext(k)!==null,i=ne()!==null;return F.createElement(F.Fragment,null,!t&&i?F.createElement(K,{ref:r,...e}):F.createElement(ae,{ref:r,...e}))}let K=_(Se),ae=_(Pe),xe=_(Le),He=Object.assign(K,{Child:xe,Root:K});export{He as $};
