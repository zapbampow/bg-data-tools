import{a as c,g as h,d as x,u as p,j as e,L as g}from"./index-zwKx1JV-.js";import{$ as b}from"./transition-BCoZV1NX.js";function y(){const[t,o]=c.useState(),[l,r]=c.useState(null),[i,n]=c.useState(),s=async d=>{n(d);try{const a=await x(d),u=t?.filter(m=>m.userId!==d);return o(u),n(void 0),`Deleted ${a.playsDeleted} plays`}catch(a){throw r(a),n(void 0),new Error(a)}};return c.useEffect(function(){h().then(a=>{o(a)}).catch(a=>{throw new Error(a)})},[]),{users:t,deleteUserData:s,error:l,processing:i,setError:r}}function v(){const{users:t,deleteUserData:o,processing:l,error:r}=y(),{removeFetchedUser:i}=p(),n=async s=>{await o(s.userId),i(s.username)};return e.jsx("div",{className:"w-full lg:w-[764px] px-2 mx-auto",children:e.jsxs("div",{className:"p-8 mb-16 rounded-md bg-slate-100",children:[e.jsx("h1",{className:"text-[2.5rem] font-bold",children:"Manage your data"}),e.jsxs("p",{className:`${r?"mb-4":"mb-8"}`,children:["Here you can delete unused and unwanted data. ",e.jsx("br",{}),e.jsx("br",{}),"In order to sync data you changed on BGG that had already been downloaded for use on this site, you will need to delete the data first. Then you can start over."]}),e.jsx(f,{error:r}),e.jsx("ul",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:t?.map((s,d)=>e.jsxs("li",{className:"flex flex-col items-center justify-between p-4 border rounded-md border-slate-800",children:[e.jsx("div",{children:s.name}),e.jsxs("div",{className:"mb-4",children:["(",s.username,")"]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx(g,{to:`/${s.username}`,className:"px-4 py-2 font-semibold rounded-md bg-slate-200 hover:bg-slate-300 text-slate-800",children:"View"}),e.jsx("button",{className:"px-4 py-2 font-semibold rounded-md bg-slate-200 hover:bg-slate-300 text-slate-800",onClick:()=>n(s),disabled:l===s.userId,children:l===s.userId?"Deleting...":"Delete"})]})]},s.userId))})]})})}const f=({error:t})=>e.jsx(b,{show:t!=null,className:"p-2 mb-8 text-white bg-red-400 rounded-md",enter:"transition-all duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-all duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t});export{v as Component};
